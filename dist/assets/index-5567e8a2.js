function oH(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in n)){const r=Object.getOwnPropertyDescriptor(i,s);r&&Object.defineProperty(n,s,r.get?r:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();function pN(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var mN={exports:{}},Lx={},gN={exports:{}},qt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vg=Symbol.for("react.element"),aH=Symbol.for("react.portal"),lH=Symbol.for("react.fragment"),cH=Symbol.for("react.strict_mode"),uH=Symbol.for("react.profiler"),hH=Symbol.for("react.provider"),dH=Symbol.for("react.context"),fH=Symbol.for("react.forward_ref"),pH=Symbol.for("react.suspense"),mH=Symbol.for("react.memo"),gH=Symbol.for("react.lazy"),qB=Symbol.iterator;function AH(n){return n===null||typeof n!="object"?null:(n=qB&&n[qB]||n["@@iterator"],typeof n=="function"?n:null)}var AN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},yN=Object.assign,vN={};function Sf(n,e,t){this.props=n,this.context=e,this.refs=vN,this.updater=t||AN}Sf.prototype.isReactComponent={};Sf.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Sf.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function xN(){}xN.prototype=Sf.prototype;function hM(n,e,t){this.props=n,this.context=e,this.refs=vN,this.updater=t||AN}var dM=hM.prototype=new xN;dM.constructor=hM;yN(dM,Sf.prototype);dM.isPureReactComponent=!0;var JB=Array.isArray,bN=Object.prototype.hasOwnProperty,fM={current:null},wN={key:!0,ref:!0,__self:!0,__source:!0};function EN(n,e,t){var i,s={},r=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(r=""+e.key),e)bN.call(e,i)&&!wN.hasOwnProperty(i)&&(s[i]=e[i]);var a=arguments.length-2;if(a===1)s.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(n&&n.defaultProps)for(i in a=n.defaultProps,a)s[i]===void 0&&(s[i]=a[i]);return{$$typeof:vg,type:n,key:r,ref:o,props:s,_owner:fM.current}}function yH(n,e){return{$$typeof:vg,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function pM(n){return typeof n=="object"&&n!==null&&n.$$typeof===vg}function vH(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var XB=/\/+/g;function Zw(n,e){return typeof n=="object"&&n!==null&&n.key!=null?vH(""+n.key):e.toString(36)}function Gy(n,e,t,i,s){var r=typeof n;(r==="undefined"||r==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case vg:case aH:o=!0}}if(o)return o=n,s=s(o),n=i===""?"."+Zw(o,0):i,JB(s)?(t="",n!=null&&(t=n.replace(XB,"$&/")+"/"),Gy(s,e,t,"",function(c){return c})):s!=null&&(pM(s)&&(s=yH(s,t+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(XB,"$&/")+"/")+n)),e.push(s)),1;if(o=0,i=i===""?".":i+":",JB(n))for(var a=0;a<n.length;a++){r=n[a];var l=i+Zw(r,a);o+=Gy(r,e,t,l,s)}else if(l=AH(n),typeof l=="function")for(n=l.call(n),a=0;!(r=n.next()).done;)r=r.value,l=i+Zw(r,a++),o+=Gy(r,e,t,l,s);else if(r==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function VA(n,e,t){if(n==null)return n;var i=[],s=0;return Gy(n,i,"","",function(r){return e.call(t,r,s++)}),i}function xH(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Ms={current:null},zy={transition:null},bH={ReactCurrentDispatcher:Ms,ReactCurrentBatchConfig:zy,ReactCurrentOwner:fM};function _N(){throw Error("act(...) is not supported in production builds of React.")}qt.Children={map:VA,forEach:function(n,e,t){VA(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return VA(n,function(){e++}),e},toArray:function(n){return VA(n,function(e){return e})||[]},only:function(n){if(!pM(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};qt.Component=Sf;qt.Fragment=lH;qt.Profiler=uH;qt.PureComponent=hM;qt.StrictMode=cH;qt.Suspense=pH;qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bH;qt.act=_N;qt.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=yN({},n.props),s=n.key,r=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(r=e.ref,o=fM.current),e.key!==void 0&&(s=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)bN.call(e,l)&&!wN.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:vg,type:n.type,key:s,ref:r,props:i,_owner:o}};qt.createContext=function(n){return n={$$typeof:dH,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:hH,_context:n},n.Consumer=n};qt.createElement=EN;qt.createFactory=function(n){var e=EN.bind(null,n);return e.type=n,e};qt.createRef=function(){return{current:null}};qt.forwardRef=function(n){return{$$typeof:fH,render:n}};qt.isValidElement=pM;qt.lazy=function(n){return{$$typeof:gH,_payload:{_status:-1,_result:n},_init:xH}};qt.memo=function(n,e){return{$$typeof:mH,type:n,compare:e===void 0?null:e}};qt.startTransition=function(n){var e=zy.transition;zy.transition={};try{n()}finally{zy.transition=e}};qt.unstable_act=_N;qt.useCallback=function(n,e){return Ms.current.useCallback(n,e)};qt.useContext=function(n){return Ms.current.useContext(n)};qt.useDebugValue=function(){};qt.useDeferredValue=function(n){return Ms.current.useDeferredValue(n)};qt.useEffect=function(n,e){return Ms.current.useEffect(n,e)};qt.useId=function(){return Ms.current.useId()};qt.useImperativeHandle=function(n,e,t){return Ms.current.useImperativeHandle(n,e,t)};qt.useInsertionEffect=function(n,e){return Ms.current.useInsertionEffect(n,e)};qt.useLayoutEffect=function(n,e){return Ms.current.useLayoutEffect(n,e)};qt.useMemo=function(n,e){return Ms.current.useMemo(n,e)};qt.useReducer=function(n,e,t){return Ms.current.useReducer(n,e,t)};qt.useRef=function(n){return Ms.current.useRef(n)};qt.useState=function(n){return Ms.current.useState(n)};qt.useSyncExternalStore=function(n,e,t){return Ms.current.useSyncExternalStore(n,e,t)};qt.useTransition=function(){return Ms.current.useTransition()};qt.version="18.3.1";gN.exports=qt;var ee=gN.exports;const ba=pN(ee),wH=oH({__proto__:null,default:ba},[ee]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EH=ee,_H=Symbol.for("react.element"),CH=Symbol.for("react.fragment"),SH=Object.prototype.hasOwnProperty,MH=EH.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,IH={key:!0,ref:!0,__self:!0,__source:!0};function CN(n,e,t){var i,s={},r=null,o=null;t!==void 0&&(r=""+t),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)SH.call(e,i)&&!IH.hasOwnProperty(i)&&(s[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:_H,type:n,key:r,ref:o,props:s,_owner:MH.current}}Lx.Fragment=CH;Lx.jsx=CN;Lx.jsxs=CN;mN.exports=Lx;var C=mN.exports,yS={},SN={exports:{}},pr={},MN={exports:{}},IN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(L,V){var j=L.length;L.push(V);e:for(;0<j;){var $=j-1>>>1,le=L[$];if(0<s(le,V))L[$]=V,L[j]=le,j=$;else break e}}function t(L){return L.length===0?null:L[0]}function i(L){if(L.length===0)return null;var V=L[0],j=L.pop();if(j!==V){L[0]=j;e:for(var $=0,le=L.length,ve=le>>>1;$<ve;){var q=2*($+1)-1,ae=L[q],ge=q+1,se=L[ge];if(0>s(ae,j))ge<le&&0>s(se,ae)?(L[$]=se,L[ge]=j,$=ge):(L[$]=ae,L[q]=j,$=q);else if(ge<le&&0>s(se,j))L[$]=se,L[ge]=j,$=ge;else break e}}return V}function s(L,V){var j=L.sortIndex-V.sortIndex;return j!==0?j:L.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,p=3,m=!1,g=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(L){for(var V=t(c);V!==null;){if(V.callback===null)i(c);else if(V.startTime<=L)i(c),V.sortIndex=V.expirationTime,e(l,V);else break;V=t(c)}}function E(L){if(v=!1,w(L),!g)if(t(l)!==null)g=!0,J(M);else{var V=t(c);V!==null&&K(E,V.startTime-L)}}function M(L,V){g=!1,v&&(v=!1,A(B),B=-1),m=!0;var j=p;try{for(w(V),h=t(l);h!==null&&(!(h.expirationTime>V)||L&&!k());){var $=h.callback;if(typeof $=="function"){h.callback=null,p=h.priorityLevel;var le=$(h.expirationTime<=V);V=n.unstable_now(),typeof le=="function"?h.callback=le:h===t(l)&&i(l),w(V)}else i(l);h=t(l)}if(h!==null)var ve=!0;else{var q=t(c);q!==null&&K(E,q.startTime-V),ve=!1}return ve}finally{h=null,p=j,m=!1}}var I=!1,D=null,B=-1,R=5,T=-1;function k(){return!(n.unstable_now()-T<R)}function H(){if(D!==null){var L=n.unstable_now();T=L;var V=!0;try{V=D(!0,L)}finally{V?Q():(I=!1,D=null)}}else I=!1}var Q;if(typeof b=="function")Q=function(){b(H)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,X=W.port2;W.port1.onmessage=H,Q=function(){X.postMessage(null)}}else Q=function(){y(H,0)};function J(L){D=L,I||(I=!0,Q())}function K(L,V){B=y(function(){L(n.unstable_now())},V)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(L){L.callback=null},n.unstable_continueExecution=function(){g||m||(g=!0,J(M))},n.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<L?Math.floor(1e3/L):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(L){switch(p){case 1:case 2:case 3:var V=3;break;default:V=p}var j=p;p=V;try{return L()}finally{p=j}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(L,V){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var j=p;p=L;try{return V()}finally{p=j}},n.unstable_scheduleCallback=function(L,V,j){var $=n.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?$+j:$):j=$,L){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=j+le,L={id:u++,callback:V,priorityLevel:L,startTime:j,expirationTime:le,sortIndex:-1},j>$?(L.sortIndex=j,e(c,L),t(l)===null&&L===t(c)&&(v?(A(B),B=-1):v=!0,K(E,j-$))):(L.sortIndex=le,e(l,L),g||m||(g=!0,J(M))),L},n.unstable_shouldYield=k,n.unstable_wrapCallback=function(L){var V=p;return function(){var j=p;p=V;try{return L.apply(this,arguments)}finally{p=j}}}})(IN);MN.exports=IN;var TH=MN.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BH=ee,dr=TH;function Se(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var TN=new Set,Bm={};function Yu(n,e){Zd(n,e),Zd(n+"Capture",e)}function Zd(n,e){for(Bm[n]=e,n=0;n<e.length;n++)TN.add(e[n])}var Ua=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vS=Object.prototype.hasOwnProperty,RH=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,KB={},$B={};function DH(n){return vS.call($B,n)?!0:vS.call(KB,n)?!1:RH.test(n)?$B[n]=!0:(KB[n]=!0,!1)}function PH(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function LH(n,e,t,i){if(e===null||typeof e>"u"||PH(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Is(n,e,t,i,s,r,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=r,this.removeEmptyString=o}var zi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){zi[n]=new Is(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];zi[e]=new Is(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){zi[n]=new Is(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){zi[n]=new Is(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){zi[n]=new Is(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){zi[n]=new Is(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){zi[n]=new Is(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){zi[n]=new Is(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){zi[n]=new Is(n,5,!1,n.toLowerCase(),null,!1,!1)});var mM=/[\-:]([a-z])/g;function gM(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(mM,gM);zi[e]=new Is(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(mM,gM);zi[e]=new Is(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(mM,gM);zi[e]=new Is(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){zi[n]=new Is(n,1,!1,n.toLowerCase(),null,!1,!1)});zi.xlinkHref=new Is("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){zi[n]=new Is(n,1,!1,n.toLowerCase(),null,!0,!0)});function AM(n,e,t,i){var s=zi.hasOwnProperty(e)?zi[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(LH(e,t,s,i)&&(t=null),i||s===null?DH(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):s.mustUseProperty?n[s.propertyName]=t===null?s.type===3?!1:"":t:(e=s.attributeName,i=s.attributeNamespace,t===null?n.removeAttribute(e):(s=s.type,t=s===3||s===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var Ka=BH.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,jA=Symbol.for("react.element"),hd=Symbol.for("react.portal"),dd=Symbol.for("react.fragment"),yM=Symbol.for("react.strict_mode"),xS=Symbol.for("react.profiler"),BN=Symbol.for("react.provider"),RN=Symbol.for("react.context"),vM=Symbol.for("react.forward_ref"),bS=Symbol.for("react.suspense"),wS=Symbol.for("react.suspense_list"),xM=Symbol.for("react.memo"),wl=Symbol.for("react.lazy"),DN=Symbol.for("react.offscreen"),YB=Symbol.iterator;function rp(n){return n===null||typeof n!="object"?null:(n=YB&&n[YB]||n["@@iterator"],typeof n=="function"?n:null)}var Qn=Object.assign,eE;function Kp(n){if(eE===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);eE=e&&e[1]||""}return`
`+eE+n}var tE=!1;function nE(n,e){if(!n||tE)return"";tE=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){i=c}n.call(e.prototype)}else{try{throw Error()}catch(c){i=c}n()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),r=i.stack.split(`
`),o=s.length-1,a=r.length-1;1<=o&&0<=a&&s[o]!==r[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==r[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==r[a]){var l=`
`+s[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{tE=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Kp(n):""}function kH(n){switch(n.tag){case 5:return Kp(n.type);case 16:return Kp("Lazy");case 13:return Kp("Suspense");case 19:return Kp("SuspenseList");case 0:case 2:case 15:return n=nE(n.type,!1),n;case 11:return n=nE(n.type.render,!1),n;case 1:return n=nE(n.type,!0),n;default:return""}}function ES(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case dd:return"Fragment";case hd:return"Portal";case xS:return"Profiler";case yM:return"StrictMode";case bS:return"Suspense";case wS:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case RN:return(n.displayName||"Context")+".Consumer";case BN:return(n._context.displayName||"Context")+".Provider";case vM:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case xM:return e=n.displayName||null,e!==null?e:ES(n.type)||"Memo";case wl:e=n._payload,n=n._init;try{return ES(n(e))}catch{}}return null}function FH(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ES(e);case 8:return e===yM?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Yl(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function PN(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function NH(n){var e=PN(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var s=t.get,r=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){i=""+o,r.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function WA(n){n._valueTracker||(n._valueTracker=NH(n))}function LN(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=PN(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function fv(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function _S(n,e){var t=e.checked;return Qn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function ZB(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=Yl(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function kN(n,e){e=e.checked,e!=null&&AM(n,"checked",e,!1)}function CS(n,e){kN(n,e);var t=Yl(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?SS(n,e.type,t):e.hasOwnProperty("defaultValue")&&SS(n,e.type,Yl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function eR(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function SS(n,e,t){(e!=="number"||fv(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var $p=Array.isArray;function Ld(n,e,t,i){if(n=n.options,e){e={};for(var s=0;s<t.length;s++)e["$"+t[s]]=!0;for(t=0;t<n.length;t++)s=e.hasOwnProperty("$"+n[t].value),n[t].selected!==s&&(n[t].selected=s),s&&i&&(n[t].defaultSelected=!0)}else{for(t=""+Yl(t),e=null,s=0;s<n.length;s++){if(n[s].value===t){n[s].selected=!0,i&&(n[s].defaultSelected=!0);return}e!==null||n[s].disabled||(e=n[s])}e!==null&&(e.selected=!0)}}function MS(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Se(91));return Qn({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function tR(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Se(92));if($p(t)){if(1<t.length)throw Error(Se(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Yl(t)}}function FN(n,e){var t=Yl(e.value),i=Yl(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function nR(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function NN(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function IS(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?NN(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var qA,ON=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,s){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,s)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(qA=qA||document.createElement("div"),qA.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=qA.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Rm(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var um={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},OH=["Webkit","ms","Moz","O"];Object.keys(um).forEach(function(n){OH.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),um[e]=um[n]})});function UN(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||um.hasOwnProperty(n)&&um[n]?(""+e).trim():e+"px"}function GN(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,s=UN(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,s):n[t]=s}}var UH=Qn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function TS(n,e){if(e){if(UH[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Se(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Se(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Se(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Se(62))}}function BS(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var RS=null;function bM(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var DS=null,kd=null,Fd=null;function iR(n){if(n=wg(n)){if(typeof DS!="function")throw Error(Se(280));var e=n.stateNode;e&&(e=Ux(e),DS(n.stateNode,n.type,e))}}function zN(n){kd?Fd?Fd.push(n):Fd=[n]:kd=n}function QN(){if(kd){var n=kd,e=Fd;if(Fd=kd=null,iR(n),e)for(n=0;n<e.length;n++)iR(e[n])}}function HN(n,e){return n(e)}function VN(){}var iE=!1;function jN(n,e,t){if(iE)return n(e,t);iE=!0;try{return HN(n,e,t)}finally{iE=!1,(kd!==null||Fd!==null)&&(VN(),QN())}}function Dm(n,e){var t=n.stateNode;if(t===null)return null;var i=Ux(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Se(231,e,typeof t));return t}var PS=!1;if(Ua)try{var op={};Object.defineProperty(op,"passive",{get:function(){PS=!0}}),window.addEventListener("test",op,op),window.removeEventListener("test",op,op)}catch{PS=!1}function GH(n,e,t,i,s,r,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var hm=!1,pv=null,mv=!1,LS=null,zH={onError:function(n){hm=!0,pv=n}};function QH(n,e,t,i,s,r,o,a,l){hm=!1,pv=null,GH.apply(zH,arguments)}function HH(n,e,t,i,s,r,o,a,l){if(QH.apply(this,arguments),hm){if(hm){var c=pv;hm=!1,pv=null}else throw Error(Se(198));mv||(mv=!0,LS=c)}}function Zu(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function WN(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function sR(n){if(Zu(n)!==n)throw Error(Se(188))}function VH(n){var e=n.alternate;if(!e){if(e=Zu(n),e===null)throw Error(Se(188));return e!==n?null:n}for(var t=n,i=e;;){var s=t.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){t=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===t)return sR(s),n;if(r===i)return sR(s),e;r=r.sibling}throw Error(Se(188))}if(t.return!==i.return)t=s,i=r;else{for(var o=!1,a=s.child;a;){if(a===t){o=!0,t=s,i=r;break}if(a===i){o=!0,i=s,t=r;break}a=a.sibling}if(!o){for(a=r.child;a;){if(a===t){o=!0,t=r,i=s;break}if(a===i){o=!0,i=r,t=s;break}a=a.sibling}if(!o)throw Error(Se(189))}}if(t.alternate!==i)throw Error(Se(190))}if(t.tag!==3)throw Error(Se(188));return t.stateNode.current===t?n:e}function qN(n){return n=VH(n),n!==null?JN(n):null}function JN(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=JN(n);if(e!==null)return e;n=n.sibling}return null}var XN=dr.unstable_scheduleCallback,rR=dr.unstable_cancelCallback,jH=dr.unstable_shouldYield,WH=dr.unstable_requestPaint,Yn=dr.unstable_now,qH=dr.unstable_getCurrentPriorityLevel,wM=dr.unstable_ImmediatePriority,KN=dr.unstable_UserBlockingPriority,gv=dr.unstable_NormalPriority,JH=dr.unstable_LowPriority,$N=dr.unstable_IdlePriority,kx=null,zo=null;function XH(n){if(zo&&typeof zo.onCommitFiberRoot=="function")try{zo.onCommitFiberRoot(kx,n,void 0,(n.current.flags&128)===128)}catch{}}var ho=Math.clz32?Math.clz32:YH,KH=Math.log,$H=Math.LN2;function YH(n){return n>>>=0,n===0?32:31-(KH(n)/$H|0)|0}var JA=64,XA=4194304;function Yp(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Av(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,s=n.suspendedLanes,r=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~s;a!==0?i=Yp(a):(r&=o,r!==0&&(i=Yp(r)))}else o=t&~s,o!==0?i=Yp(o):r!==0&&(i=Yp(r));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,r=e&-e,s>=r||s===16&&(r&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-ho(e),s=1<<t,i|=n[t],e&=~s;return i}function ZH(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function e9(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,s=n.expirationTimes,r=n.pendingLanes;0<r;){var o=31-ho(r),a=1<<o,l=s[o];l===-1?(!(a&t)||a&i)&&(s[o]=ZH(a,e)):l<=e&&(n.expiredLanes|=a),r&=~a}}function kS(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function YN(){var n=JA;return JA<<=1,!(JA&4194240)&&(JA=64),n}function sE(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function xg(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-ho(e),n[e]=t}function t9(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var s=31-ho(t),r=1<<s;e[s]=0,i[s]=-1,n[s]=-1,t&=~r}}function EM(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-ho(t),s=1<<i;s&e|n[i]&e&&(n[i]|=e),t&=~s}}var fn=0;function ZN(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var e3,_M,t3,n3,i3,FS=!1,KA=[],Gl=null,zl=null,Ql=null,Pm=new Map,Lm=new Map,Sl=[],n9="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function oR(n,e){switch(n){case"focusin":case"focusout":Gl=null;break;case"dragenter":case"dragleave":zl=null;break;case"mouseover":case"mouseout":Ql=null;break;case"pointerover":case"pointerout":Pm.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lm.delete(e.pointerId)}}function ap(n,e,t,i,s,r){return n===null||n.nativeEvent!==r?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},e!==null&&(e=wg(e),e!==null&&_M(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),n)}function i9(n,e,t,i,s){switch(e){case"focusin":return Gl=ap(Gl,n,e,t,i,s),!0;case"dragenter":return zl=ap(zl,n,e,t,i,s),!0;case"mouseover":return Ql=ap(Ql,n,e,t,i,s),!0;case"pointerover":var r=s.pointerId;return Pm.set(r,ap(Pm.get(r)||null,n,e,t,i,s)),!0;case"gotpointercapture":return r=s.pointerId,Lm.set(r,ap(Lm.get(r)||null,n,e,t,i,s)),!0}return!1}function s3(n){var e=uu(n.target);if(e!==null){var t=Zu(e);if(t!==null){if(e=t.tag,e===13){if(e=WN(t),e!==null){n.blockedOn=e,i3(n.priority,function(){t3(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Qy(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=NS(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);RS=i,t.target.dispatchEvent(i),RS=null}else return e=wg(t),e!==null&&_M(e),n.blockedOn=t,!1;e.shift()}return!0}function aR(n,e,t){Qy(n)&&t.delete(e)}function s9(){FS=!1,Gl!==null&&Qy(Gl)&&(Gl=null),zl!==null&&Qy(zl)&&(zl=null),Ql!==null&&Qy(Ql)&&(Ql=null),Pm.forEach(aR),Lm.forEach(aR)}function lp(n,e){n.blockedOn===e&&(n.blockedOn=null,FS||(FS=!0,dr.unstable_scheduleCallback(dr.unstable_NormalPriority,s9)))}function km(n){function e(s){return lp(s,n)}if(0<KA.length){lp(KA[0],n);for(var t=1;t<KA.length;t++){var i=KA[t];i.blockedOn===n&&(i.blockedOn=null)}}for(Gl!==null&&lp(Gl,n),zl!==null&&lp(zl,n),Ql!==null&&lp(Ql,n),Pm.forEach(e),Lm.forEach(e),t=0;t<Sl.length;t++)i=Sl[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<Sl.length&&(t=Sl[0],t.blockedOn===null);)s3(t),t.blockedOn===null&&Sl.shift()}var Nd=Ka.ReactCurrentBatchConfig,yv=!0;function r9(n,e,t,i){var s=fn,r=Nd.transition;Nd.transition=null;try{fn=1,CM(n,e,t,i)}finally{fn=s,Nd.transition=r}}function o9(n,e,t,i){var s=fn,r=Nd.transition;Nd.transition=null;try{fn=4,CM(n,e,t,i)}finally{fn=s,Nd.transition=r}}function CM(n,e,t,i){if(yv){var s=NS(n,e,t,i);if(s===null)pE(n,e,i,vv,t),oR(n,i);else if(i9(s,n,e,t,i))i.stopPropagation();else if(oR(n,i),e&4&&-1<n9.indexOf(n)){for(;s!==null;){var r=wg(s);if(r!==null&&e3(r),r=NS(n,e,t,i),r===null&&pE(n,e,i,vv,t),r===s)break;s=r}s!==null&&i.stopPropagation()}else pE(n,e,i,null,t)}}var vv=null;function NS(n,e,t,i){if(vv=null,n=bM(i),n=uu(n),n!==null)if(e=Zu(n),e===null)n=null;else if(t=e.tag,t===13){if(n=WN(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return vv=n,null}function r3(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qH()){case wM:return 1;case KN:return 4;case gv:case JH:return 16;case $N:return 536870912;default:return 16}default:return 16}}var Pl=null,SM=null,Hy=null;function o3(){if(Hy)return Hy;var n,e=SM,t=e.length,i,s="value"in Pl?Pl.value:Pl.textContent,r=s.length;for(n=0;n<t&&e[n]===s[n];n++);var o=t-n;for(i=1;i<=o&&e[t-i]===s[r-i];i++);return Hy=s.slice(n,1<i?1-i:void 0)}function Vy(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function $A(){return!0}function lR(){return!1}function mr(n){function e(t,i,s,r,o){this._reactName=t,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(r):r[a]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?$A:lR,this.isPropagationStopped=lR,this}return Qn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=$A)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=$A)},persist:function(){},isPersistent:$A}),e}var Mf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},MM=mr(Mf),bg=Qn({},Mf,{view:0,detail:0}),a9=mr(bg),rE,oE,cp,Fx=Qn({},bg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:IM,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==cp&&(cp&&n.type==="mousemove"?(rE=n.screenX-cp.screenX,oE=n.screenY-cp.screenY):oE=rE=0,cp=n),rE)},movementY:function(n){return"movementY"in n?n.movementY:oE}}),cR=mr(Fx),l9=Qn({},Fx,{dataTransfer:0}),c9=mr(l9),u9=Qn({},bg,{relatedTarget:0}),aE=mr(u9),h9=Qn({},Mf,{animationName:0,elapsedTime:0,pseudoElement:0}),d9=mr(h9),f9=Qn({},Mf,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),p9=mr(f9),m9=Qn({},Mf,{data:0}),uR=mr(m9),g9={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},A9={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},y9={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function v9(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=y9[n])?!!e[n]:!1}function IM(){return v9}var x9=Qn({},bg,{key:function(n){if(n.key){var e=g9[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Vy(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?A9[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:IM,charCode:function(n){return n.type==="keypress"?Vy(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Vy(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),b9=mr(x9),w9=Qn({},Fx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hR=mr(w9),E9=Qn({},bg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:IM}),_9=mr(E9),C9=Qn({},Mf,{propertyName:0,elapsedTime:0,pseudoElement:0}),S9=mr(C9),M9=Qn({},Fx,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),I9=mr(M9),T9=[9,13,27,32],TM=Ua&&"CompositionEvent"in window,dm=null;Ua&&"documentMode"in document&&(dm=document.documentMode);var B9=Ua&&"TextEvent"in window&&!dm,a3=Ua&&(!TM||dm&&8<dm&&11>=dm),dR=String.fromCharCode(32),fR=!1;function l3(n,e){switch(n){case"keyup":return T9.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function c3(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var fd=!1;function R9(n,e){switch(n){case"compositionend":return c3(e);case"keypress":return e.which!==32?null:(fR=!0,dR);case"textInput":return n=e.data,n===dR&&fR?null:n;default:return null}}function D9(n,e){if(fd)return n==="compositionend"||!TM&&l3(n,e)?(n=o3(),Hy=SM=Pl=null,fd=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return a3&&e.locale!=="ko"?null:e.data;default:return null}}var P9={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pR(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!P9[n.type]:e==="textarea"}function u3(n,e,t,i){zN(i),e=xv(e,"onChange"),0<e.length&&(t=new MM("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var fm=null,Fm=null;function L9(n){b3(n,0)}function Nx(n){var e=gd(n);if(LN(e))return n}function k9(n,e){if(n==="change")return e}var h3=!1;if(Ua){var lE;if(Ua){var cE="oninput"in document;if(!cE){var mR=document.createElement("div");mR.setAttribute("oninput","return;"),cE=typeof mR.oninput=="function"}lE=cE}else lE=!1;h3=lE&&(!document.documentMode||9<document.documentMode)}function gR(){fm&&(fm.detachEvent("onpropertychange",d3),Fm=fm=null)}function d3(n){if(n.propertyName==="value"&&Nx(Fm)){var e=[];u3(e,Fm,n,bM(n)),jN(L9,e)}}function F9(n,e,t){n==="focusin"?(gR(),fm=e,Fm=t,fm.attachEvent("onpropertychange",d3)):n==="focusout"&&gR()}function N9(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Nx(Fm)}function O9(n,e){if(n==="click")return Nx(e)}function U9(n,e){if(n==="input"||n==="change")return Nx(e)}function G9(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Ao=typeof Object.is=="function"?Object.is:G9;function Nm(n,e){if(Ao(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var s=t[i];if(!vS.call(e,s)||!Ao(n[s],e[s]))return!1}return!0}function AR(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function yR(n,e){var t=AR(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=AR(t)}}function f3(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?f3(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function p3(){for(var n=window,e=fv();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=fv(n.document)}return e}function BM(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function z9(n){var e=p3(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&f3(t.ownerDocument.documentElement,t)){if(i!==null&&BM(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var s=t.textContent.length,r=Math.min(i.start,s);i=i.end===void 0?r:Math.min(i.end,s),!n.extend&&r>i&&(s=i,i=r,r=s),s=yR(t,r);var o=yR(t,i);s&&o&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),n.removeAllRanges(),r>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Q9=Ua&&"documentMode"in document&&11>=document.documentMode,pd=null,OS=null,pm=null,US=!1;function vR(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;US||pd==null||pd!==fv(i)||(i=pd,"selectionStart"in i&&BM(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),pm&&Nm(pm,i)||(pm=i,i=xv(OS,"onSelect"),0<i.length&&(e=new MM("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=pd)))}function YA(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var md={animationend:YA("Animation","AnimationEnd"),animationiteration:YA("Animation","AnimationIteration"),animationstart:YA("Animation","AnimationStart"),transitionend:YA("Transition","TransitionEnd")},uE={},m3={};Ua&&(m3=document.createElement("div").style,"AnimationEvent"in window||(delete md.animationend.animation,delete md.animationiteration.animation,delete md.animationstart.animation),"TransitionEvent"in window||delete md.transitionend.transition);function Ox(n){if(uE[n])return uE[n];if(!md[n])return n;var e=md[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in m3)return uE[n]=e[t];return n}var g3=Ox("animationend"),A3=Ox("animationiteration"),y3=Ox("animationstart"),v3=Ox("transitionend"),x3=new Map,xR="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function lc(n,e){x3.set(n,e),Yu(e,[n])}for(var hE=0;hE<xR.length;hE++){var dE=xR[hE],H9=dE.toLowerCase(),V9=dE[0].toUpperCase()+dE.slice(1);lc(H9,"on"+V9)}lc(g3,"onAnimationEnd");lc(A3,"onAnimationIteration");lc(y3,"onAnimationStart");lc("dblclick","onDoubleClick");lc("focusin","onFocus");lc("focusout","onBlur");lc(v3,"onTransitionEnd");Zd("onMouseEnter",["mouseout","mouseover"]);Zd("onMouseLeave",["mouseout","mouseover"]);Zd("onPointerEnter",["pointerout","pointerover"]);Zd("onPointerLeave",["pointerout","pointerover"]);Yu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Yu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Yu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Yu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Yu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Yu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),j9=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zp));function bR(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,HH(i,e,void 0,n),n.currentTarget=null}function b3(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],s=i.event;i=i.listeners;e:{var r=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==r&&s.isPropagationStopped())break e;bR(s,a,c),r=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==r&&s.isPropagationStopped())break e;bR(s,a,c),r=l}}}if(mv)throw n=LS,mv=!1,LS=null,n}function wn(n,e){var t=e[VS];t===void 0&&(t=e[VS]=new Set);var i=n+"__bubble";t.has(i)||(w3(e,n,2,!1),t.add(i))}function fE(n,e,t){var i=0;e&&(i|=4),w3(t,n,i,e)}var ZA="_reactListening"+Math.random().toString(36).slice(2);function Om(n){if(!n[ZA]){n[ZA]=!0,TN.forEach(function(t){t!=="selectionchange"&&(j9.has(t)||fE(t,!1,n),fE(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[ZA]||(e[ZA]=!0,fE("selectionchange",!1,e))}}function w3(n,e,t,i){switch(r3(e)){case 1:var s=r9;break;case 4:s=o9;break;default:s=CM}t=s.bind(null,e,t,n),s=void 0,!PS||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?n.addEventListener(e,t,{capture:!0,passive:s}):n.addEventListener(e,t,!0):s!==void 0?n.addEventListener(e,t,{passive:s}):n.addEventListener(e,t,!1)}function pE(n,e,t,i,s){var r=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=uu(a),o===null)return;if(l=o.tag,l===5||l===6){i=r=o;continue e}a=a.parentNode}}i=i.return}jN(function(){var c=r,u=bM(t),h=[];e:{var p=x3.get(n);if(p!==void 0){var m=MM,g=n;switch(n){case"keypress":if(Vy(t)===0)break e;case"keydown":case"keyup":m=b9;break;case"focusin":g="focus",m=aE;break;case"focusout":g="blur",m=aE;break;case"beforeblur":case"afterblur":m=aE;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=cR;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=c9;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=_9;break;case g3:case A3:case y3:m=d9;break;case v3:m=S9;break;case"scroll":m=a9;break;case"wheel":m=I9;break;case"copy":case"cut":case"paste":m=p9;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=hR}var v=(e&4)!==0,y=!v&&n==="scroll",A=v?p!==null?p+"Capture":null:p;v=[];for(var b=c,w;b!==null;){w=b;var E=w.stateNode;if(w.tag===5&&E!==null&&(w=E,A!==null&&(E=Dm(b,A),E!=null&&v.push(Um(b,E,w)))),y)break;b=b.return}0<v.length&&(p=new m(p,g,null,t,u),h.push({event:p,listeners:v}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",p&&t!==RS&&(g=t.relatedTarget||t.fromElement)&&(uu(g)||g[Ga]))break e;if((m||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,m?(g=t.relatedTarget||t.toElement,m=c,g=g?uu(g):null,g!==null&&(y=Zu(g),g!==y||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=c),m!==g)){if(v=cR,E="onMouseLeave",A="onMouseEnter",b="mouse",(n==="pointerout"||n==="pointerover")&&(v=hR,E="onPointerLeave",A="onPointerEnter",b="pointer"),y=m==null?p:gd(m),w=g==null?p:gd(g),p=new v(E,b+"leave",m,t,u),p.target=y,p.relatedTarget=w,E=null,uu(u)===c&&(v=new v(A,b+"enter",g,t,u),v.target=w,v.relatedTarget=y,E=v),y=E,m&&g)t:{for(v=m,A=g,b=0,w=v;w;w=vh(w))b++;for(w=0,E=A;E;E=vh(E))w++;for(;0<b-w;)v=vh(v),b--;for(;0<w-b;)A=vh(A),w--;for(;b--;){if(v===A||A!==null&&v===A.alternate)break t;v=vh(v),A=vh(A)}v=null}else v=null;m!==null&&wR(h,p,m,v,!1),g!==null&&y!==null&&wR(h,y,g,v,!0)}}e:{if(p=c?gd(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var M=k9;else if(pR(p))if(h3)M=U9;else{M=N9;var I=F9}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(M=O9);if(M&&(M=M(n,c))){u3(h,M,t,u);break e}I&&I(n,p,c),n==="focusout"&&(I=p._wrapperState)&&I.controlled&&p.type==="number"&&SS(p,"number",p.value)}switch(I=c?gd(c):window,n){case"focusin":(pR(I)||I.contentEditable==="true")&&(pd=I,OS=c,pm=null);break;case"focusout":pm=OS=pd=null;break;case"mousedown":US=!0;break;case"contextmenu":case"mouseup":case"dragend":US=!1,vR(h,t,u);break;case"selectionchange":if(Q9)break;case"keydown":case"keyup":vR(h,t,u)}var D;if(TM)e:{switch(n){case"compositionstart":var B="onCompositionStart";break e;case"compositionend":B="onCompositionEnd";break e;case"compositionupdate":B="onCompositionUpdate";break e}B=void 0}else fd?l3(n,t)&&(B="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(B="onCompositionStart");B&&(a3&&t.locale!=="ko"&&(fd||B!=="onCompositionStart"?B==="onCompositionEnd"&&fd&&(D=o3()):(Pl=u,SM="value"in Pl?Pl.value:Pl.textContent,fd=!0)),I=xv(c,B),0<I.length&&(B=new uR(B,n,null,t,u),h.push({event:B,listeners:I}),D?B.data=D:(D=c3(t),D!==null&&(B.data=D)))),(D=B9?R9(n,t):D9(n,t))&&(c=xv(c,"onBeforeInput"),0<c.length&&(u=new uR("onBeforeInput","beforeinput",null,t,u),h.push({event:u,listeners:c}),u.data=D))}b3(h,e)})}function Um(n,e,t){return{instance:n,listener:e,currentTarget:t}}function xv(n,e){for(var t=e+"Capture",i=[];n!==null;){var s=n,r=s.stateNode;s.tag===5&&r!==null&&(s=r,r=Dm(n,t),r!=null&&i.unshift(Um(n,r,s)),r=Dm(n,e),r!=null&&i.push(Um(n,r,s))),n=n.return}return i}function vh(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function wR(n,e,t,i,s){for(var r=e._reactName,o=[];t!==null&&t!==i;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,s?(l=Dm(t,r),l!=null&&o.unshift(Um(t,l,a))):s||(l=Dm(t,r),l!=null&&o.push(Um(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var W9=/\r\n?/g,q9=/\u0000|\uFFFD/g;function ER(n){return(typeof n=="string"?n:""+n).replace(W9,`
`).replace(q9,"")}function e0(n,e,t){if(e=ER(e),ER(n)!==e&&t)throw Error(Se(425))}function bv(){}var GS=null,zS=null;function QS(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var HS=typeof setTimeout=="function"?setTimeout:void 0,J9=typeof clearTimeout=="function"?clearTimeout:void 0,_R=typeof Promise=="function"?Promise:void 0,X9=typeof queueMicrotask=="function"?queueMicrotask:typeof _R<"u"?function(n){return _R.resolve(null).then(n).catch(K9)}:HS;function K9(n){setTimeout(function(){throw n})}function mE(n,e){var t=e,i=0;do{var s=t.nextSibling;if(n.removeChild(t),s&&s.nodeType===8)if(t=s.data,t==="/$"){if(i===0){n.removeChild(s),km(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=s}while(t);km(e)}function Hl(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function CR(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var If=Math.random().toString(36).slice(2),No="__reactFiber$"+If,Gm="__reactProps$"+If,Ga="__reactContainer$"+If,VS="__reactEvents$"+If,$9="__reactListeners$"+If,Y9="__reactHandles$"+If;function uu(n){var e=n[No];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Ga]||t[No]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=CR(n);n!==null;){if(t=n[No])return t;n=CR(n)}return e}n=t,t=n.parentNode}return null}function wg(n){return n=n[No]||n[Ga],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function gd(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Se(33))}function Ux(n){return n[Gm]||null}var jS=[],Ad=-1;function cc(n){return{current:n}}function _n(n){0>Ad||(n.current=jS[Ad],jS[Ad]=null,Ad--)}function xn(n,e){Ad++,jS[Ad]=n.current,n.current=e}var Zl={},as=cc(Zl),Qs=cc(!1),Pu=Zl;function ef(n,e){var t=n.type.contextTypes;if(!t)return Zl;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},r;for(r in t)s[r]=e[r];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=s),s}function Hs(n){return n=n.childContextTypes,n!=null}function wv(){_n(Qs),_n(as)}function SR(n,e,t){if(as.current!==Zl)throw Error(Se(168));xn(as,e),xn(Qs,t)}function E3(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(Se(108,FH(n)||"Unknown",s));return Qn({},t,i)}function Ev(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Zl,Pu=as.current,xn(as,n),xn(Qs,Qs.current),!0}function MR(n,e,t){var i=n.stateNode;if(!i)throw Error(Se(169));t?(n=E3(n,e,Pu),i.__reactInternalMemoizedMergedChildContext=n,_n(Qs),_n(as),xn(as,n)):_n(Qs),xn(Qs,t)}var Ca=null,Gx=!1,gE=!1;function _3(n){Ca===null?Ca=[n]:Ca.push(n)}function Z9(n){Gx=!0,_3(n)}function uc(){if(!gE&&Ca!==null){gE=!0;var n=0,e=fn;try{var t=Ca;for(fn=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}Ca=null,Gx=!1}catch(s){throw Ca!==null&&(Ca=Ca.slice(n+1)),XN(wM,uc),s}finally{fn=e,gE=!1}}return null}var yd=[],vd=0,_v=null,Cv=0,Br=[],Rr=0,Lu=null,Ia=1,Ta="";function Yc(n,e){yd[vd++]=Cv,yd[vd++]=_v,_v=n,Cv=e}function C3(n,e,t){Br[Rr++]=Ia,Br[Rr++]=Ta,Br[Rr++]=Lu,Lu=n;var i=Ia;n=Ta;var s=32-ho(i)-1;i&=~(1<<s),t+=1;var r=32-ho(e)+s;if(30<r){var o=s-s%5;r=(i&(1<<o)-1).toString(32),i>>=o,s-=o,Ia=1<<32-ho(e)+s|t<<s|i,Ta=r+n}else Ia=1<<r|t<<s|i,Ta=n}function RM(n){n.return!==null&&(Yc(n,1),C3(n,1,0))}function DM(n){for(;n===_v;)_v=yd[--vd],yd[vd]=null,Cv=yd[--vd],yd[vd]=null;for(;n===Lu;)Lu=Br[--Rr],Br[Rr]=null,Ta=Br[--Rr],Br[Rr]=null,Ia=Br[--Rr],Br[Rr]=null}var lr=null,ir=null,Rn=!1,no=null;function S3(n,e){var t=Pr(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function IR(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,lr=n,ir=Hl(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,lr=n,ir=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Lu!==null?{id:Ia,overflow:Ta}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Pr(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,lr=n,ir=null,!0):!1;default:return!1}}function WS(n){return(n.mode&1)!==0&&(n.flags&128)===0}function qS(n){if(Rn){var e=ir;if(e){var t=e;if(!IR(n,e)){if(WS(n))throw Error(Se(418));e=Hl(t.nextSibling);var i=lr;e&&IR(n,e)?S3(i,t):(n.flags=n.flags&-4097|2,Rn=!1,lr=n)}}else{if(WS(n))throw Error(Se(418));n.flags=n.flags&-4097|2,Rn=!1,lr=n}}}function TR(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;lr=n}function t0(n){if(n!==lr)return!1;if(!Rn)return TR(n),Rn=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!QS(n.type,n.memoizedProps)),e&&(e=ir)){if(WS(n))throw M3(),Error(Se(418));for(;e;)S3(n,e),e=Hl(e.nextSibling)}if(TR(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Se(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){ir=Hl(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}ir=null}}else ir=lr?Hl(n.stateNode.nextSibling):null;return!0}function M3(){for(var n=ir;n;)n=Hl(n.nextSibling)}function tf(){ir=lr=null,Rn=!1}function PM(n){no===null?no=[n]:no.push(n)}var e8=Ka.ReactCurrentBatchConfig;function up(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Se(309));var i=t.stateNode}if(!i)throw Error(Se(147,n));var s=i,r=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===r?e.ref:(e=function(o){var a=s.refs;o===null?delete a[r]:a[r]=o},e._stringRef=r,e)}if(typeof n!="string")throw Error(Se(284));if(!t._owner)throw Error(Se(290,n))}return n}function n0(n,e){throw n=Object.prototype.toString.call(e),Error(Se(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function BR(n){var e=n._init;return e(n._payload)}function I3(n){function e(A,b){if(n){var w=A.deletions;w===null?(A.deletions=[b],A.flags|=16):w.push(b)}}function t(A,b){if(!n)return null;for(;b!==null;)e(A,b),b=b.sibling;return null}function i(A,b){for(A=new Map;b!==null;)b.key!==null?A.set(b.key,b):A.set(b.index,b),b=b.sibling;return A}function s(A,b){return A=ql(A,b),A.index=0,A.sibling=null,A}function r(A,b,w){return A.index=w,n?(w=A.alternate,w!==null?(w=w.index,w<b?(A.flags|=2,b):w):(A.flags|=2,b)):(A.flags|=1048576,b)}function o(A){return n&&A.alternate===null&&(A.flags|=2),A}function a(A,b,w,E){return b===null||b.tag!==6?(b=EE(w,A.mode,E),b.return=A,b):(b=s(b,w),b.return=A,b)}function l(A,b,w,E){var M=w.type;return M===dd?u(A,b,w.props.children,E,w.key):b!==null&&(b.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===wl&&BR(M)===b.type)?(E=s(b,w.props),E.ref=up(A,b,w),E.return=A,E):(E=$y(w.type,w.key,w.props,null,A.mode,E),E.ref=up(A,b,w),E.return=A,E)}function c(A,b,w,E){return b===null||b.tag!==4||b.stateNode.containerInfo!==w.containerInfo||b.stateNode.implementation!==w.implementation?(b=_E(w,A.mode,E),b.return=A,b):(b=s(b,w.children||[]),b.return=A,b)}function u(A,b,w,E,M){return b===null||b.tag!==7?(b=_u(w,A.mode,E,M),b.return=A,b):(b=s(b,w),b.return=A,b)}function h(A,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return b=EE(""+b,A.mode,w),b.return=A,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case jA:return w=$y(b.type,b.key,b.props,null,A.mode,w),w.ref=up(A,null,b),w.return=A,w;case hd:return b=_E(b,A.mode,w),b.return=A,b;case wl:var E=b._init;return h(A,E(b._payload),w)}if($p(b)||rp(b))return b=_u(b,A.mode,w,null),b.return=A,b;n0(A,b)}return null}function p(A,b,w,E){var M=b!==null?b.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return M!==null?null:a(A,b,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case jA:return w.key===M?l(A,b,w,E):null;case hd:return w.key===M?c(A,b,w,E):null;case wl:return M=w._init,p(A,b,M(w._payload),E)}if($p(w)||rp(w))return M!==null?null:u(A,b,w,E,null);n0(A,w)}return null}function m(A,b,w,E,M){if(typeof E=="string"&&E!==""||typeof E=="number")return A=A.get(w)||null,a(b,A,""+E,M);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case jA:return A=A.get(E.key===null?w:E.key)||null,l(b,A,E,M);case hd:return A=A.get(E.key===null?w:E.key)||null,c(b,A,E,M);case wl:var I=E._init;return m(A,b,w,I(E._payload),M)}if($p(E)||rp(E))return A=A.get(w)||null,u(b,A,E,M,null);n0(b,E)}return null}function g(A,b,w,E){for(var M=null,I=null,D=b,B=b=0,R=null;D!==null&&B<w.length;B++){D.index>B?(R=D,D=null):R=D.sibling;var T=p(A,D,w[B],E);if(T===null){D===null&&(D=R);break}n&&D&&T.alternate===null&&e(A,D),b=r(T,b,B),I===null?M=T:I.sibling=T,I=T,D=R}if(B===w.length)return t(A,D),Rn&&Yc(A,B),M;if(D===null){for(;B<w.length;B++)D=h(A,w[B],E),D!==null&&(b=r(D,b,B),I===null?M=D:I.sibling=D,I=D);return Rn&&Yc(A,B),M}for(D=i(A,D);B<w.length;B++)R=m(D,A,B,w[B],E),R!==null&&(n&&R.alternate!==null&&D.delete(R.key===null?B:R.key),b=r(R,b,B),I===null?M=R:I.sibling=R,I=R);return n&&D.forEach(function(k){return e(A,k)}),Rn&&Yc(A,B),M}function v(A,b,w,E){var M=rp(w);if(typeof M!="function")throw Error(Se(150));if(w=M.call(w),w==null)throw Error(Se(151));for(var I=M=null,D=b,B=b=0,R=null,T=w.next();D!==null&&!T.done;B++,T=w.next()){D.index>B?(R=D,D=null):R=D.sibling;var k=p(A,D,T.value,E);if(k===null){D===null&&(D=R);break}n&&D&&k.alternate===null&&e(A,D),b=r(k,b,B),I===null?M=k:I.sibling=k,I=k,D=R}if(T.done)return t(A,D),Rn&&Yc(A,B),M;if(D===null){for(;!T.done;B++,T=w.next())T=h(A,T.value,E),T!==null&&(b=r(T,b,B),I===null?M=T:I.sibling=T,I=T);return Rn&&Yc(A,B),M}for(D=i(A,D);!T.done;B++,T=w.next())T=m(D,A,B,T.value,E),T!==null&&(n&&T.alternate!==null&&D.delete(T.key===null?B:T.key),b=r(T,b,B),I===null?M=T:I.sibling=T,I=T);return n&&D.forEach(function(H){return e(A,H)}),Rn&&Yc(A,B),M}function y(A,b,w,E){if(typeof w=="object"&&w!==null&&w.type===dd&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case jA:e:{for(var M=w.key,I=b;I!==null;){if(I.key===M){if(M=w.type,M===dd){if(I.tag===7){t(A,I.sibling),b=s(I,w.props.children),b.return=A,A=b;break e}}else if(I.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===wl&&BR(M)===I.type){t(A,I.sibling),b=s(I,w.props),b.ref=up(A,I,w),b.return=A,A=b;break e}t(A,I);break}else e(A,I);I=I.sibling}w.type===dd?(b=_u(w.props.children,A.mode,E,w.key),b.return=A,A=b):(E=$y(w.type,w.key,w.props,null,A.mode,E),E.ref=up(A,b,w),E.return=A,A=E)}return o(A);case hd:e:{for(I=w.key;b!==null;){if(b.key===I)if(b.tag===4&&b.stateNode.containerInfo===w.containerInfo&&b.stateNode.implementation===w.implementation){t(A,b.sibling),b=s(b,w.children||[]),b.return=A,A=b;break e}else{t(A,b);break}else e(A,b);b=b.sibling}b=_E(w,A.mode,E),b.return=A,A=b}return o(A);case wl:return I=w._init,y(A,b,I(w._payload),E)}if($p(w))return g(A,b,w,E);if(rp(w))return v(A,b,w,E);n0(A,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,b!==null&&b.tag===6?(t(A,b.sibling),b=s(b,w),b.return=A,A=b):(t(A,b),b=EE(w,A.mode,E),b.return=A,A=b),o(A)):t(A,b)}return y}var nf=I3(!0),T3=I3(!1),Sv=cc(null),Mv=null,xd=null,LM=null;function kM(){LM=xd=Mv=null}function FM(n){var e=Sv.current;_n(Sv),n._currentValue=e}function JS(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function Od(n,e){Mv=n,LM=xd=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(zs=!0),n.firstContext=null)}function Or(n){var e=n._currentValue;if(LM!==n)if(n={context:n,memoizedValue:e,next:null},xd===null){if(Mv===null)throw Error(Se(308));xd=n,Mv.dependencies={lanes:0,firstContext:n}}else xd=xd.next=n;return e}var hu=null;function NM(n){hu===null?hu=[n]:hu.push(n)}function B3(n,e,t,i){var s=e.interleaved;return s===null?(t.next=t,NM(e)):(t.next=s.next,s.next=t),e.interleaved=t,za(n,i)}function za(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var El=!1;function OM(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function R3(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function La(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Vl(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,Zt&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,za(n,t)}return s=i.interleaved,s===null?(e.next=e,NM(i)):(e.next=s.next,s.next=e),i.interleaved=e,za(n,t)}function jy(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,EM(n,t)}}function RR(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var s=null,r=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};r===null?s=r=o:r=r.next=o,t=t.next}while(t!==null);r===null?s=r=e:r=r.next=e}else s=r=e;t={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Iv(n,e,t,i){var s=n.updateQueue;El=!1;var r=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?r=c:o.next=c,o=l;var u=n.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(r!==null){var h=s.baseState;o=0,u=c=l=null,a=r;do{var p=a.lane,m=a.eventTime;if((i&p)===p){u!==null&&(u=u.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=n,v=a;switch(p=e,m=t,v.tag){case 1:if(g=v.payload,typeof g=="function"){h=g.call(m,h,p);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,p=typeof g=="function"?g.call(m,h,p):g,p==null)break e;h=Qn({},h,p);break e;case 2:El=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,p=s.effects,p===null?s.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=m,l=h):u=u.next=m,o|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(1);if(u===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else r===null&&(s.shared.lanes=0);Fu|=o,n.lanes=o,n.memoizedState=h}}function DR(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],s=i.callback;if(s!==null){if(i.callback=null,i=t,typeof s!="function")throw Error(Se(191,s));s.call(i)}}}var Eg={},Qo=cc(Eg),zm=cc(Eg),Qm=cc(Eg);function du(n){if(n===Eg)throw Error(Se(174));return n}function UM(n,e){switch(xn(Qm,e),xn(zm,n),xn(Qo,Eg),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:IS(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=IS(e,n)}_n(Qo),xn(Qo,e)}function sf(){_n(Qo),_n(zm),_n(Qm)}function D3(n){du(Qm.current);var e=du(Qo.current),t=IS(e,n.type);e!==t&&(xn(zm,n),xn(Qo,t))}function GM(n){zm.current===n&&(_n(Qo),_n(zm))}var Ln=cc(0);function Tv(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var AE=[];function zM(){for(var n=0;n<AE.length;n++)AE[n]._workInProgressVersionPrimary=null;AE.length=0}var Wy=Ka.ReactCurrentDispatcher,yE=Ka.ReactCurrentBatchConfig,ku=0,Gn=null,gi=null,Ii=null,Bv=!1,mm=!1,Hm=0,t8=0;function qi(){throw Error(Se(321))}function QM(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Ao(n[t],e[t]))return!1;return!0}function HM(n,e,t,i,s,r){if(ku=r,Gn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Wy.current=n===null||n.memoizedState===null?r8:o8,n=t(i,s),mm){r=0;do{if(mm=!1,Hm=0,25<=r)throw Error(Se(301));r+=1,Ii=gi=null,e.updateQueue=null,Wy.current=a8,n=t(i,s)}while(mm)}if(Wy.current=Rv,e=gi!==null&&gi.next!==null,ku=0,Ii=gi=Gn=null,Bv=!1,e)throw Error(Se(300));return n}function VM(){var n=Hm!==0;return Hm=0,n}function Po(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ii===null?Gn.memoizedState=Ii=n:Ii=Ii.next=n,Ii}function Ur(){if(gi===null){var n=Gn.alternate;n=n!==null?n.memoizedState:null}else n=gi.next;var e=Ii===null?Gn.memoizedState:Ii.next;if(e!==null)Ii=e,gi=n;else{if(n===null)throw Error(Se(310));gi=n,n={memoizedState:gi.memoizedState,baseState:gi.baseState,baseQueue:gi.baseQueue,queue:gi.queue,next:null},Ii===null?Gn.memoizedState=Ii=n:Ii=Ii.next=n}return Ii}function Vm(n,e){return typeof e=="function"?e(n):e}function vE(n){var e=Ur(),t=e.queue;if(t===null)throw Error(Se(311));t.lastRenderedReducer=n;var i=gi,s=i.baseQueue,r=t.pending;if(r!==null){if(s!==null){var o=s.next;s.next=r.next,r.next=o}i.baseQueue=s=r,t.pending=null}if(s!==null){r=s.next,i=i.baseState;var a=o=null,l=null,c=r;do{var u=c.lane;if((ku&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:n(i,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=i):l=l.next=h,Gn.lanes|=u,Fu|=u}c=c.next}while(c!==null&&c!==r);l===null?o=i:l.next=a,Ao(i,e.memoizedState)||(zs=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,t.lastRenderedState=i}if(n=t.interleaved,n!==null){s=n;do r=s.lane,Gn.lanes|=r,Fu|=r,s=s.next;while(s!==n)}else s===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function xE(n){var e=Ur(),t=e.queue;if(t===null)throw Error(Se(311));t.lastRenderedReducer=n;var i=t.dispatch,s=t.pending,r=e.memoizedState;if(s!==null){t.pending=null;var o=s=s.next;do r=n(r,o.action),o=o.next;while(o!==s);Ao(r,e.memoizedState)||(zs=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),t.lastRenderedState=r}return[r,i]}function P3(){}function L3(n,e){var t=Gn,i=Ur(),s=e(),r=!Ao(i.memoizedState,s);if(r&&(i.memoizedState=s,zs=!0),i=i.queue,jM(N3.bind(null,t,i,n),[n]),i.getSnapshot!==e||r||Ii!==null&&Ii.memoizedState.tag&1){if(t.flags|=2048,jm(9,F3.bind(null,t,i,s,e),void 0,null),Di===null)throw Error(Se(349));ku&30||k3(t,e,s)}return s}function k3(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Gn.updateQueue,e===null?(e={lastEffect:null,stores:null},Gn.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function F3(n,e,t,i){e.value=t,e.getSnapshot=i,O3(e)&&U3(n)}function N3(n,e,t){return t(function(){O3(e)&&U3(n)})}function O3(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Ao(n,t)}catch{return!0}}function U3(n){var e=za(n,1);e!==null&&fo(e,n,1,-1)}function PR(n){var e=Po();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vm,lastRenderedState:n},e.queue=n,n=n.dispatch=s8.bind(null,Gn,n),[e.memoizedState,n]}function jm(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=Gn.updateQueue,e===null?(e={lastEffect:null,stores:null},Gn.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function G3(){return Ur().memoizedState}function qy(n,e,t,i){var s=Po();Gn.flags|=n,s.memoizedState=jm(1|e,t,void 0,i===void 0?null:i)}function zx(n,e,t,i){var s=Ur();i=i===void 0?null:i;var r=void 0;if(gi!==null){var o=gi.memoizedState;if(r=o.destroy,i!==null&&QM(i,o.deps)){s.memoizedState=jm(e,t,r,i);return}}Gn.flags|=n,s.memoizedState=jm(1|e,t,r,i)}function LR(n,e){return qy(8390656,8,n,e)}function jM(n,e){return zx(2048,8,n,e)}function z3(n,e){return zx(4,2,n,e)}function Q3(n,e){return zx(4,4,n,e)}function H3(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function V3(n,e,t){return t=t!=null?t.concat([n]):null,zx(4,4,H3.bind(null,e,n),t)}function WM(){}function j3(n,e){var t=Ur();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&QM(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function W3(n,e){var t=Ur();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&QM(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function q3(n,e,t){return ku&21?(Ao(t,e)||(t=YN(),Gn.lanes|=t,Fu|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,zs=!0),n.memoizedState=t)}function n8(n,e){var t=fn;fn=t!==0&&4>t?t:4,n(!0);var i=yE.transition;yE.transition={};try{n(!1),e()}finally{fn=t,yE.transition=i}}function J3(){return Ur().memoizedState}function i8(n,e,t){var i=Wl(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},X3(n))K3(e,t);else if(t=B3(n,e,t,i),t!==null){var s=Es();fo(t,n,i,s),$3(t,e,i)}}function s8(n,e,t){var i=Wl(n),s={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(X3(n))K3(e,s);else{var r=n.alternate;if(n.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var o=e.lastRenderedState,a=r(o,t);if(s.hasEagerState=!0,s.eagerState=a,Ao(a,o)){var l=e.interleaved;l===null?(s.next=s,NM(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}t=B3(n,e,s,i),t!==null&&(s=Es(),fo(t,n,i,s),$3(t,e,i))}}function X3(n){var e=n.alternate;return n===Gn||e!==null&&e===Gn}function K3(n,e){mm=Bv=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function $3(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,EM(n,t)}}var Rv={readContext:Or,useCallback:qi,useContext:qi,useEffect:qi,useImperativeHandle:qi,useInsertionEffect:qi,useLayoutEffect:qi,useMemo:qi,useReducer:qi,useRef:qi,useState:qi,useDebugValue:qi,useDeferredValue:qi,useTransition:qi,useMutableSource:qi,useSyncExternalStore:qi,useId:qi,unstable_isNewReconciler:!1},r8={readContext:Or,useCallback:function(n,e){return Po().memoizedState=[n,e===void 0?null:e],n},useContext:Or,useEffect:LR,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,qy(4194308,4,H3.bind(null,e,n),t)},useLayoutEffect:function(n,e){return qy(4194308,4,n,e)},useInsertionEffect:function(n,e){return qy(4,2,n,e)},useMemo:function(n,e){var t=Po();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=Po();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=i8.bind(null,Gn,n),[i.memoizedState,n]},useRef:function(n){var e=Po();return n={current:n},e.memoizedState=n},useState:PR,useDebugValue:WM,useDeferredValue:function(n){return Po().memoizedState=n},useTransition:function(){var n=PR(!1),e=n[0];return n=n8.bind(null,n[1]),Po().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=Gn,s=Po();if(Rn){if(t===void 0)throw Error(Se(407));t=t()}else{if(t=e(),Di===null)throw Error(Se(349));ku&30||k3(i,e,t)}s.memoizedState=t;var r={value:t,getSnapshot:e};return s.queue=r,LR(N3.bind(null,i,r,n),[n]),i.flags|=2048,jm(9,F3.bind(null,i,r,t,e),void 0,null),t},useId:function(){var n=Po(),e=Di.identifierPrefix;if(Rn){var t=Ta,i=Ia;t=(i&~(1<<32-ho(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=Hm++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=t8++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},o8={readContext:Or,useCallback:j3,useContext:Or,useEffect:jM,useImperativeHandle:V3,useInsertionEffect:z3,useLayoutEffect:Q3,useMemo:W3,useReducer:vE,useRef:G3,useState:function(){return vE(Vm)},useDebugValue:WM,useDeferredValue:function(n){var e=Ur();return q3(e,gi.memoizedState,n)},useTransition:function(){var n=vE(Vm)[0],e=Ur().memoizedState;return[n,e]},useMutableSource:P3,useSyncExternalStore:L3,useId:J3,unstable_isNewReconciler:!1},a8={readContext:Or,useCallback:j3,useContext:Or,useEffect:jM,useImperativeHandle:V3,useInsertionEffect:z3,useLayoutEffect:Q3,useMemo:W3,useReducer:xE,useRef:G3,useState:function(){return xE(Vm)},useDebugValue:WM,useDeferredValue:function(n){var e=Ur();return gi===null?e.memoizedState=n:q3(e,gi.memoizedState,n)},useTransition:function(){var n=xE(Vm)[0],e=Ur().memoizedState;return[n,e]},useMutableSource:P3,useSyncExternalStore:L3,useId:J3,unstable_isNewReconciler:!1};function Yr(n,e){if(n&&n.defaultProps){e=Qn({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function XS(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:Qn({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Qx={isMounted:function(n){return(n=n._reactInternals)?Zu(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=Es(),s=Wl(n),r=La(i,s);r.payload=e,t!=null&&(r.callback=t),e=Vl(n,r,s),e!==null&&(fo(e,n,s,i),jy(e,n,s))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=Es(),s=Wl(n),r=La(i,s);r.tag=1,r.payload=e,t!=null&&(r.callback=t),e=Vl(n,r,s),e!==null&&(fo(e,n,s,i),jy(e,n,s))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Es(),i=Wl(n),s=La(t,i);s.tag=2,e!=null&&(s.callback=e),e=Vl(n,s,i),e!==null&&(fo(e,n,i,t),jy(e,n,i))}};function kR(n,e,t,i,s,r,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,r,o):e.prototype&&e.prototype.isPureReactComponent?!Nm(t,i)||!Nm(s,r):!0}function Y3(n,e,t){var i=!1,s=Zl,r=e.contextType;return typeof r=="object"&&r!==null?r=Or(r):(s=Hs(e)?Pu:as.current,i=e.contextTypes,r=(i=i!=null)?ef(n,s):Zl),e=new e(t,r),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Qx,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=r),e}function FR(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&Qx.enqueueReplaceState(e,e.state,null)}function KS(n,e,t,i){var s=n.stateNode;s.props=t,s.state=n.memoizedState,s.refs={},OM(n);var r=e.contextType;typeof r=="object"&&r!==null?s.context=Or(r):(r=Hs(e)?Pu:as.current,s.context=ef(n,r)),s.state=n.memoizedState,r=e.getDerivedStateFromProps,typeof r=="function"&&(XS(n,e,r,t),s.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Qx.enqueueReplaceState(s,s.state,null),Iv(n,t,s,i),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function rf(n,e){try{var t="",i=e;do t+=kH(i),i=i.return;while(i);var s=t}catch(r){s=`
Error generating stack: `+r.message+`
`+r.stack}return{value:n,source:e,stack:s,digest:null}}function bE(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function $S(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var l8=typeof WeakMap=="function"?WeakMap:Map;function Z3(n,e,t){t=La(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){Pv||(Pv=!0,a1=i),$S(n,e)},t}function eO(n,e,t){t=La(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;t.payload=function(){return i(s)},t.callback=function(){$S(n,e)}}var r=n.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(t.callback=function(){$S(n,e),typeof i!="function"&&(jl===null?jl=new Set([this]):jl.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function NR(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new l8;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(t)||(s.add(t),n=w8.bind(null,n,e,t),e.then(n,n))}function OR(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function UR(n,e,t,i,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=La(-1,1),e.tag=2,Vl(t,e,1))),t.lanes|=1),n)}var c8=Ka.ReactCurrentOwner,zs=!1;function ys(n,e,t,i){e.child=n===null?T3(e,null,t,i):nf(e,n.child,t,i)}function GR(n,e,t,i,s){t=t.render;var r=e.ref;return Od(e,s),i=HM(n,e,t,i,r,s),t=VM(),n!==null&&!zs?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,Qa(n,e,s)):(Rn&&t&&RM(e),e.flags|=1,ys(n,e,i,s),e.child)}function zR(n,e,t,i,s){if(n===null){var r=t.type;return typeof r=="function"&&!eI(r)&&r.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=r,tO(n,e,r,i,s)):(n=$y(t.type,null,i,e,e.mode,s),n.ref=e.ref,n.return=e,e.child=n)}if(r=n.child,!(n.lanes&s)){var o=r.memoizedProps;if(t=t.compare,t=t!==null?t:Nm,t(o,i)&&n.ref===e.ref)return Qa(n,e,s)}return e.flags|=1,n=ql(r,i),n.ref=e.ref,n.return=e,e.child=n}function tO(n,e,t,i,s){if(n!==null){var r=n.memoizedProps;if(Nm(r,i)&&n.ref===e.ref)if(zs=!1,e.pendingProps=i=r,(n.lanes&s)!==0)n.flags&131072&&(zs=!0);else return e.lanes=n.lanes,Qa(n,e,s)}return YS(n,e,t,i,s)}function nO(n,e,t){var i=e.pendingProps,s=i.children,r=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},xn(wd,tr),tr|=t;else{if(!(t&1073741824))return n=r!==null?r.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,xn(wd,tr),tr|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=r!==null?r.baseLanes:t,xn(wd,tr),tr|=i}else r!==null?(i=r.baseLanes|t,e.memoizedState=null):i=t,xn(wd,tr),tr|=i;return ys(n,e,s,t),e.child}function iO(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function YS(n,e,t,i,s){var r=Hs(t)?Pu:as.current;return r=ef(e,r),Od(e,s),t=HM(n,e,t,i,r,s),i=VM(),n!==null&&!zs?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,Qa(n,e,s)):(Rn&&i&&RM(e),e.flags|=1,ys(n,e,t,s),e.child)}function QR(n,e,t,i,s){if(Hs(t)){var r=!0;Ev(e)}else r=!1;if(Od(e,s),e.stateNode===null)Jy(n,e),Y3(e,t,i),KS(e,t,i,s),i=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=Or(c):(c=Hs(t)?Pu:as.current,c=ef(e,c));var u=t.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&FR(e,o,i,c),El=!1;var p=e.memoizedState;o.state=p,Iv(e,i,o,s),l=e.memoizedState,a!==i||p!==l||Qs.current||El?(typeof u=="function"&&(XS(e,t,u,i),l=e.memoizedState),(a=El||kR(e,t,a,i,p,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,R3(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:Yr(e.type,a),o.props=c,h=e.pendingProps,p=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=Or(l):(l=Hs(t)?Pu:as.current,l=ef(e,l));var m=t.getDerivedStateFromProps;(u=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||p!==l)&&FR(e,o,i,l),El=!1,p=e.memoizedState,o.state=p,Iv(e,i,o,s);var g=e.memoizedState;a!==h||p!==g||Qs.current||El?(typeof m=="function"&&(XS(e,t,m,i),g=e.memoizedState),(c=El||kR(e,t,c,i,p,g,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=g),o.props=i,o.state=g,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),i=!1)}return ZS(n,e,t,i,r,s)}function ZS(n,e,t,i,s,r){iO(n,e);var o=(e.flags&128)!==0;if(!i&&!o)return s&&MR(e,t,!1),Qa(n,e,r);i=e.stateNode,c8.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&o?(e.child=nf(e,n.child,null,r),e.child=nf(e,null,a,r)):ys(n,e,a,r),e.memoizedState=i.state,s&&MR(e,t,!0),e.child}function sO(n){var e=n.stateNode;e.pendingContext?SR(n,e.pendingContext,e.pendingContext!==e.context):e.context&&SR(n,e.context,!1),UM(n,e.containerInfo)}function HR(n,e,t,i,s){return tf(),PM(s),e.flags|=256,ys(n,e,t,i),e.child}var e1={dehydrated:null,treeContext:null,retryLane:0};function t1(n){return{baseLanes:n,cachePool:null,transitions:null}}function rO(n,e,t){var i=e.pendingProps,s=Ln.current,r=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(s&2)!==0),a?(r=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),xn(Ln,s&1),n===null)return qS(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,n=i.fallback,r?(i=e.mode,r=e.child,o={mode:"hidden",children:o},!(i&1)&&r!==null?(r.childLanes=0,r.pendingProps=o):r=jx(o,i,0,null),n=_u(n,i,t,null),r.return=e,n.return=e,r.sibling=n,e.child=r,e.child.memoizedState=t1(t),e.memoizedState=e1,n):qM(e,o));if(s=n.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return u8(n,e,o,i,a,s,t);if(r){r=i.fallback,o=e.mode,s=n.child,a=s.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=ql(s,l),i.subtreeFlags=s.subtreeFlags&14680064),a!==null?r=ql(a,r):(r=_u(r,o,t,null),r.flags|=2),r.return=e,i.return=e,i.sibling=r,e.child=i,i=r,r=e.child,o=n.child.memoizedState,o=o===null?t1(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},r.memoizedState=o,r.childLanes=n.childLanes&~t,e.memoizedState=e1,i}return r=n.child,n=r.sibling,i=ql(r,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function qM(n,e){return e=jx({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function i0(n,e,t,i){return i!==null&&PM(i),nf(e,n.child,null,t),n=qM(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function u8(n,e,t,i,s,r,o){if(t)return e.flags&256?(e.flags&=-257,i=bE(Error(Se(422))),i0(n,e,o,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(r=i.fallback,s=e.mode,i=jx({mode:"visible",children:i.children},s,0,null),r=_u(r,s,o,null),r.flags|=2,i.return=e,r.return=e,i.sibling=r,e.child=i,e.mode&1&&nf(e,n.child,null,o),e.child.memoizedState=t1(o),e.memoizedState=e1,r);if(!(e.mode&1))return i0(n,e,o,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var a=i.dgst;return i=a,r=Error(Se(419)),i=bE(r,i,void 0),i0(n,e,o,i)}if(a=(o&n.childLanes)!==0,zs||a){if(i=Di,i!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|o)?0:s,s!==0&&s!==r.retryLane&&(r.retryLane=s,za(n,s),fo(i,n,s,-1))}return ZM(),i=bE(Error(Se(421))),i0(n,e,o,i)}return s.data==="$?"?(e.flags|=128,e.child=n.child,e=E8.bind(null,n),s._reactRetry=e,null):(n=r.treeContext,ir=Hl(s.nextSibling),lr=e,Rn=!0,no=null,n!==null&&(Br[Rr++]=Ia,Br[Rr++]=Ta,Br[Rr++]=Lu,Ia=n.id,Ta=n.overflow,Lu=e),e=qM(e,i.children),e.flags|=4096,e)}function VR(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),JS(n.return,e,t)}function wE(n,e,t,i,s){var r=n.memoizedState;r===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:s}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=t,r.tailMode=s)}function oO(n,e,t){var i=e.pendingProps,s=i.revealOrder,r=i.tail;if(ys(n,e,i.children,t),i=Ln.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&VR(n,t,e);else if(n.tag===19)VR(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(xn(Ln,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(t=e.child,s=null;t!==null;)n=t.alternate,n!==null&&Tv(n)===null&&(s=t),t=t.sibling;t=s,t===null?(s=e.child,e.child=null):(s=t.sibling,t.sibling=null),wE(e,!1,s,t,r);break;case"backwards":for(t=null,s=e.child,e.child=null;s!==null;){if(n=s.alternate,n!==null&&Tv(n)===null){e.child=s;break}n=s.sibling,s.sibling=t,t=s,s=n}wE(e,!0,t,null,r);break;case"together":wE(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Jy(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Qa(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Fu|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Se(153));if(e.child!==null){for(n=e.child,t=ql(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=ql(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function h8(n,e,t){switch(e.tag){case 3:sO(e),tf();break;case 5:D3(e);break;case 1:Hs(e.type)&&Ev(e);break;case 4:UM(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;xn(Sv,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(xn(Ln,Ln.current&1),e.flags|=128,null):t&e.child.childLanes?rO(n,e,t):(xn(Ln,Ln.current&1),n=Qa(n,e,t),n!==null?n.sibling:null);xn(Ln,Ln.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return oO(n,e,t);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),xn(Ln,Ln.current),i)break;return null;case 22:case 23:return e.lanes=0,nO(n,e,t)}return Qa(n,e,t)}var aO,n1,lO,cO;aO=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};n1=function(){};lO=function(n,e,t,i){var s=n.memoizedProps;if(s!==i){n=e.stateNode,du(Qo.current);var r=null;switch(t){case"input":s=_S(n,s),i=_S(n,i),r=[];break;case"select":s=Qn({},s,{value:void 0}),i=Qn({},i,{value:void 0}),r=[];break;case"textarea":s=MS(n,s),i=MS(n,i),r=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=bv)}TS(t,i);var o;t=null;for(c in s)if(!i.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Bm.hasOwnProperty(c)?r||(r=[]):(r=r||[]).push(c,null));for(c in i){var l=i[c];if(a=s!=null?s[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(r||(r=[]),r.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(r=r||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(r=r||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Bm.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&wn("scroll",n),r||a===l||(r=[])):(r=r||[]).push(c,l))}t&&(r=r||[]).push("style",t);var c=r;(e.updateQueue=c)&&(e.flags|=4)}};cO=function(n,e,t,i){t!==i&&(e.flags|=4)};function hp(n,e){if(!Rn)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function Ji(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var s=n.child;s!==null;)t|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)t|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function d8(n,e,t){var i=e.pendingProps;switch(DM(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ji(e),null;case 1:return Hs(e.type)&&wv(),Ji(e),null;case 3:return i=e.stateNode,sf(),_n(Qs),_n(as),zM(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(t0(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,no!==null&&(u1(no),no=null))),n1(n,e),Ji(e),null;case 5:GM(e);var s=du(Qm.current);if(t=e.type,n!==null&&e.stateNode!=null)lO(n,e,t,i,s),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Se(166));return Ji(e),null}if(n=du(Qo.current),t0(e)){i=e.stateNode,t=e.type;var r=e.memoizedProps;switch(i[No]=e,i[Gm]=r,n=(e.mode&1)!==0,t){case"dialog":wn("cancel",i),wn("close",i);break;case"iframe":case"object":case"embed":wn("load",i);break;case"video":case"audio":for(s=0;s<Zp.length;s++)wn(Zp[s],i);break;case"source":wn("error",i);break;case"img":case"image":case"link":wn("error",i),wn("load",i);break;case"details":wn("toggle",i);break;case"input":ZB(i,r),wn("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!r.multiple},wn("invalid",i);break;case"textarea":tR(i,r),wn("invalid",i)}TS(t,r),s=null;for(var o in r)if(r.hasOwnProperty(o)){var a=r[o];o==="children"?typeof a=="string"?i.textContent!==a&&(r.suppressHydrationWarning!==!0&&e0(i.textContent,a,n),s=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(r.suppressHydrationWarning!==!0&&e0(i.textContent,a,n),s=["children",""+a]):Bm.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&wn("scroll",i)}switch(t){case"input":WA(i),eR(i,r,!0);break;case"textarea":WA(i),nR(i);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(i.onclick=bv)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=NN(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(t,{is:i.is}):(n=o.createElement(t),t==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,t),n[No]=e,n[Gm]=i,aO(n,e,!1,!1),e.stateNode=n;e:{switch(o=BS(t,i),t){case"dialog":wn("cancel",n),wn("close",n),s=i;break;case"iframe":case"object":case"embed":wn("load",n),s=i;break;case"video":case"audio":for(s=0;s<Zp.length;s++)wn(Zp[s],n);s=i;break;case"source":wn("error",n),s=i;break;case"img":case"image":case"link":wn("error",n),wn("load",n),s=i;break;case"details":wn("toggle",n),s=i;break;case"input":ZB(n,i),s=_S(n,i),wn("invalid",n);break;case"option":s=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},s=Qn({},i,{value:void 0}),wn("invalid",n);break;case"textarea":tR(n,i),s=MS(n,i),wn("invalid",n);break;default:s=i}TS(t,s),a=s;for(r in a)if(a.hasOwnProperty(r)){var l=a[r];r==="style"?GN(n,l):r==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&ON(n,l)):r==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Rm(n,l):typeof l=="number"&&Rm(n,""+l):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(Bm.hasOwnProperty(r)?l!=null&&r==="onScroll"&&wn("scroll",n):l!=null&&AM(n,r,l,o))}switch(t){case"input":WA(n),eR(n,i,!1);break;case"textarea":WA(n),nR(n);break;case"option":i.value!=null&&n.setAttribute("value",""+Yl(i.value));break;case"select":n.multiple=!!i.multiple,r=i.value,r!=null?Ld(n,!!i.multiple,r,!1):i.defaultValue!=null&&Ld(n,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=bv)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ji(e),null;case 6:if(n&&e.stateNode!=null)cO(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Se(166));if(t=du(Qm.current),du(Qo.current),t0(e)){if(i=e.stateNode,t=e.memoizedProps,i[No]=e,(r=i.nodeValue!==t)&&(n=lr,n!==null))switch(n.tag){case 3:e0(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&e0(i.nodeValue,t,(n.mode&1)!==0)}r&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[No]=e,e.stateNode=i}return Ji(e),null;case 13:if(_n(Ln),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Rn&&ir!==null&&e.mode&1&&!(e.flags&128))M3(),tf(),e.flags|=98560,r=!1;else if(r=t0(e),i!==null&&i.dehydrated!==null){if(n===null){if(!r)throw Error(Se(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(Se(317));r[No]=e}else tf(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ji(e),r=!1}else no!==null&&(u1(no),no=null),r=!0;if(!r)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||Ln.current&1?yi===0&&(yi=3):ZM())),e.updateQueue!==null&&(e.flags|=4),Ji(e),null);case 4:return sf(),n1(n,e),n===null&&Om(e.stateNode.containerInfo),Ji(e),null;case 10:return FM(e.type._context),Ji(e),null;case 17:return Hs(e.type)&&wv(),Ji(e),null;case 19:if(_n(Ln),r=e.memoizedState,r===null)return Ji(e),null;if(i=(e.flags&128)!==0,o=r.rendering,o===null)if(i)hp(r,!1);else{if(yi!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Tv(n),o!==null){for(e.flags|=128,hp(r,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)r=t,n=i,r.flags&=14680066,o=r.alternate,o===null?(r.childLanes=0,r.lanes=n,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,n=o.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return xn(Ln,Ln.current&1|2),e.child}n=n.sibling}r.tail!==null&&Yn()>of&&(e.flags|=128,i=!0,hp(r,!1),e.lanes=4194304)}else{if(!i)if(n=Tv(o),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),hp(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!Rn)return Ji(e),null}else 2*Yn()-r.renderingStartTime>of&&t!==1073741824&&(e.flags|=128,i=!0,hp(r,!1),e.lanes=4194304);r.isBackwards?(o.sibling=e.child,e.child=o):(t=r.last,t!==null?t.sibling=o:e.child=o,r.last=o)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=Yn(),e.sibling=null,t=Ln.current,xn(Ln,i?t&1|2:t&1),e):(Ji(e),null);case 22:case 23:return YM(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?tr&1073741824&&(Ji(e),e.subtreeFlags&6&&(e.flags|=8192)):Ji(e),null;case 24:return null;case 25:return null}throw Error(Se(156,e.tag))}function f8(n,e){switch(DM(e),e.tag){case 1:return Hs(e.type)&&wv(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return sf(),_n(Qs),_n(as),zM(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return GM(e),null;case 13:if(_n(Ln),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Se(340));tf()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return _n(Ln),null;case 4:return sf(),null;case 10:return FM(e.type._context),null;case 22:case 23:return YM(),null;case 24:return null;default:return null}}var s0=!1,ts=!1,p8=typeof WeakSet=="function"?WeakSet:Set,Je=null;function bd(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){Wn(n,e,i)}else t.current=null}function i1(n,e,t){try{t()}catch(i){Wn(n,e,i)}}var jR=!1;function m8(n,e){if(GS=yv,n=p3(),BM(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{t.nodeType,r.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,u=0,h=n,p=null;t:for(;;){for(var m;h!==t||s!==0&&h.nodeType!==3||(a=o+s),h!==r||i!==0&&h.nodeType!==3||(l=o+i),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)p=h,h=m;for(;;){if(h===n)break t;if(p===t&&++c===s&&(a=o),p===r&&++u===i&&(l=o),(m=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=m}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(zS={focusedElem:n,selectionRange:t},yv=!1,Je=e;Je!==null;)if(e=Je,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Je=n;else for(;Je!==null;){e=Je;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,y=g.memoizedState,A=e.stateNode,b=A.getSnapshotBeforeUpdate(e.elementType===e.type?v:Yr(e.type,v),y);A.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Se(163))}}catch(E){Wn(e,e.return,E)}if(n=e.sibling,n!==null){n.return=e.return,Je=n;break}Je=e.return}return g=jR,jR=!1,g}function gm(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&n)===n){var r=s.destroy;s.destroy=void 0,r!==void 0&&i1(e,t,r)}s=s.next}while(s!==i)}}function Hx(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function s1(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function uO(n){var e=n.alternate;e!==null&&(n.alternate=null,uO(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[No],delete e[Gm],delete e[VS],delete e[$9],delete e[Y9])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function hO(n){return n.tag===5||n.tag===3||n.tag===4}function WR(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||hO(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function r1(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=bv));else if(i!==4&&(n=n.child,n!==null))for(r1(n,e,t),n=n.sibling;n!==null;)r1(n,e,t),n=n.sibling}function o1(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(o1(n,e,t),n=n.sibling;n!==null;)o1(n,e,t),n=n.sibling}var Ni=null,to=!1;function ll(n,e,t){for(t=t.child;t!==null;)dO(n,e,t),t=t.sibling}function dO(n,e,t){if(zo&&typeof zo.onCommitFiberUnmount=="function")try{zo.onCommitFiberUnmount(kx,t)}catch{}switch(t.tag){case 5:ts||bd(t,e);case 6:var i=Ni,s=to;Ni=null,ll(n,e,t),Ni=i,to=s,Ni!==null&&(to?(n=Ni,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Ni.removeChild(t.stateNode));break;case 18:Ni!==null&&(to?(n=Ni,t=t.stateNode,n.nodeType===8?mE(n.parentNode,t):n.nodeType===1&&mE(n,t),km(n)):mE(Ni,t.stateNode));break;case 4:i=Ni,s=to,Ni=t.stateNode.containerInfo,to=!0,ll(n,e,t),Ni=i,to=s;break;case 0:case 11:case 14:case 15:if(!ts&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var r=s,o=r.destroy;r=r.tag,o!==void 0&&(r&2||r&4)&&i1(t,e,o),s=s.next}while(s!==i)}ll(n,e,t);break;case 1:if(!ts&&(bd(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(a){Wn(t,e,a)}ll(n,e,t);break;case 21:ll(n,e,t);break;case 22:t.mode&1?(ts=(i=ts)||t.memoizedState!==null,ll(n,e,t),ts=i):ll(n,e,t);break;default:ll(n,e,t)}}function qR(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new p8),e.forEach(function(i){var s=_8.bind(null,n,i);t.has(i)||(t.add(i),i.then(s,s))})}}function qr(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var s=t[i];try{var r=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ni=a.stateNode,to=!1;break e;case 3:Ni=a.stateNode.containerInfo,to=!0;break e;case 4:Ni=a.stateNode.containerInfo,to=!0;break e}a=a.return}if(Ni===null)throw Error(Se(160));dO(r,o,s),Ni=null,to=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Wn(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)fO(e,n),e=e.sibling}function fO(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(qr(e,n),Ro(n),i&4){try{gm(3,n,n.return),Hx(3,n)}catch(v){Wn(n,n.return,v)}try{gm(5,n,n.return)}catch(v){Wn(n,n.return,v)}}break;case 1:qr(e,n),Ro(n),i&512&&t!==null&&bd(t,t.return);break;case 5:if(qr(e,n),Ro(n),i&512&&t!==null&&bd(t,t.return),n.flags&32){var s=n.stateNode;try{Rm(s,"")}catch(v){Wn(n,n.return,v)}}if(i&4&&(s=n.stateNode,s!=null)){var r=n.memoizedProps,o=t!==null?t.memoizedProps:r,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&r.type==="radio"&&r.name!=null&&kN(s,r),BS(a,o);var c=BS(a,r);for(o=0;o<l.length;o+=2){var u=l[o],h=l[o+1];u==="style"?GN(s,h):u==="dangerouslySetInnerHTML"?ON(s,h):u==="children"?Rm(s,h):AM(s,u,h,c)}switch(a){case"input":CS(s,r);break;case"textarea":FN(s,r);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!r.multiple;var m=r.value;m!=null?Ld(s,!!r.multiple,m,!1):p!==!!r.multiple&&(r.defaultValue!=null?Ld(s,!!r.multiple,r.defaultValue,!0):Ld(s,!!r.multiple,r.multiple?[]:"",!1))}s[Gm]=r}catch(v){Wn(n,n.return,v)}}break;case 6:if(qr(e,n),Ro(n),i&4){if(n.stateNode===null)throw Error(Se(162));s=n.stateNode,r=n.memoizedProps;try{s.nodeValue=r}catch(v){Wn(n,n.return,v)}}break;case 3:if(qr(e,n),Ro(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{km(e.containerInfo)}catch(v){Wn(n,n.return,v)}break;case 4:qr(e,n),Ro(n);break;case 13:qr(e,n),Ro(n),s=n.child,s.flags&8192&&(r=s.memoizedState!==null,s.stateNode.isHidden=r,!r||s.alternate!==null&&s.alternate.memoizedState!==null||(KM=Yn())),i&4&&qR(n);break;case 22:if(u=t!==null&&t.memoizedState!==null,n.mode&1?(ts=(c=ts)||u,qr(e,n),ts=c):qr(e,n),Ro(n),i&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!u&&n.mode&1)for(Je=n,u=n.child;u!==null;){for(h=Je=u;Je!==null;){switch(p=Je,m=p.child,p.tag){case 0:case 11:case 14:case 15:gm(4,p,p.return);break;case 1:bd(p,p.return);var g=p.stateNode;if(typeof g.componentWillUnmount=="function"){i=p,t=p.return;try{e=i,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(v){Wn(i,t,v)}}break;case 5:bd(p,p.return);break;case 22:if(p.memoizedState!==null){XR(h);continue}}m!==null?(m.return=p,Je=m):XR(h)}u=u.sibling}e:for(u=null,h=n;;){if(h.tag===5){if(u===null){u=h;try{s=h.stateNode,c?(r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=UN("display",o))}catch(v){Wn(n,n.return,v)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(v){Wn(n,n.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:qr(e,n),Ro(n),i&4&&qR(n);break;case 21:break;default:qr(e,n),Ro(n)}}function Ro(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(hO(t)){var i=t;break e}t=t.return}throw Error(Se(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(Rm(s,""),i.flags&=-33);var r=WR(n);o1(n,r,s);break;case 3:case 4:var o=i.stateNode.containerInfo,a=WR(n);r1(n,a,o);break;default:throw Error(Se(161))}}catch(l){Wn(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function g8(n,e,t){Je=n,pO(n)}function pO(n,e,t){for(var i=(n.mode&1)!==0;Je!==null;){var s=Je,r=s.child;if(s.tag===22&&i){var o=s.memoizedState!==null||s0;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||ts;a=s0;var c=ts;if(s0=o,(ts=l)&&!c)for(Je=s;Je!==null;)o=Je,l=o.child,o.tag===22&&o.memoizedState!==null?KR(s):l!==null?(l.return=o,Je=l):KR(s);for(;r!==null;)Je=r,pO(r),r=r.sibling;Je=s,s0=a,ts=c}JR(n)}else s.subtreeFlags&8772&&r!==null?(r.return=s,Je=r):JR(n)}}function JR(n){for(;Je!==null;){var e=Je;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ts||Hx(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!ts)if(t===null)i.componentDidMount();else{var s=e.elementType===e.type?t.memoizedProps:Yr(e.type,t.memoizedProps);i.componentDidUpdate(s,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var r=e.updateQueue;r!==null&&DR(e,r,i);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}DR(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&km(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Se(163))}ts||e.flags&512&&s1(e)}catch(p){Wn(e,e.return,p)}}if(e===n){Je=null;break}if(t=e.sibling,t!==null){t.return=e.return,Je=t;break}Je=e.return}}function XR(n){for(;Je!==null;){var e=Je;if(e===n){Je=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Je=t;break}Je=e.return}}function KR(n){for(;Je!==null;){var e=Je;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Hx(4,e)}catch(l){Wn(e,t,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(l){Wn(e,s,l)}}var r=e.return;try{s1(e)}catch(l){Wn(e,r,l)}break;case 5:var o=e.return;try{s1(e)}catch(l){Wn(e,o,l)}}}catch(l){Wn(e,e.return,l)}if(e===n){Je=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Je=a;break}Je=e.return}}var A8=Math.ceil,Dv=Ka.ReactCurrentDispatcher,JM=Ka.ReactCurrentOwner,kr=Ka.ReactCurrentBatchConfig,Zt=0,Di=null,li=null,Ui=0,tr=0,wd=cc(0),yi=0,Wm=null,Fu=0,Vx=0,XM=0,Am=null,Gs=null,KM=0,of=1/0,wa=null,Pv=!1,a1=null,jl=null,r0=!1,Ll=null,Lv=0,ym=0,l1=null,Xy=-1,Ky=0;function Es(){return Zt&6?Yn():Xy!==-1?Xy:Xy=Yn()}function Wl(n){return n.mode&1?Zt&2&&Ui!==0?Ui&-Ui:e8.transition!==null?(Ky===0&&(Ky=YN()),Ky):(n=fn,n!==0||(n=window.event,n=n===void 0?16:r3(n.type)),n):1}function fo(n,e,t,i){if(50<ym)throw ym=0,l1=null,Error(Se(185));xg(n,t,i),(!(Zt&2)||n!==Di)&&(n===Di&&(!(Zt&2)&&(Vx|=t),yi===4&&Ml(n,Ui)),Vs(n,i),t===1&&Zt===0&&!(e.mode&1)&&(of=Yn()+500,Gx&&uc()))}function Vs(n,e){var t=n.callbackNode;e9(n,e);var i=Av(n,n===Di?Ui:0);if(i===0)t!==null&&rR(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&rR(t),e===1)n.tag===0?Z9($R.bind(null,n)):_3($R.bind(null,n)),X9(function(){!(Zt&6)&&uc()}),t=null;else{switch(ZN(i)){case 1:t=wM;break;case 4:t=KN;break;case 16:t=gv;break;case 536870912:t=$N;break;default:t=gv}t=wO(t,mO.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function mO(n,e){if(Xy=-1,Ky=0,Zt&6)throw Error(Se(327));var t=n.callbackNode;if(Ud()&&n.callbackNode!==t)return null;var i=Av(n,n===Di?Ui:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=kv(n,i);else{e=i;var s=Zt;Zt|=2;var r=AO();(Di!==n||Ui!==e)&&(wa=null,of=Yn()+500,Eu(n,e));do try{x8();break}catch(a){gO(n,a)}while(1);kM(),Dv.current=r,Zt=s,li!==null?e=0:(Di=null,Ui=0,e=yi)}if(e!==0){if(e===2&&(s=kS(n),s!==0&&(i=s,e=c1(n,s))),e===1)throw t=Wm,Eu(n,0),Ml(n,i),Vs(n,Yn()),t;if(e===6)Ml(n,i);else{if(s=n.current.alternate,!(i&30)&&!y8(s)&&(e=kv(n,i),e===2&&(r=kS(n),r!==0&&(i=r,e=c1(n,r))),e===1))throw t=Wm,Eu(n,0),Ml(n,i),Vs(n,Yn()),t;switch(n.finishedWork=s,n.finishedLanes=i,e){case 0:case 1:throw Error(Se(345));case 2:Zc(n,Gs,wa);break;case 3:if(Ml(n,i),(i&130023424)===i&&(e=KM+500-Yn(),10<e)){if(Av(n,0)!==0)break;if(s=n.suspendedLanes,(s&i)!==i){Es(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=HS(Zc.bind(null,n,Gs,wa),e);break}Zc(n,Gs,wa);break;case 4:if(Ml(n,i),(i&4194240)===i)break;for(e=n.eventTimes,s=-1;0<i;){var o=31-ho(i);r=1<<o,o=e[o],o>s&&(s=o),i&=~r}if(i=s,i=Yn()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*A8(i/1960))-i,10<i){n.timeoutHandle=HS(Zc.bind(null,n,Gs,wa),i);break}Zc(n,Gs,wa);break;case 5:Zc(n,Gs,wa);break;default:throw Error(Se(329))}}}return Vs(n,Yn()),n.callbackNode===t?mO.bind(null,n):null}function c1(n,e){var t=Am;return n.current.memoizedState.isDehydrated&&(Eu(n,e).flags|=256),n=kv(n,e),n!==2&&(e=Gs,Gs=t,e!==null&&u1(e)),n}function u1(n){Gs===null?Gs=n:Gs.push.apply(Gs,n)}function y8(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var s=t[i],r=s.getSnapshot;s=s.value;try{if(!Ao(r(),s))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ml(n,e){for(e&=~XM,e&=~Vx,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-ho(e),i=1<<t;n[t]=-1,e&=~i}}function $R(n){if(Zt&6)throw Error(Se(327));Ud();var e=Av(n,0);if(!(e&1))return Vs(n,Yn()),null;var t=kv(n,e);if(n.tag!==0&&t===2){var i=kS(n);i!==0&&(e=i,t=c1(n,i))}if(t===1)throw t=Wm,Eu(n,0),Ml(n,e),Vs(n,Yn()),t;if(t===6)throw Error(Se(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Zc(n,Gs,wa),Vs(n,Yn()),null}function $M(n,e){var t=Zt;Zt|=1;try{return n(e)}finally{Zt=t,Zt===0&&(of=Yn()+500,Gx&&uc())}}function Nu(n){Ll!==null&&Ll.tag===0&&!(Zt&6)&&Ud();var e=Zt;Zt|=1;var t=kr.transition,i=fn;try{if(kr.transition=null,fn=1,n)return n()}finally{fn=i,kr.transition=t,Zt=e,!(Zt&6)&&uc()}}function YM(){tr=wd.current,_n(wd)}function Eu(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,J9(t)),li!==null)for(t=li.return;t!==null;){var i=t;switch(DM(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&wv();break;case 3:sf(),_n(Qs),_n(as),zM();break;case 5:GM(i);break;case 4:sf();break;case 13:_n(Ln);break;case 19:_n(Ln);break;case 10:FM(i.type._context);break;case 22:case 23:YM()}t=t.return}if(Di=n,li=n=ql(n.current,null),Ui=tr=e,yi=0,Wm=null,XM=Vx=Fu=0,Gs=Am=null,hu!==null){for(e=0;e<hu.length;e++)if(t=hu[e],i=t.interleaved,i!==null){t.interleaved=null;var s=i.next,r=t.pending;if(r!==null){var o=r.next;r.next=s,i.next=o}t.pending=i}hu=null}return n}function gO(n,e){do{var t=li;try{if(kM(),Wy.current=Rv,Bv){for(var i=Gn.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Bv=!1}if(ku=0,Ii=gi=Gn=null,mm=!1,Hm=0,JM.current=null,t===null||t.return===null){yi=1,Wm=e,li=null;break}e:{var r=n,o=t.return,a=t,l=e;if(e=Ui,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=OR(o);if(m!==null){m.flags&=-257,UR(m,o,a,r,e),m.mode&1&&NR(r,c,e),e=m,l=c;var g=e.updateQueue;if(g===null){var v=new Set;v.add(l),e.updateQueue=v}else g.add(l);break e}else{if(!(e&1)){NR(r,c,e),ZM();break e}l=Error(Se(426))}}else if(Rn&&a.mode&1){var y=OR(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),UR(y,o,a,r,e),PM(rf(l,a));break e}}r=l=rf(l,a),yi!==4&&(yi=2),Am===null?Am=[r]:Am.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,e&=-e,r.lanes|=e;var A=Z3(r,l,e);RR(r,A);break e;case 1:a=l;var b=r.type,w=r.stateNode;if(!(r.flags&128)&&(typeof b.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(jl===null||!jl.has(w)))){r.flags|=65536,e&=-e,r.lanes|=e;var E=eO(r,a,e);RR(r,E);break e}}r=r.return}while(r!==null)}vO(t)}catch(M){e=M,li===t&&t!==null&&(li=t=t.return);continue}break}while(1)}function AO(){var n=Dv.current;return Dv.current=Rv,n===null?Rv:n}function ZM(){(yi===0||yi===3||yi===2)&&(yi=4),Di===null||!(Fu&268435455)&&!(Vx&268435455)||Ml(Di,Ui)}function kv(n,e){var t=Zt;Zt|=2;var i=AO();(Di!==n||Ui!==e)&&(wa=null,Eu(n,e));do try{v8();break}catch(s){gO(n,s)}while(1);if(kM(),Zt=t,Dv.current=i,li!==null)throw Error(Se(261));return Di=null,Ui=0,yi}function v8(){for(;li!==null;)yO(li)}function x8(){for(;li!==null&&!jH();)yO(li)}function yO(n){var e=bO(n.alternate,n,tr);n.memoizedProps=n.pendingProps,e===null?vO(n):li=e,JM.current=null}function vO(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=f8(t,e),t!==null){t.flags&=32767,li=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{yi=6,li=null;return}}else if(t=d8(t,e,tr),t!==null){li=t;return}if(e=e.sibling,e!==null){li=e;return}li=e=n}while(e!==null);yi===0&&(yi=5)}function Zc(n,e,t){var i=fn,s=kr.transition;try{kr.transition=null,fn=1,b8(n,e,t,i)}finally{kr.transition=s,fn=i}return null}function b8(n,e,t,i){do Ud();while(Ll!==null);if(Zt&6)throw Error(Se(327));t=n.finishedWork;var s=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Se(177));n.callbackNode=null,n.callbackPriority=0;var r=t.lanes|t.childLanes;if(t9(n,r),n===Di&&(li=Di=null,Ui=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||r0||(r0=!0,wO(gv,function(){return Ud(),null})),r=(t.flags&15990)!==0,t.subtreeFlags&15990||r){r=kr.transition,kr.transition=null;var o=fn;fn=1;var a=Zt;Zt|=4,JM.current=null,m8(n,t),fO(t,n),z9(zS),yv=!!GS,zS=GS=null,n.current=t,g8(t),WH(),Zt=a,fn=o,kr.transition=r}else n.current=t;if(r0&&(r0=!1,Ll=n,Lv=s),r=n.pendingLanes,r===0&&(jl=null),XH(t.stateNode),Vs(n,Yn()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)s=e[t],i(s.value,{componentStack:s.stack,digest:s.digest});if(Pv)throw Pv=!1,n=a1,a1=null,n;return Lv&1&&n.tag!==0&&Ud(),r=n.pendingLanes,r&1?n===l1?ym++:(ym=0,l1=n):ym=0,uc(),null}function Ud(){if(Ll!==null){var n=ZN(Lv),e=kr.transition,t=fn;try{if(kr.transition=null,fn=16>n?16:n,Ll===null)var i=!1;else{if(n=Ll,Ll=null,Lv=0,Zt&6)throw Error(Se(331));var s=Zt;for(Zt|=4,Je=n.current;Je!==null;){var r=Je,o=r.child;if(Je.flags&16){var a=r.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Je=c;Je!==null;){var u=Je;switch(u.tag){case 0:case 11:case 15:gm(8,u,r)}var h=u.child;if(h!==null)h.return=u,Je=h;else for(;Je!==null;){u=Je;var p=u.sibling,m=u.return;if(uO(u),u===c){Je=null;break}if(p!==null){p.return=m,Je=p;break}Je=m}}}var g=r.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var y=v.sibling;v.sibling=null,v=y}while(v!==null)}}Je=r}}if(r.subtreeFlags&2064&&o!==null)o.return=r,Je=o;else e:for(;Je!==null;){if(r=Je,r.flags&2048)switch(r.tag){case 0:case 11:case 15:gm(9,r,r.return)}var A=r.sibling;if(A!==null){A.return=r.return,Je=A;break e}Je=r.return}}var b=n.current;for(Je=b;Je!==null;){o=Je;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,Je=w;else e:for(o=b;Je!==null;){if(a=Je,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Hx(9,a)}}catch(M){Wn(a,a.return,M)}if(a===o){Je=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,Je=E;break e}Je=a.return}}if(Zt=s,uc(),zo&&typeof zo.onPostCommitFiberRoot=="function")try{zo.onPostCommitFiberRoot(kx,n)}catch{}i=!0}return i}finally{fn=t,kr.transition=e}}return!1}function YR(n,e,t){e=rf(t,e),e=Z3(n,e,1),n=Vl(n,e,1),e=Es(),n!==null&&(xg(n,1,e),Vs(n,e))}function Wn(n,e,t){if(n.tag===3)YR(n,n,t);else for(;e!==null;){if(e.tag===3){YR(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(jl===null||!jl.has(i))){n=rf(t,n),n=eO(e,n,1),e=Vl(e,n,1),n=Es(),e!==null&&(xg(e,1,n),Vs(e,n));break}}e=e.return}}function w8(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=Es(),n.pingedLanes|=n.suspendedLanes&t,Di===n&&(Ui&t)===t&&(yi===4||yi===3&&(Ui&130023424)===Ui&&500>Yn()-KM?Eu(n,0):XM|=t),Vs(n,e)}function xO(n,e){e===0&&(n.mode&1?(e=XA,XA<<=1,!(XA&130023424)&&(XA=4194304)):e=1);var t=Es();n=za(n,e),n!==null&&(xg(n,e,t),Vs(n,t))}function E8(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),xO(n,t)}function _8(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,s=n.memoizedState;s!==null&&(t=s.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(Se(314))}i!==null&&i.delete(e),xO(n,t)}var bO;bO=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Qs.current)zs=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return zs=!1,h8(n,e,t);zs=!!(n.flags&131072)}else zs=!1,Rn&&e.flags&1048576&&C3(e,Cv,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Jy(n,e),n=e.pendingProps;var s=ef(e,as.current);Od(e,t),s=HM(null,e,i,n,s,t);var r=VM();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Hs(i)?(r=!0,Ev(e)):r=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,OM(e),s.updater=Qx,e.stateNode=s,s._reactInternals=e,KS(e,i,n,t),e=ZS(null,e,i,!0,r,t)):(e.tag=0,Rn&&r&&RM(e),ys(null,e,s,t),e=e.child),e;case 16:i=e.elementType;e:{switch(Jy(n,e),n=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=S8(i),n=Yr(i,n),s){case 0:e=YS(null,e,i,n,t);break e;case 1:e=QR(null,e,i,n,t);break e;case 11:e=GR(null,e,i,n,t);break e;case 14:e=zR(null,e,i,Yr(i.type,n),t);break e}throw Error(Se(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Yr(i,s),YS(n,e,i,s,t);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Yr(i,s),QR(n,e,i,s,t);case 3:e:{if(sO(e),n===null)throw Error(Se(387));i=e.pendingProps,r=e.memoizedState,s=r.element,R3(n,e),Iv(e,i,null,t);var o=e.memoizedState;if(i=o.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){s=rf(Error(Se(423)),e),e=HR(n,e,i,t,s);break e}else if(i!==s){s=rf(Error(Se(424)),e),e=HR(n,e,i,t,s);break e}else for(ir=Hl(e.stateNode.containerInfo.firstChild),lr=e,Rn=!0,no=null,t=T3(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(tf(),i===s){e=Qa(n,e,t);break e}ys(n,e,i,t)}e=e.child}return e;case 5:return D3(e),n===null&&qS(e),i=e.type,s=e.pendingProps,r=n!==null?n.memoizedProps:null,o=s.children,QS(i,s)?o=null:r!==null&&QS(i,r)&&(e.flags|=32),iO(n,e),ys(n,e,o,t),e.child;case 6:return n===null&&qS(e),null;case 13:return rO(n,e,t);case 4:return UM(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=nf(e,null,i,t):ys(n,e,i,t),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Yr(i,s),GR(n,e,i,s,t);case 7:return ys(n,e,e.pendingProps,t),e.child;case 8:return ys(n,e,e.pendingProps.children,t),e.child;case 12:return ys(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,r=e.memoizedProps,o=s.value,xn(Sv,i._currentValue),i._currentValue=o,r!==null)if(Ao(r.value,o)){if(r.children===s.children&&!Qs.current){e=Qa(n,e,t);break e}}else for(r=e.child,r!==null&&(r.return=e);r!==null;){var a=r.dependencies;if(a!==null){o=r.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(r.tag===1){l=La(-1,t&-t),l.tag=2;var c=r.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}r.lanes|=t,l=r.alternate,l!==null&&(l.lanes|=t),JS(r.return,t,e),a.lanes|=t;break}l=l.next}}else if(r.tag===10)o=r.type===e.type?null:r.child;else if(r.tag===18){if(o=r.return,o===null)throw Error(Se(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),JS(o,t,e),o=r.sibling}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===e){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}ys(n,e,s.children,t),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,Od(e,t),s=Or(s),i=i(s),e.flags|=1,ys(n,e,i,t),e.child;case 14:return i=e.type,s=Yr(i,e.pendingProps),s=Yr(i.type,s),zR(n,e,i,s,t);case 15:return tO(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Yr(i,s),Jy(n,e),e.tag=1,Hs(i)?(n=!0,Ev(e)):n=!1,Od(e,t),Y3(e,i,s),KS(e,i,s,t),ZS(null,e,i,!0,n,t);case 19:return oO(n,e,t);case 22:return nO(n,e,t)}throw Error(Se(156,e.tag))};function wO(n,e){return XN(n,e)}function C8(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pr(n,e,t,i){return new C8(n,e,t,i)}function eI(n){return n=n.prototype,!(!n||!n.isReactComponent)}function S8(n){if(typeof n=="function")return eI(n)?1:0;if(n!=null){if(n=n.$$typeof,n===vM)return 11;if(n===xM)return 14}return 2}function ql(n,e){var t=n.alternate;return t===null?(t=Pr(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function $y(n,e,t,i,s,r){var o=2;if(i=n,typeof n=="function")eI(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case dd:return _u(t.children,s,r,e);case yM:o=8,s|=8;break;case xS:return n=Pr(12,t,e,s|2),n.elementType=xS,n.lanes=r,n;case bS:return n=Pr(13,t,e,s),n.elementType=bS,n.lanes=r,n;case wS:return n=Pr(19,t,e,s),n.elementType=wS,n.lanes=r,n;case DN:return jx(t,s,r,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case BN:o=10;break e;case RN:o=9;break e;case vM:o=11;break e;case xM:o=14;break e;case wl:o=16,i=null;break e}throw Error(Se(130,n==null?n:typeof n,""))}return e=Pr(o,t,e,s),e.elementType=n,e.type=i,e.lanes=r,e}function _u(n,e,t,i){return n=Pr(7,n,i,e),n.lanes=t,n}function jx(n,e,t,i){return n=Pr(22,n,i,e),n.elementType=DN,n.lanes=t,n.stateNode={isHidden:!1},n}function EE(n,e,t){return n=Pr(6,n,null,e),n.lanes=t,n}function _E(n,e,t){return e=Pr(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function M8(n,e,t,i,s){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=sE(0),this.expirationTimes=sE(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sE(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function tI(n,e,t,i,s,r,o,a,l){return n=new M8(n,e,t,a,l),e===1?(e=1,r===!0&&(e|=8)):e=0,r=Pr(3,null,null,e),n.current=r,r.stateNode=n,r.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},OM(r),n}function I8(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:hd,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function EO(n){if(!n)return Zl;n=n._reactInternals;e:{if(Zu(n)!==n||n.tag!==1)throw Error(Se(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Hs(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Se(171))}if(n.tag===1){var t=n.type;if(Hs(t))return E3(n,t,e)}return e}function _O(n,e,t,i,s,r,o,a,l){return n=tI(t,i,!0,n,s,r,o,a,l),n.context=EO(null),t=n.current,i=Es(),s=Wl(t),r=La(i,s),r.callback=e??null,Vl(t,r,s),n.current.lanes=s,xg(n,s,i),Vs(n,i),n}function Wx(n,e,t,i){var s=e.current,r=Es(),o=Wl(s);return t=EO(t),e.context===null?e.context=t:e.pendingContext=t,e=La(r,o),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=Vl(s,e,o),n!==null&&(fo(n,s,o,r),jy(n,s,o)),o}function Fv(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function ZR(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function nI(n,e){ZR(n,e),(n=n.alternate)&&ZR(n,e)}function T8(){return null}var CO=typeof reportError=="function"?reportError:function(n){console.error(n)};function iI(n){this._internalRoot=n}qx.prototype.render=iI.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Se(409));Wx(n,e,null,null)};qx.prototype.unmount=iI.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Nu(function(){Wx(null,n,null,null)}),e[Ga]=null}};function qx(n){this._internalRoot=n}qx.prototype.unstable_scheduleHydration=function(n){if(n){var e=n3();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Sl.length&&e!==0&&e<Sl[t].priority;t++);Sl.splice(t,0,n),t===0&&s3(n)}};function sI(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Jx(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function e2(){}function B8(n,e,t,i,s){if(s){if(typeof i=="function"){var r=i;i=function(){var c=Fv(o);r.call(c)}}var o=_O(e,i,n,0,null,!1,!1,"",e2);return n._reactRootContainer=o,n[Ga]=o.current,Om(n.nodeType===8?n.parentNode:n),Nu(),o}for(;s=n.lastChild;)n.removeChild(s);if(typeof i=="function"){var a=i;i=function(){var c=Fv(l);a.call(c)}}var l=tI(n,0,!1,null,null,!1,!1,"",e2);return n._reactRootContainer=l,n[Ga]=l.current,Om(n.nodeType===8?n.parentNode:n),Nu(function(){Wx(e,l,t,i)}),l}function Xx(n,e,t,i,s){var r=t._reactRootContainer;if(r){var o=r;if(typeof s=="function"){var a=s;s=function(){var l=Fv(o);a.call(l)}}Wx(e,o,n,s)}else o=B8(t,e,n,s,i);return Fv(o)}e3=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Yp(e.pendingLanes);t!==0&&(EM(e,t|1),Vs(e,Yn()),!(Zt&6)&&(of=Yn()+500,uc()))}break;case 13:Nu(function(){var i=za(n,1);if(i!==null){var s=Es();fo(i,n,1,s)}}),nI(n,1)}};_M=function(n){if(n.tag===13){var e=za(n,134217728);if(e!==null){var t=Es();fo(e,n,134217728,t)}nI(n,134217728)}};t3=function(n){if(n.tag===13){var e=Wl(n),t=za(n,e);if(t!==null){var i=Es();fo(t,n,e,i)}nI(n,e)}};n3=function(){return fn};i3=function(n,e){var t=fn;try{return fn=n,e()}finally{fn=t}};DS=function(n,e,t){switch(e){case"input":if(CS(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var s=Ux(i);if(!s)throw Error(Se(90));LN(i),CS(i,s)}}}break;case"textarea":FN(n,t);break;case"select":e=t.value,e!=null&&Ld(n,!!t.multiple,e,!1)}};HN=$M;VN=Nu;var R8={usingClientEntryPoint:!1,Events:[wg,gd,Ux,zN,QN,$M]},dp={findFiberByHostInstance:uu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},D8={bundleType:dp.bundleType,version:dp.version,rendererPackageName:dp.rendererPackageName,rendererConfig:dp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ka.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=qN(n),n===null?null:n.stateNode},findFiberByHostInstance:dp.findFiberByHostInstance||T8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var o0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!o0.isDisabled&&o0.supportsFiber)try{kx=o0.inject(D8),zo=o0}catch{}}pr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R8;pr.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sI(e))throw Error(Se(200));return I8(n,e,null,t)};pr.createRoot=function(n,e){if(!sI(n))throw Error(Se(299));var t=!1,i="",s=CO;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=tI(n,1,!1,null,null,t,!1,i,s),n[Ga]=e.current,Om(n.nodeType===8?n.parentNode:n),new iI(e)};pr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Se(188)):(n=Object.keys(n).join(","),Error(Se(268,n)));return n=qN(e),n=n===null?null:n.stateNode,n};pr.flushSync=function(n){return Nu(n)};pr.hydrate=function(n,e,t){if(!Jx(e))throw Error(Se(200));return Xx(null,n,e,!0,t)};pr.hydrateRoot=function(n,e,t){if(!sI(n))throw Error(Se(405));var i=t!=null&&t.hydratedSources||null,s=!1,r="",o=CO;if(t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=_O(e,null,n,1,t??null,s,!1,r,o),n[Ga]=e.current,Om(n),i)for(n=0;n<i.length;n++)t=i[n],s=t._getVersion,s=s(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,s]:e.mutableSourceEagerHydrationData.push(t,s);return new qx(e)};pr.render=function(n,e,t){if(!Jx(e))throw Error(Se(200));return Xx(null,n,e,!1,t)};pr.unmountComponentAtNode=function(n){if(!Jx(n))throw Error(Se(40));return n._reactRootContainer?(Nu(function(){Xx(null,null,n,!1,function(){n._reactRootContainer=null,n[Ga]=null})}),!0):!1};pr.unstable_batchedUpdates=$M;pr.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!Jx(t))throw Error(Se(200));if(n==null||n._reactInternals===void 0)throw Error(Se(38));return Xx(n,e,t,!1,i)};pr.version="18.3.1-next-f1338f8080-20240426";function SO(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(SO)}catch(n){console.error(n)}}SO(),SN.exports=pr;var P8=SN.exports,t2=P8;yS.createRoot=t2.createRoot,yS.hydrateRoot=t2.hydrateRoot;var L8={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const k8=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),F8=(n,e)=>{const t=ee.forwardRef(({color:i="currentColor",size:s=24,strokeWidth:r=2,absoluteStrokeWidth:o,children:a,...l},c)=>ee.createElement("svg",{ref:c,...L8,width:s,height:s,stroke:i,strokeWidth:o?Number(r)*24/Number(s):r,className:`lucide lucide-${k8(n)}`,...l},[...e.map(([u,h])=>ee.createElement(u,h)),...(Array.isArray(a)?a:[a])||[]]));return t.displayName=`${n}`,t};var Jn=F8;const Nv=Jn("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),Jl=Jn("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),rI=Jn("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),N8=Jn("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),O8=Jn("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]),MO=Jn("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),oI=Jn("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),_g=Jn("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),U8=Jn("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),IO=Jn("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]]),n2=Jn("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),G8=Jn("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),z8=Jn("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]),TO=Jn("Satellite",[["path",{d:"M13 7 9 3 5 7l4 4",key:"vyckw6"}],["path",{d:"m17 11 4 4-4 4-4-4",key:"rchckc"}],["path",{d:"m8 12 4 4 6-6-4-4Z",key:"1sshf7"}],["path",{d:"m16 8 3-3",key:"x428zp"}],["path",{d:"M9 21a6 6 0 0 0-6-6",key:"1iajcf"}]]),af=Jn("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),oo=Jn("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),BO=Jn("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),i2=Jn("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Q8=Jn("Waves",[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]]),H8=Jn("Wind",[["path",{d:"M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2",key:"1k4u03"}],["path",{d:"M9.6 4.6A2 2 0 1 1 11 8H2",key:"b7d0fd"}],["path",{d:"M12.6 19.4A2 2 0 1 0 14 16H2",key:"1p5cb3"}]]),V8=Jn("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Kx=Jn("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Tf="172",j8={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},W8={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},RO=0,h1=1,DO=2,q8=3,PO=0,$x=1,vm=2,Zr=3,fr=0,Pi=1,ci=2,po=0,Cu=1,d1=2,f1=3,p1=4,LO=5,Il=100,kO=101,FO=102,NO=103,OO=104,UO=200,GO=201,zO=202,QO=203,Ov=204,Uv=205,HO=206,VO=207,jO=208,WO=209,qO=210,JO=211,XO=212,KO=213,$O=214,Gv=0,zv=1,Qv=2,Ou=3,Hv=4,Vv=5,jv=6,Wv=7,Cg=0,YO=1,ZO=2,Fr=0,aI=1,lI=2,cI=3,Yx=4,eU=5,uI=6,lf=7,m1="attached",tU="detached",ec=300,Ha=301,tc=302,cf=303,qm=304,Bf=306,ls=1e3,Cn=1001,jo=1002,Mn=1003,hc=1004,J8=1004,ao=1005,X8=1005,Bt=1006,Ho=1007,K8=1007,vi=1008,g1=1008,kn=1009,Zx=1010,eb=1011,uf=1012,Sg=1013,Wo=1014,Sn=1015,Zn=1016,tb=1017,nb=1018,Uu=1020,hI=35902,dI=1021,fI=1022,dn=1023,pI=1024,mI=1025,Su=1026,Gu=1027,Ba=1028,Mg=1029,kl=1030,ib=1031,$8=1032,sb=1033,xm=33776,Gd=33777,bm=33778,zd=33779,Jm=35840,qv=35841,Xm=35842,Jv=35843,Km=36196,$m=37492,Ym=37496,hf=37808,Xv=37809,Kv=37810,$v=37811,df=37812,Yv=37813,Zv=37814,ex=37815,tx=37816,nx=37817,ix=37818,sx=37819,rx=37820,ox=37821,Qd=36492,ax=36494,Zm=36495,gI=36283,lx=36284,cx=36285,ux=36286,ff=2200,Mu=2201,eg=2202,nc=2300,Va=2301,Yy=2302,fu=2400,pu=2401,tg=2402,rb=2500,AI=2501,yI=0,Ig=1,zu=2,nU=3200,iU=3201,Y8=3202,Z8=3203,dc=0,sU=1,nr="",mn="srgb",yn="srgb-linear",ng="linear",un="srgb",e5=0,eu=7680,t5=7681,n5=7682,i5=7683,s5=34055,r5=34056,o5=5386,a5=512,l5=513,c5=514,u5=515,h5=516,d5=517,f5=518,A1=519,rU=512,oU=513,aU=514,vI=515,lU=516,cU=517,uU=518,hU=519,ig=35044,p5=35048,m5=35040,g5=35045,A5=35049,y5=35041,v5=35046,x5=35050,b5=35042,w5="100",y1="300 es",lo=2e3,sg=2001;let js=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const s=this._listeners[e];if(s!==void 0){const r=s.indexOf(t);r!==-1&&s.splice(r,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const s=i.slice(0);for(let r=0,o=s.length;r<o;r++)s[r].call(this,e);e.target=null}}};const Xi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let s2=1234567;const Iu=Math.PI/180,pf=180/Math.PI;function cr(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Xi[n&255]+Xi[n>>8&255]+Xi[n>>16&255]+Xi[n>>24&255]+"-"+Xi[e&255]+Xi[e>>8&255]+"-"+Xi[e>>16&15|64]+Xi[e>>24&255]+"-"+Xi[t&63|128]+Xi[t>>8&255]+"-"+Xi[t>>16&255]+Xi[t>>24&255]+Xi[i&255]+Xi[i>>8&255]+Xi[i>>16&255]+Xi[i>>24&255]).toLowerCase()}function _t(n,e,t){return Math.max(e,Math.min(t,n))}function xI(n,e){return(n%e+e)%e}function E5(n,e,t,i,s){return i+(n-e)*(s-i)/(t-e)}function _5(n,e,t){return n!==e?(t-n)/(e-n):0}function wm(n,e,t){return(1-t)*n+t*e}function C5(n,e,t,i){return wm(n,e,1-Math.exp(-t*i))}function S5(n,e=1){return e-Math.abs(xI(n,e*2)-e)}function M5(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function I5(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function T5(n,e){return n+Math.floor(Math.random()*(e-n+1))}function B5(n,e){return n+Math.random()*(e-n)}function R5(n){return n*(.5-Math.random())}function D5(n){n!==void 0&&(s2=n);let e=s2+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function P5(n){return n*Iu}function L5(n){return n*pf}function k5(n){return(n&n-1)===0&&n!==0}function F5(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function N5(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function O5(n,e,t,i,s){const r=Math.cos,o=Math.sin,a=r(t/2),l=o(t/2),c=r((e+i)/2),u=o((e+i)/2),h=r((e-i)/2),p=o((e-i)/2),m=r((i-e)/2),g=o((i-e)/2);switch(s){case"XYX":n.set(a*u,l*h,l*p,a*c);break;case"YZY":n.set(l*p,a*u,l*h,a*c);break;case"ZXZ":n.set(l*h,l*p,a*u,a*c);break;case"XZX":n.set(a*u,l*g,l*m,a*c);break;case"YXY":n.set(l*m,a*u,l*g,a*c);break;case"ZYZ":n.set(l*g,l*m,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function ws(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function It(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const mf={DEG2RAD:Iu,RAD2DEG:pf,generateUUID:cr,clamp:_t,euclideanModulo:xI,mapLinear:E5,inverseLerp:_5,lerp:wm,damp:C5,pingpong:S5,smoothstep:M5,smootherstep:I5,randInt:T5,randFloat:B5,randFloatSpread:R5,seededRandom:D5,degToRad:P5,radToDeg:L5,isPowerOfTwo:k5,ceilPowerOfTwo:F5,floorPowerOfTwo:N5,setQuaternionFromProperEuler:O5,normalize:It,denormalize:ws};class me{constructor(e=0,t=0){me.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6],this.y=s[1]*t+s[4]*i+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=_t(this.x,e.x,t.x),this.y=_t(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=_t(this.x,e,t),this.y=_t(this.y,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(_t(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(_t(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),s=Math.sin(t),r=this.x-e.x,o=this.y-e.y;return this.x=r*i-o*s+e.x,this.y=r*s+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class bt{constructor(e,t,i,s,r,o,a,l,c){bt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,s,r,o,a,l,c)}set(e,t,i,s,r,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=s,u[2]=a,u[3]=t,u[4]=r,u[5]=l,u[6]=i,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,s=t.elements,r=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],u=i[4],h=i[7],p=i[2],m=i[5],g=i[8],v=s[0],y=s[3],A=s[6],b=s[1],w=s[4],E=s[7],M=s[2],I=s[5],D=s[8];return r[0]=o*v+a*b+l*M,r[3]=o*y+a*w+l*I,r[6]=o*A+a*E+l*D,r[1]=c*v+u*b+h*M,r[4]=c*y+u*w+h*I,r[7]=c*A+u*E+h*D,r[2]=p*v+m*b+g*M,r[5]=p*y+m*w+g*I,r[8]=p*A+m*E+g*D,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],s=e[2],r=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-i*r*u+i*a*l+s*r*c-s*o*l}invert(){const e=this.elements,t=e[0],i=e[1],s=e[2],r=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=u*o-a*c,p=a*l-u*r,m=c*r-o*l,g=t*h+i*p+s*m;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);const v=1/g;return e[0]=h*v,e[1]=(s*c-u*i)*v,e[2]=(a*i-s*o)*v,e[3]=p*v,e[4]=(u*t-s*l)*v,e[5]=(s*r-a*t)*v,e[6]=m*v,e[7]=(i*l-c*t)*v,e[8]=(o*t-i*r)*v,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,s,r,o,a){const l=Math.cos(r),c=Math.sin(r);return this.set(i*l,i*c,-i*(l*o+c*a)+o+e,-s*c,s*l,-s*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(CE.makeScale(e,t)),this}rotate(e){return this.premultiply(CE.makeRotation(-e)),this}translate(e,t){return this.premultiply(CE.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let s=0;s<9;s++)if(t[s]!==i[s])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const CE=new bt;function dU(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const U5={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Ed(n,e){return new U5[n](e)}function rg(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function fU(){const n=rg("canvas");return n.style.display="block",n}const r2={};function ad(n){n in r2||(r2[n]=!0,console.warn(n))}function G5(n,e,t){return new Promise(function(i,s){function r(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:s();break;case n.TIMEOUT_EXPIRED:setTimeout(r,t);break;default:i()}}setTimeout(r,t)})}function z5(n){const e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function Q5(n){const e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const o2=new bt().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),a2=new bt().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function H5(){const n={enabled:!0,workingColorSpace:yn,spaces:{},convert:function(s,r,o){return this.enabled===!1||r===o||!r||!o||(this.spaces[r].transfer===un&&(s.r=ka(s.r),s.g=ka(s.g),s.b=ka(s.b)),this.spaces[r].primaries!==this.spaces[o].primaries&&(s.applyMatrix3(this.spaces[r].toXYZ),s.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===un&&(s.r=Hd(s.r),s.g=Hd(s.g),s.b=Hd(s.b))),s},fromWorkingColorSpace:function(s,r){return this.convert(s,this.workingColorSpace,r)},toWorkingColorSpace:function(s,r){return this.convert(s,r,this.workingColorSpace)},getPrimaries:function(s){return this.spaces[s].primaries},getTransfer:function(s){return s===nr?ng:this.spaces[s].transfer},getLuminanceCoefficients:function(s,r=this.workingColorSpace){return s.fromArray(this.spaces[r].luminanceCoefficients)},define:function(s){Object.assign(this.spaces,s)},_getMatrix:function(s,r,o){return s.copy(this.spaces[r].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(s){return this.spaces[s].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(s=this.workingColorSpace){return this.spaces[s].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[yn]:{primaries:e,whitePoint:i,transfer:ng,toXYZ:o2,fromXYZ:a2,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:mn},outputColorSpaceConfig:{drawingBufferColorSpace:mn}},[mn]:{primaries:e,whitePoint:i,transfer:un,toXYZ:o2,fromXYZ:a2,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:mn}}}),n}const Ht=H5();function ka(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Hd(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let xh;class pU{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{xh===void 0&&(xh=rg("canvas")),xh.width=e.width,xh.height=e.height;const i=xh.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=xh}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=rg("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const s=i.getImageData(0,0,e.width,e.height),r=s.data;for(let o=0;o<r.length;o++)r[o]=ka(r[o]/255)*255;return i.putImageData(s,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(ka(t[i]/255)*255):t[i]=ka(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let V5=0;class Fl{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:V5++}),this.uuid=cr(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},s=this.data;if(s!==null){let r;if(Array.isArray(s)){r=[];for(let o=0,a=s.length;o<a;o++)s[o].isDataTexture?r.push(SE(s[o].image)):r.push(SE(s[o]))}else r=SE(s);i.url=r}return t||(e.images[this.uuid]=i),i}}function SE(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?pU.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let j5=0,ln=class Zy extends js{constructor(e=Zy.DEFAULT_IMAGE,t=Zy.DEFAULT_MAPPING,i=Cn,s=Cn,r=Bt,o=vi,a=dn,l=kn,c=Zy.DEFAULT_ANISOTROPY,u=nr){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:j5++}),this.uuid=cr(),this.name="",this.source=new Fl(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=s,this.magFilter=r,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new me(0,0),this.repeat=new me(1,1),this.center=new me(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new bt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==ec)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ls:e.x=e.x-Math.floor(e.x);break;case Cn:e.x=e.x<0?0:1;break;case jo:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case ls:e.y=e.y-Math.floor(e.y);break;case Cn:e.y=e.y<0?0:1;break;case jo:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}};ln.DEFAULT_IMAGE=null;ln.DEFAULT_MAPPING=ec;ln.DEFAULT_ANISOTROPY=1;class Yt{constructor(e=0,t=0,i=0,s=1){Yt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,s){return this.x=e,this.y=t,this.z=i,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,s=this.z,r=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*s+o[12]*r,this.y=o[1]*t+o[5]*i+o[9]*s+o[13]*r,this.z=o[2]*t+o[6]*i+o[10]*s+o[14]*r,this.w=o[3]*t+o[7]*i+o[11]*s+o[15]*r,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,s,r;const l=e.elements,c=l[0],u=l[4],h=l[8],p=l[1],m=l[5],g=l[9],v=l[2],y=l[6],A=l[10];if(Math.abs(u-p)<.01&&Math.abs(h-v)<.01&&Math.abs(g-y)<.01){if(Math.abs(u+p)<.1&&Math.abs(h+v)<.1&&Math.abs(g+y)<.1&&Math.abs(c+m+A-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const w=(c+1)/2,E=(m+1)/2,M=(A+1)/2,I=(u+p)/4,D=(h+v)/4,B=(g+y)/4;return w>E&&w>M?w<.01?(i=0,s=.707106781,r=.707106781):(i=Math.sqrt(w),s=I/i,r=D/i):E>M?E<.01?(i=.707106781,s=0,r=.707106781):(s=Math.sqrt(E),i=I/s,r=B/s):M<.01?(i=.707106781,s=.707106781,r=0):(r=Math.sqrt(M),i=D/r,s=B/r),this.set(i,s,r,t),this}let b=Math.sqrt((y-g)*(y-g)+(h-v)*(h-v)+(p-u)*(p-u));return Math.abs(b)<.001&&(b=1),this.x=(y-g)/b,this.y=(h-v)/b,this.z=(p-u)/b,this.w=Math.acos((c+m+A-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=_t(this.x,e.x,t.x),this.y=_t(this.y,e.y,t.y),this.z=_t(this.z,e.z,t.z),this.w=_t(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=_t(this.x,e,t),this.y=_t(this.y,e,t),this.z=_t(this.z,e,t),this.w=_t(this.w,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(_t(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class ob extends js{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Yt(0,0,e,t),this.scissorTest=!1,this.viewport=new Yt(0,0,e,t);const s={width:e,height:t,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Bt,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const r=new ln(s,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);r.flipY=!1,r.generateMipmaps=i.generateMipmaps,r.internalFormat=i.internalFormat,this.textures=[];const o=i.count;for(let a=0;a<o;a++)this.textures[a]=r.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let s=0,r=this.textures.length;s<r;s++)this.textures[s].image.width=e,this.textures[s].image.height=t,this.textures[s].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,s=e.textures.length;i<s;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0,this.textures[i].renderTarget=this;const t=Object.assign({},e.texture.image);return this.texture.source=new Fl(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Cs extends ob{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class Tg extends ln{constructor(e=null,t=1,i=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:s},this.magFilter=Mn,this.minFilter=Mn,this.wrapR=Cn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class W5 extends Cs{constructor(e=1,t=1,i=1,s={}){super(e,t,s),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new Tg(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class Bg extends ln{constructor(e=null,t=1,i=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:s},this.magFilter=Mn,this.minFilter=Mn,this.wrapR=Cn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class q5 extends Cs{constructor(e=1,t=1,i=1,s={}){super(e,t,s),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new Bg(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class qn{constructor(e=0,t=0,i=0,s=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=s}static slerpFlat(e,t,i,s,r,o,a){let l=i[s+0],c=i[s+1],u=i[s+2],h=i[s+3];const p=r[o+0],m=r[o+1],g=r[o+2],v=r[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=h;return}if(a===1){e[t+0]=p,e[t+1]=m,e[t+2]=g,e[t+3]=v;return}if(h!==v||l!==p||c!==m||u!==g){let y=1-a;const A=l*p+c*m+u*g+h*v,b=A>=0?1:-1,w=1-A*A;if(w>Number.EPSILON){const M=Math.sqrt(w),I=Math.atan2(M,A*b);y=Math.sin(y*I)/M,a=Math.sin(a*I)/M}const E=a*b;if(l=l*y+p*E,c=c*y+m*E,u=u*y+g*E,h=h*y+v*E,y===1-a){const M=1/Math.sqrt(l*l+c*c+u*u+h*h);l*=M,c*=M,u*=M,h*=M}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=h}static multiplyQuaternionsFlat(e,t,i,s,r,o){const a=i[s],l=i[s+1],c=i[s+2],u=i[s+3],h=r[o],p=r[o+1],m=r[o+2],g=r[o+3];return e[t]=a*g+u*h+l*m-c*p,e[t+1]=l*g+u*p+c*h-a*m,e[t+2]=c*g+u*m+a*p-l*h,e[t+3]=u*g-a*h-l*p-c*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,s){return this._x=e,this._y=t,this._z=i,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,s=e._y,r=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(i/2),u=a(s/2),h=a(r/2),p=l(i/2),m=l(s/2),g=l(r/2);switch(o){case"XYZ":this._x=p*u*h+c*m*g,this._y=c*m*h-p*u*g,this._z=c*u*g+p*m*h,this._w=c*u*h-p*m*g;break;case"YXZ":this._x=p*u*h+c*m*g,this._y=c*m*h-p*u*g,this._z=c*u*g-p*m*h,this._w=c*u*h+p*m*g;break;case"ZXY":this._x=p*u*h-c*m*g,this._y=c*m*h+p*u*g,this._z=c*u*g+p*m*h,this._w=c*u*h-p*m*g;break;case"ZYX":this._x=p*u*h-c*m*g,this._y=c*m*h+p*u*g,this._z=c*u*g-p*m*h,this._w=c*u*h+p*m*g;break;case"YZX":this._x=p*u*h+c*m*g,this._y=c*m*h+p*u*g,this._z=c*u*g-p*m*h,this._w=c*u*h-p*m*g;break;case"XZY":this._x=p*u*h-c*m*g,this._y=c*m*h-p*u*g,this._z=c*u*g+p*m*h,this._w=c*u*h+p*m*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,s=Math.sin(i);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],s=t[4],r=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],h=t[10],p=i+a+h;if(p>0){const m=.5/Math.sqrt(p+1);this._w=.25/m,this._x=(u-l)*m,this._y=(r-c)*m,this._z=(o-s)*m}else if(i>a&&i>h){const m=2*Math.sqrt(1+i-a-h);this._w=(u-l)/m,this._x=.25*m,this._y=(s+o)/m,this._z=(r+c)/m}else if(a>h){const m=2*Math.sqrt(1+a-i-h);this._w=(r-c)/m,this._x=(s+o)/m,this._y=.25*m,this._z=(l+u)/m}else{const m=2*Math.sqrt(1+h-i-a);this._w=(o-s)/m,this._x=(r+c)/m,this._y=(l+u)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(_t(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const s=Math.min(1,t/i);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,s=e._y,r=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=i*u+o*a+s*c-r*l,this._y=s*u+o*l+r*a-i*c,this._z=r*u+o*c+i*l-s*a,this._w=o*u-i*a-s*l-r*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,s=this._y,r=this._z,o=this._w;let a=o*e._w+i*e._x+s*e._y+r*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=s,this._z=r,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-t;return this._w=m*o+t*this._w,this._x=m*i+t*this._x,this._y=m*s+t*this._y,this._z=m*r+t*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),h=Math.sin((1-t)*u)/c,p=Math.sin(t*u)/c;return this._w=o*h+this._w*p,this._x=i*h+this._x*p,this._y=s*h+this._y*p,this._z=r*h+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),s=Math.sqrt(1-i),r=Math.sqrt(i);return this.set(s*Math.sin(e),s*Math.cos(e),r*Math.sin(t),r*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class O{constructor(e=0,t=0,i=0){O.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(l2.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(l2.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,s=this.z,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6]*s,this.y=r[1]*t+r[4]*i+r[7]*s,this.z=r[2]*t+r[5]*i+r[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,s=this.z,r=e.elements,o=1/(r[3]*t+r[7]*i+r[11]*s+r[15]);return this.x=(r[0]*t+r[4]*i+r[8]*s+r[12])*o,this.y=(r[1]*t+r[5]*i+r[9]*s+r[13])*o,this.z=(r[2]*t+r[6]*i+r[10]*s+r[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,s=this.z,r=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*s-a*i),u=2*(a*t-r*s),h=2*(r*i-o*t);return this.x=t+l*c+o*h-a*u,this.y=i+l*u+a*c-r*h,this.z=s+l*h+r*u-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,s=this.z,r=e.elements;return this.x=r[0]*t+r[4]*i+r[8]*s,this.y=r[1]*t+r[5]*i+r[9]*s,this.z=r[2]*t+r[6]*i+r[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=_t(this.x,e.x,t.x),this.y=_t(this.y,e.y,t.y),this.z=_t(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=_t(this.x,e,t),this.y=_t(this.y,e,t),this.z=_t(this.z,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(_t(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,s=e.y,r=e.z,o=t.x,a=t.y,l=t.z;return this.x=s*l-r*a,this.y=r*o-i*l,this.z=i*a-s*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return ME.copy(this).projectOnVector(e),this.sub(ME)}reflect(e){return this.sub(ME.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(_t(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,s=this.z-e.z;return t*t+i*i+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const s=Math.sin(t)*e;return this.x=s*Math.sin(i),this.y=Math.cos(t)*e,this.z=s*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=s,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const ME=new O,l2=new qn;class Nn{constructor(e=new O(1/0,1/0,1/0),t=new O(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Jr.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Jr.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Jr.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const r=i.getAttribute("position");if(t===!0&&r!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=r.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,Jr):Jr.fromBufferAttribute(r,o),Jr.applyMatrix4(e.matrixWorld),this.expandByPoint(Jr);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),a0.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),a0.copy(i.boundingBox)),a0.applyMatrix4(e.matrixWorld),this.union(a0)}const s=e.children;for(let r=0,o=s.length;r<o;r++)this.expandByObject(s[r],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Jr),Jr.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(fp),l0.subVectors(this.max,fp),bh.subVectors(e.a,fp),wh.subVectors(e.b,fp),Eh.subVectors(e.c,fp),cl.subVectors(wh,bh),ul.subVectors(Eh,wh),Cc.subVectors(bh,Eh);let t=[0,-cl.z,cl.y,0,-ul.z,ul.y,0,-Cc.z,Cc.y,cl.z,0,-cl.x,ul.z,0,-ul.x,Cc.z,0,-Cc.x,-cl.y,cl.x,0,-ul.y,ul.x,0,-Cc.y,Cc.x,0];return!IE(t,bh,wh,Eh,l0)||(t=[1,0,0,0,1,0,0,0,1],!IE(t,bh,wh,Eh,l0))?!1:(c0.crossVectors(cl,ul),t=[c0.x,c0.y,c0.z],IE(t,bh,wh,Eh,l0))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Jr).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Jr).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(oa[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),oa[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),oa[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),oa[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),oa[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),oa[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),oa[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),oa[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(oa),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const oa=[new O,new O,new O,new O,new O,new O,new O,new O],Jr=new O,a0=new Nn,bh=new O,wh=new O,Eh=new O,cl=new O,ul=new O,Cc=new O,fp=new O,l0=new O,c0=new O,Sc=new O;function IE(n,e,t,i,s){for(let r=0,o=n.length-3;r<=o;r+=3){Sc.fromArray(n,r);const a=s.x*Math.abs(Sc.x)+s.y*Math.abs(Sc.y)+s.z*Math.abs(Sc.z),l=e.dot(Sc),c=t.dot(Sc),u=i.dot(Sc);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const J5=new Nn,pp=new O,TE=new O;class ui{constructor(e=new O,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):J5.setFromPoints(e).getCenter(i);let s=0;for(let r=0,o=e.length;r<o;r++)s=Math.max(s,i.distanceToSquared(e[r]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;pp.subVectors(e,this.center);const t=pp.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),s=(i-this.radius)*.5;this.center.addScaledVector(pp,s/i),this.radius+=s}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(TE.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(pp.copy(e.center).add(TE)),this.expandByPoint(pp.copy(e.center).sub(TE))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const aa=new O,BE=new O,u0=new O,hl=new O,RE=new O,h0=new O,DE=new O;class Rf{constructor(e=new O,t=new O(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,aa)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=aa.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(aa.copy(this.origin).addScaledVector(this.direction,t),aa.distanceToSquared(e))}distanceSqToSegment(e,t,i,s){BE.copy(e).add(t).multiplyScalar(.5),u0.copy(t).sub(e).normalize(),hl.copy(this.origin).sub(BE);const r=e.distanceTo(t)*.5,o=-this.direction.dot(u0),a=hl.dot(this.direction),l=-hl.dot(u0),c=hl.lengthSq(),u=Math.abs(1-o*o);let h,p,m,g;if(u>0)if(h=o*l-a,p=o*a-l,g=r*u,h>=0)if(p>=-g)if(p<=g){const v=1/u;h*=v,p*=v,m=h*(h+o*p+2*a)+p*(o*h+p+2*l)+c}else p=r,h=Math.max(0,-(o*p+a)),m=-h*h+p*(p+2*l)+c;else p=-r,h=Math.max(0,-(o*p+a)),m=-h*h+p*(p+2*l)+c;else p<=-g?(h=Math.max(0,-(-o*r+a)),p=h>0?-r:Math.min(Math.max(-r,-l),r),m=-h*h+p*(p+2*l)+c):p<=g?(h=0,p=Math.min(Math.max(-r,-l),r),m=p*(p+2*l)+c):(h=Math.max(0,-(o*r+a)),p=h>0?r:Math.min(Math.max(-r,-l),r),m=-h*h+p*(p+2*l)+c);else p=o>0?-r:r,h=Math.max(0,-(o*p+a)),m=-h*h+p*(p+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,h),s&&s.copy(BE).addScaledVector(u0,p),m}intersectSphere(e,t){aa.subVectors(e.center,this.origin);const i=aa.dot(this.direction),s=aa.dot(aa)-i*i,r=e.radius*e.radius;if(s>r)return null;const o=Math.sqrt(r-s),a=i-o,l=i+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,s,r,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,h=1/this.direction.z,p=this.origin;return c>=0?(i=(e.min.x-p.x)*c,s=(e.max.x-p.x)*c):(i=(e.max.x-p.x)*c,s=(e.min.x-p.x)*c),u>=0?(r=(e.min.y-p.y)*u,o=(e.max.y-p.y)*u):(r=(e.max.y-p.y)*u,o=(e.min.y-p.y)*u),i>o||r>s||((r>i||isNaN(i))&&(i=r),(o<s||isNaN(s))&&(s=o),h>=0?(a=(e.min.z-p.z)*h,l=(e.max.z-p.z)*h):(a=(e.max.z-p.z)*h,l=(e.min.z-p.z)*h),i>l||a>s)||((a>i||i!==i)&&(i=a),(l<s||s!==s)&&(s=l),s<0)?null:this.at(i>=0?i:s,t)}intersectsBox(e){return this.intersectBox(e,aa)!==null}intersectTriangle(e,t,i,s,r){RE.subVectors(t,e),h0.subVectors(i,e),DE.crossVectors(RE,h0);let o=this.direction.dot(DE),a;if(o>0){if(s)return null;a=1}else if(o<0)a=-1,o=-o;else return null;hl.subVectors(this.origin,e);const l=a*this.direction.dot(h0.crossVectors(hl,h0));if(l<0)return null;const c=a*this.direction.dot(RE.cross(hl));if(c<0||l+c>o)return null;const u=-a*hl.dot(DE);return u<0?null:this.at(u/o,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class tt{constructor(e,t,i,s,r,o,a,l,c,u,h,p,m,g,v,y){tt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,s,r,o,a,l,c,u,h,p,m,g,v,y)}set(e,t,i,s,r,o,a,l,c,u,h,p,m,g,v,y){const A=this.elements;return A[0]=e,A[4]=t,A[8]=i,A[12]=s,A[1]=r,A[5]=o,A[9]=a,A[13]=l,A[2]=c,A[6]=u,A[10]=h,A[14]=p,A[3]=m,A[7]=g,A[11]=v,A[15]=y,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new tt().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,s=1/_h.setFromMatrixColumn(e,0).length(),r=1/_h.setFromMatrixColumn(e,1).length(),o=1/_h.setFromMatrixColumn(e,2).length();return t[0]=i[0]*s,t[1]=i[1]*s,t[2]=i[2]*s,t[3]=0,t[4]=i[4]*r,t[5]=i[5]*r,t[6]=i[6]*r,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,s=e.y,r=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(s),c=Math.sin(s),u=Math.cos(r),h=Math.sin(r);if(e.order==="XYZ"){const p=o*u,m=o*h,g=a*u,v=a*h;t[0]=l*u,t[4]=-l*h,t[8]=c,t[1]=m+g*c,t[5]=p-v*c,t[9]=-a*l,t[2]=v-p*c,t[6]=g+m*c,t[10]=o*l}else if(e.order==="YXZ"){const p=l*u,m=l*h,g=c*u,v=c*h;t[0]=p+v*a,t[4]=g*a-m,t[8]=o*c,t[1]=o*h,t[5]=o*u,t[9]=-a,t[2]=m*a-g,t[6]=v+p*a,t[10]=o*l}else if(e.order==="ZXY"){const p=l*u,m=l*h,g=c*u,v=c*h;t[0]=p-v*a,t[4]=-o*h,t[8]=g+m*a,t[1]=m+g*a,t[5]=o*u,t[9]=v-p*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const p=o*u,m=o*h,g=a*u,v=a*h;t[0]=l*u,t[4]=g*c-m,t[8]=p*c+v,t[1]=l*h,t[5]=v*c+p,t[9]=m*c-g,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const p=o*l,m=o*c,g=a*l,v=a*c;t[0]=l*u,t[4]=v-p*h,t[8]=g*h+m,t[1]=h,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=m*h+g,t[10]=p-v*h}else if(e.order==="XZY"){const p=o*l,m=o*c,g=a*l,v=a*c;t[0]=l*u,t[4]=-h,t[8]=c*u,t[1]=p*h+v,t[5]=o*u,t[9]=m*h-g,t[2]=g*h-m,t[6]=a*u,t[10]=v*h+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(X5,e,K5)}lookAt(e,t,i){const s=this.elements;return $s.subVectors(e,t),$s.lengthSq()===0&&($s.z=1),$s.normalize(),dl.crossVectors(i,$s),dl.lengthSq()===0&&(Math.abs(i.z)===1?$s.x+=1e-4:$s.z+=1e-4,$s.normalize(),dl.crossVectors(i,$s)),dl.normalize(),d0.crossVectors($s,dl),s[0]=dl.x,s[4]=d0.x,s[8]=$s.x,s[1]=dl.y,s[5]=d0.y,s[9]=$s.y,s[2]=dl.z,s[6]=d0.z,s[10]=$s.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,s=t.elements,r=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],u=i[1],h=i[5],p=i[9],m=i[13],g=i[2],v=i[6],y=i[10],A=i[14],b=i[3],w=i[7],E=i[11],M=i[15],I=s[0],D=s[4],B=s[8],R=s[12],T=s[1],k=s[5],H=s[9],Q=s[13],W=s[2],X=s[6],J=s[10],K=s[14],L=s[3],V=s[7],j=s[11],$=s[15];return r[0]=o*I+a*T+l*W+c*L,r[4]=o*D+a*k+l*X+c*V,r[8]=o*B+a*H+l*J+c*j,r[12]=o*R+a*Q+l*K+c*$,r[1]=u*I+h*T+p*W+m*L,r[5]=u*D+h*k+p*X+m*V,r[9]=u*B+h*H+p*J+m*j,r[13]=u*R+h*Q+p*K+m*$,r[2]=g*I+v*T+y*W+A*L,r[6]=g*D+v*k+y*X+A*V,r[10]=g*B+v*H+y*J+A*j,r[14]=g*R+v*Q+y*K+A*$,r[3]=b*I+w*T+E*W+M*L,r[7]=b*D+w*k+E*X+M*V,r[11]=b*B+w*H+E*J+M*j,r[15]=b*R+w*Q+E*K+M*$,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],s=e[8],r=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],h=e[6],p=e[10],m=e[14],g=e[3],v=e[7],y=e[11],A=e[15];return g*(+r*l*h-s*c*h-r*a*p+i*c*p+s*a*m-i*l*m)+v*(+t*l*m-t*c*p+r*o*p-s*o*m+s*c*u-r*l*u)+y*(+t*c*h-t*a*m-r*o*h+i*o*m+r*a*u-i*c*u)+A*(-s*a*u-t*l*h+t*a*p+s*o*h-i*o*p+i*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=t,s[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],s=e[2],r=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],p=e[10],m=e[11],g=e[12],v=e[13],y=e[14],A=e[15],b=h*y*c-v*p*c+v*l*m-a*y*m-h*l*A+a*p*A,w=g*p*c-u*y*c-g*l*m+o*y*m+u*l*A-o*p*A,E=u*v*c-g*h*c+g*a*m-o*v*m-u*a*A+o*h*A,M=g*h*l-u*v*l-g*a*p+o*v*p+u*a*y-o*h*y,I=t*b+i*w+s*E+r*M;if(I===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const D=1/I;return e[0]=b*D,e[1]=(v*p*r-h*y*r-v*s*m+i*y*m+h*s*A-i*p*A)*D,e[2]=(a*y*r-v*l*r+v*s*c-i*y*c-a*s*A+i*l*A)*D,e[3]=(h*l*r-a*p*r-h*s*c+i*p*c+a*s*m-i*l*m)*D,e[4]=w*D,e[5]=(u*y*r-g*p*r+g*s*m-t*y*m-u*s*A+t*p*A)*D,e[6]=(g*l*r-o*y*r-g*s*c+t*y*c+o*s*A-t*l*A)*D,e[7]=(o*p*r-u*l*r+u*s*c-t*p*c-o*s*m+t*l*m)*D,e[8]=E*D,e[9]=(g*h*r-u*v*r-g*i*m+t*v*m+u*i*A-t*h*A)*D,e[10]=(o*v*r-g*a*r+g*i*c-t*v*c-o*i*A+t*a*A)*D,e[11]=(u*a*r-o*h*r-u*i*c+t*h*c+o*i*m-t*a*m)*D,e[12]=M*D,e[13]=(u*v*s-g*h*s+g*i*p-t*v*p-u*i*y+t*h*y)*D,e[14]=(g*a*s-o*v*s-g*i*l+t*v*l+o*i*y-t*a*y)*D,e[15]=(o*h*s-u*a*s+u*i*l-t*h*l-o*i*p+t*a*p)*D,this}scale(e){const t=this.elements,i=e.x,s=e.y,r=e.z;return t[0]*=i,t[4]*=s,t[8]*=r,t[1]*=i,t[5]*=s,t[9]*=r,t[2]*=i,t[6]*=s,t[10]*=r,t[3]*=i,t[7]*=s,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,s))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),s=Math.sin(t),r=1-i,o=e.x,a=e.y,l=e.z,c=r*o,u=r*a;return this.set(c*o+i,c*a-s*l,c*l+s*a,0,c*a+s*l,u*a+i,u*l-s*o,0,c*l-s*a,u*l+s*o,r*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,s,r,o){return this.set(1,i,r,0,e,1,o,0,t,s,1,0,0,0,0,1),this}compose(e,t,i){const s=this.elements,r=t._x,o=t._y,a=t._z,l=t._w,c=r+r,u=o+o,h=a+a,p=r*c,m=r*u,g=r*h,v=o*u,y=o*h,A=a*h,b=l*c,w=l*u,E=l*h,M=i.x,I=i.y,D=i.z;return s[0]=(1-(v+A))*M,s[1]=(m+E)*M,s[2]=(g-w)*M,s[3]=0,s[4]=(m-E)*I,s[5]=(1-(p+A))*I,s[6]=(y+b)*I,s[7]=0,s[8]=(g+w)*D,s[9]=(y-b)*D,s[10]=(1-(p+v))*D,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,t,i){const s=this.elements;let r=_h.set(s[0],s[1],s[2]).length();const o=_h.set(s[4],s[5],s[6]).length(),a=_h.set(s[8],s[9],s[10]).length();this.determinant()<0&&(r=-r),e.x=s[12],e.y=s[13],e.z=s[14],Xr.copy(this);const c=1/r,u=1/o,h=1/a;return Xr.elements[0]*=c,Xr.elements[1]*=c,Xr.elements[2]*=c,Xr.elements[4]*=u,Xr.elements[5]*=u,Xr.elements[6]*=u,Xr.elements[8]*=h,Xr.elements[9]*=h,Xr.elements[10]*=h,t.setFromRotationMatrix(Xr),i.x=r,i.y=o,i.z=a,this}makePerspective(e,t,i,s,r,o,a=lo){const l=this.elements,c=2*r/(t-e),u=2*r/(i-s),h=(t+e)/(t-e),p=(i+s)/(i-s);let m,g;if(a===lo)m=-(o+r)/(o-r),g=-2*o*r/(o-r);else if(a===sg)m=-o/(o-r),g=-o*r/(o-r);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=u,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=m,l[14]=g,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,s,r,o,a=lo){const l=this.elements,c=1/(t-e),u=1/(i-s),h=1/(o-r),p=(t+e)*c,m=(i+s)*u;let g,v;if(a===lo)g=(o+r)*h,v=-2*h;else if(a===sg)g=r*h,v=-1*h;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-p,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=v,l[14]=-g,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let s=0;s<16;s++)if(t[s]!==i[s])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const _h=new O,Xr=new tt,X5=new O(0,0,0),K5=new O(1,1,1),dl=new O,d0=new O,$s=new O,c2=new tt,u2=new qn;class Ss{constructor(e=0,t=0,i=0,s=Ss.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,s=this._order){return this._x=e,this._y=t,this._z=i,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const s=e.elements,r=s[0],o=s[4],a=s[8],l=s[1],c=s[5],u=s[9],h=s[2],p=s[6],m=s[10];switch(t){case"XYZ":this._y=Math.asin(_t(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,m),this._z=Math.atan2(-o,r)):(this._x=Math.atan2(p,c),this._z=0);break;case"YXZ":this._x=Math.asin(-_t(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-h,r),this._z=0);break;case"ZXY":this._x=Math.asin(_t(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-h,m),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,r));break;case"ZYX":this._y=Math.asin(-_t(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(p,m),this._z=Math.atan2(l,r)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(_t(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-h,r)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-_t(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,c),this._y=Math.atan2(a,r)):(this._x=Math.atan2(-u,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return c2.makeRotationFromQuaternion(e),this.setFromRotationMatrix(c2,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return u2.setFromEuler(this),this.setFromQuaternion(u2,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Ss.DEFAULT_ORDER="XYZ";class Tu{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let $5=0;const h2=new O,Ch=new qn,la=new tt,f0=new O,mp=new O,Y5=new O,Z5=new qn,d2=new O(1,0,0),f2=new O(0,1,0),p2=new O(0,0,1),m2={type:"added"},e6={type:"removed"},Sh={type:"childadded",child:null},PE={type:"childremoved",child:null};class Rt extends js{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:$5++}),this.uuid=cr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Rt.DEFAULT_UP.clone();const e=new O,t=new Ss,i=new qn,s=new O(1,1,1);function r(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(r),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new tt},normalMatrix:{value:new bt}}),this.matrix=new tt,this.matrixWorld=new tt,this.matrixAutoUpdate=Rt.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Rt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Tu,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Ch.setFromAxisAngle(e,t),this.quaternion.multiply(Ch),this}rotateOnWorldAxis(e,t){return Ch.setFromAxisAngle(e,t),this.quaternion.premultiply(Ch),this}rotateX(e){return this.rotateOnAxis(d2,e)}rotateY(e){return this.rotateOnAxis(f2,e)}rotateZ(e){return this.rotateOnAxis(p2,e)}translateOnAxis(e,t){return h2.copy(e).applyQuaternion(this.quaternion),this.position.add(h2.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(d2,e)}translateY(e){return this.translateOnAxis(f2,e)}translateZ(e){return this.translateOnAxis(p2,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(la.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?f0.copy(e):f0.set(e,t,i);const s=this.parent;this.updateWorldMatrix(!0,!1),mp.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?la.lookAt(mp,f0,this.up):la.lookAt(f0,mp,this.up),this.quaternion.setFromRotationMatrix(la),s&&(la.extractRotation(s.matrixWorld),Ch.setFromRotationMatrix(la),this.quaternion.premultiply(Ch.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(m2),Sh.child=e,this.dispatchEvent(Sh),Sh.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(e6),PE.child=e,this.dispatchEvent(PE),PE.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),la.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),la.multiply(e.parent.matrixWorld)),e.applyMatrix4(la),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(m2),Sh.child=e,this.dispatchEvent(Sh),Sh.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,s=this.children.length;i<s;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const s=this.children;for(let r=0,o=s.length;r<o;r++)s[r].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(mp,e,Y5),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(mp,Z5,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const s=this.children;for(let r=0,o=s.length;r<o;r++)s[r].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(s.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),this.boundingBox!==null&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()}));function r(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=r(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const h=l[c];r(e.shapes,h)}else r(e.shapes,l)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(r(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(r(e.materials,this.material[l]));s.material=a}else s.material=r(e.materials,this.material);if(this.children.length>0){s.children=[];for(let a=0;a<this.children.length;a++)s.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];s.animations.push(r(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),h=o(e.shapes),p=o(e.skeletons),m=o(e.animations),g=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),u.length>0&&(i.images=u),h.length>0&&(i.shapes=h),p.length>0&&(i.skeletons=p),m.length>0&&(i.animations=m),g.length>0&&(i.nodes=g)}return i.object=s,i;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const s=e.children[i];this.add(s.clone())}return this}}Rt.DEFAULT_UP=new O(0,1,0);Rt.DEFAULT_MATRIX_AUTO_UPDATE=!0;Rt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Kr=new O,ca=new O,LE=new O,ua=new O,Mh=new O,Ih=new O,g2=new O,kE=new O,FE=new O,NE=new O,OE=new Yt,UE=new Yt,GE=new Yt;class ns{constructor(e=new O,t=new O,i=new O){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,s){s.subVectors(i,t),Kr.subVectors(e,t),s.cross(Kr);const r=s.lengthSq();return r>0?s.multiplyScalar(1/Math.sqrt(r)):s.set(0,0,0)}static getBarycoord(e,t,i,s,r){Kr.subVectors(s,t),ca.subVectors(i,t),LE.subVectors(e,t);const o=Kr.dot(Kr),a=Kr.dot(ca),l=Kr.dot(LE),c=ca.dot(ca),u=ca.dot(LE),h=o*c-a*a;if(h===0)return r.set(0,0,0),null;const p=1/h,m=(c*l-a*u)*p,g=(o*u-a*l)*p;return r.set(1-m-g,g,m)}static containsPoint(e,t,i,s){return this.getBarycoord(e,t,i,s,ua)===null?!1:ua.x>=0&&ua.y>=0&&ua.x+ua.y<=1}static getInterpolation(e,t,i,s,r,o,a,l){return this.getBarycoord(e,t,i,s,ua)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(r,ua.x),l.addScaledVector(o,ua.y),l.addScaledVector(a,ua.z),l)}static getInterpolatedAttribute(e,t,i,s,r,o){return OE.setScalar(0),UE.setScalar(0),GE.setScalar(0),OE.fromBufferAttribute(e,t),UE.fromBufferAttribute(e,i),GE.fromBufferAttribute(e,s),o.setScalar(0),o.addScaledVector(OE,r.x),o.addScaledVector(UE,r.y),o.addScaledVector(GE,r.z),o}static isFrontFacing(e,t,i,s){return Kr.subVectors(i,t),ca.subVectors(e,t),Kr.cross(ca).dot(s)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,s){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,t,i,s){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Kr.subVectors(this.c,this.b),ca.subVectors(this.a,this.b),Kr.cross(ca).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return ns.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return ns.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,s,r){return ns.getInterpolation(e,this.a,this.b,this.c,t,i,s,r)}containsPoint(e){return ns.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return ns.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,s=this.b,r=this.c;let o,a;Mh.subVectors(s,i),Ih.subVectors(r,i),kE.subVectors(e,i);const l=Mh.dot(kE),c=Ih.dot(kE);if(l<=0&&c<=0)return t.copy(i);FE.subVectors(e,s);const u=Mh.dot(FE),h=Ih.dot(FE);if(u>=0&&h<=u)return t.copy(s);const p=l*h-u*c;if(p<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(i).addScaledVector(Mh,o);NE.subVectors(e,r);const m=Mh.dot(NE),g=Ih.dot(NE);if(g>=0&&m<=g)return t.copy(r);const v=m*c-l*g;if(v<=0&&c>=0&&g<=0)return a=c/(c-g),t.copy(i).addScaledVector(Ih,a);const y=u*g-m*h;if(y<=0&&h-u>=0&&m-g>=0)return g2.subVectors(r,s),a=(h-u)/(h-u+(m-g)),t.copy(s).addScaledVector(g2,a);const A=1/(y+v+p);return o=v*A,a=p*A,t.copy(i).addScaledVector(Mh,o).addScaledVector(Ih,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const mU={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},fl={h:0,s:0,l:0},p0={h:0,s:0,l:0};function zE(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class Me{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const s=e;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=mn){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Ht.toWorkingColorSpace(this,t),this}setRGB(e,t,i,s=Ht.workingColorSpace){return this.r=e,this.g=t,this.b=i,Ht.toWorkingColorSpace(this,s),this}setHSL(e,t,i,s=Ht.workingColorSpace){if(e=xI(e,1),t=_t(t,0,1),i=_t(i,0,1),t===0)this.r=this.g=this.b=i;else{const r=i<=.5?i*(1+t):i+t-i*t,o=2*i-r;this.r=zE(o,r,e+1/3),this.g=zE(o,r,e),this.b=zE(o,r,e-1/3)}return Ht.toWorkingColorSpace(this,s),this}setStyle(e,t=mn){function i(r){r!==void 0&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(e)){let r;const o=s[1],a=s[2];switch(o){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,t);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,t);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const r=s[1],o=r.length;if(o===3)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(r,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=mn){const i=mU[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=ka(e.r),this.g=ka(e.g),this.b=ka(e.b),this}copyLinearToSRGB(e){return this.r=Hd(e.r),this.g=Hd(e.g),this.b=Hd(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=mn){return Ht.fromWorkingColorSpace(Ki.copy(this),e),Math.round(_t(Ki.r*255,0,255))*65536+Math.round(_t(Ki.g*255,0,255))*256+Math.round(_t(Ki.b*255,0,255))}getHexString(e=mn){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Ht.workingColorSpace){Ht.fromWorkingColorSpace(Ki.copy(this),t);const i=Ki.r,s=Ki.g,r=Ki.b,o=Math.max(i,s,r),a=Math.min(i,s,r);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const h=o-a;switch(c=u<=.5?h/(o+a):h/(2-o-a),o){case i:l=(s-r)/h+(s<r?6:0);break;case s:l=(r-i)/h+2;break;case r:l=(i-s)/h+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=Ht.workingColorSpace){return Ht.fromWorkingColorSpace(Ki.copy(this),t),e.r=Ki.r,e.g=Ki.g,e.b=Ki.b,e}getStyle(e=mn){Ht.fromWorkingColorSpace(Ki.copy(this),e);const t=Ki.r,i=Ki.g,s=Ki.b;return e!==mn?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(s*255)})`}offsetHSL(e,t,i){return this.getHSL(fl),this.setHSL(fl.h+e,fl.s+t,fl.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(fl),e.getHSL(p0);const i=wm(fl.h,p0.h,t),s=wm(fl.s,p0.s,t),r=wm(fl.l,p0.l,t);return this.setHSL(i,s,r),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,s=this.b,r=e.elements;return this.r=r[0]*t+r[3]*i+r[6]*s,this.g=r[1]*t+r[4]*i+r[7]*s,this.b=r[2]*t+r[5]*i+r[8]*s,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Ki=new Me;Me.NAMES=mU;let t6=0,zn=class extends js{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:t6++}),this.uuid=cr(),this.name="",this.type="Material",this.blending=Cu,this.side=fr,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Ov,this.blendDst=Uv,this.blendEquation=Il,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Me(0,0,0),this.blendAlpha=0,this.depthFunc=Ou,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=A1,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=eu,this.stencilZFail=eu,this.stencilZPass=eu,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const s=this[t];if(s===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(i):s&&s.isVector3&&i&&i.isVector3?s.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Cu&&(i.blending=this.blending),this.side!==fr&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==Ov&&(i.blendSrc=this.blendSrc),this.blendDst!==Uv&&(i.blendDst=this.blendDst),this.blendEquation!==Il&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Ou&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==A1&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==eu&&(i.stencilFail=this.stencilFail),this.stencilZFail!==eu&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==eu&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function s(r){const o=[];for(const a in r){const l=r[a];delete l.metadata,o.push(l)}return o}if(t){const r=s(e.textures),o=s(e.images);r.length>0&&(i.textures=r),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const s=t.length;i=new Array(s);for(let r=0;r!==s;++r)i[r]=t[r].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}};class Un extends zn{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Me(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ss,this.combine=Cg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Sa=n6();function n6(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),s=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(i[l]=0,i[l|256]=32768,s[l]=24,s[l|256]=24):c<-14?(i[l]=1024>>-c-14,i[l|256]=1024>>-c-14|32768,s[l]=-c-1,s[l|256]=-c-1):c<=15?(i[l]=c+15<<10,i[l|256]=c+15<<10|32768,s[l]=13,s[l|256]=13):c<128?(i[l]=31744,i[l|256]=64512,s[l]=24,s[l|256]=24):(i[l]=31744,i[l|256]=64512,s[l]=13,s[l|256]=13)}const r=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;!(c&8388608);)c<<=1,u-=8388608;c&=-8388609,u+=947912704,r[l]=c|u}for(let l=1024;l<2048;++l)r[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:s,mantissaTable:r,exponentTable:o,offsetTable:a}}function Us(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=_t(n,-65504,65504),Sa.floatView[0]=n;const e=Sa.uint32View[0],t=e>>23&511;return Sa.baseTable[t]+((e&8388607)>>Sa.shiftTable[t])}function em(n){const e=n>>10;return Sa.uint32View[0]=Sa.mantissaTable[Sa.offsetTable[e]+(n&1023)]+Sa.exponentTable[e],Sa.floatView[0]}const tm={toHalfFloat:Us,fromHalfFloat:em},ri=new O,m0=new me;class wt{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=ig,this.updateRanges=[],this.gpuType=Sn,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let s=0,r=this.itemSize;s<r;s++)this.array[e+s]=t.array[i+s];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)m0.fromBufferAttribute(this,t),m0.applyMatrix3(e),this.setXY(t,m0.x,m0.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)ri.fromBufferAttribute(this,t),ri.applyMatrix3(e),this.setXYZ(t,ri.x,ri.y,ri.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)ri.fromBufferAttribute(this,t),ri.applyMatrix4(e),this.setXYZ(t,ri.x,ri.y,ri.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)ri.fromBufferAttribute(this,t),ri.applyNormalMatrix(e),this.setXYZ(t,ri.x,ri.y,ri.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)ri.fromBufferAttribute(this,t),ri.transformDirection(e),this.setXYZ(t,ri.x,ri.y,ri.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=ws(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=It(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=ws(t,this.array)),t}setX(e,t){return this.normalized&&(t=It(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=ws(t,this.array)),t}setY(e,t){return this.normalized&&(t=It(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=ws(t,this.array)),t}setZ(e,t){return this.normalized&&(t=It(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=ws(t,this.array)),t}setW(e,t){return this.normalized&&(t=It(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=It(t,this.array),i=It(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,s){return e*=this.itemSize,this.normalized&&(t=It(t,this.array),i=It(i,this.array),s=It(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=s,this}setXYZW(e,t,i,s,r){return e*=this.itemSize,this.normalized&&(t=It(t,this.array),i=It(i,this.array),s=It(s,this.array),r=It(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=s,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==ig&&(e.usage=this.usage),e}}class i6 extends wt{constructor(e,t,i){super(new Int8Array(e),t,i)}}class s6 extends wt{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class r6 extends wt{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class o6 extends wt{constructor(e,t,i){super(new Int16Array(e),t,i)}}class bI extends wt{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class a6 extends wt{constructor(e,t,i){super(new Int32Array(e),t,i)}}class wI extends wt{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class l6 extends wt{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=em(this.array[e*this.itemSize]);return this.normalized&&(t=ws(t,this.array)),t}setX(e,t){return this.normalized&&(t=It(t,this.array)),this.array[e*this.itemSize]=Us(t),this}getY(e){let t=em(this.array[e*this.itemSize+1]);return this.normalized&&(t=ws(t,this.array)),t}setY(e,t){return this.normalized&&(t=It(t,this.array)),this.array[e*this.itemSize+1]=Us(t),this}getZ(e){let t=em(this.array[e*this.itemSize+2]);return this.normalized&&(t=ws(t,this.array)),t}setZ(e,t){return this.normalized&&(t=It(t,this.array)),this.array[e*this.itemSize+2]=Us(t),this}getW(e){let t=em(this.array[e*this.itemSize+3]);return this.normalized&&(t=ws(t,this.array)),t}setW(e,t){return this.normalized&&(t=It(t,this.array)),this.array[e*this.itemSize+3]=Us(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=It(t,this.array),i=It(i,this.array)),this.array[e+0]=Us(t),this.array[e+1]=Us(i),this}setXYZ(e,t,i,s){return e*=this.itemSize,this.normalized&&(t=It(t,this.array),i=It(i,this.array),s=It(s,this.array)),this.array[e+0]=Us(t),this.array[e+1]=Us(i),this.array[e+2]=Us(s),this}setXYZW(e,t,i,s,r){return e*=this.itemSize,this.normalized&&(t=It(t,this.array),i=It(i,this.array),s=It(s,this.array),r=It(r,this.array)),this.array[e+0]=Us(t),this.array[e+1]=Us(i),this.array[e+2]=Us(s),this.array[e+3]=Us(r),this}}class nt extends wt{constructor(e,t,i){super(new Float32Array(e),t,i)}}let c6=0;const Cr=new tt,QE=new Rt,Th=new O,Ys=new Nn,gp=new Nn,Si=new O;class xt extends js{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:c6++}),this.uuid=cr(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(dU(e)?wI:bI)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const r=new bt().getNormalMatrix(e);i.applyNormalMatrix(r),i.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(e),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Cr.makeRotationFromQuaternion(e),this.applyMatrix4(Cr),this}rotateX(e){return Cr.makeRotationX(e),this.applyMatrix4(Cr),this}rotateY(e){return Cr.makeRotationY(e),this.applyMatrix4(Cr),this}rotateZ(e){return Cr.makeRotationZ(e),this.applyMatrix4(Cr),this}translate(e,t,i){return Cr.makeTranslation(e,t,i),this.applyMatrix4(Cr),this}scale(e,t,i){return Cr.makeScale(e,t,i),this.applyMatrix4(Cr),this}lookAt(e){return QE.lookAt(e),QE.updateMatrix(),this.applyMatrix4(QE.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Th).negate(),this.translate(Th.x,Th.y,Th.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const i=[];for(let s=0,r=e.length;s<r;s++){const o=e[s];i.push(o.x,o.y,o.z||0)}this.setAttribute("position",new nt(i,3))}else{const i=Math.min(e.length,t.count);for(let s=0;s<i;s++){const r=e[s];t.setXYZ(s,r.x,r.y,r.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Nn);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new O(-1/0,-1/0,-1/0),new O(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,s=t.length;i<s;i++){const r=t[i];Ys.setFromBufferAttribute(r),this.morphTargetsRelative?(Si.addVectors(this.boundingBox.min,Ys.min),this.boundingBox.expandByPoint(Si),Si.addVectors(this.boundingBox.max,Ys.max),this.boundingBox.expandByPoint(Si)):(this.boundingBox.expandByPoint(Ys.min),this.boundingBox.expandByPoint(Ys.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ui);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new O,1/0);return}if(e){const i=this.boundingSphere.center;if(Ys.setFromBufferAttribute(e),t)for(let r=0,o=t.length;r<o;r++){const a=t[r];gp.setFromBufferAttribute(a),this.morphTargetsRelative?(Si.addVectors(Ys.min,gp.min),Ys.expandByPoint(Si),Si.addVectors(Ys.max,gp.max),Ys.expandByPoint(Si)):(Ys.expandByPoint(gp.min),Ys.expandByPoint(gp.max))}Ys.getCenter(i);let s=0;for(let r=0,o=e.count;r<o;r++)Si.fromBufferAttribute(e,r),s=Math.max(s,i.distanceToSquared(Si));if(t)for(let r=0,o=t.length;r<o;r++){const a=t[r],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)Si.fromBufferAttribute(a,c),l&&(Th.fromBufferAttribute(e,c),Si.add(Th)),s=Math.max(s,i.distanceToSquared(Si))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,s=t.normal,r=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new wt(new Float32Array(4*i.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let B=0;B<i.count;B++)a[B]=new O,l[B]=new O;const c=new O,u=new O,h=new O,p=new me,m=new me,g=new me,v=new O,y=new O;function A(B,R,T){c.fromBufferAttribute(i,B),u.fromBufferAttribute(i,R),h.fromBufferAttribute(i,T),p.fromBufferAttribute(r,B),m.fromBufferAttribute(r,R),g.fromBufferAttribute(r,T),u.sub(c),h.sub(c),m.sub(p),g.sub(p);const k=1/(m.x*g.y-g.x*m.y);isFinite(k)&&(v.copy(u).multiplyScalar(g.y).addScaledVector(h,-m.y).multiplyScalar(k),y.copy(h).multiplyScalar(m.x).addScaledVector(u,-g.x).multiplyScalar(k),a[B].add(v),a[R].add(v),a[T].add(v),l[B].add(y),l[R].add(y),l[T].add(y))}let b=this.groups;b.length===0&&(b=[{start:0,count:e.count}]);for(let B=0,R=b.length;B<R;++B){const T=b[B],k=T.start,H=T.count;for(let Q=k,W=k+H;Q<W;Q+=3)A(e.getX(Q+0),e.getX(Q+1),e.getX(Q+2))}const w=new O,E=new O,M=new O,I=new O;function D(B){M.fromBufferAttribute(s,B),I.copy(M);const R=a[B];w.copy(R),w.sub(M.multiplyScalar(M.dot(R))).normalize(),E.crossVectors(I,R);const k=E.dot(l[B])<0?-1:1;o.setXYZW(B,w.x,w.y,w.z,k)}for(let B=0,R=b.length;B<R;++B){const T=b[B],k=T.start,H=T.count;for(let Q=k,W=k+H;Q<W;Q+=3)D(e.getX(Q+0)),D(e.getX(Q+1)),D(e.getX(Q+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new wt(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let p=0,m=i.count;p<m;p++)i.setXYZ(p,0,0,0);const s=new O,r=new O,o=new O,a=new O,l=new O,c=new O,u=new O,h=new O;if(e)for(let p=0,m=e.count;p<m;p+=3){const g=e.getX(p+0),v=e.getX(p+1),y=e.getX(p+2);s.fromBufferAttribute(t,g),r.fromBufferAttribute(t,v),o.fromBufferAttribute(t,y),u.subVectors(o,r),h.subVectors(s,r),u.cross(h),a.fromBufferAttribute(i,g),l.fromBufferAttribute(i,v),c.fromBufferAttribute(i,y),a.add(u),l.add(u),c.add(u),i.setXYZ(g,a.x,a.y,a.z),i.setXYZ(v,l.x,l.y,l.z),i.setXYZ(y,c.x,c.y,c.z)}else for(let p=0,m=t.count;p<m;p+=3)s.fromBufferAttribute(t,p+0),r.fromBufferAttribute(t,p+1),o.fromBufferAttribute(t,p+2),u.subVectors(o,r),h.subVectors(s,r),u.cross(h),i.setXYZ(p+0,u.x,u.y,u.z),i.setXYZ(p+1,u.x,u.y,u.z),i.setXYZ(p+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Si.fromBufferAttribute(e,t),Si.normalize(),e.setXYZ(t,Si.x,Si.y,Si.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,h=a.normalized,p=new c.constructor(l.length*u);let m=0,g=0;for(let v=0,y=l.length;v<y;v++){a.isInterleavedBufferAttribute?m=l[v]*a.data.stride+a.offset:m=l[v]*u;for(let A=0;A<u;A++)p[g++]=c[m++]}return new wt(p,u,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new xt,i=this.index.array,s=this.attributes;for(const a in s){const l=s[a],c=e(l,i);t.setAttribute(a,c)}const r=this.morphAttributes;for(const a in r){const l=[],c=r[a];for(let u=0,h=c.length;u<h;u++){const p=c[u],m=e(p,i);l.push(m)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const c=i[l];e.data.attributes[l]=c.toJSON(e.data)}const s={};let r=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let h=0,p=c.length;h<p;h++){const m=c[h];u.push(m.toJSON(e.data))}u.length>0&&(s[l]=u,r=!0)}r&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const s=e.attributes;for(const c in s){const u=s[c];this.setAttribute(c,u.clone(t))}const r=e.morphAttributes;for(const c in r){const u=[],h=r[c];for(let p=0,m=h.length;p<m;p++)u.push(h[p].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const h=o[c];this.addGroup(h.start,h.count,h.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const A2=new tt,Mc=new Rf,g0=new ui,y2=new O,A0=new O,y0=new O,v0=new O,HE=new O,x0=new O,v2=new O,b0=new O;class Wt extends Rt{constructor(e=new xt,t=new Un){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=s.length;r<o;r++){const a=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}getVertexPosition(e,t){const i=this.geometry,s=i.attributes.position,r=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(s,e);const a=this.morphTargetInfluences;if(r&&a){x0.set(0,0,0);for(let l=0,c=r.length;l<c;l++){const u=a[l],h=r[l];u!==0&&(HE.fromBufferAttribute(h,e),o?x0.addScaledVector(HE,u):x0.addScaledVector(HE.sub(t),u))}t.add(x0)}return t}raycast(e,t){const i=this.geometry,s=this.material,r=this.matrixWorld;s!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),g0.copy(i.boundingSphere),g0.applyMatrix4(r),Mc.copy(e.ray).recast(e.near),!(g0.containsPoint(Mc.origin)===!1&&(Mc.intersectSphere(g0,y2)===null||Mc.origin.distanceToSquared(y2)>(e.far-e.near)**2))&&(A2.copy(r).invert(),Mc.copy(e.ray).applyMatrix4(A2),!(i.boundingBox!==null&&Mc.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,Mc)))}_computeIntersections(e,t,i){let s;const r=this.geometry,o=this.material,a=r.index,l=r.attributes.position,c=r.attributes.uv,u=r.attributes.uv1,h=r.attributes.normal,p=r.groups,m=r.drawRange;if(a!==null)if(Array.isArray(o))for(let g=0,v=p.length;g<v;g++){const y=p[g],A=o[y.materialIndex],b=Math.max(y.start,m.start),w=Math.min(a.count,Math.min(y.start+y.count,m.start+m.count));for(let E=b,M=w;E<M;E+=3){const I=a.getX(E),D=a.getX(E+1),B=a.getX(E+2);s=w0(this,A,e,i,c,u,h,I,D,B),s&&(s.faceIndex=Math.floor(E/3),s.face.materialIndex=y.materialIndex,t.push(s))}}else{const g=Math.max(0,m.start),v=Math.min(a.count,m.start+m.count);for(let y=g,A=v;y<A;y+=3){const b=a.getX(y),w=a.getX(y+1),E=a.getX(y+2);s=w0(this,o,e,i,c,u,h,b,w,E),s&&(s.faceIndex=Math.floor(y/3),t.push(s))}}else if(l!==void 0)if(Array.isArray(o))for(let g=0,v=p.length;g<v;g++){const y=p[g],A=o[y.materialIndex],b=Math.max(y.start,m.start),w=Math.min(l.count,Math.min(y.start+y.count,m.start+m.count));for(let E=b,M=w;E<M;E+=3){const I=E,D=E+1,B=E+2;s=w0(this,A,e,i,c,u,h,I,D,B),s&&(s.faceIndex=Math.floor(E/3),s.face.materialIndex=y.materialIndex,t.push(s))}}else{const g=Math.max(0,m.start),v=Math.min(l.count,m.start+m.count);for(let y=g,A=v;y<A;y+=3){const b=y,w=y+1,E=y+2;s=w0(this,o,e,i,c,u,h,b,w,E),s&&(s.faceIndex=Math.floor(y/3),t.push(s))}}}}function u6(n,e,t,i,s,r,o,a){let l;if(e.side===Pi?l=i.intersectTriangle(o,r,s,!0,a):l=i.intersectTriangle(s,r,o,e.side===fr,a),l===null)return null;b0.copy(a),b0.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(b0);return c<t.near||c>t.far?null:{distance:c,point:b0.clone(),object:n}}function w0(n,e,t,i,s,r,o,a,l,c){n.getVertexPosition(a,A0),n.getVertexPosition(l,y0),n.getVertexPosition(c,v0);const u=u6(n,e,t,i,A0,y0,v0,v2);if(u){const h=new O;ns.getBarycoord(v2,A0,y0,v0,h),s&&(u.uv=ns.getInterpolatedAttribute(s,a,l,c,h,new me)),r&&(u.uv1=ns.getInterpolatedAttribute(r,a,l,c,h,new me)),o&&(u.normal=ns.getInterpolatedAttribute(o,a,l,c,h,new O),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));const p={a,b:l,c,normal:new O,materialIndex:0};ns.getNormal(A0,y0,v0,p.normal),u.face=p,u.barycoord=h}return u}class vo extends xt{constructor(e=1,t=1,i=1,s=1,r=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:s,heightSegments:r,depthSegments:o};const a=this;s=Math.floor(s),r=Math.floor(r),o=Math.floor(o);const l=[],c=[],u=[],h=[];let p=0,m=0;g("z","y","x",-1,-1,i,t,e,o,r,0),g("z","y","x",1,-1,i,t,-e,o,r,1),g("x","z","y",1,1,e,i,t,s,o,2),g("x","z","y",1,-1,e,i,-t,s,o,3),g("x","y","z",1,-1,e,t,i,s,r,4),g("x","y","z",-1,-1,e,t,-i,s,r,5),this.setIndex(l),this.setAttribute("position",new nt(c,3)),this.setAttribute("normal",new nt(u,3)),this.setAttribute("uv",new nt(h,2));function g(v,y,A,b,w,E,M,I,D,B,R){const T=E/D,k=M/B,H=E/2,Q=M/2,W=I/2,X=D+1,J=B+1;let K=0,L=0;const V=new O;for(let j=0;j<J;j++){const $=j*k-Q;for(let le=0;le<X;le++){const ve=le*T-H;V[v]=ve*b,V[y]=$*w,V[A]=W,c.push(V.x,V.y,V.z),V[v]=0,V[y]=0,V[A]=I>0?1:-1,u.push(V.x,V.y,V.z),h.push(le/D),h.push(1-j/B),K+=1}}for(let j=0;j<B;j++)for(let $=0;$<D;$++){const le=p+$+X*j,ve=p+$+X*(j+1),q=p+($+1)+X*(j+1),ae=p+($+1)+X*j;l.push(le,ve,ae),l.push(ve,q,ae),L+=6}a.addGroup(m,L,R),m+=L,p+=K}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new vo(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function gf(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const s=n[t][i];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=s.clone():Array.isArray(s)?e[t][i]=s.slice():e[t][i]=s}}return e}function gs(n){const e={};for(let t=0;t<n.length;t++){const i=gf(n[t]);for(const s in i)e[s]=i[s]}return e}function h6(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function gU(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Ht.workingColorSpace}const AU={clone:gf,merge:gs};var d6=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,f6=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class cs extends zn{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=d6,this.fragmentShader=f6,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=gf(e.uniforms),this.uniformsGroups=h6(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const s in this.uniforms){const o=this.uniforms[s].value;o&&o.isTexture?t.uniforms[s]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[s]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[s]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[s]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[s]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[s]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[s]={type:"m4",value:o.toArray()}:t.uniforms[s]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const s in this.extensions)this.extensions[s]===!0&&(i[s]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class Rg extends Rt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new tt,this.projectionMatrix=new tt,this.projectionMatrixInverse=new tt,this.coordinateSystem=lo}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const pl=new O,x2=new me,b2=new me;class Fn extends Rg{constructor(e=50,t=1,i=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=s,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=pf*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Iu*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return pf*2*Math.atan(Math.tan(Iu*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){pl.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(pl.x,pl.y).multiplyScalar(-e/pl.z),pl.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(pl.x,pl.y).multiplyScalar(-e/pl.z)}getViewSize(e,t){return this.getViewBounds(e,x2,b2),t.subVectors(b2,x2)}setViewOffset(e,t,i,s,r,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=s,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Iu*.5*this.fov)/this.zoom,i=2*t,s=this.aspect*i,r=-.5*s;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;r+=o.offsetX*s/l,t-=o.offsetY*i/c,s*=o.width/l,i*=o.height/c}const a=this.filmOffset;a!==0&&(r+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+s,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Bh=-90,Rh=1;class hx extends Rt{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const s=new Fn(Bh,Rh,e,t);s.layers=this.layers,this.add(s);const r=new Fn(Bh,Rh,e,t);r.layers=this.layers,this.add(r);const o=new Fn(Bh,Rh,e,t);o.layers=this.layers,this.add(o);const a=new Fn(Bh,Rh,e,t);a.layers=this.layers,this.add(a);const l=new Fn(Bh,Rh,e,t);l.layers=this.layers,this.add(l);const c=new Fn(Bh,Rh,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,s,r,o,a,l]=t;for(const c of t)this.remove(c);if(e===lo)i.up.set(0,1,0),i.lookAt(1,0,0),s.up.set(0,1,0),s.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===sg)i.up.set(0,-1,0),i.lookAt(-1,0,0),s.up.set(0,-1,0),s.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:s}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[r,o,a,l,c,u]=this.children,h=e.getRenderTarget(),p=e.getActiveCubeFace(),m=e.getActiveMipmapLevel(),g=e.xr.enabled;e.xr.enabled=!1;const v=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,s),e.render(t,r),e.setRenderTarget(i,1,s),e.render(t,o),e.setRenderTarget(i,2,s),e.render(t,a),e.setRenderTarget(i,3,s),e.render(t,l),e.setRenderTarget(i,4,s),e.render(t,c),i.texture.generateMipmaps=v,e.setRenderTarget(i,5,s),e.render(t,u),e.setRenderTarget(h,p,m),e.xr.enabled=g,i.texture.needsPMREMUpdate=!0}}class Dg extends ln{constructor(e,t,i,s,r,o,a,l,c,u){e=e!==void 0?e:[],t=t!==void 0?t:Ha,super(e,t,i,s,r,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class ab extends Cs{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},s=[i,i,i,i,i,i];this.texture=new Dg(s,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Bt}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},s=new vo(5,5,5),r=new cs({name:"CubemapFromEquirect",uniforms:gf(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Pi,blending:po});r.uniforms.tEquirect.value=t;const o=new Wt(s,r),a=t.minFilter;return t.minFilter===vi&&(t.minFilter=Bt),new hx(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,s){const r=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,s);e.setRenderTarget(r)}}class lb{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Me(e),this.density=t}clone(){return new lb(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class cb{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new Me(e),this.near=t,this.far=i}clone(){return new cb(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class qo extends Rt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Ss,this.environmentIntensity=1,this.environmentRotation=new Ss,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class Df{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=ig,this.updateRanges=[],this.version=0,this.uuid=cr()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let s=0,r=this.stride;s<r;s++)this.array[e+s]=t.array[i+s];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=cr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=cr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ps=new O;class ja{constructor(e,t,i,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=s}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)ps.fromBufferAttribute(this,t),ps.applyMatrix4(e),this.setXYZ(t,ps.x,ps.y,ps.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)ps.fromBufferAttribute(this,t),ps.applyNormalMatrix(e),this.setXYZ(t,ps.x,ps.y,ps.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)ps.fromBufferAttribute(this,t),ps.transformDirection(e),this.setXYZ(t,ps.x,ps.y,ps.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=ws(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=It(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=It(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=It(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=It(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=It(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=ws(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=ws(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=ws(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=ws(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=It(t,this.array),i=It(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=It(t,this.array),i=It(i,this.array),s=It(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=s,this}setXYZW(e,t,i,s,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=It(t,this.array),i=It(i,this.array),s=It(s,this.array),r=It(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=s,this.data.array[e+3]=r,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[s+r])}return new wt(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new ja(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[s+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class EI extends zn{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Me(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Dh;const Ap=new O,Ph=new O,Lh=new O,kh=new me,yp=new me,yU=new tt,E0=new O,vp=new O,_0=new O,w2=new me,VE=new me,E2=new me;class vU extends Rt{constructor(e=new EI){if(super(),this.isSprite=!0,this.type="Sprite",Dh===void 0){Dh=new xt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new Df(t,5);Dh.setIndex([0,1,2,0,2,3]),Dh.setAttribute("position",new ja(i,3,0,!1)),Dh.setAttribute("uv",new ja(i,2,3,!1))}this.geometry=Dh,this.material=e,this.center=new me(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Ph.setFromMatrixScale(this.matrixWorld),yU.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Lh.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Ph.multiplyScalar(-Lh.z);const i=this.material.rotation;let s,r;i!==0&&(r=Math.cos(i),s=Math.sin(i));const o=this.center;C0(E0.set(-.5,-.5,0),Lh,o,Ph,s,r),C0(vp.set(.5,-.5,0),Lh,o,Ph,s,r),C0(_0.set(.5,.5,0),Lh,o,Ph,s,r),w2.set(0,0),VE.set(1,0),E2.set(1,1);let a=e.ray.intersectTriangle(E0,vp,_0,!1,Ap);if(a===null&&(C0(vp.set(-.5,.5,0),Lh,o,Ph,s,r),VE.set(0,1),a=e.ray.intersectTriangle(E0,_0,vp,!1,Ap),a===null))return;const l=e.ray.origin.distanceTo(Ap);l<e.near||l>e.far||t.push({distance:l,point:Ap.clone(),uv:ns.getInterpolation(Ap,E0,vp,_0,w2,VE,E2,new me),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function C0(n,e,t,i,s,r){kh.subVectors(n,t).addScalar(.5).multiply(i),s!==void 0?(yp.x=r*kh.x-s*kh.y,yp.y=s*kh.x+r*kh.y):yp.copy(kh),n.copy(e),n.x+=yp.x,n.y+=yp.y,n.applyMatrix4(yU)}const S0=new O,_2=new O;class xU extends Rt{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,s=t.length;i<s;i++){const r=t[i];this.addLevel(r.object.clone(),r.distance,r.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const s=this.levels;let r;for(r=0;r<s.length&&!(t<s[r].distance);r++);return s.splice(r,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let i=0;i<t.length;i++)if(t[i].distance===e){const s=t.splice(i,1);return this.remove(s[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,s;for(i=1,s=t.length;i<s;i++){let r=t[i].distance;if(t[i].object.visible&&(r-=r*t[i].hysteresis),e<r)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){S0.setFromMatrixPosition(this.matrixWorld);const s=e.ray.origin.distanceTo(S0);this.getObjectForDistance(s).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){S0.setFromMatrixPosition(e.matrixWorld),_2.setFromMatrixPosition(this.matrixWorld);const i=S0.distanceTo(_2)/e.zoom;t[0].object.visible=!0;let s,r;for(s=1,r=t.length;s<r;s++){let o=t[s].distance;if(t[s].object.visible&&(o-=o*t[s].hysteresis),i>=o)t[s-1].object.visible=!1,t[s].object.visible=!0;else break}for(this._currentLevel=s-1;s<r;s++)t[s].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let s=0,r=i.length;s<r;s++){const o=i[s];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const C2=new O,S2=new Yt,M2=new Yt,p6=new O,I2=new tt,M0=new O,jE=new ui,T2=new tt,WE=new Rf;class ub extends Wt{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=m1,this.bindMatrix=new tt,this.bindMatrixInverse=new tt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Nn),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,M0),this.boundingBox.expandByPoint(M0)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new ui),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,M0),this.boundingSphere.expandByPoint(M0)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,s=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),jE.copy(this.boundingSphere),jE.applyMatrix4(s),e.ray.intersectsSphere(jE)!==!1&&(T2.copy(s).invert(),WE.copy(e.ray).applyMatrix4(T2),!(this.boundingBox!==null&&WE.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,WE)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Yt,t=this.geometry.attributes.skinWeight;for(let i=0,s=t.count;i<s;i++){e.fromBufferAttribute(t,i);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===m1?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===tU?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,s=this.geometry;S2.fromBufferAttribute(s.attributes.skinIndex,e),M2.fromBufferAttribute(s.attributes.skinWeight,e),C2.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let r=0;r<4;r++){const o=M2.getComponent(r);if(o!==0){const a=S2.getComponent(r);I2.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(p6.copy(C2).applyMatrix4(I2),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class Pg extends Rt{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Nr extends ln{constructor(e=null,t=1,i=1,s,r,o,a,l,c=Mn,u=Mn,h,p){super(null,o,a,l,c,u,s,r,h,p),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const B2=new tt,m6=new tt;class Pf{constructor(e=[],t=[]){this.uuid=cr(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,s=this.bones.length;i<s;i++)this.boneInverses.push(new tt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new tt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,s=this.boneTexture;for(let r=0,o=e.length;r<o;r++){const a=e[r]?e[r].matrixWorld:m6;B2.multiplyMatrices(a,t[r]),B2.toArray(i,r*16)}s!==null&&(s.needsUpdate=!0)}clone(){return new Pf(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Nr(t,e,e,dn,Sn);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const s=this.bones[t];if(s.name===e)return s}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,s=e.bones.length;i<s;i++){const r=e.bones[i];let o=t[r];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),o=new Pg),this.bones.push(o),this.boneInverses.push(new tt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let s=0,r=t.length;s<r;s++){const o=t[s];e.bones.push(o.uuid);const a=i[s];e.boneInverses.push(a.toArray())}return e}}class ic extends wt{constructor(e,t,i,s=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=s}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Fh=new tt,R2=new tt,I0=[],D2=new Nn,g6=new tt,xp=new Wt,bp=new ui;class hb extends Wt{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new ic(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let s=0;s<i;s++)this.setMatrixAt(s,g6)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Nn),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Fh),D2.copy(e.boundingBox).applyMatrix4(Fh),this.boundingBox.union(D2)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new ui),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Fh),bp.copy(e.boundingSphere).applyMatrix4(Fh),this.boundingSphere.union(bp)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,s=this.morphTexture.source.data.data,r=i.length+1,o=e*r+1;for(let a=0;a<i.length;a++)i[a]=s[o+a]}raycast(e,t){const i=this.matrixWorld,s=this.count;if(xp.geometry=this.geometry,xp.material=this.material,xp.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),bp.copy(this.boundingSphere),bp.applyMatrix4(i),e.ray.intersectsSphere(bp)!==!1))for(let r=0;r<s;r++){this.getMatrixAt(r,Fh),R2.multiplyMatrices(i,Fh),xp.matrixWorld=R2,xp.raycast(e,I0);for(let o=0,a=I0.length;o<a;o++){const l=I0[o];l.instanceId=r,l.object=this,t.push(l)}I0.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new ic(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,s=i.length+1;this.morphTexture===null&&(this.morphTexture=new Nr(new Float32Array(s*this.count),s,this.count,Ba,Sn));const r=this.morphTexture.source.data.data;let o=0;for(let c=0;c<i.length;c++)o+=i[c];const a=this.geometry.morphTargetsRelative?1:1-o,l=s*e;r[l]=a,r.set(i,l+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}const qE=new O,A6=new O,y6=new bt;class _l{constructor(e=new O(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,s){return this.normal.set(e,t,i),this.constant=s,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const s=qE.subVectors(i,t).cross(A6.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(qE),s=this.normal.dot(i);if(s===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const r=-(e.start.dot(this.normal)+this.constant)/s;return r<0||r>1?null:t.copy(e.start).addScaledVector(i,r)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||y6.getNormalMatrix(e),s=this.coplanarPoint(qE).applyMatrix4(e),r=this.normal.applyMatrix3(i).normalize();return this.constant=-s.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Ic=new ui,T0=new O;class Lg{constructor(e=new _l,t=new _l,i=new _l,s=new _l,r=new _l,o=new _l){this.planes=[e,t,i,s,r,o]}set(e,t,i,s,r,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(s),a[4].copy(r),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=lo){const i=this.planes,s=e.elements,r=s[0],o=s[1],a=s[2],l=s[3],c=s[4],u=s[5],h=s[6],p=s[7],m=s[8],g=s[9],v=s[10],y=s[11],A=s[12],b=s[13],w=s[14],E=s[15];if(i[0].setComponents(l-r,p-c,y-m,E-A).normalize(),i[1].setComponents(l+r,p+c,y+m,E+A).normalize(),i[2].setComponents(l+o,p+u,y+g,E+b).normalize(),i[3].setComponents(l-o,p-u,y-g,E-b).normalize(),i[4].setComponents(l-a,p-h,y-v,E-w).normalize(),t===lo)i[5].setComponents(l+a,p+h,y+v,E+w).normalize();else if(t===sg)i[5].setComponents(a,h,v,w).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Ic.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Ic.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Ic)}intersectsSprite(e){return Ic.center.set(0,0,0),Ic.radius=.7071067811865476,Ic.applyMatrix4(e.matrixWorld),this.intersectsSphere(Ic)}intersectsSphere(e){const t=this.planes,i=e.center,s=-e.radius;for(let r=0;r<6;r++)if(t[r].distanceToPoint(i)<s)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const s=t[i];if(T0.x=s.normal.x>0?e.max.x:e.min.x,T0.y=s.normal.y>0?e.max.y:e.min.y,T0.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(T0)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function JE(n,e){return n-e}function v6(n,e){return n.z-e.z}function x6(n,e){return e.z-n.z}class b6{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,i,s){const r=this.pool,o=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1,index:-1});const a=r[this.index];o.push(a),this.index++,a.start=e,a.count=t,a.z=i,a.index=s}reset(){this.list.length=0,this.index=0}}const Fs=new tt,w6=new Me(1,1,1),XE=new Lg,B0=new Nn,Tc=new ui,wp=new O,P2=new O,E6=new O,KE=new b6,$i=new Wt,R0=[];function _6(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const s=n.count;for(let r=0;r<s;r++)for(let o=0;o<i;o++)e.setComponent(r+t,o,n.getComponent(r,o))}else e.array.set(n.array,t*i);e.needsUpdate=!0}function Bc(n,e){if(n.constructor!==e.constructor){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++)e[i]=n[i]}else{const t=Math.min(n.length,e.length);e.set(new n.constructor(n.buffer,0,t))}}class bU extends Wt{get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}constructor(e,t,i=t*2,s){super(new xt,s),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new Nr(t,e,e,dn,Sn);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),i=new Nr(t,e,e,Mg,Wo);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),i=new Nr(t,e,e,dn,Sn);i.colorSpace=Ht.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const r in e.attributes){const o=e.getAttribute(r),{array:a,itemSize:l,normalized:c}=o,u=new a.constructor(i*l),h=new wt(u,l,c);t.setAttribute(r,h)}if(e.getIndex()!==null){const r=i>65535?new Uint32Array(s):new Uint16Array(s);t.setIndex(new wt(r,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(!e.hasAttribute(i))throw new Error(`THREE.BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const s=e.getAttribute(i),r=t.getAttribute(i);if(s.itemSize!==r.itemSize||s.normalized!==r.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Nn);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let i=0,s=t.length;i<s;i++){if(t[i].active===!1)continue;const r=t[i].geometryIndex;this.getMatrixAt(i,Fs),this.getBoundingBoxAt(r,B0).applyMatrix4(Fs),e.union(B0)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ui);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let i=0,s=t.length;i<s;i++){if(t[i].active===!1)continue;const r=t[i].geometryIndex;this.getMatrixAt(i,Fs),this.getBoundingSphereAt(r,Tc).applyMatrix4(Fs),e.union(Tc)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const i={visible:!0,active:!0,geometryIndex:e};let s=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(JE),s=this._availableInstanceIds.shift(),this._instanceInfo[s]=i):(s=this._instanceInfo.length,this._instanceInfo.push(i));const r=this._matricesTexture;Fs.identity().toArray(r.image.data,s*16),r.needsUpdate=!0;const o=this._colorsTexture;return o&&(w6.toArray(o.image.data,s*4),o.needsUpdate=!0),this._visibilityChanged=!0,s}addGeometry(e,t=-1,i=-1){this._initializeGeometry(e),this._validateGeometry(e);const s={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},r=this._geometryInfo;s.vertexStart=this._nextVertexStart,s.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const o=e.getIndex();if(o!==null&&(s.indexStart=this._nextIndexStart,s.reservedIndexCount=i===-1?o.count:i),s.indexStart!==-1&&s.indexStart+s.reservedIndexCount>this._maxIndexCount||s.vertexStart+s.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let l;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(JE),l=this._availableGeometryIds.shift(),r[l]=s):(l=this._geometryCount,this._geometryCount++,r.push(s)),this.setGeometryAt(l,e),this._nextIndexStart=s.indexStart+s.reservedIndexCount,this._nextVertexStart=s.vertexStart+s.reservedVertexCount,l}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,s=i.getIndex()!==null,r=i.getIndex(),o=t.getIndex(),a=this._geometryInfo[e];if(s&&o.count>a.reservedIndexCount||t.attributes.position.count>a.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,c=a.reservedVertexCount;a.vertexCount=t.getAttribute("position").count;for(const u in i.attributes){const h=t.getAttribute(u),p=i.getAttribute(u);_6(h,p,l);const m=h.itemSize;for(let g=h.count,v=c;g<v;g++){const y=l+g;for(let A=0;A<m;A++)p.setComponent(y,A,0)}p.needsUpdate=!0,p.addUpdateRange(l*m,c*m)}if(s){const u=a.indexStart,h=a.reservedIndexCount;a.indexCount=t.getIndex().count;for(let p=0;p<o.count;p++)r.setX(u+p,l+o.getX(p));for(let p=o.count,m=h;p<m;p++)r.setX(u+p,l);r.needsUpdate=!0,r.addUpdateRange(u,a.reservedIndexCount)}return a.start=s?a.indexStart:a.vertexStart,a.count=s?a.indexCount:a.vertexCount,a.boundingBox=null,t.boundingBox!==null&&(a.boundingBox=t.boundingBox.clone()),a.boundingSphere=null,t.boundingSphere!==null&&(a.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const i=this._instanceInfo;for(let s=0,r=i.length;s<r;s++)i[s].geometryIndex===e&&this.deleteInstance(s);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const i=this._geometryInfo,s=i.map((o,a)=>a).sort((o,a)=>i[o].vertexStart-i[a].vertexStart),r=this.geometry;for(let o=0,a=i.length;o<a;o++){const l=s[o],c=i[l];if(c.active!==!1){if(r.index!==null){if(c.indexStart!==t){const{indexStart:u,vertexStart:h,reservedIndexCount:p}=c,m=r.index,g=m.array,v=e-h;for(let y=u;y<u+p;y++)g[y]=g[y]+v;m.array.copyWithin(t,u,u+p),m.addUpdateRange(t,p),c.indexStart=t}t+=c.reservedIndexCount}if(c.vertexStart!==e){const{vertexStart:u,reservedVertexCount:h}=c,p=r.attributes;for(const m in p){const g=p[m],{array:v,itemSize:y}=g;v.copyWithin(e*y,u*y,(u+h)*y),g.addUpdateRange(e*y,h*y)}c.vertexStart=e}e+=c.reservedVertexCount,c.start=r.index?c.indexStart:c.vertexStart,this._nextIndexStart=r.index?c.indexStart+c.reservedIndexCount:0,this._nextVertexStart=c.vertexStart+c.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,s=this._geometryInfo[e];if(s.boundingBox===null){const r=new Nn,o=i.index,a=i.attributes.position;for(let l=s.start,c=s.start+s.count;l<c;l++){let u=l;o&&(u=o.getX(u)),r.expandByPoint(wp.fromBufferAttribute(a,u))}s.boundingBox=r}return t.copy(s.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,s=this._geometryInfo[e];if(s.boundingSphere===null){const r=new ui;this.getBoundingBoxAt(e,B0),B0.getCenter(r.center);const o=i.index,a=i.attributes.position;let l=0;for(let c=s.start,u=s.start+s.count;c<u;c++){let h=c;o&&(h=o.getX(h)),wp.fromBufferAttribute(a,h),l=Math.max(l,r.center.distanceToSquared(wp))}r.radius=Math.sqrt(l),s.boundingSphere=r}return t.copy(s.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const i=this._matricesTexture,s=this._matricesTexture.image.data;return t.toArray(s,e*16),i.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const i=this._geometryInfo[e];return t.vertexStart=i.vertexStart,t.vertexCount=i.vertexCount,t.reservedVertexCount=i.reservedVertexCount,t.indexStart=i.indexStart,t.indexCount=i.indexCount,t.reservedIndexCount=i.reservedIndexCount,t.start=i.start,t.count=i.count,t}setInstanceCount(e){const t=this._availableInstanceIds,i=this._instanceInfo;for(t.sort(JE);t[t.length-1]===i.length;)i.pop(),t.pop();if(e<i.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const s=new Int32Array(e),r=new Int32Array(e);Bc(this._multiDrawCounts,s),Bc(this._multiDrawStarts,r),this._multiDrawCounts=s,this._multiDrawStarts=r,this._maxInstanceCount=e;const o=this._indirectTexture,a=this._matricesTexture,l=this._colorsTexture;o.dispose(),this._initIndirectTexture(),Bc(o.image.data,this._indirectTexture.image.data),a.dispose(),this._initMatricesTexture(),Bc(a.image.data,this._matricesTexture.image.data),l&&(l.dispose(),this._initColorsTexture(),Bc(l.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const i=[...this._geometryInfo].filter(a=>a.active);if(Math.max(...i.map(a=>a.vertexStart+a.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...i.map(l=>l.indexStart+l.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const r=this.geometry;r.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new xt,this._initializeGeometry(r));const o=this.geometry;r.index&&Bc(r.index.array,o.index.array);for(const a in r.attributes)Bc(r.attributes[a].array,o.attributes[a].array)}raycast(e,t){const i=this._instanceInfo,s=this._geometryInfo,r=this.matrixWorld,o=this.geometry;$i.material=this.material,$i.geometry.index=o.index,$i.geometry.attributes=o.attributes,$i.geometry.boundingBox===null&&($i.geometry.boundingBox=new Nn),$i.geometry.boundingSphere===null&&($i.geometry.boundingSphere=new ui);for(let a=0,l=i.length;a<l;a++){if(!i[a].visible||!i[a].active)continue;const c=i[a].geometryIndex,u=s[c];$i.geometry.setDrawRange(u.start,u.count),this.getMatrixAt(a,$i.matrixWorld).premultiply(r),this.getBoundingBoxAt(c,$i.geometry.boundingBox),this.getBoundingSphereAt(c,$i.geometry.boundingSphere),$i.raycast(e,R0);for(let h=0,p=R0.length;h<p;h++){const m=R0[h];m.object=this,m.batchId=a,t.push(m)}R0.length=0}$i.material=null,$i.geometry.index=null,$i.geometry.attributes={},$i.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,t,i,s,r){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=s.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._instanceInfo,c=this._multiDrawStarts,u=this._multiDrawCounts,h=this._geometryInfo,p=this.perObjectFrustumCulled,m=this._indirectTexture,g=m.image.data;p&&(Fs.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),XE.setFromProjectionMatrix(Fs,e.coordinateSystem));let v=0;if(this.sortObjects){Fs.copy(this.matrixWorld).invert(),wp.setFromMatrixPosition(i.matrixWorld).applyMatrix4(Fs),P2.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(Fs);for(let b=0,w=l.length;b<w;b++)if(l[b].visible&&l[b].active){const E=l[b].geometryIndex;this.getMatrixAt(b,Fs),this.getBoundingSphereAt(E,Tc).applyMatrix4(Fs);let M=!1;if(p&&(M=!XE.intersectsSphere(Tc)),!M){const I=h[E],D=E6.subVectors(Tc.center,wp).dot(P2);KE.push(I.start,I.count,D,b)}}const y=KE.list,A=this.customSort;A===null?y.sort(r.transparent?x6:v6):A.call(this,y,i);for(let b=0,w=y.length;b<w;b++){const E=y[b];c[v]=E.start*a,u[v]=E.count,g[v]=E.index,v++}KE.reset()}else for(let y=0,A=l.length;y<A;y++)if(l[y].visible&&l[y].active){const b=l[y].geometryIndex;let w=!1;if(p&&(this.getMatrixAt(y,Fs),this.getBoundingSphereAt(b,Tc).applyMatrix4(Fs),w=!XE.intersectsSphere(Tc)),!w){const E=h[b];c[v]=E.start*a,u[v]=E.count,g[v]=y,v++}}m.needsUpdate=!0,this._multiDrawCount=v,this._visibilityChanged=!1}onBeforeShadow(e,t,i,s,r,o){this.onBeforeRender(e,null,s,r,o)}}class Qi extends zn{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Me(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const dx=new O,fx=new O,L2=new tt,Ep=new Rf,D0=new ui,$E=new O,k2=new O;class Gr extends Rt{constructor(e=new xt,t=new Qi){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let s=1,r=t.count;s<r;s++)dx.fromBufferAttribute(t,s-1),fx.fromBufferAttribute(t,s),i[s]=i[s-1],i[s]+=dx.distanceTo(fx);e.setAttribute("lineDistance",new nt(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,s=this.matrixWorld,r=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),D0.copy(i.boundingSphere),D0.applyMatrix4(s),D0.radius+=r,e.ray.intersectsSphere(D0)===!1)return;L2.copy(s).invert(),Ep.copy(e.ray).applyMatrix4(L2);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=this.isLineSegments?2:1,u=i.index,p=i.attributes.position;if(u!==null){const m=Math.max(0,o.start),g=Math.min(u.count,o.start+o.count);for(let v=m,y=g-1;v<y;v+=c){const A=u.getX(v),b=u.getX(v+1),w=P0(this,e,Ep,l,A,b);w&&t.push(w)}if(this.isLineLoop){const v=u.getX(g-1),y=u.getX(m),A=P0(this,e,Ep,l,v,y);A&&t.push(A)}}else{const m=Math.max(0,o.start),g=Math.min(p.count,o.start+o.count);for(let v=m,y=g-1;v<y;v+=c){const A=P0(this,e,Ep,l,v,v+1);A&&t.push(A)}if(this.isLineLoop){const v=P0(this,e,Ep,l,g-1,m);v&&t.push(v)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=s.length;r<o;r++){const a=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}}function P0(n,e,t,i,s,r){const o=n.geometry.attributes.position;if(dx.fromBufferAttribute(o,s),fx.fromBufferAttribute(o,r),t.distanceSqToSegment(dx,fx,$E,k2)>i)return;$E.applyMatrix4(n.matrixWorld);const l=e.ray.origin.distanceTo($E);if(!(l<e.near||l>e.far))return{distance:l,point:k2.clone().applyMatrix4(n.matrixWorld),index:s,face:null,faceIndex:null,barycoord:null,object:n}}const F2=new O,N2=new O;class Hr extends Gr{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let s=0,r=t.count;s<r;s+=2)F2.fromBufferAttribute(t,s),N2.fromBufferAttribute(t,s+1),i[s]=s===0?0:i[s-1],i[s+1]=i[s]+F2.distanceTo(N2);e.setAttribute("lineDistance",new nt(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class db extends Gr{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class kg extends zn{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Me(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const O2=new tt,v1=new Rf,L0=new ui,k0=new O;class fb extends Rt{constructor(e=new xt,t=new kg){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,s=this.matrixWorld,r=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),L0.copy(i.boundingSphere),L0.applyMatrix4(s),L0.radius+=r,e.ray.intersectsSphere(L0)===!1)return;O2.copy(s).invert(),v1.copy(e.ray).applyMatrix4(O2);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=i.index,h=i.attributes.position;if(c!==null){const p=Math.max(0,o.start),m=Math.min(c.count,o.start+o.count);for(let g=p,v=m;g<v;g++){const y=c.getX(g);k0.fromBufferAttribute(h,y),U2(k0,y,l,s,e,t,this)}}else{const p=Math.max(0,o.start),m=Math.min(h.count,o.start+o.count);for(let g=p,v=m;g<v;g++)k0.fromBufferAttribute(h,g),U2(k0,g,l,s,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=s.length;r<o;r++){const a=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}}function U2(n,e,t,i,s,r,o){const a=v1.distanceSqToPoint(n);if(a<t){const l=new O;v1.closestPointToPoint(n,l),l.applyMatrix4(i);const c=s.ray.origin.distanceTo(l);if(c<s.near||c>s.far)return;r.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class sr extends Rt{constructor(){super(),this.isGroup=!0,this.type="Group"}}class wU extends ln{constructor(e,t,i,s,r,o,a,l,c){super(e,t,i,s,r,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Bt,this.magFilter=r!==void 0?r:Bt,this.generateMipmaps=!1;const u=this;function h(){u.needsUpdate=!0,e.requestVideoFrameCallback(h)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(h)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class C6 extends ln{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Mn,this.minFilter=Mn,this.generateMipmaps=!1,this.needsUpdate=!0}}class Fa extends ln{constructor(e,t,i,s,r,o,a,l,c,u,h,p){super(null,o,a,l,c,u,s,r,h,p),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class EU extends Fa{constructor(e,t,i,s,r,o){super(e,t,i,r,o),this.isCompressedArrayTexture=!0,this.image.depth=s,this.wrapR=Cn,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class _U extends Fa{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,Ha),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class CU extends ln{constructor(e,t,i,s,r,o,a,l,c){super(e,t,i,s,r,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class _I extends ln{constructor(e,t,i,s,r,o,a,l,c,u=Su){if(u!==Su&&u!==Gu)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&u===Su&&(i=Wo),i===void 0&&u===Gu&&(i=Uu),super(null,s,r,o,a,l,u,i,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:Mn,this.minFilter=l!==void 0?l:Mn,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class xo{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,s=this.getPoint(0),r=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),r+=i.distanceTo(s),t.push(r),s=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let s=0;const r=i.length;let o;t?o=t:o=e*i[r-1];let a=0,l=r-1,c;for(;a<=l;)if(s=Math.floor(a+(l-a)/2),c=i[s]-o,c<0)a=s+1;else if(c>0)l=s-1;else{l=s;break}if(s=l,i[s]===o)return s/(r-1);const u=i[s],p=i[s+1]-u,m=(o-u)/p;return(s+m)/(r-1)}getTangent(e,t){let s=e-1e-4,r=e+1e-4;s<0&&(s=0),r>1&&(r=1);const o=this.getPoint(s),a=this.getPoint(r),l=t||(o.isVector2?new me:new O);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new O,s=[],r=[],o=[],a=new O,l=new tt;for(let m=0;m<=e;m++){const g=m/e;s[m]=this.getTangentAt(g,new O)}r[0]=new O,o[0]=new O;let c=Number.MAX_VALUE;const u=Math.abs(s[0].x),h=Math.abs(s[0].y),p=Math.abs(s[0].z);u<=c&&(c=u,i.set(1,0,0)),h<=c&&(c=h,i.set(0,1,0)),p<=c&&i.set(0,0,1),a.crossVectors(s[0],i).normalize(),r[0].crossVectors(s[0],a),o[0].crossVectors(s[0],r[0]);for(let m=1;m<=e;m++){if(r[m]=r[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(s[m-1],s[m]),a.length()>Number.EPSILON){a.normalize();const g=Math.acos(_t(s[m-1].dot(s[m]),-1,1));r[m].applyMatrix4(l.makeRotationAxis(a,g))}o[m].crossVectors(s[m],r[m])}if(t===!0){let m=Math.acos(_t(r[0].dot(r[e]),-1,1));m/=e,s[0].dot(a.crossVectors(r[0],r[e]))>0&&(m=-m);for(let g=1;g<=e;g++)r[g].applyMatrix4(l.makeRotationAxis(s[g],m*g)),o[g].crossVectors(s[g],r[g])}return{tangents:s,normals:r,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class pb extends xo{constructor(e=0,t=0,i=1,s=1,r=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=s,this.aStartAngle=r,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t=new me){const i=t,s=Math.PI*2;let r=this.aEndAngle-this.aStartAngle;const o=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=s;for(;r>s;)r-=s;r<Number.EPSILON&&(o?r=0:r=s),this.aClockwise===!0&&!o&&(r===s?r=-s:r=r-s);const a=this.aStartAngle+e*r;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const u=Math.cos(this.aRotation),h=Math.sin(this.aRotation),p=l-this.aX,m=c-this.aY;l=p*u-m*h+this.aX,c=p*h+m*u+this.aY}return i.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class SU extends pb{constructor(e,t,i,s,r,o){super(e,t,i,i,s,r,o),this.isArcCurve=!0,this.type="ArcCurve"}}function CI(){let n=0,e=0,t=0,i=0;function s(r,o,a,l){n=r,e=a,t=-3*r+3*o-2*a-l,i=2*r-2*o+a+l}return{initCatmullRom:function(r,o,a,l,c){s(o,a,c*(a-r),c*(l-o))},initNonuniformCatmullRom:function(r,o,a,l,c,u,h){let p=(o-r)/c-(a-r)/(c+u)+(a-o)/u,m=(a-o)/u-(l-o)/(u+h)+(l-a)/h;p*=u,m*=u,s(o,a,p,m)},calc:function(r){const o=r*r,a=o*r;return n+e*r+t*o+i*a}}}const F0=new O,YE=new CI,ZE=new CI,e_=new CI;class MU extends xo{constructor(e=[],t=!1,i="centripetal",s=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=s}getPoint(e,t=new O){const i=t,s=this.points,r=s.length,o=(r-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/r)+1)*r:l===0&&a===r-1&&(a=r-2,l=1);let c,u;this.closed||a>0?c=s[(a-1)%r]:(F0.subVectors(s[0],s[1]).add(s[0]),c=F0);const h=s[a%r],p=s[(a+1)%r];if(this.closed||a+2<r?u=s[(a+2)%r]:(F0.subVectors(s[r-1],s[r-2]).add(s[r-1]),u=F0),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let g=Math.pow(c.distanceToSquared(h),m),v=Math.pow(h.distanceToSquared(p),m),y=Math.pow(p.distanceToSquared(u),m);v<1e-4&&(v=1),g<1e-4&&(g=v),y<1e-4&&(y=v),YE.initNonuniformCatmullRom(c.x,h.x,p.x,u.x,g,v,y),ZE.initNonuniformCatmullRom(c.y,h.y,p.y,u.y,g,v,y),e_.initNonuniformCatmullRom(c.z,h.z,p.z,u.z,g,v,y)}else this.curveType==="catmullrom"&&(YE.initCatmullRom(c.x,h.x,p.x,u.x,this.tension),ZE.initCatmullRom(c.y,h.y,p.y,u.y,this.tension),e_.initCatmullRom(c.z,h.z,p.z,u.z,this.tension));return i.set(YE.calc(l),ZE.calc(l),e_.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const s=e.points[t];this.points.push(s.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const s=this.points[t];e.points.push(s.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const s=e.points[t];this.points.push(new O().fromArray(s))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function G2(n,e,t,i,s){const r=(i-e)*.5,o=(s-t)*.5,a=n*n,l=n*a;return(2*t-2*i+r+o)*l+(-3*t+3*i-2*r-o)*a+r*n+t}function S6(n,e){const t=1-n;return t*t*e}function M6(n,e){return 2*(1-n)*n*e}function I6(n,e){return n*n*e}function Em(n,e,t,i){return S6(n,e)+M6(n,t)+I6(n,i)}function T6(n,e){const t=1-n;return t*t*t*e}function B6(n,e){const t=1-n;return 3*t*t*n*e}function R6(n,e){return 3*(1-n)*n*n*e}function D6(n,e){return n*n*n*e}function _m(n,e,t,i,s){return T6(n,e)+B6(n,t)+R6(n,i)+D6(n,s)}class SI extends xo{constructor(e=new me,t=new me,i=new me,s=new me){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=s}getPoint(e,t=new me){const i=t,s=this.v0,r=this.v1,o=this.v2,a=this.v3;return i.set(_m(e,s.x,r.x,o.x,a.x),_m(e,s.y,r.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class IU extends xo{constructor(e=new O,t=new O,i=new O,s=new O){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=s}getPoint(e,t=new O){const i=t,s=this.v0,r=this.v1,o=this.v2,a=this.v3;return i.set(_m(e,s.x,r.x,o.x,a.x),_m(e,s.y,r.y,o.y,a.y),_m(e,s.z,r.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class MI extends xo{constructor(e=new me,t=new me){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new me){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new me){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class TU extends xo{constructor(e=new O,t=new O){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new O){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new O){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class II extends xo{constructor(e=new me,t=new me,i=new me){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new me){const i=t,s=this.v0,r=this.v1,o=this.v2;return i.set(Em(e,s.x,r.x,o.x),Em(e,s.y,r.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class TI extends xo{constructor(e=new O,t=new O,i=new O){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new O){const i=t,s=this.v0,r=this.v1,o=this.v2;return i.set(Em(e,s.x,r.x,o.x),Em(e,s.y,r.y,o.y),Em(e,s.z,r.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class BI extends xo{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new me){const i=t,s=this.points,r=(s.length-1)*e,o=Math.floor(r),a=r-o,l=s[o===0?o:o-1],c=s[o],u=s[o>s.length-2?s.length-1:o+1],h=s[o>s.length-3?s.length-1:o+2];return i.set(G2(a,l.x,c.x,u.x,h.x),G2(a,l.y,c.y,u.y,h.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const s=e.points[t];this.points.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const s=this.points[t];e.points.push(s.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const s=e.points[t];this.points.push(new me().fromArray(s))}return this}}var px=Object.freeze({__proto__:null,ArcCurve:SU,CatmullRomCurve3:MU,CubicBezierCurve:SI,CubicBezierCurve3:IU,EllipseCurve:pb,LineCurve:MI,LineCurve3:TU,QuadraticBezierCurve:II,QuadraticBezierCurve3:TI,SplineCurve:BI});class BU extends xo{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new px[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),s=this.getCurveLengths();let r=0;for(;r<s.length;){if(s[r]>=i){const o=s[r]-i,a=this.curves[r],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,t)}r++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,s=this.curves.length;i<s;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let s=0,r=this.curves;s<r.length;s++){const o=r[s],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const u=l[c];i&&i.equals(u)||(t.push(u),i=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const s=e.curves[t];this.curves.push(s.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const s=this.curves[t];e.curves.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const s=e.curves[t];this.curves.push(new px[s.type]().fromJSON(s))}return this}}class og extends BU{constructor(e){super(),this.type="Path",this.currentPoint=new me,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new MI(this.currentPoint.clone(),new me(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,s){const r=new II(this.currentPoint.clone(),new me(e,t),new me(i,s));return this.curves.push(r),this.currentPoint.set(i,s),this}bezierCurveTo(e,t,i,s,r,o){const a=new SI(this.currentPoint.clone(),new me(e,t),new me(i,s),new me(r,o));return this.curves.push(a),this.currentPoint.set(r,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new BI(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,s,r,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,i,s,r,o),this}absarc(e,t,i,s,r,o){return this.absellipse(e,t,i,i,s,r,o),this}ellipse(e,t,i,s,r,o,a,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,t+u,i,s,r,o,a,l),this}absellipse(e,t,i,s,r,o,a,l){const c=new pb(e,t,i,s,r,o,a,l);if(this.curves.length>0){const h=c.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Fg extends xt{constructor(e=[new me(0,-.5),new me(.5,0),new me(0,.5)],t=12,i=0,s=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:s},t=Math.floor(t),s=_t(s,0,Math.PI*2);const r=[],o=[],a=[],l=[],c=[],u=1/t,h=new O,p=new me,m=new O,g=new O,v=new O;let y=0,A=0;for(let b=0;b<=e.length-1;b++)switch(b){case 0:y=e[b+1].x-e[b].x,A=e[b+1].y-e[b].y,m.x=A*1,m.y=-y,m.z=A*0,v.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(v.x,v.y,v.z);break;default:y=e[b+1].x-e[b].x,A=e[b+1].y-e[b].y,m.x=A*1,m.y=-y,m.z=A*0,g.copy(m),m.x+=v.x,m.y+=v.y,m.z+=v.z,m.normalize(),l.push(m.x,m.y,m.z),v.copy(g)}for(let b=0;b<=t;b++){const w=i+b*u*s,E=Math.sin(w),M=Math.cos(w);for(let I=0;I<=e.length-1;I++){h.x=e[I].x*E,h.y=e[I].y,h.z=e[I].x*M,o.push(h.x,h.y,h.z),p.x=b/t,p.y=I/(e.length-1),a.push(p.x,p.y);const D=l[3*I+0]*E,B=l[3*I+1],R=l[3*I+0]*M;c.push(D,B,R)}}for(let b=0;b<t;b++)for(let w=0;w<e.length-1;w++){const E=w+b*e.length,M=E,I=E+e.length,D=E+e.length+1,B=E+1;r.push(M,I,B),r.push(D,B,I)}this.setIndex(r),this.setAttribute("position",new nt(o,3)),this.setAttribute("uv",new nt(a,2)),this.setAttribute("normal",new nt(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Fg(e.points,e.segments,e.phiStart,e.phiLength)}}class mb extends Fg{constructor(e=1,t=1,i=4,s=8){const r=new og;r.absarc(0,-t/2,e,Math.PI*1.5,0),r.absarc(0,t/2,e,0,Math.PI*.5),super(r.getPoints(i),s),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:i,radialSegments:s}}static fromJSON(e){return new mb(e.radius,e.length,e.capSegments,e.radialSegments)}}class gb extends xt{constructor(e=1,t=32,i=0,s=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:s},t=Math.max(3,t);const r=[],o=[],a=[],l=[],c=new O,u=new me;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let h=0,p=3;h<=t;h++,p+=3){const m=i+h/t*s;c.x=e*Math.cos(m),c.y=e*Math.sin(m),o.push(c.x,c.y,c.z),a.push(0,0,1),u.x=(o[p]/e+1)/2,u.y=(o[p+1]/e+1)/2,l.push(u.x,u.y)}for(let h=1;h<=t;h++)r.push(h,h+1,0);this.setIndex(r),this.setAttribute("position",new nt(o,3)),this.setAttribute("normal",new nt(a,3)),this.setAttribute("uv",new nt(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new gb(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Lf extends xt{constructor(e=1,t=1,i=1,s=32,r=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:s,heightSegments:r,openEnded:o,thetaStart:a,thetaLength:l};const c=this;s=Math.floor(s),r=Math.floor(r);const u=[],h=[],p=[],m=[];let g=0;const v=[],y=i/2;let A=0;b(),o===!1&&(e>0&&w(!0),t>0&&w(!1)),this.setIndex(u),this.setAttribute("position",new nt(h,3)),this.setAttribute("normal",new nt(p,3)),this.setAttribute("uv",new nt(m,2));function b(){const E=new O,M=new O;let I=0;const D=(t-e)/i;for(let B=0;B<=r;B++){const R=[],T=B/r,k=T*(t-e)+e;for(let H=0;H<=s;H++){const Q=H/s,W=Q*l+a,X=Math.sin(W),J=Math.cos(W);M.x=k*X,M.y=-T*i+y,M.z=k*J,h.push(M.x,M.y,M.z),E.set(X,D,J).normalize(),p.push(E.x,E.y,E.z),m.push(Q,1-T),R.push(g++)}v.push(R)}for(let B=0;B<s;B++)for(let R=0;R<r;R++){const T=v[R][B],k=v[R+1][B],H=v[R+1][B+1],Q=v[R][B+1];(e>0||R!==0)&&(u.push(T,k,Q),I+=3),(t>0||R!==r-1)&&(u.push(k,H,Q),I+=3)}c.addGroup(A,I,0),A+=I}function w(E){const M=g,I=new me,D=new O;let B=0;const R=E===!0?e:t,T=E===!0?1:-1;for(let H=1;H<=s;H++)h.push(0,y*T,0),p.push(0,T,0),m.push(.5,.5),g++;const k=g;for(let H=0;H<=s;H++){const W=H/s*l+a,X=Math.cos(W),J=Math.sin(W);D.x=R*J,D.y=y*T,D.z=R*X,h.push(D.x,D.y,D.z),p.push(0,T,0),I.x=X*.5+.5,I.y=J*.5*T+.5,m.push(I.x,I.y),g++}for(let H=0;H<s;H++){const Q=M+H,W=k+H;E===!0?u.push(W,W+1,Q):u.push(W+1,W,Q),B+=3}c.addGroup(A,B,E===!0?1:2),A+=B}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Lf(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Ab extends Lf{constructor(e=1,t=1,i=32,s=1,r=!1,o=0,a=Math.PI*2){super(0,e,t,i,s,r,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:s,openEnded:r,thetaStart:o,thetaLength:a}}static fromJSON(e){return new Ab(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class fc extends xt{constructor(e=[],t=[],i=1,s=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:s};const r=[],o=[];a(s),c(i),u(),this.setAttribute("position",new nt(r,3)),this.setAttribute("normal",new nt(r.slice(),3)),this.setAttribute("uv",new nt(o,2)),s===0?this.computeVertexNormals():this.normalizeNormals();function a(b){const w=new O,E=new O,M=new O;for(let I=0;I<t.length;I+=3)m(t[I+0],w),m(t[I+1],E),m(t[I+2],M),l(w,E,M,b)}function l(b,w,E,M){const I=M+1,D=[];for(let B=0;B<=I;B++){D[B]=[];const R=b.clone().lerp(E,B/I),T=w.clone().lerp(E,B/I),k=I-B;for(let H=0;H<=k;H++)H===0&&B===I?D[B][H]=R:D[B][H]=R.clone().lerp(T,H/k)}for(let B=0;B<I;B++)for(let R=0;R<2*(I-B)-1;R++){const T=Math.floor(R/2);R%2===0?(p(D[B][T+1]),p(D[B+1][T]),p(D[B][T])):(p(D[B][T+1]),p(D[B+1][T+1]),p(D[B+1][T]))}}function c(b){const w=new O;for(let E=0;E<r.length;E+=3)w.x=r[E+0],w.y=r[E+1],w.z=r[E+2],w.normalize().multiplyScalar(b),r[E+0]=w.x,r[E+1]=w.y,r[E+2]=w.z}function u(){const b=new O;for(let w=0;w<r.length;w+=3){b.x=r[w+0],b.y=r[w+1],b.z=r[w+2];const E=y(b)/2/Math.PI+.5,M=A(b)/Math.PI+.5;o.push(E,1-M)}g(),h()}function h(){for(let b=0;b<o.length;b+=6){const w=o[b+0],E=o[b+2],M=o[b+4],I=Math.max(w,E,M),D=Math.min(w,E,M);I>.9&&D<.1&&(w<.2&&(o[b+0]+=1),E<.2&&(o[b+2]+=1),M<.2&&(o[b+4]+=1))}}function p(b){r.push(b.x,b.y,b.z)}function m(b,w){const E=b*3;w.x=e[E+0],w.y=e[E+1],w.z=e[E+2]}function g(){const b=new O,w=new O,E=new O,M=new O,I=new me,D=new me,B=new me;for(let R=0,T=0;R<r.length;R+=9,T+=6){b.set(r[R+0],r[R+1],r[R+2]),w.set(r[R+3],r[R+4],r[R+5]),E.set(r[R+6],r[R+7],r[R+8]),I.set(o[T+0],o[T+1]),D.set(o[T+2],o[T+3]),B.set(o[T+4],o[T+5]),M.copy(b).add(w).add(E).divideScalar(3);const k=y(M);v(I,T+0,b,k),v(D,T+2,w,k),v(B,T+4,E,k)}}function v(b,w,E,M){M<0&&b.x===1&&(o[w]=b.x-1),E.x===0&&E.z===0&&(o[w]=M/2/Math.PI+.5)}function y(b){return Math.atan2(b.z,-b.x)}function A(b){return Math.atan2(-b.y,Math.sqrt(b.x*b.x+b.z*b.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new fc(e.vertices,e.indices,e.radius,e.details)}}class yb extends fc{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,s=1/i,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-s,-i,0,-s,i,0,s,-i,0,s,i,-s,-i,0,-s,i,0,s,-i,0,s,i,0,-i,0,-s,i,0,-s,-i,0,s,i,0,s],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(r,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new yb(e.radius,e.detail)}}const N0=new O,O0=new O,t_=new O,U0=new ns;class RU extends xt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const s=Math.pow(10,4),r=Math.cos(Iu*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],u=["a","b","c"],h=new Array(3),p={},m=[];for(let g=0;g<l;g+=3){o?(c[0]=o.getX(g),c[1]=o.getX(g+1),c[2]=o.getX(g+2)):(c[0]=g,c[1]=g+1,c[2]=g+2);const{a:v,b:y,c:A}=U0;if(v.fromBufferAttribute(a,c[0]),y.fromBufferAttribute(a,c[1]),A.fromBufferAttribute(a,c[2]),U0.getNormal(t_),h[0]=`${Math.round(v.x*s)},${Math.round(v.y*s)},${Math.round(v.z*s)}`,h[1]=`${Math.round(y.x*s)},${Math.round(y.y*s)},${Math.round(y.z*s)}`,h[2]=`${Math.round(A.x*s)},${Math.round(A.y*s)},${Math.round(A.z*s)}`,!(h[0]===h[1]||h[1]===h[2]||h[2]===h[0]))for(let b=0;b<3;b++){const w=(b+1)%3,E=h[b],M=h[w],I=U0[u[b]],D=U0[u[w]],B=`${E}_${M}`,R=`${M}_${E}`;R in p&&p[R]?(t_.dot(p[R].normal)<=r&&(m.push(I.x,I.y,I.z),m.push(D.x,D.y,D.z)),p[R]=null):B in p||(p[B]={index0:c[b],index1:c[w],normal:t_.clone()})}}for(const g in p)if(p[g]){const{index0:v,index1:y}=p[g];N0.fromBufferAttribute(a,v),O0.fromBufferAttribute(a,y),m.push(N0.x,N0.y,N0.z),m.push(O0.x,O0.y,O0.z)}this.setAttribute("position",new nt(m,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}let Bu=class extends og{constructor(e){super(e),this.uuid=cr(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,s=this.holes.length;i<s;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const s=e.holes[t];this.holes.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const s=this.holes[t];e.holes.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const s=e.holes[t];this.holes.push(new og().fromJSON(s))}return this}};const P6={triangulate:function(n,e,t=2){const i=e&&e.length,s=i?e[0]*t:n.length;let r=DU(n,0,s,t,!0);const o=[];if(!r||r.next===r.prev)return o;let a,l,c,u,h,p,m;if(i&&(r=O6(n,e,r,t)),n.length>80*t){a=c=n[0],l=u=n[1];for(let g=t;g<s;g+=t)h=n[g],p=n[g+1],h<a&&(a=h),p<l&&(l=p),h>c&&(c=h),p>u&&(u=p);m=Math.max(c-a,u-l),m=m!==0?32767/m:0}return ag(r,o,t,a,l,m,0),o}};function DU(n,e,t,i,s){let r,o;if(s===X6(n,e,t,i)>0)for(r=e;r<t;r+=i)o=z2(r,n[r],n[r+1],o);else for(r=t-i;r>=e;r-=i)o=z2(r,n[r],n[r+1],o);return o&&vb(o,o.next)&&(cg(o),o=o.next),o}function Qu(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(vb(t,t.next)||On(t.prev,t,t.next)===0)){if(cg(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function ag(n,e,t,i,s,r,o){if(!n)return;!o&&r&&H6(n,i,s,r);let a=n,l,c;for(;n.prev!==n.next;){if(l=n.prev,c=n.next,r?k6(n,i,s,r):L6(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(c.i/t|0),cg(n),n=c.next,a=c.next;continue}if(n=c,n===a){o?o===1?(n=F6(Qu(n),e,t),ag(n,e,t,i,s,r,2)):o===2&&N6(n,e,t,i,s,r):ag(Qu(n),e,t,i,s,r,1);break}}}function L6(n){const e=n.prev,t=n,i=n.next;if(On(e,t,i)>=0)return!1;const s=e.x,r=t.x,o=i.x,a=e.y,l=t.y,c=i.y,u=s<r?s<o?s:o:r<o?r:o,h=a<l?a<c?a:c:l<c?l:c,p=s>r?s>o?s:o:r>o?r:o,m=a>l?a>c?a:c:l>c?l:c;let g=i.next;for(;g!==e;){if(g.x>=u&&g.x<=p&&g.y>=h&&g.y<=m&&_d(s,a,r,l,o,c,g.x,g.y)&&On(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function k6(n,e,t,i){const s=n.prev,r=n,o=n.next;if(On(s,r,o)>=0)return!1;const a=s.x,l=r.x,c=o.x,u=s.y,h=r.y,p=o.y,m=a<l?a<c?a:c:l<c?l:c,g=u<h?u<p?u:p:h<p?h:p,v=a>l?a>c?a:c:l>c?l:c,y=u>h?u>p?u:p:h>p?h:p,A=x1(m,g,e,t,i),b=x1(v,y,e,t,i);let w=n.prevZ,E=n.nextZ;for(;w&&w.z>=A&&E&&E.z<=b;){if(w.x>=m&&w.x<=v&&w.y>=g&&w.y<=y&&w!==s&&w!==o&&_d(a,u,l,h,c,p,w.x,w.y)&&On(w.prev,w,w.next)>=0||(w=w.prevZ,E.x>=m&&E.x<=v&&E.y>=g&&E.y<=y&&E!==s&&E!==o&&_d(a,u,l,h,c,p,E.x,E.y)&&On(E.prev,E,E.next)>=0))return!1;E=E.nextZ}for(;w&&w.z>=A;){if(w.x>=m&&w.x<=v&&w.y>=g&&w.y<=y&&w!==s&&w!==o&&_d(a,u,l,h,c,p,w.x,w.y)&&On(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;E&&E.z<=b;){if(E.x>=m&&E.x<=v&&E.y>=g&&E.y<=y&&E!==s&&E!==o&&_d(a,u,l,h,c,p,E.x,E.y)&&On(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}function F6(n,e,t){let i=n;do{const s=i.prev,r=i.next.next;!vb(s,r)&&PU(s,i,i.next,r)&&lg(s,r)&&lg(r,s)&&(e.push(s.i/t|0),e.push(i.i/t|0),e.push(r.i/t|0),cg(i),cg(i.next),i=n=r),i=i.next}while(i!==n);return Qu(i)}function N6(n,e,t,i,s,r){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&W6(o,a)){let l=LU(o,a);o=Qu(o,o.next),l=Qu(l,l.next),ag(o,e,t,i,s,r,0),ag(l,e,t,i,s,r,0);return}a=a.next}o=o.next}while(o!==n)}function O6(n,e,t,i){const s=[];let r,o,a,l,c;for(r=0,o=e.length;r<o;r++)a=e[r]*i,l=r<o-1?e[r+1]*i:n.length,c=DU(n,a,l,i,!1),c===c.next&&(c.steiner=!0),s.push(j6(c));for(s.sort(U6),r=0;r<s.length;r++)t=G6(s[r],t);return t}function U6(n,e){return n.x-e.x}function G6(n,e){const t=z6(n,e);if(!t)return e;const i=LU(t,n);return Qu(i,i.next),Qu(t,t.next)}function z6(n,e){let t=e,i=-1/0,s;const r=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const p=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p<=r&&p>i&&(i=p,s=t.x<t.next.x?t:t.next,p===r))return s}t=t.next}while(t!==e);if(!s)return null;const a=s,l=s.x,c=s.y;let u=1/0,h;t=s;do r>=t.x&&t.x>=l&&r!==t.x&&_d(o<c?r:i,o,l,c,o<c?i:r,o,t.x,t.y)&&(h=Math.abs(o-t.y)/(r-t.x),lg(t,n)&&(h<u||h===u&&(t.x>s.x||t.x===s.x&&Q6(s,t)))&&(s=t,u=h)),t=t.next;while(t!==a);return s}function Q6(n,e){return On(n.prev,n,e.prev)<0&&On(e.next,n,n.next)<0}function H6(n,e,t,i){let s=n;do s.z===0&&(s.z=x1(s.x,s.y,e,t,i)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==n);s.prevZ.nextZ=null,s.prevZ=null,V6(s)}function V6(n){let e,t,i,s,r,o,a,l,c=1;do{for(t=n,n=null,r=null,o=0;t;){for(o++,i=t,a=0,e=0;e<c&&(a++,i=i.nextZ,!!i);e++);for(l=c;a>0||l>0&&i;)a!==0&&(l===0||!i||t.z<=i.z)?(s=t,t=t.nextZ,a--):(s=i,i=i.nextZ,l--),r?r.nextZ=s:n=s,s.prevZ=r,r=s;t=i}r.nextZ=null,c*=2}while(o>1);return n}function x1(n,e,t,i,s){return n=(n-t)*s|0,e=(e-i)*s|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function j6(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function _d(n,e,t,i,s,r,o,a){return(s-o)*(e-a)>=(n-o)*(r-a)&&(n-o)*(i-a)>=(t-o)*(e-a)&&(t-o)*(r-a)>=(s-o)*(i-a)}function W6(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!q6(n,e)&&(lg(n,e)&&lg(e,n)&&J6(n,e)&&(On(n.prev,n,e.prev)||On(n,e.prev,e))||vb(n,e)&&On(n.prev,n,n.next)>0&&On(e.prev,e,e.next)>0)}function On(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function vb(n,e){return n.x===e.x&&n.y===e.y}function PU(n,e,t,i){const s=z0(On(n,e,t)),r=z0(On(n,e,i)),o=z0(On(t,i,n)),a=z0(On(t,i,e));return!!(s!==r&&o!==a||s===0&&G0(n,t,e)||r===0&&G0(n,i,e)||o===0&&G0(t,n,i)||a===0&&G0(t,e,i))}function G0(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function z0(n){return n>0?1:n<0?-1:0}function q6(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&PU(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function lg(n,e){return On(n.prev,n,n.next)<0?On(n,e,n.next)>=0&&On(n,n.prev,e)>=0:On(n,e,n.prev)<0||On(n,n.next,e)<0}function J6(n,e){let t=n,i=!1;const s=(n.x+e.x)/2,r=(n.y+e.y)/2;do t.y>r!=t.next.y>r&&t.next.y!==t.y&&s<(t.next.x-t.x)*(r-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function LU(n,e){const t=new b1(n.i,n.x,n.y),i=new b1(e.i,e.x,e.y),s=n.next,r=e.prev;return n.next=e,e.prev=n,t.next=s,s.prev=t,i.next=t,t.prev=i,r.next=i,i.prev=r,i}function z2(n,e,t,i){const s=new b1(n,e,t);return i?(s.next=i.next,s.prev=i,i.next.prev=s,i.next=s):(s.prev=s,s.next=s),s}function cg(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function b1(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function X6(n,e,t,i){let s=0;for(let r=e,o=t-i;r<t;r+=i)s+=(n[o]-n[r])*(n[r+1]+n[o+1]),o=r;return s}class Vo{static area(e){const t=e.length;let i=0;for(let s=t-1,r=0;r<t;s=r++)i+=e[s].x*e[r].y-e[r].x*e[s].y;return i*.5}static isClockWise(e){return Vo.area(e)<0}static triangulateShape(e,t){const i=[],s=[],r=[];Q2(e),H2(i,e);let o=e.length;t.forEach(Q2);for(let l=0;l<t.length;l++)s.push(o),o+=t[l].length,H2(i,t[l]);const a=P6.triangulate(i,s);for(let l=0;l<a.length;l+=3)r.push(a.slice(l,l+3));return r}}function Q2(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function H2(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class xb extends xt{constructor(e=new Bu([new me(.5,.5),new me(-.5,.5),new me(-.5,-.5),new me(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,s=[],r=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new nt(s,3)),this.setAttribute("uv",new nt(r,2)),this.computeVertexNormals();function o(a){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,u=t.steps!==void 0?t.steps:1,h=t.depth!==void 0?t.depth:1;let p=t.bevelEnabled!==void 0?t.bevelEnabled:!0,m=t.bevelThickness!==void 0?t.bevelThickness:.2,g=t.bevelSize!==void 0?t.bevelSize:m-.1,v=t.bevelOffset!==void 0?t.bevelOffset:0,y=t.bevelSegments!==void 0?t.bevelSegments:3;const A=t.extrudePath,b=t.UVGenerator!==void 0?t.UVGenerator:K6;let w,E=!1,M,I,D,B;A&&(w=A.getSpacedPoints(u),E=!0,p=!1,M=A.computeFrenetFrames(u,!1),I=new O,D=new O,B=new O),p||(y=0,m=0,g=0,v=0);const R=a.extractPoints(c);let T=R.shape;const k=R.holes;if(!Vo.isClockWise(T)){T=T.reverse();for(let Ae=0,be=k.length;Ae<be;Ae++){const G=k[Ae];Vo.isClockWise(G)&&(k[Ae]=G.reverse())}}const Q=Vo.triangulateShape(T,k),W=T;for(let Ae=0,be=k.length;Ae<be;Ae++){const G=k[Ae];T=T.concat(G)}function X(Ae,be,G){return be||console.error("THREE.ExtrudeGeometry: vec does not exist"),Ae.clone().addScaledVector(be,G)}const J=T.length,K=Q.length;function L(Ae,be,G){let ot,Ce,Ve;const Be=Ae.x-be.x,gt=Ae.y-be.y,Pe=G.x-Ae.x,U=G.y-Ae.y,F=Be*Be+gt*gt,re=Be*U-gt*Pe;if(Math.abs(re)>Number.EPSILON){const pe=Math.sqrt(F),we=Math.sqrt(Pe*Pe+U*U),ye=be.x-gt/pe,it=be.y+Be/pe,Ne=G.x-U/we,He=G.y+Pe/we,Ut=((Ne-ye)*U-(He-it)*Pe)/(Be*U-gt*Pe);ot=ye+Be*Ut-Ae.x,Ce=it+gt*Ut-Ae.y;const Ie=ot*ot+Ce*Ce;if(Ie<=2)return new me(ot,Ce);Ve=Math.sqrt(Ie/2)}else{let pe=!1;Be>Number.EPSILON?Pe>Number.EPSILON&&(pe=!0):Be<-Number.EPSILON?Pe<-Number.EPSILON&&(pe=!0):Math.sign(gt)===Math.sign(U)&&(pe=!0),pe?(ot=-gt,Ce=Be,Ve=Math.sqrt(F)):(ot=Be,Ce=gt,Ve=Math.sqrt(F/2))}return new me(ot/Ve,Ce/Ve)}const V=[];for(let Ae=0,be=W.length,G=be-1,ot=Ae+1;Ae<be;Ae++,G++,ot++)G===be&&(G=0),ot===be&&(ot=0),V[Ae]=L(W[Ae],W[G],W[ot]);const j=[];let $,le=V.concat();for(let Ae=0,be=k.length;Ae<be;Ae++){const G=k[Ae];$=[];for(let ot=0,Ce=G.length,Ve=Ce-1,Be=ot+1;ot<Ce;ot++,Ve++,Be++)Ve===Ce&&(Ve=0),Be===Ce&&(Be=0),$[ot]=L(G[ot],G[Ve],G[Be]);j.push($),le=le.concat($)}for(let Ae=0;Ae<y;Ae++){const be=Ae/y,G=m*Math.cos(be*Math.PI/2),ot=g*Math.sin(be*Math.PI/2)+v;for(let Ce=0,Ve=W.length;Ce<Ve;Ce++){const Be=X(W[Ce],V[Ce],ot);se(Be.x,Be.y,-G)}for(let Ce=0,Ve=k.length;Ce<Ve;Ce++){const Be=k[Ce];$=j[Ce];for(let gt=0,Pe=Be.length;gt<Pe;gt++){const U=X(Be[gt],$[gt],ot);se(U.x,U.y,-G)}}}const ve=g+v;for(let Ae=0;Ae<J;Ae++){const be=p?X(T[Ae],le[Ae],ve):T[Ae];E?(D.copy(M.normals[0]).multiplyScalar(be.x),I.copy(M.binormals[0]).multiplyScalar(be.y),B.copy(w[0]).add(D).add(I),se(B.x,B.y,B.z)):se(be.x,be.y,0)}for(let Ae=1;Ae<=u;Ae++)for(let be=0;be<J;be++){const G=p?X(T[be],le[be],ve):T[be];E?(D.copy(M.normals[Ae]).multiplyScalar(G.x),I.copy(M.binormals[Ae]).multiplyScalar(G.y),B.copy(w[Ae]).add(D).add(I),se(B.x,B.y,B.z)):se(G.x,G.y,h/u*Ae)}for(let Ae=y-1;Ae>=0;Ae--){const be=Ae/y,G=m*Math.cos(be*Math.PI/2),ot=g*Math.sin(be*Math.PI/2)+v;for(let Ce=0,Ve=W.length;Ce<Ve;Ce++){const Be=X(W[Ce],V[Ce],ot);se(Be.x,Be.y,h+G)}for(let Ce=0,Ve=k.length;Ce<Ve;Ce++){const Be=k[Ce];$=j[Ce];for(let gt=0,Pe=Be.length;gt<Pe;gt++){const U=X(Be[gt],$[gt],ot);E?se(U.x,U.y+w[u-1].y,w[u-1].x+G):se(U.x,U.y,h+G)}}}q(),ae();function q(){const Ae=s.length/3;if(p){let be=0,G=J*be;for(let ot=0;ot<K;ot++){const Ce=Q[ot];Fe(Ce[2]+G,Ce[1]+G,Ce[0]+G)}be=u+y*2,G=J*be;for(let ot=0;ot<K;ot++){const Ce=Q[ot];Fe(Ce[0]+G,Ce[1]+G,Ce[2]+G)}}else{for(let be=0;be<K;be++){const G=Q[be];Fe(G[2],G[1],G[0])}for(let be=0;be<K;be++){const G=Q[be];Fe(G[0]+J*u,G[1]+J*u,G[2]+J*u)}}i.addGroup(Ae,s.length/3-Ae,0)}function ae(){const Ae=s.length/3;let be=0;ge(W,be),be+=W.length;for(let G=0,ot=k.length;G<ot;G++){const Ce=k[G];ge(Ce,be),be+=Ce.length}i.addGroup(Ae,s.length/3-Ae,1)}function ge(Ae,be){let G=Ae.length;for(;--G>=0;){const ot=G;let Ce=G-1;Ce<0&&(Ce=Ae.length-1);for(let Ve=0,Be=u+y*2;Ve<Be;Ve++){const gt=J*Ve,Pe=J*(Ve+1),U=be+ot+gt,F=be+Ce+gt,re=be+Ce+Pe,pe=be+ot+Pe;qe(U,F,re,pe)}}}function se(Ae,be,G){l.push(Ae),l.push(be),l.push(G)}function Fe(Ae,be,G){st(Ae),st(be),st(G);const ot=s.length/3,Ce=b.generateTopUV(i,s,ot-3,ot-2,ot-1);dt(Ce[0]),dt(Ce[1]),dt(Ce[2])}function qe(Ae,be,G,ot){st(Ae),st(be),st(ot),st(be),st(G),st(ot);const Ce=s.length/3,Ve=b.generateSideWallUV(i,s,Ce-6,Ce-3,Ce-2,Ce-1);dt(Ve[0]),dt(Ve[1]),dt(Ve[3]),dt(Ve[1]),dt(Ve[2]),dt(Ve[3])}function st(Ae){s.push(l[Ae*3+0]),s.push(l[Ae*3+1]),s.push(l[Ae*3+2])}function dt(Ae){r.push(Ae.x),r.push(Ae.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return $6(t,i,e)}static fromJSON(e,t){const i=[];for(let r=0,o=e.shapes.length;r<o;r++){const a=t[e.shapes[r]];i.push(a)}const s=e.options.extrudePath;return s!==void 0&&(e.options.extrudePath=new px[s.type]().fromJSON(s)),new xb(i,e.options)}}const K6={generateTopUV:function(n,e,t,i,s){const r=e[t*3],o=e[t*3+1],a=e[i*3],l=e[i*3+1],c=e[s*3],u=e[s*3+1];return[new me(r,o),new me(a,l),new me(c,u)]},generateSideWallUV:function(n,e,t,i,s,r){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],c=e[i*3],u=e[i*3+1],h=e[i*3+2],p=e[s*3],m=e[s*3+1],g=e[s*3+2],v=e[r*3],y=e[r*3+1],A=e[r*3+2];return Math.abs(a-u)<Math.abs(o-c)?[new me(o,1-l),new me(c,1-h),new me(p,1-g),new me(v,1-A)]:[new me(a,1-l),new me(u,1-h),new me(m,1-g),new me(y,1-A)]}};function $6(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,s=n.length;i<s;i++){const r=n[i];t.shapes.push(r.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class bb extends fc{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,s=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],r=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(s,r,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new bb(e.radius,e.detail)}}class Ng extends fc{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],s=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,s,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Ng(e.radius,e.detail)}}class bo extends xt{constructor(e=1,t=1,i=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:s};const r=e/2,o=t/2,a=Math.floor(i),l=Math.floor(s),c=a+1,u=l+1,h=e/a,p=t/l,m=[],g=[],v=[],y=[];for(let A=0;A<u;A++){const b=A*p-o;for(let w=0;w<c;w++){const E=w*h-r;g.push(E,-b,0),v.push(0,0,1),y.push(w/a),y.push(1-A/l)}}for(let A=0;A<l;A++)for(let b=0;b<a;b++){const w=b+c*A,E=b+c*(A+1),M=b+1+c*(A+1),I=b+1+c*A;m.push(w,E,I),m.push(E,M,I)}this.setIndex(m),this.setAttribute("position",new nt(g,3)),this.setAttribute("normal",new nt(v,3)),this.setAttribute("uv",new nt(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new bo(e.width,e.height,e.widthSegments,e.heightSegments)}}class wb extends xt{constructor(e=.5,t=1,i=32,s=1,r=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:s,thetaStart:r,thetaLength:o},i=Math.max(3,i),s=Math.max(1,s);const a=[],l=[],c=[],u=[];let h=e;const p=(t-e)/s,m=new O,g=new me;for(let v=0;v<=s;v++){for(let y=0;y<=i;y++){const A=r+y/i*o;m.x=h*Math.cos(A),m.y=h*Math.sin(A),l.push(m.x,m.y,m.z),c.push(0,0,1),g.x=(m.x/t+1)/2,g.y=(m.y/t+1)/2,u.push(g.x,g.y)}h+=p}for(let v=0;v<s;v++){const y=v*(i+1);for(let A=0;A<i;A++){const b=A+y,w=b,E=b+i+1,M=b+i+2,I=b+1;a.push(w,E,I),a.push(E,M,I)}}this.setIndex(a),this.setAttribute("position",new nt(l,3)),this.setAttribute("normal",new nt(c,3)),this.setAttribute("uv",new nt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new wb(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Eb extends xt{constructor(e=new Bu([new me(0,.5),new me(-.5,-.5),new me(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],s=[],r=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new nt(s,3)),this.setAttribute("normal",new nt(r,3)),this.setAttribute("uv",new nt(o,2));function c(u){const h=s.length/3,p=u.extractPoints(t);let m=p.shape;const g=p.holes;Vo.isClockWise(m)===!1&&(m=m.reverse());for(let y=0,A=g.length;y<A;y++){const b=g[y];Vo.isClockWise(b)===!0&&(g[y]=b.reverse())}const v=Vo.triangulateShape(m,g);for(let y=0,A=g.length;y<A;y++){const b=g[y];m=m.concat(b)}for(let y=0,A=m.length;y<A;y++){const b=m[y];s.push(b.x,b.y,0),r.push(0,0,1),o.push(b.x,b.y)}for(let y=0,A=v.length;y<A;y++){const b=v[y],w=b[0]+h,E=b[1]+h,M=b[2]+h;i.push(w,E,M),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return Y6(t,e)}static fromJSON(e,t){const i=[];for(let s=0,r=e.shapes.length;s<r;s++){const o=t[e.shapes[s]];i.push(o)}return new Eb(i,e.curveSegments)}}function Y6(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const s=n[t];e.shapes.push(s.uuid)}else e.shapes.push(n.uuid);return e}class kf extends xt{constructor(e=1,t=32,i=16,s=0,r=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:s,phiLength:r,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let c=0;const u=[],h=new O,p=new O,m=[],g=[],v=[],y=[];for(let A=0;A<=i;A++){const b=[],w=A/i;let E=0;A===0&&o===0?E=.5/t:A===i&&l===Math.PI&&(E=-.5/t);for(let M=0;M<=t;M++){const I=M/t;h.x=-e*Math.cos(s+I*r)*Math.sin(o+w*a),h.y=e*Math.cos(o+w*a),h.z=e*Math.sin(s+I*r)*Math.sin(o+w*a),g.push(h.x,h.y,h.z),p.copy(h).normalize(),v.push(p.x,p.y,p.z),y.push(I+E,1-w),b.push(c++)}u.push(b)}for(let A=0;A<i;A++)for(let b=0;b<t;b++){const w=u[A][b+1],E=u[A][b],M=u[A+1][b],I=u[A+1][b+1];(A!==0||o>0)&&m.push(w,E,I),(A!==i-1||l<Math.PI)&&m.push(E,M,I)}this.setIndex(m),this.setAttribute("position",new nt(g,3)),this.setAttribute("normal",new nt(v,3)),this.setAttribute("uv",new nt(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new kf(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class _b extends fc{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],s=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,s,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new _b(e.radius,e.detail)}}class Cb extends xt{constructor(e=1,t=.4,i=12,s=48,r=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:s,arc:r},i=Math.floor(i),s=Math.floor(s);const o=[],a=[],l=[],c=[],u=new O,h=new O,p=new O;for(let m=0;m<=i;m++)for(let g=0;g<=s;g++){const v=g/s*r,y=m/i*Math.PI*2;h.x=(e+t*Math.cos(y))*Math.cos(v),h.y=(e+t*Math.cos(y))*Math.sin(v),h.z=t*Math.sin(y),a.push(h.x,h.y,h.z),u.x=e*Math.cos(v),u.y=e*Math.sin(v),p.subVectors(h,u).normalize(),l.push(p.x,p.y,p.z),c.push(g/s),c.push(m/i)}for(let m=1;m<=i;m++)for(let g=1;g<=s;g++){const v=(s+1)*m+g-1,y=(s+1)*(m-1)+g-1,A=(s+1)*(m-1)+g,b=(s+1)*m+g;o.push(v,y,b),o.push(y,A,b)}this.setIndex(o),this.setAttribute("position",new nt(a,3)),this.setAttribute("normal",new nt(l,3)),this.setAttribute("uv",new nt(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Cb(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Sb extends xt{constructor(e=1,t=.4,i=64,s=8,r=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:s,p:r,q:o},i=Math.floor(i),s=Math.floor(s);const a=[],l=[],c=[],u=[],h=new O,p=new O,m=new O,g=new O,v=new O,y=new O,A=new O;for(let w=0;w<=i;++w){const E=w/i*r*Math.PI*2;b(E,r,o,e,m),b(E+.01,r,o,e,g),y.subVectors(g,m),A.addVectors(g,m),v.crossVectors(y,A),A.crossVectors(v,y),v.normalize(),A.normalize();for(let M=0;M<=s;++M){const I=M/s*Math.PI*2,D=-t*Math.cos(I),B=t*Math.sin(I);h.x=m.x+(D*A.x+B*v.x),h.y=m.y+(D*A.y+B*v.y),h.z=m.z+(D*A.z+B*v.z),l.push(h.x,h.y,h.z),p.subVectors(h,m).normalize(),c.push(p.x,p.y,p.z),u.push(w/i),u.push(M/s)}}for(let w=1;w<=i;w++)for(let E=1;E<=s;E++){const M=(s+1)*(w-1)+(E-1),I=(s+1)*w+(E-1),D=(s+1)*w+E,B=(s+1)*(w-1)+E;a.push(M,I,B),a.push(I,D,B)}this.setIndex(a),this.setAttribute("position",new nt(l,3)),this.setAttribute("normal",new nt(c,3)),this.setAttribute("uv",new nt(u,2));function b(w,E,M,I,D){const B=Math.cos(w),R=Math.sin(w),T=M/E*w,k=Math.cos(T);D.x=I*(2+k)*.5*B,D.y=I*(2+k)*R*.5,D.z=I*Math.sin(T)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Sb(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Mb extends xt{constructor(e=new TI(new O(-1,-1,0),new O(-1,1,0),new O(1,1,0)),t=64,i=1,s=8,r=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:s,closed:r};const o=e.computeFrenetFrames(t,r);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new O,l=new O,c=new me;let u=new O;const h=[],p=[],m=[],g=[];v(),this.setIndex(g),this.setAttribute("position",new nt(h,3)),this.setAttribute("normal",new nt(p,3)),this.setAttribute("uv",new nt(m,2));function v(){for(let w=0;w<t;w++)y(w);y(r===!1?t:0),b(),A()}function y(w){u=e.getPointAt(w/t,u);const E=o.normals[w],M=o.binormals[w];for(let I=0;I<=s;I++){const D=I/s*Math.PI*2,B=Math.sin(D),R=-Math.cos(D);l.x=R*E.x+B*M.x,l.y=R*E.y+B*M.y,l.z=R*E.z+B*M.z,l.normalize(),p.push(l.x,l.y,l.z),a.x=u.x+i*l.x,a.y=u.y+i*l.y,a.z=u.z+i*l.z,h.push(a.x,a.y,a.z)}}function A(){for(let w=1;w<=t;w++)for(let E=1;E<=s;E++){const M=(s+1)*(w-1)+(E-1),I=(s+1)*w+(E-1),D=(s+1)*w+E,B=(s+1)*(w-1)+E;g.push(M,I,B),g.push(I,D,B)}}function b(){for(let w=0;w<=t;w++)for(let E=0;E<=s;E++)c.x=w/t,c.y=E/s,m.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Mb(new px[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class kU extends xt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,s=new O,r=new O;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const h=l[c],p=h.start,m=h.count;for(let g=p,v=p+m;g<v;g+=3)for(let y=0;y<3;y++){const A=a.getX(g+y),b=a.getX(g+(y+1)%3);s.fromBufferAttribute(o,A),r.fromBufferAttribute(o,b),V2(s,r,i)===!0&&(t.push(s.x,s.y,s.z),t.push(r.x,r.y,r.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const u=3*a+c,h=3*a+(c+1)%3;s.fromBufferAttribute(o,u),r.fromBufferAttribute(o,h),V2(s,r,i)===!0&&(t.push(s.x,s.y,s.z),t.push(r.x,r.y,r.z))}}this.setAttribute("position",new nt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function V2(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,s=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(s)===!0?!1:(t.add(i),t.add(s),!0)}var j2=Object.freeze({__proto__:null,BoxGeometry:vo,CapsuleGeometry:mb,CircleGeometry:gb,ConeGeometry:Ab,CylinderGeometry:Lf,DodecahedronGeometry:yb,EdgesGeometry:RU,ExtrudeGeometry:xb,IcosahedronGeometry:bb,LatheGeometry:Fg,OctahedronGeometry:Ng,PlaneGeometry:bo,PolyhedronGeometry:fc,RingGeometry:wb,ShapeGeometry:Eb,SphereGeometry:kf,TetrahedronGeometry:_b,TorusGeometry:Cb,TorusKnotGeometry:Sb,TubeGeometry:Mb,WireframeGeometry:kU});class FU extends zn{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Me(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class NU extends cs{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Wa extends zn{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Me(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Me(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=dc,this.normalScale=new me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ss,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Xn extends Wa{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new me(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return _t(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Me(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Me(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Me(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class OU extends zn{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Me(16777215),this.specular=new Me(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Me(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=dc,this.normalScale=new me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ss,this.combine=Cg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class UU extends zn{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Me(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Me(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=dc,this.normalScale=new me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class GU extends zn{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=dc,this.normalScale=new me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class zU extends zn{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Me(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Me(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=dc,this.normalScale=new me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ss,this.combine=Cg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Ib extends zn{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=nU,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class RI extends zn{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class QU extends zn{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Me(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=dc,this.normalScale=new me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class HU extends Qi{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function mu(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function VU(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function jU(n){function e(s,r){return n[s]-n[r]}const t=n.length,i=new Array(t);for(let s=0;s!==t;++s)i[s]=s;return i.sort(e),i}function w1(n,e,t){const i=n.length,s=new n.constructor(i);for(let r=0,o=0;o!==i;++r){const a=t[r]*e;for(let l=0;l!==e;++l)s[o++]=n[a+l]}return s}function DI(n,e,t,i){let s=1,r=n[0];for(;r!==void 0&&r[i]===void 0;)r=n[s++];if(r===void 0)return;let o=r[i];if(o!==void 0)if(Array.isArray(o))do o=r[i],o!==void 0&&(e.push(r.time),t.push.apply(t,o)),r=n[s++];while(r!==void 0);else if(o.toArray!==void 0)do o=r[i],o!==void 0&&(e.push(r.time),o.toArray(t,t.length)),r=n[s++];while(r!==void 0);else do o=r[i],o!==void 0&&(e.push(r.time),t.push(o)),r=n[s++];while(r!==void 0)}function Z6(n,e,t,i,s=30){const r=n.clone();r.name=e;const o=[];for(let l=0;l<r.tracks.length;++l){const c=r.tracks[l],u=c.getValueSize(),h=[],p=[];for(let m=0;m<c.times.length;++m){const g=c.times[m]*s;if(!(g<t||g>=i)){h.push(c.times[m]);for(let v=0;v<u;++v)p.push(c.values[m*u+v])}}h.length!==0&&(c.times=mu(h,c.times.constructor),c.values=mu(p,c.values.constructor),o.push(c))}r.tracks=o;let a=1/0;for(let l=0;l<r.tracks.length;++l)a>r.tracks[l].times[0]&&(a=r.tracks[l].times[0]);for(let l=0;l<r.tracks.length;++l)r.tracks[l].shift(-1*a);return r.resetDuration(),r}function eV(n,e=0,t=n,i=30){i<=0&&(i=30);const s=t.tracks.length,r=e/i;for(let o=0;o<s;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=n.tracks.find(function(A){return A.name===a.name&&A.ValueTypeName===l});if(c===void 0)continue;let u=0;const h=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=h/3);let p=0;const m=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=m/3);const g=a.times.length-1;let v;if(r<=a.times[0]){const A=u,b=h-u;v=a.values.slice(A,b)}else if(r>=a.times[g]){const A=g*h+u,b=A+h-u;v=a.values.slice(A,b)}else{const A=a.createInterpolant(),b=u,w=h-u;A.evaluate(r),v=A.resultBuffer.slice(b,w)}l==="quaternion"&&new qn().fromArray(v).normalize().conjugate().toArray(v);const y=c.times.length;for(let A=0;A<y;++A){const b=A*m+p;if(l==="quaternion")qn.multiplyQuaternionsFlat(c.values,b,v,0,c.values,b);else{const w=m-p*2;for(let E=0;E<w;++E)c.values[b+E]-=v[E]}}}return n.blendMode=AI,n}const tV={convertArray:mu,isTypedArray:VU,getKeyframeOrder:jU,sortedArray:w1,flattenJSON:DI,subclip:Z6,makeClipAdditive:eV};class eh{constructor(e,t,i,s){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=s!==void 0?s:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,s=t[i],r=t[i-1];e:{t:{let o;n:{i:if(!(e<s)){for(let a=i+2;;){if(s===void 0){if(e<r)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(r=s,s=t[++i],e<s)break t}o=t.length;break n}if(!(e>=r)){const a=t[1];e<a&&(i=2,r=a);for(let l=i-2;;){if(r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(s=r,r=t[--i-1],e>=r)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(s=t[i],r=t[i-1],r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,r,s)}return this.interpolate_(i,r,e,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,s=this.valueSize,r=e*s;for(let o=0;o!==s;++o)t[o]=i[r+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class WU extends eh{constructor(e,t,i,s){super(e,t,i,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:fu,endingEnd:fu}}intervalChanged_(e,t,i){const s=this.parameterPositions;let r=e-2,o=e+1,a=s[r],l=s[o];if(a===void 0)switch(this.getSettings_().endingStart){case pu:r=e,a=2*t-i;break;case tg:r=s.length-2,a=t+s[r]-s[r+1];break;default:r=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case pu:o=e,l=2*i-t;break;case tg:o=1,l=i+s[1]-s[0];break;default:o=e-1,l=t}const c=(i-t)*.5,u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-i),this._offsetPrev=r*u,this._offsetNext=o*u}interpolate_(e,t,i,s){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,h=this._offsetNext,p=this._weightPrev,m=this._weightNext,g=(i-t)/(s-t),v=g*g,y=v*g,A=-p*y+2*p*v-p*g,b=(1+p)*y+(-1.5-2*p)*v+(-.5+p)*g+1,w=(-1-m)*y+(1.5+m)*v+.5*g,E=m*y-m*v;for(let M=0;M!==a;++M)r[M]=A*o[u+M]+b*o[c+M]+w*o[l+M]+E*o[h+M];return r}}class PI extends eh{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e,t,i,s){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(i-t)/(s-t),h=1-u;for(let p=0;p!==a;++p)r[p]=o[c+p]*h+o[l+p]*u;return r}}class qU extends eh{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e){return this.copySampleValue_(e-1)}}class wo{constructor(e,t,i,s){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=mu(t,this.TimeBufferType),this.values=mu(i,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:mu(e.times,Array),values:mu(e.values,Array)};const s=e.getInterpolation();s!==e.DefaultInterpolation&&(i.interpolation=s)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new qU(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new PI(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new WU(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case nc:t=this.InterpolantFactoryMethodDiscrete;break;case Va:t=this.InterpolantFactoryMethodLinear;break;case Yy:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return nc;case this.InterpolantFactoryMethodLinear:return Va;case this.InterpolantFactoryMethodSmooth:return Yy}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,s=t.length;i!==s;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,s=t.length;i!==s;++i)t[i]*=e}return this}trim(e,t){const i=this.times,s=i.length;let r=0,o=s-1;for(;r!==s&&i[r]<e;)++r;for(;o!==-1&&i[o]>t;)--o;if(++o,r!==0||o!==s){r>=o&&(o=Math.max(o,1),r=o-1);const a=this.getValueSize();this.times=i.slice(r,o),this.values=this.values.slice(r*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,s=this.values,r=i.length;r===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==r;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(s!==void 0&&VU(s))for(let a=0,l=s.length;a!==l;++a){const c=s[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),s=this.getInterpolation()===Yy,r=e.length-1;let o=1;for(let a=1;a<r;++a){let l=!1;const c=e[a],u=e[a+1];if(c!==u&&(a!==1||c!==e[0]))if(s)l=!0;else{const h=a*i,p=h-i,m=h+i;for(let g=0;g!==i;++g){const v=t[h+g];if(v!==t[p+g]||v!==t[m+g]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const h=a*i,p=o*i;for(let m=0;m!==i;++m)t[p+m]=t[h+m]}++o}}if(r>0){e[o]=e[r];for(let a=r*i,l=o*i,c=0;c!==i;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,s=new i(this.name,e,t);return s.createInterpolant=this.createInterpolant,s}}wo.prototype.TimeBufferType=Float32Array;wo.prototype.ValueBufferType=Float32Array;wo.prototype.DefaultInterpolation=Va;class th extends wo{constructor(e,t,i){super(e,t,i)}}th.prototype.ValueTypeName="bool";th.prototype.ValueBufferType=Array;th.prototype.DefaultInterpolation=nc;th.prototype.InterpolantFactoryMethodLinear=void 0;th.prototype.InterpolantFactoryMethodSmooth=void 0;class LI extends wo{}LI.prototype.ValueTypeName="color";class qa extends wo{}qa.prototype.ValueTypeName="number";class JU extends eh{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e,t,i,s){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(s-t);let c=e*a;for(let u=c+a;c!==u;c+=4)qn.slerpFlat(r,0,o,c-a,o,c,l);return r}}class Ja extends wo{InterpolantFactoryMethodLinear(e){return new JU(this.times,this.values,this.getValueSize(),e)}}Ja.prototype.ValueTypeName="quaternion";Ja.prototype.InterpolantFactoryMethodSmooth=void 0;class nh extends wo{constructor(e,t,i){super(e,t,i)}}nh.prototype.ValueTypeName="string";nh.prototype.ValueBufferType=Array;nh.prototype.DefaultInterpolation=nc;nh.prototype.InterpolantFactoryMethodLinear=void 0;nh.prototype.InterpolantFactoryMethodSmooth=void 0;class Xa extends wo{}Xa.prototype.ValueTypeName="vector";class Hu{constructor(e="",t=-1,i=[],s=rb){this.name=e,this.tracks=i,this.duration=t,this.blendMode=s,this.uuid=cr(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,s=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(iV(i[o]).scale(s));const r=new this(e.name,e.duration,t,e.blendMode);return r.uuid=e.uuid,r}static toJSON(e){const t=[],i=e.tracks,s={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let r=0,o=i.length;r!==o;++r)t.push(wo.toJSON(i[r]));return s}static CreateFromMorphTargetSequence(e,t,i,s){const r=t.length,o=[];for(let a=0;a<r;a++){let l=[],c=[];l.push((a+r-1)%r,a,(a+1)%r),c.push(0,1,0);const u=jU(l);l=w1(l,1,u),c=w1(c,1,u),!s&&l[0]===0&&(l.push(r),c.push(c[0])),o.push(new qa(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const s=e;i=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<i.length;s++)if(i[s].name===t)return i[s];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const s={},r=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(r);if(u&&u.length>1){const h=u[1];let p=s[h];p||(s[h]=p=[]),p.push(c)}}const o=[];for(const a in s)o.push(this.CreateFromMorphTargetSequence(a,s[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(h,p,m,g,v){if(m.length!==0){const y=[],A=[];DI(m,y,A,g),y.length!==0&&v.push(new h(p,y,A))}},s=[],r=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let h=0;h<c.length;h++){const p=c[h].keys;if(!(!p||p.length===0))if(p[0].morphTargets){const m={};let g;for(g=0;g<p.length;g++)if(p[g].morphTargets)for(let v=0;v<p[g].morphTargets.length;v++)m[p[g].morphTargets[v]]=-1;for(const v in m){const y=[],A=[];for(let b=0;b!==p[g].morphTargets.length;++b){const w=p[g];y.push(w.time),A.push(w.morphTarget===v?1:0)}s.push(new qa(".morphTargetInfluence["+v+"]",y,A))}l=m.length*o}else{const m=".bones["+t[h].name+"]";i(Xa,m+".position",p,"pos",s),i(Ja,m+".quaternion",p,"rot",s),i(Xa,m+".scale",p,"scl",s)}}return s.length===0?null:new this(r,l,s,a)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,s=e.length;i!==s;++i){const r=this.tracks[i];t=Math.max(t,r.times[r.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function nV(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return qa;case"vector":case"vector2":case"vector3":case"vector4":return Xa;case"color":return LI;case"quaternion":return Ja;case"bool":case"boolean":return th;case"string":return nh}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function iV(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=nV(n.type);if(n.times===void 0){const t=[],i=[];DI(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Ra={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class Tb{constructor(e,t,i){const s=this;let r=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(u){a++,r===!1&&s.onStart!==void 0&&s.onStart(u,o,a),r=!0},this.itemEnd=function(u){o++,s.onProgress!==void 0&&s.onProgress(u,o,a),o===a&&(r=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(u){s.onError!==void 0&&s.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,h){return c.push(u,h),this},this.removeHandler=function(u){const h=c.indexOf(u);return h!==-1&&c.splice(h,2),this},this.getHandler=function(u){for(let h=0,p=c.length;h<p;h+=2){const m=c[h],g=c[h+1];if(m.global&&(m.lastIndex=0),m.test(u))return g}return null}}}const XU=new Tb;class hi{constructor(e){this.manager=e!==void 0?e:XU,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(s,r){i.load(e,s,t,r)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}hi.DEFAULT_MATERIAL_NAME="__DEFAULT";const ha={};class sV extends Error{constructor(e,t){super(e),this.response=t}}class ni extends hi{constructor(e){super(e)}load(e,t,i,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=Ra.get(e);if(r!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(r),this.manager.itemEnd(e)},0),r;if(ha[e]!==void 0){ha[e].push({onLoad:t,onProgress:i,onError:s});return}ha[e]=[],ha[e].push({onLoad:t,onProgress:i,onError:s});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=ha[e],h=c.body.getReader(),p=c.headers.get("X-File-Size")||c.headers.get("Content-Length"),m=p?parseInt(p):0,g=m!==0;let v=0;const y=new ReadableStream({start(A){b();function b(){h.read().then(({done:w,value:E})=>{if(w)A.close();else{v+=E.byteLength;const M=new ProgressEvent("progress",{lengthComputable:g,loaded:v,total:m});for(let I=0,D=u.length;I<D;I++){const B=u[I];B.onProgress&&B.onProgress(M)}A.enqueue(E),b()}},w=>{A.error(w)})}}});return new Response(y)}else throw new sV(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return c.json();default:if(a===void 0)return c.text();{const h=/charset="?([^;"\s]*)"?/i.exec(a),p=h&&h[1]?h[1].toLowerCase():void 0,m=new TextDecoder(p);return c.arrayBuffer().then(g=>m.decode(g))}}}).then(c=>{Ra.add(e,c);const u=ha[e];delete ha[e];for(let h=0,p=u.length;h<p;h++){const m=u[h];m.onLoad&&m.onLoad(c)}}).catch(c=>{const u=ha[e];if(u===void 0)throw this.manager.itemError(e),c;delete ha[e];for(let h=0,p=u.length;h<p;h++){const m=u[h];m.onError&&m.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class rV extends hi{constructor(e){super(e)}load(e,t,i,s){const r=this,o=new ni(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(r.parse(JSON.parse(a)))}catch(l){s?s(l):console.error(l),r.manager.itemError(e)}},i,s)}parse(e){const t=[];for(let i=0;i<e.length;i++){const s=Hu.parse(e[i]);t.push(s)}return t}}class oV extends hi{constructor(e){super(e)}load(e,t,i,s){const r=this,o=[],a=new Fa,l=new ni(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(r.withCredentials);let c=0;function u(h){l.load(e[h],function(p){const m=r.parse(p,!0);o[h]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},c+=1,c===6&&(m.mipmapCount===1&&(a.minFilter=Bt),a.image=o,a.format=m.format,a.needsUpdate=!0,t&&t(a))},i,s)}if(Array.isArray(e))for(let h=0,p=e.length;h<p;++h)u(h);else l.load(e,function(h){const p=r.parse(h,!0);if(p.isCubemap){const m=p.mipmaps.length/p.mipmapCount;for(let g=0;g<m;g++){o[g]={mipmaps:[]};for(let v=0;v<p.mipmapCount;v++)o[g].mipmaps.push(p.mipmaps[g*p.mipmapCount+v]),o[g].format=p.format,o[g].width=p.width,o[g].height=p.height}a.image=o}else a.image.width=p.width,a.image.height=p.height,a.mipmaps=p.mipmaps;p.mipmapCount===1&&(a.minFilter=Bt),a.format=p.format,a.needsUpdate=!0,t&&t(a)},i,s);return a}}class ug extends hi{constructor(e){super(e)}load(e,t,i,s){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,o=Ra.get(e);if(o!==void 0)return r.manager.itemStart(e),setTimeout(function(){t&&t(o),r.manager.itemEnd(e)},0),o;const a=rg("img");function l(){u(),Ra.add(e,this),t&&t(this),r.manager.itemEnd(e)}function c(h){u(),s&&s(h),r.manager.itemError(e),r.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),r.manager.itemStart(e),a.src=e,a}}class aV extends hi{constructor(e){super(e)}load(e,t,i,s){const r=new Dg;r.colorSpace=mn;const o=new ug(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(u){r.images[c]=u,a++,a===6&&(r.needsUpdate=!0,t&&t(r))},void 0,s)}for(let c=0;c<e.length;++c)l(c);return r}}class KU extends hi{constructor(e){super(e)}load(e,t,i,s){const r=this,o=new Nr,a=new ni(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(r.withCredentials),a.load(e,function(l){let c;try{c=r.parse(l)}catch(u){if(s!==void 0)s(u);else{console.error(u);return}}c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:Cn,o.wrapT=c.wrapT!==void 0?c.wrapT:Cn,o.magFilter=c.magFilter!==void 0?c.magFilter:Bt,o.minFilter=c.minFilter!==void 0?c.minFilter:Bt,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0&&(o.colorSpace=c.colorSpace),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=vi),c.mipmapCount===1&&(o.minFilter=Bt),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,t&&t(o,c)},i,s),o}}class Bb extends hi{constructor(e){super(e)}load(e,t,i,s){const r=new ln,o=new ug(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){r.image=a,r.needsUpdate=!0,t!==void 0&&t(r)},i,s),r}}class pc extends Rt{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Me(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class $U extends pc{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Rt.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Me(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const n_=new tt,W2=new O,q2=new O;class kI{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new me(512,512),this.map=null,this.mapPass=null,this.matrix=new tt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Lg,this._frameExtents=new me(1,1),this._viewportCount=1,this._viewports=[new Yt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;W2.setFromMatrixPosition(e.matrixWorld),t.position.copy(W2),q2.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(q2),t.updateMatrixWorld(),n_.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(n_),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(n_)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class lV extends kI{constructor(){super(new Fn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=pf*2*e.angle*this.focus,s=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;(i!==t.fov||s!==t.aspect||r!==t.far)&&(t.fov=i,t.aspect=s,t.far=r,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Rb extends pc{constructor(e,t,i=0,s=Math.PI/3,r=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Rt.DEFAULT_UP),this.updateMatrix(),this.target=new Rt,this.distance=i,this.angle=s,this.penumbra=r,this.decay=o,this.map=null,this.shadow=new lV}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const J2=new tt,_p=new O,i_=new O;class cV extends kI{constructor(){super(new Fn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new me(4,2),this._viewportCount=6,this._viewports=[new Yt(2,1,1,1),new Yt(0,1,1,1),new Yt(3,1,1,1),new Yt(1,1,1,1),new Yt(3,0,1,1),new Yt(1,0,1,1)],this._cubeDirections=[new O(1,0,0),new O(-1,0,0),new O(0,0,1),new O(0,0,-1),new O(0,1,0),new O(0,-1,0)],this._cubeUps=[new O(0,1,0),new O(0,1,0),new O(0,1,0),new O(0,1,0),new O(0,0,1),new O(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,s=this.matrix,r=e.distance||i.far;r!==i.far&&(i.far=r,i.updateProjectionMatrix()),_p.setFromMatrixPosition(e.matrixWorld),i.position.copy(_p),i_.copy(i.position),i_.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(i_),i.updateMatrixWorld(),s.makeTranslation(-_p.x,-_p.y,-_p.z),J2.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(J2)}}class Og extends pc{constructor(e,t,i=0,s=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=s,this.shadow=new cV}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Ko extends Rg{constructor(e=-1,t=1,i=1,s=-1,r=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=s,this.near=r,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,s,r,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=s,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let r=i-e,o=i+e,a=s+t,l=s-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=c*this.view.offsetX,o=r+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(r,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class uV extends kI{constructor(){super(new Ko(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Ug extends pc{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Rt.DEFAULT_UP),this.updateMatrix(),this.target=new Rt,this.shadow=new uV}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class YU extends pc{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class ZU extends pc{constructor(e,t,i=10,s=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=s}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class eG{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new O)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,s=e.y,r=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*s),t.addScaledVector(o[2],.488603*r),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*s)),t.addScaledVector(o[5],1.092548*(s*r)),t.addScaledVector(o[6],.315392*(3*r*r-1)),t.addScaledVector(o[7],1.092548*(i*r)),t.addScaledVector(o[8],.546274*(i*i-s*s)),t}getIrradianceAt(e,t){const i=e.x,s=e.y,r=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*s),t.addScaledVector(o[2],2*.511664*r),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*s),t.addScaledVector(o[5],2*.429043*s*r),t.addScaledVector(o[6],.743125*r*r-.247708),t.addScaledVector(o[7],2*.429043*i*r),t.addScaledVector(o[8],.429043*(i*i-s*s)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let s=0;s<9;s++)i[s].fromArray(e,t+s*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let s=0;s<9;s++)i[s].toArray(e,t+s*3);return e}static getBasisAt(e,t){const i=e.x,s=e.y,r=e.z;t[0]=.282095,t[1]=.488603*s,t[2]=.488603*r,t[3]=.488603*i,t[4]=1.092548*i*s,t[5]=1.092548*s*r,t[6]=.315392*(3*r*r-1),t[7]=1.092548*i*r,t[8]=.546274*(i*i-s*s)}}class FI extends pc{constructor(e=new eG,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Db extends hi{constructor(e){super(e),this.textures={}}load(e,t,i,s){const r=this,o=new ni(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.setWithCredentials(r.withCredentials),o.load(e,function(a){try{t(r.parse(JSON.parse(a)))}catch(l){s?s(l):console.error(l),r.manager.itemError(e)}},i,s)}parse(e){const t=this.textures;function i(r){return t[r]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",r),t[r]}const s=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(s.uuid=e.uuid),e.name!==void 0&&(s.name=e.name),e.color!==void 0&&s.color!==void 0&&s.color.setHex(e.color),e.roughness!==void 0&&(s.roughness=e.roughness),e.metalness!==void 0&&(s.metalness=e.metalness),e.sheen!==void 0&&(s.sheen=e.sheen),e.sheenColor!==void 0&&(s.sheenColor=new Me().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(s.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&s.emissive!==void 0&&s.emissive.setHex(e.emissive),e.specular!==void 0&&s.specular!==void 0&&s.specular.setHex(e.specular),e.specularIntensity!==void 0&&(s.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&s.specularColor!==void 0&&s.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(s.shininess=e.shininess),e.clearcoat!==void 0&&(s.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(s.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(s.dispersion=e.dispersion),e.iridescence!==void 0&&(s.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(s.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(s.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(s.transmission=e.transmission),e.thickness!==void 0&&(s.thickness=e.thickness),e.attenuationDistance!==void 0&&(s.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&s.attenuationColor!==void 0&&s.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(s.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(s.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(s.fog=e.fog),e.flatShading!==void 0&&(s.flatShading=e.flatShading),e.blending!==void 0&&(s.blending=e.blending),e.combine!==void 0&&(s.combine=e.combine),e.side!==void 0&&(s.side=e.side),e.shadowSide!==void 0&&(s.shadowSide=e.shadowSide),e.opacity!==void 0&&(s.opacity=e.opacity),e.transparent!==void 0&&(s.transparent=e.transparent),e.alphaTest!==void 0&&(s.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(s.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(s.depthFunc=e.depthFunc),e.depthTest!==void 0&&(s.depthTest=e.depthTest),e.depthWrite!==void 0&&(s.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(s.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(s.blendSrc=e.blendSrc),e.blendDst!==void 0&&(s.blendDst=e.blendDst),e.blendEquation!==void 0&&(s.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(s.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(s.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(s.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&s.blendColor!==void 0&&s.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(s.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(s.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(s.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(s.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(s.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(s.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(s.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(s.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(s.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(s.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(s.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(s.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(s.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(s.rotation=e.rotation),e.linewidth!==void 0&&(s.linewidth=e.linewidth),e.dashSize!==void 0&&(s.dashSize=e.dashSize),e.gapSize!==void 0&&(s.gapSize=e.gapSize),e.scale!==void 0&&(s.scale=e.scale),e.polygonOffset!==void 0&&(s.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(s.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(s.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(s.dithering=e.dithering),e.alphaToCoverage!==void 0&&(s.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(s.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(s.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(s.visible=e.visible),e.toneMapped!==void 0&&(s.toneMapped=e.toneMapped),e.userData!==void 0&&(s.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?s.vertexColors=e.vertexColors>0:s.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const r in e.uniforms){const o=e.uniforms[r];switch(s.uniforms[r]={},o.type){case"t":s.uniforms[r].value=i(o.value);break;case"c":s.uniforms[r].value=new Me().setHex(o.value);break;case"v2":s.uniforms[r].value=new me().fromArray(o.value);break;case"v3":s.uniforms[r].value=new O().fromArray(o.value);break;case"v4":s.uniforms[r].value=new Yt().fromArray(o.value);break;case"m3":s.uniforms[r].value=new bt().fromArray(o.value);break;case"m4":s.uniforms[r].value=new tt().fromArray(o.value);break;default:s.uniforms[r].value=o.value}}if(e.defines!==void 0&&(s.defines=e.defines),e.vertexShader!==void 0&&(s.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(s.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(s.glslVersion=e.glslVersion),e.extensions!==void 0)for(const r in e.extensions)s.extensions[r]=e.extensions[r];if(e.lights!==void 0&&(s.lights=e.lights),e.clipping!==void 0&&(s.clipping=e.clipping),e.size!==void 0&&(s.size=e.size),e.sizeAttenuation!==void 0&&(s.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(s.map=i(e.map)),e.matcap!==void 0&&(s.matcap=i(e.matcap)),e.alphaMap!==void 0&&(s.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(s.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(s.bumpScale=e.bumpScale),e.normalMap!==void 0&&(s.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(s.normalMapType=e.normalMapType),e.normalScale!==void 0){let r=e.normalScale;Array.isArray(r)===!1&&(r=[r,r]),s.normalScale=new me().fromArray(r)}return e.displacementMap!==void 0&&(s.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(s.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(s.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(s.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(s.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(s.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(s.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(s.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(s.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(s.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(s.envMap=i(e.envMap)),e.envMapRotation!==void 0&&s.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(s.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(s.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(s.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(s.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(s.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(s.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(s.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(s.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(s.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(s.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(s.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(s.clearcoatNormalScale=new me().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(s.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(s.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(s.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(s.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(s.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(s.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(s.sheenRoughnessMap=i(e.sheenRoughnessMap)),s}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return Db.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:FU,SpriteMaterial:EI,RawShaderMaterial:NU,ShaderMaterial:cs,PointsMaterial:kg,MeshPhysicalMaterial:Xn,MeshStandardMaterial:Wa,MeshPhongMaterial:OU,MeshToonMaterial:UU,MeshNormalMaterial:GU,MeshLambertMaterial:zU,MeshDepthMaterial:Ib,MeshDistanceMaterial:RI,MeshBasicMaterial:Un,MeshMatcapMaterial:QU,LineDashedMaterial:HU,LineBasicMaterial:Qi,Material:zn};return new t[e]}}class ur{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,s=e.length;i<s;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class tG extends xt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class nG extends hi{constructor(e){super(e)}load(e,t,i,s){const r=this,o=new ni(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.setWithCredentials(r.withCredentials),o.load(e,function(a){try{t(r.parse(JSON.parse(a)))}catch(l){s?s(l):console.error(l),r.manager.itemError(e)}},i,s)}parse(e){const t={},i={};function s(m,g){if(t[g]!==void 0)return t[g];const y=m.interleavedBuffers[g],A=r(m,y.buffer),b=Ed(y.type,A),w=new Df(b,y.stride);return w.uuid=y.uuid,t[g]=w,w}function r(m,g){if(i[g]!==void 0)return i[g];const y=m.arrayBuffers[g],A=new Uint32Array(y).buffer;return i[g]=A,A}const o=e.isInstancedBufferGeometry?new tG:new xt,a=e.data.index;if(a!==void 0){const m=Ed(a.type,a.array);o.setIndex(new wt(m,1))}const l=e.data.attributes;for(const m in l){const g=l[m];let v;if(g.isInterleavedBufferAttribute){const y=s(e.data,g.data);v=new ja(y,g.itemSize,g.offset,g.normalized)}else{const y=Ed(g.type,g.array),A=g.isInstancedBufferAttribute?ic:wt;v=new A(y,g.itemSize,g.normalized)}g.name!==void 0&&(v.name=g.name),g.usage!==void 0&&v.setUsage(g.usage),o.setAttribute(m,v)}const c=e.data.morphAttributes;if(c)for(const m in c){const g=c[m],v=[];for(let y=0,A=g.length;y<A;y++){const b=g[y];let w;if(b.isInterleavedBufferAttribute){const E=s(e.data,b.data);w=new ja(E,b.itemSize,b.offset,b.normalized)}else{const E=Ed(b.type,b.array);w=new wt(E,b.itemSize,b.normalized)}b.name!==void 0&&(w.name=b.name),v.push(w)}o.morphAttributes[m]=v}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const h=e.data.groups||e.data.drawcalls||e.data.offsets;if(h!==void 0)for(let m=0,g=h.length;m!==g;++m){const v=h[m];o.addGroup(v.start,v.count,v.materialIndex)}const p=e.data.boundingSphere;if(p!==void 0){const m=new O;p.center!==void 0&&m.fromArray(p.center),o.boundingSphere=new ui(m,p.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class hV extends hi{constructor(e){super(e)}load(e,t,i,s){const r=this,o=this.path===""?ur.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new ni(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(h){s!==void 0&&s(h),console.error("THREE:ObjectLoader: Can't parse "+e+".",h.message);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){s!==void 0&&s(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}r.parse(c,t)},i,s)}async loadAsync(e,t){const i=this,s=this.path===""?ur.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const r=new ni(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials);const o=await r.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,t){const i=this.parseAnimations(e.animations),s=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,s),o=this.parseImages(e.images,function(){t!==void 0&&t(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,r,l,a,i),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),this.bindLightTargets(c),t!==void 0){let h=!1;for(const p in o)if(o[p].data instanceof HTMLImageElement){h=!0;break}h===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),r=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,r),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,s,a,o,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),this.bindLightTargets(l),l}parseShapes(e){const t={};if(e!==void 0)for(let i=0,s=e.length;i<s;i++){const r=new Bu().fromJSON(e[i]);t[r.uuid]=r}return t}parseSkeletons(e,t){const i={},s={};if(t.traverse(function(r){r.isBone&&(s[r.uuid]=r)}),e!==void 0)for(let r=0,o=e.length;r<o;r++){const a=new Pf().fromJSON(e[r],s);i[a.uuid]=a}return i}parseGeometries(e,t){const i={};if(e!==void 0){const s=new nG;for(let r=0,o=e.length;r<o;r++){let a;const l=e[r];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=s.parse(l);break;default:l.type in j2?a=j2[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),i[l.uuid]=a}}return i}parseMaterials(e,t){const i={},s={};if(e!==void 0){const r=new Db;r.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];i[l.uuid]===void 0&&(i[l.uuid]=r.parse(l)),s[l.uuid]=i[l.uuid]}}return s}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const s=e[i],r=Hu.parse(s);t[r.uuid]=r}return t}parseImages(e,t){const i=this,s={};let r;function o(l){return i.manager.itemStart(l),r.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:i.resourcePath+c;return o(u)}else return l.data?{data:Ed(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new Tb(t);r=new ug(l),r.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const h=e[c],p=h.url;if(Array.isArray(p)){const m=[];for(let g=0,v=p.length;g<v;g++){const y=p[g],A=a(y);A!==null&&(A instanceof HTMLImageElement?m.push(A):m.push(new Nr(A.data,A.width,A.height)))}s[h.uuid]=new Fl(m)}else{const m=a(h.url);s[h.uuid]=new Fl(m)}}}return s}async parseImagesAsync(e){const t=this,i={};let s;async function r(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await s.loadAsync(l)}else return o.data?{data:Ed(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){s=new ug(this.manager),s.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const u=[];for(let h=0,p=c.length;h<p;h++){const m=c[h],g=await r(m);g!==null&&(g instanceof HTMLImageElement?u.push(g):u.push(new Nr(g.data,g.width,g.height)))}i[l.uuid]=new Fl(u)}else{const u=await r(l.url);i[l.uuid]=new Fl(u)}}}return i}parseTextures(e,t){function i(r,o){return typeof r=="number"?r:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",r),o[r])}const s={};if(e!==void 0)for(let r=0,o=e.length;r<o;r++){const a=e[r];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],c=l.data;let u;Array.isArray(c)?(u=new Dg,c.length===6&&(u.needsUpdate=!0)):(c&&c.data?u=new Nr:u=new ln,c&&(u.needsUpdate=!0)),u.source=l,u.uuid=a.uuid,a.name!==void 0&&(u.name=a.name),a.mapping!==void 0&&(u.mapping=i(a.mapping,dV)),a.channel!==void 0&&(u.channel=a.channel),a.offset!==void 0&&u.offset.fromArray(a.offset),a.repeat!==void 0&&u.repeat.fromArray(a.repeat),a.center!==void 0&&u.center.fromArray(a.center),a.rotation!==void 0&&(u.rotation=a.rotation),a.wrap!==void 0&&(u.wrapS=i(a.wrap[0],X2),u.wrapT=i(a.wrap[1],X2)),a.format!==void 0&&(u.format=a.format),a.internalFormat!==void 0&&(u.internalFormat=a.internalFormat),a.type!==void 0&&(u.type=a.type),a.colorSpace!==void 0&&(u.colorSpace=a.colorSpace),a.minFilter!==void 0&&(u.minFilter=i(a.minFilter,K2)),a.magFilter!==void 0&&(u.magFilter=i(a.magFilter,K2)),a.anisotropy!==void 0&&(u.anisotropy=a.anisotropy),a.flipY!==void 0&&(u.flipY=a.flipY),a.generateMipmaps!==void 0&&(u.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(u.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(u.compareFunction=a.compareFunction),a.userData!==void 0&&(u.userData=a.userData),s[a.uuid]=u}return s}parseObject(e,t,i,s,r){let o;function a(p){return t[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",p),t[p]}function l(p){if(p!==void 0){if(Array.isArray(p)){const m=[];for(let g=0,v=p.length;g<v;g++){const y=p[g];i[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",y),m.push(i[y])}return m}return i[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),i[p]}}function c(p){return s[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",p),s[p]}let u,h;switch(e.type){case"Scene":o=new qo,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new Me(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new cb(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new lb(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new Fn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Ko(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new YU(e.color,e.intensity);break;case"DirectionalLight":o=new Ug(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new Og(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new ZU(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new Rb(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new $U(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new FI().fromJSON(e);break;case"SkinnedMesh":u=a(e.geometry),h=l(e.material),o=new ub(u,h),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":u=a(e.geometry),h=l(e.material),o=new Wt(u,h);break;case"InstancedMesh":u=a(e.geometry),h=l(e.material);const p=e.count,m=e.instanceMatrix,g=e.instanceColor;o=new hb(u,h,p),o.instanceMatrix=new ic(new Float32Array(m.array),16),g!==void 0&&(o.instanceColor=new ic(new Float32Array(g.array),g.itemSize));break;case"BatchedMesh":u=a(e.geometry),h=l(e.material),o=new bU(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,h),o.geometry=u,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(v=>{const y=new Nn;y.min.fromArray(v.boxMin),y.max.fromArray(v.boxMax);const A=new ui;return A.radius=v.sphereRadius,A.center.fromArray(v.sphereCenter),{boxInitialized:v.boxInitialized,box:y,sphereInitialized:v.sphereInitialized,sphere:A}}),o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=c(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=c(e.colorsTexture.uuid));break;case"LOD":o=new xU;break;case"Line":o=new Gr(a(e.geometry),l(e.material));break;case"LineLoop":o=new db(a(e.geometry),l(e.material));break;case"LineSegments":o=new Hr(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new fb(a(e.geometry),l(e.material));break;case"Sprite":o=new vU(l(e.material));break;case"Group":o=new sr;break;case"Bone":o=new Pg;break;default:o=new Rt}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const p=e.children;for(let m=0;m<p.length;m++)o.add(this.parseObject(p[m],t,i,s,r))}if(e.animations!==void 0){const p=e.animations;for(let m=0;m<p.length;m++){const g=p[m];o.animations.push(r[g])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const p=e.levels;for(let m=0;m<p.length;m++){const g=p[m],v=o.getObjectByProperty("uuid",g.object);v!==void 0&&o.addLevel(v,g.distance,g.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const s=t[i.skeleton];s===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(s,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const i=t.target,s=e.getObjectByProperty("uuid",i);s!==void 0?t.target=s:t.target=new Rt}})}}const dV={UVMapping:ec,CubeReflectionMapping:Ha,CubeRefractionMapping:tc,EquirectangularReflectionMapping:cf,EquirectangularRefractionMapping:qm,CubeUVReflectionMapping:Bf},X2={RepeatWrapping:ls,ClampToEdgeWrapping:Cn,MirroredRepeatWrapping:jo},K2={NearestFilter:Mn,NearestMipmapNearestFilter:hc,NearestMipmapLinearFilter:ao,LinearFilter:Bt,LinearMipmapNearestFilter:Ho,LinearMipmapLinearFilter:vi};class NI extends hi{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,o=Ra.get(e);if(o!==void 0){if(r.manager.itemStart(e),o.then){o.then(c=>{t&&t(c),r.manager.itemEnd(e)}).catch(c=>{s&&s(c)});return}return setTimeout(function(){t&&t(o),r.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(r.options,{colorSpaceConversion:"none"}))}).then(function(c){return Ra.add(e,c),t&&t(c),r.manager.itemEnd(e),c}).catch(function(c){s&&s(c),Ra.remove(e),r.manager.itemError(e),r.manager.itemEnd(e)});Ra.add(e,l),r.manager.itemStart(e)}}let Q0;class OI{static getContext(){return Q0===void 0&&(Q0=new(window.AudioContext||window.webkitAudioContext)),Q0}static setContext(e){Q0=e}}class fV extends hi{constructor(e){super(e)}load(e,t,i,s){const r=this,o=new ni(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const c=l.slice(0);OI.getContext().decodeAudioData(c,function(h){t(h)}).catch(a)}catch(c){a(c)}},i,s);function a(l){s?s(l):console.error(l),r.manager.itemError(e)}}}const $2=new tt,Y2=new tt,Rc=new tt;class pV{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Fn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Fn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Rc.copy(e.projectionMatrix);const s=t.eyeSep/2,r=s*t.near/t.focus,o=t.near*Math.tan(Iu*t.fov*.5)/t.zoom;let a,l;Y2.elements[12]=-s,$2.elements[12]=s,a=-o*t.aspect+r,l=o*t.aspect+r,Rc.elements[0]=2*t.near/(l-a),Rc.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Rc),a=-o*t.aspect-r,l=o*t.aspect-r,Rc.elements[0]=2*t.near/(l-a),Rc.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Rc)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Y2),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply($2)}}class iG extends Fn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class UI{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Z2(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=Z2();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function Z2(){return performance.now()}const Dc=new O,eD=new qn,mV=new O,Pc=new O;class gV extends Rt{constructor(){super(),this.type="AudioListener",this.context=OI.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new UI}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Dc,eD,mV),Pc.set(0,0,-1).applyQuaternion(eD),t.positionX){const s=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Dc.x,s),t.positionY.linearRampToValueAtTime(Dc.y,s),t.positionZ.linearRampToValueAtTime(Dc.z,s),t.forwardX.linearRampToValueAtTime(Pc.x,s),t.forwardY.linearRampToValueAtTime(Pc.y,s),t.forwardZ.linearRampToValueAtTime(Pc.z,s),t.upX.linearRampToValueAtTime(i.x,s),t.upY.linearRampToValueAtTime(i.y,s),t.upZ.linearRampToValueAtTime(i.z,s)}else t.setPosition(Dc.x,Dc.y,Dc.z),t.setOrientation(Pc.x,Pc.y,Pc.z,i.x,i.y,i.z)}}class sG extends Rt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const Lc=new O,tD=new qn,AV=new O,kc=new O;class yV extends sG{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Lc,tD,AV),kc.set(0,0,1).applyQuaternion(tD);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Lc.x,i),t.positionY.linearRampToValueAtTime(Lc.y,i),t.positionZ.linearRampToValueAtTime(Lc.z,i),t.orientationX.linearRampToValueAtTime(kc.x,i),t.orientationY.linearRampToValueAtTime(kc.y,i),t.orientationZ.linearRampToValueAtTime(kc.z,i)}else t.setPosition(Lc.x,Lc.y,Lc.z),t.setOrientation(kc.x,kc.y,kc.z)}}class vV{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class rG{constructor(e,t,i){this.binding=e,this.valueSize=i;let s,r,o;switch(t){case"quaternion":s=this._slerp,r=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":s=this._select,r=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:s=this._lerp,r=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=s,this._mixBufferRegionAdditive=r,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,s=this.valueSize,r=e*s+s;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==s;++a)i[r+a]=i[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(i,r,0,a,s)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,s=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,s,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,s=e*t+t,r=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const l=t*this._origIndex;this._mixBufferRegion(i,s,l,1-r,t)}o>0&&this._mixBufferRegionAdditive(i,s,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(i[l]!==i[l+t]){a.setValue(i,s);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,s=i*this._origIndex;e.getValue(t,s);for(let r=i,o=s;r!==o;++r)t[r]=t[s+r%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,s,r){if(s>=.5)for(let o=0;o!==r;++o)e[t+o]=e[i+o]}_slerp(e,t,i,s){qn.slerpFlat(e,t,e,t,e,i,s)}_slerpAdditive(e,t,i,s,r){const o=this._workIndex*r;qn.multiplyQuaternionsFlat(e,o,e,t,e,i),qn.slerpFlat(e,t,e,t,e,o,s)}_lerp(e,t,i,s,r){const o=1-s;for(let a=0;a!==r;++a){const l=t+a;e[l]=e[l]*o+e[i+a]*s}}_lerpAdditive(e,t,i,s,r){for(let o=0;o!==r;++o){const a=t+o;e[a]=e[a]+e[i+o]*s}}}const GI="\\[\\]\\.:\\/",xV=new RegExp("["+GI+"]","g"),zI="[^"+GI+"]",bV="[^"+GI.replace("\\.","")+"]",wV=/((?:WC+[\/:])*)/.source.replace("WC",zI),EV=/(WCOD+)?/.source.replace("WCOD",bV),_V=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",zI),CV=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",zI),SV=new RegExp("^"+wV+EV+_V+CV+"$"),MV=["material","materials","bones","map"];class IV{constructor(e,t,i){const s=i||Ot.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,s)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,s=this._bindings[i];s!==void 0&&s.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let s=this._targetGroup.nCachedObjects_,r=i.length;s!==r;++s)i[s].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class Ot{constructor(e,t,i){this.path=t,this.parsedPath=i||Ot.parseTrackName(t),this.node=Ot.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new Ot.Composite(e,t,i):new Ot(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(xV,"")}static parseTrackName(e){const t=SV.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},s=i.nodeName&&i.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){const r=i.nodeName.substring(s+1);MV.indexOf(r)!==-1&&(i.nodeName=i.nodeName.substring(0,s),i.objectName=r)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(r){for(let o=0;o<r.length;o++){const a=r[o];if(a.name===t||a.uuid===t)return a;const l=i(a.children);if(l)return l}return null},s=i(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let s=0,r=i.length;s!==r;++s)e[t++]=i[s]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let s=0,r=i.length;s!==r;++s)i[s]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let s=0,r=i.length;s!==r;++s)i[s]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let s=0,r=i.length;s!==r;++s)i[s]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,s=t.propertyName;let r=t.propertyIndex;if(e||(e=Ot.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let c=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[s];if(o===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+s+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?a=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(r!==void 0){if(s==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[r]!==void 0&&(r=e.morphTargetDictionary[r])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=r}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=s;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Ot.Composite=IV;Ot.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Ot.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Ot.prototype.GetterByBindingType=[Ot.prototype._getValue_direct,Ot.prototype._getValue_array,Ot.prototype._getValue_arrayElement,Ot.prototype._getValue_toArray];Ot.prototype.SetterByBindingTypeAndVersioning=[[Ot.prototype._setValue_direct,Ot.prototype._setValue_direct_setNeedsUpdate,Ot.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Ot.prototype._setValue_array,Ot.prototype._setValue_array_setNeedsUpdate,Ot.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Ot.prototype._setValue_arrayElement,Ot.prototype._setValue_arrayElement_setNeedsUpdate,Ot.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Ot.prototype._setValue_fromArray,Ot.prototype._setValue_fromArray_setNeedsUpdate,Ot.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class TV{constructor(){this.isAnimationObjectGroup=!0,this.uuid=cr(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,s=arguments.length;i!==s;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,s=this._parsedPaths,r=this._bindings,o=r.length;let a,l=e.length,c=this.nCachedObjects_;for(let u=0,h=arguments.length;u!==h;++u){const p=arguments[u],m=p.uuid;let g=t[m];if(g===void 0){g=l++,t[m]=g,e.push(p);for(let v=0,y=o;v!==y;++v)r[v].push(new Ot(p,i[v],s[v]))}else if(g<c){a=e[g];const v=--c,y=e[v];t[y.uuid]=g,e[g]=y,t[m]=v,e[v]=p;for(let A=0,b=o;A!==b;++A){const w=r[A],E=w[v];let M=w[g];w[g]=E,M===void 0&&(M=new Ot(p,i[A],s[A])),w[v]=M}}else e[g]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,s=i.length;let r=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,u=t[c];if(u!==void 0&&u>=r){const h=r++,p=e[h];t[p.uuid]=u,e[u]=p,t[c]=h,e[h]=l;for(let m=0,g=s;m!==g;++m){const v=i[m],y=v[h],A=v[u];v[u]=y,v[h]=A}}}this.nCachedObjects_=r}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,s=i.length;let r=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],u=c.uuid,h=t[u];if(h!==void 0)if(delete t[u],h<r){const p=--r,m=e[p],g=--o,v=e[g];t[m.uuid]=h,e[h]=m,t[v.uuid]=p,e[p]=v,e.pop();for(let y=0,A=s;y!==A;++y){const b=i[y],w=b[p],E=b[g];b[h]=w,b[p]=E,b.pop()}}else{const p=--o,m=e[p];p>0&&(t[m.uuid]=h),e[h]=m,e.pop();for(let g=0,v=s;g!==v;++g){const y=i[g];y[h]=y[p],y.pop()}}}this.nCachedObjects_=r}subscribe_(e,t){const i=this._bindingsIndicesByPath;let s=i[e];const r=this._bindings;if(s!==void 0)return r[s];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,u=this.nCachedObjects_,h=new Array(c);s=r.length,i[e]=s,o.push(e),a.push(t),r.push(h);for(let p=u,m=l.length;p!==m;++p){const g=l[p];h[p]=new Ot(g,e,t)}return h}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const s=this._paths,r=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];t[c]=i,o[i]=l,o.pop(),r[i]=r[a],r.pop(),s[i]=s[a],s.pop()}}}class oG{constructor(e,t,i=null,s=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=s;const r=t.tracks,o=r.length,a=new Array(o),l={endingStart:fu,endingEnd:fu};for(let c=0;c!==o;++c){const u=r[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Mu,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const s=this._clip.duration,r=e._clip.duration,o=r/s,a=s/r;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const s=this._mixer,r=s.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=s._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=r,l[1]=r+i,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,s){if(!this.enabled){this._updateWeight(e);return}const r=this._startTime;if(r!==null){const l=(e-r)*i;l<0||i===0?t=0:(this._startTime=null,t=i*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case AI:for(let u=0,h=l.length;u!==h;++u)l[u].evaluate(o),c[u].accumulateAdditive(a);break;case rb:default:for(let u=0,h=l.length;u!==h;++u)l[u].evaluate(o),c[u].accumulate(s,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const s=i.evaluate(e)[0];t*=s,e>i.parameterPositions[1]&&(this.stopFading(),s===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const s=i.evaluate(e)[0];t*=s,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let s=this.time+e,r=this._loopCount;const o=i===eg;if(e===0)return r===-1?s:o&&(r&1)===1?t-s:s;if(i===ff){r===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(s>=t)s=t;else if(s<0)s=0;else{this.time=s;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(r===-1&&(e>=0?(r=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),s>=t||s<0){const a=Math.floor(s/t);s-=t*a,r+=Math.abs(a);const l=this.repetitions-r;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,s=e>0?t:0,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=r,this.time=s,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=s;if(o&&(r&1)===1)return t-s}return s}_setEndings(e,t,i){const s=this._interpolantSettings;i?(s.endingStart=pu,s.endingEnd=pu):(e?s.endingStart=this.zeroSlopeAtStart?pu:fu:s.endingStart=tg,t?s.endingEnd=this.zeroSlopeAtEnd?pu:fu:s.endingEnd=tg)}_scheduleFading(e,t,i){const s=this._mixer,r=s.time;let o=this._weightInterpolant;o===null&&(o=s._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=r,l[0]=t,a[1]=r+e,l[1]=i,this}}const BV=new Float32Array(1);class aG extends js{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,s=e._clip.tracks,r=s.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let h=0;h!==r;++h){const p=s[h],m=p.name;let g=u[m];if(g!==void 0)++g.referenceCount,o[h]=g;else{if(g=o[h],g!==void 0){g._cacheIndex===null&&(++g.referenceCount,this._addInactiveBinding(g,l,m));continue}const v=t&&t._propertyBindings[h].binding.parsedPath;g=new rG(Ot.create(i,m,v),p.ValueTypeName,p.getValueSize()),++g.referenceCount,this._addInactiveBinding(g,l,m),o[h]=g}a[h].resultBuffer=g.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,s=e._clip.uuid,r=this._actionsByClip[s];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,s,i)}const t=e._propertyBindings;for(let i=0,s=t.length;i!==s;++i){const r=t[i];r.useCount++===0&&(this._lendBinding(r),r.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,s=t.length;i!==s;++i){const r=t[i];--r.useCount===0&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const s=this._actions,r=this._actionsByClip;let o=r[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=s.length,s.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],s=e._cacheIndex;i._cacheIndex=s,t[s]=i,t.pop(),e._cacheIndex=null;const r=e._clip.uuid,o=this._actionsByClip,a=o[r],l=a.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const h=a.actionByRoot,p=(e._localRoot||this._root).uuid;delete h[p],l.length===0&&delete o[r],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,s=t.length;i!==s;++i){const r=t[i];--r.referenceCount===0&&this._removeInactiveBinding(r)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,s=this._nActiveActions++,r=t[s];e._cacheIndex=s,t[s]=e,r._cacheIndex=i,t[i]=r}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,s=--this._nActiveActions,r=t[s];e._cacheIndex=s,t[s]=e,r._cacheIndex=i,t[i]=r}_addInactiveBinding(e,t,i){const s=this._bindingsByRootAndName,r=this._bindings;let o=s[t];o===void 0&&(o={},s[t]=o),o[i]=e,e._cacheIndex=r.length,r.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,s=i.rootNode.uuid,r=i.path,o=this._bindingsByRootAndName,a=o[s],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[r],Object.keys(a).length===0&&delete o[s]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,s=this._nActiveBindings++,r=t[s];e._cacheIndex=s,t[s]=e,r._cacheIndex=i,t[i]=r}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,s=--this._nActiveBindings,r=t[s];e._cacheIndex=s,t[s]=e,r._cacheIndex=i,t[i]=r}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new PI(new Float32Array(2),new Float32Array(2),1,BV),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,s=--this._nActiveControlInterpolants,r=t[s];e.__cacheIndex=s,t[s]=e,r.__cacheIndex=i,t[i]=r}clipAction(e,t,i){const s=t||this._root,r=s.uuid;let o=typeof e=="string"?Hu.findByName(s,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(i===void 0&&(o!==null?i=o.blendMode:i=rb),l!==void 0){const h=l.actionByRoot[r];if(h!==void 0&&h.blendMode===i)return h;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const u=new oG(this,o,t,i);return this._bindAction(u,c),this._addInactiveAction(u,a,r),u}existingAction(e,t){const i=t||this._root,s=i.uuid,r=typeof e=="string"?Hu.findByName(i,e):e,o=r?r.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[s]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,s=this.time+=e,r=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==i;++c)t[c]._update(s,e,r,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,s=this._actionsByClip,r=s[i];if(r!==void 0){const o=r.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const u=c._cacheIndex,h=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,h._cacheIndex=u,t[u]=h,t.pop(),this._removeInactiveBindingsForAction(c)}delete s[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const s=this._bindingsByRootAndName,r=s[t];if(r!==void 0)for(const o in r){const a=r[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class RV extends ob{constructor(e=1,t=1,i=1,s={}){super(e,t,s),this.isRenderTarget3D=!0,this.depth=i,this.texture=new Bg(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class DV extends ob{constructor(e=1,t=1,i=1,s={}){super(e,t,s),this.isRenderTargetArray=!0,this.depth=i,this.texture=new Tg(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class QI{constructor(e){this.value=e}clone(){return new QI(this.value.clone===void 0?this.value:this.value.clone())}}let PV=0;class LV extends js{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:PV++}),this.name="",this.usage=ig,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,s=t.length;i<s;i++){const r=Array.isArray(t[i])?t[i]:[t[i]];for(let o=0;o<r.length;o++)this.uniforms.push(r[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class kV extends Df{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class FV{constructor(e,t,i,s,r){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=s,this.count=r,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const nD=new tt;class HI{constructor(e,t,i=0,s=1/0){this.ray=new Rf(e,t),this.near=i,this.far=s,this.camera=null,this.layers=new Tu,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return nD.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(nD),this}intersectObject(e,t=!0,i=[]){return E1(e,this,i,t),i.sort(iD),i}intersectObjects(e,t=!0,i=[]){for(let s=0,r=e.length;s<r;s++)E1(e[s],this,i,t);return i.sort(iD),i}}function iD(n,e){return n.distance-e.distance}function E1(n,e,t,i){let s=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(s=!1),s===!0&&i===!0){const r=n.children;for(let o=0,a=r.length;o<a;o++)E1(r[o],e,t,!0)}}class Cm{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=_t(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(_t(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class NV{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}class VI{constructor(e,t,i,s){VI.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,i,s)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let i=0;i<4;i++)this.elements[i]=e[i+t];return this}set(e,t,i,s){const r=this.elements;return r[0]=e,r[2]=t,r[1]=i,r[3]=s,this}}const sD=new me;class OV{constructor(e=new me(1/0,1/0),t=new me(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=sD.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,sD).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const rD=new O,H0=new O;class UV{constructor(e=new O,t=new O){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){rD.subVectors(e,this.start),H0.subVectors(this.end,this.start);const i=H0.dot(H0);let r=H0.dot(rD)/i;return t&&(r=_t(r,0,1)),r}closestPointToPoint(e,t,i){const s=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(s).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const oD=new O;class GV extends Rt{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new xt,s=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,u=a/l*Math.PI*2;s.push(Math.cos(c),Math.sin(c),1,Math.cos(u),Math.sin(u),1)}i.setAttribute("position",new nt(s,3));const r=new Qi({fog:!1,toneMapped:!1});this.cone=new Hr(i,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),oD.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(oD),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const ml=new O,V0=new tt,s_=new tt;class zV extends Hr{constructor(e){const t=lG(e),i=new xt,s=[],r=[],o=new Me(0,0,1),a=new Me(0,1,0);for(let c=0;c<t.length;c++){const u=t[c];u.parent&&u.parent.isBone&&(s.push(0,0,0),s.push(0,0,0),r.push(o.r,o.g,o.b),r.push(a.r,a.g,a.b))}i.setAttribute("position",new nt(s,3)),i.setAttribute("color",new nt(r,3));const l=new Qi({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,s=i.getAttribute("position");s_.copy(this.root.matrixWorld).invert();for(let r=0,o=0;r<t.length;r++){const a=t[r];a.parent&&a.parent.isBone&&(V0.multiplyMatrices(s_,a.matrixWorld),ml.setFromMatrixPosition(V0),s.setXYZ(o,ml.x,ml.y,ml.z),V0.multiplyMatrices(s_,a.parent.matrixWorld),ml.setFromMatrixPosition(V0),s.setXYZ(o+1,ml.x,ml.y,ml.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function lG(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,lG(n.children[t]));return e}class QV extends Wt{constructor(e,t,i){const s=new kf(t,4,2),r=new Un({wireframe:!0,fog:!1,toneMapped:!1});super(s,r),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const HV=new O,aD=new Me,lD=new Me;class VV extends Rt{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const s=new Ng(t);s.rotateY(Math.PI*.5),this.material=new Un({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const r=s.getAttribute("position"),o=new Float32Array(r.count*3);s.setAttribute("color",new wt(o,3)),this.add(new Wt(s,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");aD.copy(this.light.color),lD.copy(this.light.groundColor);for(let i=0,s=t.count;i<s;i++){const r=i<s/2?aD:lD;t.setXYZ(i,r.r,r.g,r.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(HV.setFromMatrixPosition(this.light.matrixWorld).negate())}}class jV extends Hr{constructor(e=10,t=10,i=4473924,s=8947848){i=new Me(i),s=new Me(s);const r=t/2,o=e/t,a=e/2,l=[],c=[];for(let p=0,m=0,g=-a;p<=t;p++,g+=o){l.push(-a,0,g,a,0,g),l.push(g,0,-a,g,0,a);const v=p===r?i:s;v.toArray(c,m),m+=3,v.toArray(c,m),m+=3,v.toArray(c,m),m+=3,v.toArray(c,m),m+=3}const u=new xt;u.setAttribute("position",new nt(l,3)),u.setAttribute("color",new nt(c,3));const h=new Qi({vertexColors:!0,toneMapped:!1});super(u,h),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class WV extends Hr{constructor(e=10,t=16,i=8,s=64,r=4473924,o=8947848){r=new Me(r),o=new Me(o);const a=[],l=[];if(t>1)for(let h=0;h<t;h++){const p=h/t*(Math.PI*2),m=Math.sin(p)*e,g=Math.cos(p)*e;a.push(0,0,0),a.push(m,0,g);const v=h&1?r:o;l.push(v.r,v.g,v.b),l.push(v.r,v.g,v.b)}for(let h=0;h<i;h++){const p=h&1?r:o,m=e-e/i*h;for(let g=0;g<s;g++){let v=g/s*(Math.PI*2),y=Math.sin(v)*m,A=Math.cos(v)*m;a.push(y,0,A),l.push(p.r,p.g,p.b),v=(g+1)/s*(Math.PI*2),y=Math.sin(v)*m,A=Math.cos(v)*m,a.push(y,0,A),l.push(p.r,p.g,p.b)}}const c=new xt;c.setAttribute("position",new nt(a,3)),c.setAttribute("color",new nt(l,3));const u=new Qi({vertexColors:!0,toneMapped:!1});super(c,u),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const cD=new O,j0=new O,uD=new O;class qV extends Rt{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let s=new xt;s.setAttribute("position",new nt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const r=new Qi({fog:!1,toneMapped:!1});this.lightPlane=new Gr(s,r),this.add(this.lightPlane),s=new xt,s.setAttribute("position",new nt([0,0,0,0,0,1],3)),this.targetLine=new Gr(s,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),cD.setFromMatrixPosition(this.light.matrixWorld),j0.setFromMatrixPosition(this.light.target.matrixWorld),uD.subVectors(j0,cD),this.lightPlane.lookAt(j0),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(j0),this.targetLine.scale.z=uD.length()}}const W0=new O,Vn=new Rg;class JV extends Hr{constructor(e){const t=new xt,i=new Qi({color:16777215,vertexColors:!0,toneMapped:!1}),s=[],r=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(g,v){l(g),l(v)}function l(g){s.push(0,0,0),r.push(0,0,0),o[g]===void 0&&(o[g]=[]),o[g].push(s.length/3-1)}t.setAttribute("position",new nt(s,3)),t.setAttribute("color",new nt(r,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new Me(16755200),u=new Me(16711680),h=new Me(43775),p=new Me(16777215),m=new Me(3355443);this.setColors(c,u,h,p,m)}setColors(e,t,i,s,r){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,s.r,s.g,s.b),a.setXYZ(39,s.r,s.g,s.b),a.setXYZ(40,r.r,r.g,r.b),a.setXYZ(41,r.r,r.g,r.b),a.setXYZ(42,r.r,r.g,r.b),a.setXYZ(43,r.r,r.g,r.b),a.setXYZ(44,r.r,r.g,r.b),a.setXYZ(45,r.r,r.g,r.b),a.setXYZ(46,r.r,r.g,r.b),a.setXYZ(47,r.r,r.g,r.b),a.setXYZ(48,r.r,r.g,r.b),a.setXYZ(49,r.r,r.g,r.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,s=1;Vn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const r=this.camera.coordinateSystem===lo?-1:0;$n("c",t,e,Vn,0,0,r),$n("t",t,e,Vn,0,0,1),$n("n1",t,e,Vn,-i,-s,r),$n("n2",t,e,Vn,i,-s,r),$n("n3",t,e,Vn,-i,s,r),$n("n4",t,e,Vn,i,s,r),$n("f1",t,e,Vn,-i,-s,1),$n("f2",t,e,Vn,i,-s,1),$n("f3",t,e,Vn,-i,s,1),$n("f4",t,e,Vn,i,s,1),$n("u1",t,e,Vn,i*.7,s*1.1,r),$n("u2",t,e,Vn,-i*.7,s*1.1,r),$n("u3",t,e,Vn,0,s*2,r),$n("cf1",t,e,Vn,-i,0,1),$n("cf2",t,e,Vn,i,0,1),$n("cf3",t,e,Vn,0,-s,1),$n("cf4",t,e,Vn,0,s,1),$n("cn1",t,e,Vn,-i,0,r),$n("cn2",t,e,Vn,i,0,r),$n("cn3",t,e,Vn,0,-s,r),$n("cn4",t,e,Vn,0,s,r),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function $n(n,e,t,i,s,r,o){W0.set(s,r,o).unproject(i);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let c=0,u=a.length;c<u;c++)l.setXYZ(a[c],W0.x,W0.y,W0.z)}}const q0=new Nn;class XV extends Hr{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=new Float32Array(8*3),r=new xt;r.setIndex(new wt(i,1)),r.setAttribute("position",new wt(s,3)),super(r,new Qi({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&q0.setFromObject(this.object),q0.isEmpty())return;const t=q0.min,i=q0.max,s=this.geometry.attributes.position,r=s.array;r[0]=i.x,r[1]=i.y,r[2]=i.z,r[3]=t.x,r[4]=i.y,r[5]=i.z,r[6]=t.x,r[7]=t.y,r[8]=i.z,r[9]=i.x,r[10]=t.y,r[11]=i.z,r[12]=i.x,r[13]=i.y,r[14]=t.z,r[15]=t.x,r[16]=i.y,r[17]=t.z,r[18]=t.x,r[19]=t.y,r[20]=t.z,r[21]=i.x,r[22]=t.y,r[23]=t.z,s.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class KV extends Hr{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],r=new xt;r.setIndex(new wt(i,1)),r.setAttribute("position",new nt(s,3)),super(r,new Qi({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class $V extends Gr{constructor(e,t=1,i=16776960){const s=i,r=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new xt;o.setAttribute("position",new nt(r,3)),o.computeBoundingSphere(),super(o,new Qi({color:s,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new xt;l.setAttribute("position",new nt(a,3)),l.computeBoundingSphere(),this.add(new Wt(l,new Un({color:s,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const hD=new O;let J0,r_;class YV extends Rt{constructor(e=new O(0,0,1),t=new O(0,0,0),i=1,s=16776960,r=i*.2,o=r*.2){super(),this.type="ArrowHelper",J0===void 0&&(J0=new xt,J0.setAttribute("position",new nt([0,0,0,0,1,0],3)),r_=new Lf(0,.5,1,5,1),r_.translate(0,-.5,0)),this.position.copy(t),this.line=new Gr(J0,new Qi({color:s,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Wt(r_,new Un({color:s,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,r,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{hD.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(hD,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class ZV extends Hr{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],s=new xt;s.setAttribute("position",new nt(t,3)),s.setAttribute("color",new nt(i,3));const r=new Qi({vertexColors:!0,toneMapped:!1});super(s,r),this.type="AxesHelper"}setColors(e,t,i){const s=new Me,r=this.geometry.attributes.color.array;return s.set(e),s.toArray(r,0),s.toArray(r,3),s.set(t),s.toArray(r,6),s.toArray(r,9),s.set(i),s.toArray(r,12),s.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class ej{constructor(){this.type="ShapePath",this.color=new Me,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new og,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,s){return this.currentPath.quadraticCurveTo(e,t,i,s),this}bezierCurveTo(e,t,i,s,r,o){return this.currentPath.bezierCurveTo(e,t,i,s,r,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(A){const b=[];for(let w=0,E=A.length;w<E;w++){const M=A[w],I=new Bu;I.curves=M.curves,b.push(I)}return b}function i(A,b){const w=b.length;let E=!1;for(let M=w-1,I=0;I<w;M=I++){let D=b[M],B=b[I],R=B.x-D.x,T=B.y-D.y;if(Math.abs(T)>Number.EPSILON){if(T<0&&(D=b[I],R=-R,B=b[M],T=-T),A.y<D.y||A.y>B.y)continue;if(A.y===D.y){if(A.x===D.x)return!0}else{const k=T*(A.x-D.x)-R*(A.y-D.y);if(k===0)return!0;if(k<0)continue;E=!E}}else{if(A.y!==D.y)continue;if(B.x<=A.x&&A.x<=D.x||D.x<=A.x&&A.x<=B.x)return!0}}return E}const s=Vo.isClockWise,r=this.subPaths;if(r.length===0)return[];let o,a,l;const c=[];if(r.length===1)return a=r[0],l=new Bu,l.curves=a.curves,c.push(l),c;let u=!s(r[0].getPoints());u=e?!u:u;const h=[],p=[];let m=[],g=0,v;p[g]=void 0,m[g]=[];for(let A=0,b=r.length;A<b;A++)a=r[A],v=a.getPoints(),o=s(v),o=e?!o:o,o?(!u&&p[g]&&g++,p[g]={s:new Bu,p:v},p[g].s.curves=a.curves,u&&g++,m[g]=[]):m[g].push({h:a,p:v[0]});if(!p[0])return t(r);if(p.length>1){let A=!1,b=0;for(let w=0,E=p.length;w<E;w++)h[w]=[];for(let w=0,E=p.length;w<E;w++){const M=m[w];for(let I=0;I<M.length;I++){const D=M[I];let B=!0;for(let R=0;R<p.length;R++)i(D.p,p[R].p)&&(w!==R&&b++,B?(B=!1,h[R].push(D)):A=!0);B&&h[w].push(D)}}b>0&&A===!1&&(m=h)}let y;for(let A=0,b=p.length;A<b;A++){l=p[A].s,c.push(l),y=m[A];for(let w=0,E=y.length;w<E;w++)l.holes.push(y[w].h)}return c}}class tj extends js{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}function nj(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function ij(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function sj(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function _1(n,e,t,i){const s=rj(i);switch(t){case dI:return n*e;case pI:return n*e;case mI:return n*e*2;case Ba:return n*e/s.components*s.byteLength;case Mg:return n*e/s.components*s.byteLength;case kl:return n*e*2/s.components*s.byteLength;case ib:return n*e*2/s.components*s.byteLength;case fI:return n*e*3/s.components*s.byteLength;case dn:return n*e*4/s.components*s.byteLength;case sb:return n*e*4/s.components*s.byteLength;case xm:case Gd:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case bm:case zd:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case qv:case Jv:return Math.max(n,16)*Math.max(e,8)/4;case Jm:case Xm:return Math.max(n,8)*Math.max(e,8)/2;case Km:case $m:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Ym:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case hf:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Xv:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case Kv:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case $v:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case df:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case Yv:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case Zv:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case ex:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case tx:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case nx:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case ix:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case sx:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case rx:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case ox:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case Qd:case ax:case Zm:return Math.ceil(n/4)*Math.ceil(e/4)*16;case gI:case lx:return Math.ceil(n/4)*Math.ceil(e/4)*8;case cx:case ux:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function rj(n){switch(n){case kn:case Zx:return{byteLength:1,components:1};case uf:case eb:case Zn:return{byteLength:2,components:1};case tb:case nb:return{byteLength:2,components:4};case Wo:case Sg:case Sn:return{byteLength:4,components:1};case hI:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}const oj={contain:nj,cover:ij,fill:sj,getByteLength:_1};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Tf}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Tf);/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function cG(){let n=null,e=!1,t=null,i=null;function s(r,o){t(r,o),i=n.requestAnimationFrame(s)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(s),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(r){t=r},setContext:function(r){n=r}}}function aj(n){const e=new WeakMap;function t(a,l){const c=a.array,u=a.usage,h=c.byteLength,p=n.createBuffer();n.bindBuffer(l,p),n.bufferData(l,c,u),a.onUploadCallback();let m;if(c instanceof Float32Array)m=n.FLOAT;else if(c instanceof Uint16Array)a.isFloat16BufferAttribute?m=n.HALF_FLOAT:m=n.UNSIGNED_SHORT;else if(c instanceof Int16Array)m=n.SHORT;else if(c instanceof Uint32Array)m=n.UNSIGNED_INT;else if(c instanceof Int32Array)m=n.INT;else if(c instanceof Int8Array)m=n.BYTE;else if(c instanceof Uint8Array)m=n.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)m=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:p,type:m,bytesPerElement:c.BYTES_PER_ELEMENT,version:a.version,size:h}}function i(a,l,c){const u=l.array,h=l.updateRanges;if(n.bindBuffer(c,a),h.length===0)n.bufferSubData(c,0,u);else{h.sort((m,g)=>m.start-g.start);let p=0;for(let m=1;m<h.length;m++){const g=h[p],v=h[m];v.start<=g.start+g.count+1?g.count=Math.max(g.count,v.start+v.count-g.start):(++p,h[p]=v)}h.length=p+1;for(let m=0,g=h.length;m<g;m++){const v=h[m];n.bufferSubData(c,v.start*u.BYTES_PER_ELEMENT,u,v.start,v.count)}l.clearUpdateRanges()}l.onUploadCallback()}function s(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function r(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(n.deleteBuffer(l.buffer),e.delete(a))}function o(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const u=e.get(a);(!u||u.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}const c=e.get(a);if(c===void 0)e.set(a,t(a,l));else if(c.version<a.version){if(c.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(c.buffer,a,l),c.version=a.version}}return{get:s,remove:r,update:o}}var lj=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,cj=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,uj=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,hj=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,dj=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,fj=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,pj=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,mj=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,gj=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,Aj=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,yj=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,vj=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,xj=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,bj=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,wj=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Ej=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,_j=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Cj=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Sj=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Mj=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Ij=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Tj=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,Bj=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,Rj=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Dj=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Pj=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Lj=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,kj=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Fj=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Nj=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Oj="gl_FragColor = linearToOutputTexel( gl_FragColor );",Uj=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Gj=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,zj=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Qj=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Hj=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Vj=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,jj=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Wj=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,qj=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Jj=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Xj=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Kj=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,$j=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Yj=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Zj=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,eW=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,tW=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,nW=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,iW=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,sW=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,rW=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,oW=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,aW=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lW=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,cW=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,uW=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,hW=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,dW=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,fW=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,pW=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,mW=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,gW=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,AW=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,yW=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,vW=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,xW=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,bW=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,wW=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,EW=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,_W=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,CW=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,SW=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,MW=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,IW=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,TW=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,BW=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,RW=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,DW=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,PW=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,LW=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,kW=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,FW=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,NW=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,OW=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,UW=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,GW=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,zW=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,QW=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,HW=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,VW=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,jW=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,WW=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,qW=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,JW=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,XW=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,KW=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,$W=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,YW=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,ZW=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,eq=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,tq=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,nq=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,iq=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,sq=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,rq=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,oq=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const aq=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,lq=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,cq=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,uq=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,hq=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,dq=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,fq=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,pq=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,mq=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,gq=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Aq=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,yq=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vq=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,xq=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,bq=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,wq=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Eq=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,_q=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Cq=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Sq=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Mq=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Iq=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Tq=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Bq=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Rq=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Dq=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Pq=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Lq=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,kq=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Fq=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Nq=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Oq=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Uq=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Gq=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Tt={alphahash_fragment:lj,alphahash_pars_fragment:cj,alphamap_fragment:uj,alphamap_pars_fragment:hj,alphatest_fragment:dj,alphatest_pars_fragment:fj,aomap_fragment:pj,aomap_pars_fragment:mj,batching_pars_vertex:gj,batching_vertex:Aj,begin_vertex:yj,beginnormal_vertex:vj,bsdfs:xj,iridescence_fragment:bj,bumpmap_pars_fragment:wj,clipping_planes_fragment:Ej,clipping_planes_pars_fragment:_j,clipping_planes_pars_vertex:Cj,clipping_planes_vertex:Sj,color_fragment:Mj,color_pars_fragment:Ij,color_pars_vertex:Tj,color_vertex:Bj,common:Rj,cube_uv_reflection_fragment:Dj,defaultnormal_vertex:Pj,displacementmap_pars_vertex:Lj,displacementmap_vertex:kj,emissivemap_fragment:Fj,emissivemap_pars_fragment:Nj,colorspace_fragment:Oj,colorspace_pars_fragment:Uj,envmap_fragment:Gj,envmap_common_pars_fragment:zj,envmap_pars_fragment:Qj,envmap_pars_vertex:Hj,envmap_physical_pars_fragment:eW,envmap_vertex:Vj,fog_vertex:jj,fog_pars_vertex:Wj,fog_fragment:qj,fog_pars_fragment:Jj,gradientmap_pars_fragment:Xj,lightmap_pars_fragment:Kj,lights_lambert_fragment:$j,lights_lambert_pars_fragment:Yj,lights_pars_begin:Zj,lights_toon_fragment:tW,lights_toon_pars_fragment:nW,lights_phong_fragment:iW,lights_phong_pars_fragment:sW,lights_physical_fragment:rW,lights_physical_pars_fragment:oW,lights_fragment_begin:aW,lights_fragment_maps:lW,lights_fragment_end:cW,logdepthbuf_fragment:uW,logdepthbuf_pars_fragment:hW,logdepthbuf_pars_vertex:dW,logdepthbuf_vertex:fW,map_fragment:pW,map_pars_fragment:mW,map_particle_fragment:gW,map_particle_pars_fragment:AW,metalnessmap_fragment:yW,metalnessmap_pars_fragment:vW,morphinstance_vertex:xW,morphcolor_vertex:bW,morphnormal_vertex:wW,morphtarget_pars_vertex:EW,morphtarget_vertex:_W,normal_fragment_begin:CW,normal_fragment_maps:SW,normal_pars_fragment:MW,normal_pars_vertex:IW,normal_vertex:TW,normalmap_pars_fragment:BW,clearcoat_normal_fragment_begin:RW,clearcoat_normal_fragment_maps:DW,clearcoat_pars_fragment:PW,iridescence_pars_fragment:LW,opaque_fragment:kW,packing:FW,premultiplied_alpha_fragment:NW,project_vertex:OW,dithering_fragment:UW,dithering_pars_fragment:GW,roughnessmap_fragment:zW,roughnessmap_pars_fragment:QW,shadowmap_pars_fragment:HW,shadowmap_pars_vertex:VW,shadowmap_vertex:jW,shadowmask_pars_fragment:WW,skinbase_vertex:qW,skinning_pars_vertex:JW,skinning_vertex:XW,skinnormal_vertex:KW,specularmap_fragment:$W,specularmap_pars_fragment:YW,tonemapping_fragment:ZW,tonemapping_pars_fragment:eq,transmission_fragment:tq,transmission_pars_fragment:nq,uv_pars_fragment:iq,uv_pars_vertex:sq,uv_vertex:rq,worldpos_vertex:oq,background_vert:aq,background_frag:lq,backgroundCube_vert:cq,backgroundCube_frag:uq,cube_vert:hq,cube_frag:dq,depth_vert:fq,depth_frag:pq,distanceRGBA_vert:mq,distanceRGBA_frag:gq,equirect_vert:Aq,equirect_frag:yq,linedashed_vert:vq,linedashed_frag:xq,meshbasic_vert:bq,meshbasic_frag:wq,meshlambert_vert:Eq,meshlambert_frag:_q,meshmatcap_vert:Cq,meshmatcap_frag:Sq,meshnormal_vert:Mq,meshnormal_frag:Iq,meshphong_vert:Tq,meshphong_frag:Bq,meshphysical_vert:Rq,meshphysical_frag:Dq,meshtoon_vert:Pq,meshtoon_frag:Lq,points_vert:kq,points_frag:Fq,shadow_vert:Nq,shadow_frag:Oq,sprite_vert:Uq,sprite_frag:Gq},ke={common:{diffuse:{value:new Me(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new bt},alphaMap:{value:null},alphaMapTransform:{value:new bt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new bt}},envmap:{envMap:{value:null},envMapRotation:{value:new bt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new bt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new bt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new bt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new bt},normalScale:{value:new me(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new bt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new bt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new bt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new bt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Me(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Me(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new bt},alphaTest:{value:0},uvTransform:{value:new bt}},sprite:{diffuse:{value:new Me(16777215)},opacity:{value:1},center:{value:new me(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new bt},alphaMap:{value:null},alphaMapTransform:{value:new bt},alphaTest:{value:0}}},io={basic:{uniforms:gs([ke.common,ke.specularmap,ke.envmap,ke.aomap,ke.lightmap,ke.fog]),vertexShader:Tt.meshbasic_vert,fragmentShader:Tt.meshbasic_frag},lambert:{uniforms:gs([ke.common,ke.specularmap,ke.envmap,ke.aomap,ke.lightmap,ke.emissivemap,ke.bumpmap,ke.normalmap,ke.displacementmap,ke.fog,ke.lights,{emissive:{value:new Me(0)}}]),vertexShader:Tt.meshlambert_vert,fragmentShader:Tt.meshlambert_frag},phong:{uniforms:gs([ke.common,ke.specularmap,ke.envmap,ke.aomap,ke.lightmap,ke.emissivemap,ke.bumpmap,ke.normalmap,ke.displacementmap,ke.fog,ke.lights,{emissive:{value:new Me(0)},specular:{value:new Me(1118481)},shininess:{value:30}}]),vertexShader:Tt.meshphong_vert,fragmentShader:Tt.meshphong_frag},standard:{uniforms:gs([ke.common,ke.envmap,ke.aomap,ke.lightmap,ke.emissivemap,ke.bumpmap,ke.normalmap,ke.displacementmap,ke.roughnessmap,ke.metalnessmap,ke.fog,ke.lights,{emissive:{value:new Me(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Tt.meshphysical_vert,fragmentShader:Tt.meshphysical_frag},toon:{uniforms:gs([ke.common,ke.aomap,ke.lightmap,ke.emissivemap,ke.bumpmap,ke.normalmap,ke.displacementmap,ke.gradientmap,ke.fog,ke.lights,{emissive:{value:new Me(0)}}]),vertexShader:Tt.meshtoon_vert,fragmentShader:Tt.meshtoon_frag},matcap:{uniforms:gs([ke.common,ke.bumpmap,ke.normalmap,ke.displacementmap,ke.fog,{matcap:{value:null}}]),vertexShader:Tt.meshmatcap_vert,fragmentShader:Tt.meshmatcap_frag},points:{uniforms:gs([ke.points,ke.fog]),vertexShader:Tt.points_vert,fragmentShader:Tt.points_frag},dashed:{uniforms:gs([ke.common,ke.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Tt.linedashed_vert,fragmentShader:Tt.linedashed_frag},depth:{uniforms:gs([ke.common,ke.displacementmap]),vertexShader:Tt.depth_vert,fragmentShader:Tt.depth_frag},normal:{uniforms:gs([ke.common,ke.bumpmap,ke.normalmap,ke.displacementmap,{opacity:{value:1}}]),vertexShader:Tt.meshnormal_vert,fragmentShader:Tt.meshnormal_frag},sprite:{uniforms:gs([ke.sprite,ke.fog]),vertexShader:Tt.sprite_vert,fragmentShader:Tt.sprite_frag},background:{uniforms:{uvTransform:{value:new bt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Tt.background_vert,fragmentShader:Tt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new bt}},vertexShader:Tt.backgroundCube_vert,fragmentShader:Tt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Tt.cube_vert,fragmentShader:Tt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Tt.equirect_vert,fragmentShader:Tt.equirect_frag},distanceRGBA:{uniforms:gs([ke.common,ke.displacementmap,{referencePosition:{value:new O},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Tt.distanceRGBA_vert,fragmentShader:Tt.distanceRGBA_frag},shadow:{uniforms:gs([ke.lights,ke.fog,{color:{value:new Me(0)},opacity:{value:1}}]),vertexShader:Tt.shadow_vert,fragmentShader:Tt.shadow_frag}};io.physical={uniforms:gs([io.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new bt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new bt},clearcoatNormalScale:{value:new me(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new bt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new bt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new bt},sheen:{value:0},sheenColor:{value:new Me(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new bt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new bt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new bt},transmissionSamplerSize:{value:new me},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new bt},attenuationDistance:{value:0},attenuationColor:{value:new Me(0)},specularColor:{value:new Me(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new bt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new bt},anisotropyVector:{value:new me},anisotropyMap:{value:null},anisotropyMapTransform:{value:new bt}}]),vertexShader:Tt.meshphysical_vert,fragmentShader:Tt.meshphysical_frag};const X0={r:0,b:0,g:0},Fc=new Ss,zq=new tt;function Qq(n,e,t,i,s,r,o){const a=new Me(0);let l=r===!0?0:1,c,u,h=null,p=0,m=null;function g(w){let E=w.isScene===!0?w.background:null;return E&&E.isTexture&&(E=(w.backgroundBlurriness>0?t:e).get(E)),E}function v(w){let E=!1;const M=g(w);M===null?A(a,l):M&&M.isColor&&(A(M,1),E=!0);const I=n.xr.getEnvironmentBlendMode();I==="additive"?i.buffers.color.setClear(0,0,0,1,o):I==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||E)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function y(w,E){const M=g(E);M&&(M.isCubeTexture||M.mapping===Bf)?(u===void 0&&(u=new Wt(new vo(1,1,1),new cs({name:"BackgroundCubeMaterial",uniforms:gf(io.backgroundCube.uniforms),vertexShader:io.backgroundCube.vertexShader,fragmentShader:io.backgroundCube.fragmentShader,side:Pi,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(I,D,B){this.matrixWorld.copyPosition(B.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(u)),Fc.copy(E.backgroundRotation),Fc.x*=-1,Fc.y*=-1,Fc.z*=-1,M.isCubeTexture&&M.isRenderTargetTexture===!1&&(Fc.y*=-1,Fc.z*=-1),u.material.uniforms.envMap.value=M,u.material.uniforms.flipEnvMap.value=M.isCubeTexture&&M.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=E.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=E.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(zq.makeRotationFromEuler(Fc)),u.material.toneMapped=Ht.getTransfer(M.colorSpace)!==un,(h!==M||p!==M.version||m!==n.toneMapping)&&(u.material.needsUpdate=!0,h=M,p=M.version,m=n.toneMapping),u.layers.enableAll(),w.unshift(u,u.geometry,u.material,0,0,null)):M&&M.isTexture&&(c===void 0&&(c=new Wt(new bo(2,2),new cs({name:"BackgroundMaterial",uniforms:gf(io.background.uniforms),vertexShader:io.background.vertexShader,fragmentShader:io.background.fragmentShader,side:fr,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(c)),c.material.uniforms.t2D.value=M,c.material.uniforms.backgroundIntensity.value=E.backgroundIntensity,c.material.toneMapped=Ht.getTransfer(M.colorSpace)!==un,M.matrixAutoUpdate===!0&&M.updateMatrix(),c.material.uniforms.uvTransform.value.copy(M.matrix),(h!==M||p!==M.version||m!==n.toneMapping)&&(c.material.needsUpdate=!0,h=M,p=M.version,m=n.toneMapping),c.layers.enableAll(),w.unshift(c,c.geometry,c.material,0,0,null))}function A(w,E){w.getRGB(X0,gU(n)),i.buffers.color.setClear(X0.r,X0.g,X0.b,E,o)}function b(){u!==void 0&&(u.geometry.dispose(),u.material.dispose()),c!==void 0&&(c.geometry.dispose(),c.material.dispose())}return{getClearColor:function(){return a},setClearColor:function(w,E=1){a.set(w),l=E,A(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(w){l=w,A(a,l)},render:v,addToRenderList:y,dispose:b}}function Hq(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},s=p(null);let r=s,o=!1;function a(T,k,H,Q,W){let X=!1;const J=h(Q,H,k);r!==J&&(r=J,c(r.object)),X=m(T,Q,H,W),X&&g(T,Q,H,W),W!==null&&e.update(W,n.ELEMENT_ARRAY_BUFFER),(X||o)&&(o=!1,E(T,k,H,Q),W!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(W).buffer))}function l(){return n.createVertexArray()}function c(T){return n.bindVertexArray(T)}function u(T){return n.deleteVertexArray(T)}function h(T,k,H){const Q=H.wireframe===!0;let W=i[T.id];W===void 0&&(W={},i[T.id]=W);let X=W[k.id];X===void 0&&(X={},W[k.id]=X);let J=X[Q];return J===void 0&&(J=p(l()),X[Q]=J),J}function p(T){const k=[],H=[],Q=[];for(let W=0;W<t;W++)k[W]=0,H[W]=0,Q[W]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:k,enabledAttributes:H,attributeDivisors:Q,object:T,attributes:{},index:null}}function m(T,k,H,Q){const W=r.attributes,X=k.attributes;let J=0;const K=H.getAttributes();for(const L in K)if(K[L].location>=0){const j=W[L];let $=X[L];if($===void 0&&(L==="instanceMatrix"&&T.instanceMatrix&&($=T.instanceMatrix),L==="instanceColor"&&T.instanceColor&&($=T.instanceColor)),j===void 0||j.attribute!==$||$&&j.data!==$.data)return!0;J++}return r.attributesNum!==J||r.index!==Q}function g(T,k,H,Q){const W={},X=k.attributes;let J=0;const K=H.getAttributes();for(const L in K)if(K[L].location>=0){let j=X[L];j===void 0&&(L==="instanceMatrix"&&T.instanceMatrix&&(j=T.instanceMatrix),L==="instanceColor"&&T.instanceColor&&(j=T.instanceColor));const $={};$.attribute=j,j&&j.data&&($.data=j.data),W[L]=$,J++}r.attributes=W,r.attributesNum=J,r.index=Q}function v(){const T=r.newAttributes;for(let k=0,H=T.length;k<H;k++)T[k]=0}function y(T){A(T,0)}function A(T,k){const H=r.newAttributes,Q=r.enabledAttributes,W=r.attributeDivisors;H[T]=1,Q[T]===0&&(n.enableVertexAttribArray(T),Q[T]=1),W[T]!==k&&(n.vertexAttribDivisor(T,k),W[T]=k)}function b(){const T=r.newAttributes,k=r.enabledAttributes;for(let H=0,Q=k.length;H<Q;H++)k[H]!==T[H]&&(n.disableVertexAttribArray(H),k[H]=0)}function w(T,k,H,Q,W,X,J){J===!0?n.vertexAttribIPointer(T,k,H,W,X):n.vertexAttribPointer(T,k,H,Q,W,X)}function E(T,k,H,Q){v();const W=Q.attributes,X=H.getAttributes(),J=k.defaultAttributeValues;for(const K in X){const L=X[K];if(L.location>=0){let V=W[K];if(V===void 0&&(K==="instanceMatrix"&&T.instanceMatrix&&(V=T.instanceMatrix),K==="instanceColor"&&T.instanceColor&&(V=T.instanceColor)),V!==void 0){const j=V.normalized,$=V.itemSize,le=e.get(V);if(le===void 0)continue;const ve=le.buffer,q=le.type,ae=le.bytesPerElement,ge=q===n.INT||q===n.UNSIGNED_INT||V.gpuType===Sg;if(V.isInterleavedBufferAttribute){const se=V.data,Fe=se.stride,qe=V.offset;if(se.isInstancedInterleavedBuffer){for(let st=0;st<L.locationSize;st++)A(L.location+st,se.meshPerAttribute);T.isInstancedMesh!==!0&&Q._maxInstanceCount===void 0&&(Q._maxInstanceCount=se.meshPerAttribute*se.count)}else for(let st=0;st<L.locationSize;st++)y(L.location+st);n.bindBuffer(n.ARRAY_BUFFER,ve);for(let st=0;st<L.locationSize;st++)w(L.location+st,$/L.locationSize,q,j,Fe*ae,(qe+$/L.locationSize*st)*ae,ge)}else{if(V.isInstancedBufferAttribute){for(let se=0;se<L.locationSize;se++)A(L.location+se,V.meshPerAttribute);T.isInstancedMesh!==!0&&Q._maxInstanceCount===void 0&&(Q._maxInstanceCount=V.meshPerAttribute*V.count)}else for(let se=0;se<L.locationSize;se++)y(L.location+se);n.bindBuffer(n.ARRAY_BUFFER,ve);for(let se=0;se<L.locationSize;se++)w(L.location+se,$/L.locationSize,q,j,$*ae,$/L.locationSize*se*ae,ge)}}else if(J!==void 0){const j=J[K];if(j!==void 0)switch(j.length){case 2:n.vertexAttrib2fv(L.location,j);break;case 3:n.vertexAttrib3fv(L.location,j);break;case 4:n.vertexAttrib4fv(L.location,j);break;default:n.vertexAttrib1fv(L.location,j)}}}}b()}function M(){B();for(const T in i){const k=i[T];for(const H in k){const Q=k[H];for(const W in Q)u(Q[W].object),delete Q[W];delete k[H]}delete i[T]}}function I(T){if(i[T.id]===void 0)return;const k=i[T.id];for(const H in k){const Q=k[H];for(const W in Q)u(Q[W].object),delete Q[W];delete k[H]}delete i[T.id]}function D(T){for(const k in i){const H=i[k];if(H[T.id]===void 0)continue;const Q=H[T.id];for(const W in Q)u(Q[W].object),delete Q[W];delete H[T.id]}}function B(){R(),o=!0,r!==s&&(r=s,c(r.object))}function R(){s.geometry=null,s.program=null,s.wireframe=!1}return{setup:a,reset:B,resetDefaultState:R,dispose:M,releaseStatesOfGeometry:I,releaseStatesOfProgram:D,initAttributes:v,enableAttribute:y,disableUnusedAttributes:b}}function Vq(n,e,t){let i;function s(c){i=c}function r(c,u){n.drawArrays(i,c,u),t.update(u,i,1)}function o(c,u,h){h!==0&&(n.drawArraysInstanced(i,c,u,h),t.update(u,i,h))}function a(c,u,h){if(h===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,c,0,u,0,h);let m=0;for(let g=0;g<h;g++)m+=u[g];t.update(m,i,1)}function l(c,u,h,p){if(h===0)return;const m=e.get("WEBGL_multi_draw");if(m===null)for(let g=0;g<c.length;g++)o(c[g],u[g],p[g]);else{m.multiDrawArraysInstancedWEBGL(i,c,0,u,0,p,0,h);let g=0;for(let v=0;v<h;v++)g+=u[v]*p[v];t.update(g,i,1)}}this.setMode=s,this.render=r,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function jq(n,e,t,i){let s;function r(){if(s!==void 0)return s;if(e.has("EXT_texture_filter_anisotropic")===!0){const D=e.get("EXT_texture_filter_anisotropic");s=n.getParameter(D.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else s=0;return s}function o(D){return!(D!==dn&&i.convert(D)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(D){const B=D===Zn&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(D!==kn&&i.convert(D)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&D!==Sn&&!B)}function l(D){if(D==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";D="mediump"}return D==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=t.precision!==void 0?t.precision:"highp";const u=l(c);u!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",u,"instead."),c=u);const h=t.logarithmicDepthBuffer===!0,p=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),m=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),g=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),v=n.getParameter(n.MAX_TEXTURE_SIZE),y=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),A=n.getParameter(n.MAX_VERTEX_ATTRIBS),b=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),w=n.getParameter(n.MAX_VARYING_VECTORS),E=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),M=g>0,I=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:r,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:a,precision:c,logarithmicDepthBuffer:h,reverseDepthBuffer:p,maxTextures:m,maxVertexTextures:g,maxTextureSize:v,maxCubemapSize:y,maxAttributes:A,maxVertexUniforms:b,maxVaryings:w,maxFragmentUniforms:E,vertexTextures:M,maxSamples:I}}function Wq(n){const e=this;let t=null,i=0,s=!1,r=!1;const o=new _l,a=new bt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,p){const m=h.length!==0||p||i!==0||s;return s=p,i=h.length,m},this.beginShadows=function(){r=!0,u(null)},this.endShadows=function(){r=!1},this.setGlobalState=function(h,p){t=u(h,p,0)},this.setState=function(h,p,m){const g=h.clippingPlanes,v=h.clipIntersection,y=h.clipShadows,A=n.get(h);if(!s||g===null||g.length===0||r&&!y)r?u(null):c();else{const b=r?0:i,w=b*4;let E=A.clippingState||null;l.value=E,E=u(g,p,w,m);for(let M=0;M!==w;++M)E[M]=t[M];A.clippingState=E,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=b}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(h,p,m,g){const v=h!==null?h.length:0;let y=null;if(v!==0){if(y=l.value,g!==!0||y===null){const A=m+v*4,b=p.matrixWorldInverse;a.getNormalMatrix(b),(y===null||y.length<A)&&(y=new Float32Array(A));for(let w=0,E=m;w!==v;++w,E+=4)o.copy(h[w]).applyMatrix4(b,a),o.normal.toArray(y,E),y[E+3]=o.constant}l.value=y,l.needsUpdate=!0}return e.numPlanes=v,e.numIntersection=0,y}}function qq(n){let e=new WeakMap;function t(o,a){return a===cf?o.mapping=Ha:a===qm&&(o.mapping=tc),o}function i(o){if(o&&o.isTexture){const a=o.mapping;if(a===cf||a===qm)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new ab(l.height);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",s),t(c.texture,o.mapping)}else return null}}return o}function s(o){const a=o.target;a.removeEventListener("dispose",s);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function r(){e=new WeakMap}return{get:i,dispose:r}}const Cd=4,dD=[.125,.215,.35,.446,.526,.582],au=20,o_=new Ko,fD=new Me;let a_=null,l_=0,c_=0,u_=!1;const tu=(1+Math.sqrt(5))/2,Nh=1/tu,pD=[new O(-tu,Nh,0),new O(tu,Nh,0),new O(-Nh,0,tu),new O(Nh,0,tu),new O(0,tu,-Nh),new O(0,tu,Nh),new O(-1,1,-1),new O(1,1,-1),new O(-1,1,1),new O(1,1,1)];class C1{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,s=100){a_=this._renderer.getRenderTarget(),l_=this._renderer.getActiveCubeFace(),c_=this._renderer.getActiveMipmapLevel(),u_=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(e,i,s,r),t>0&&this._blur(r,0,0,t),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=AD(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=gD(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(a_,l_,c_),this._renderer.xr.enabled=u_,e.scissorTest=!1,K0(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Ha||e.mapping===tc?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),a_=this._renderer.getRenderTarget(),l_=this._renderer.getActiveCubeFace(),c_=this._renderer.getActiveMipmapLevel(),u_=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Bt,minFilter:Bt,generateMipmaps:!1,type:Zn,format:dn,colorSpace:yn,depthBuffer:!1},s=mD(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=mD(e,t,i);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Jq(r)),this._blurMaterial=Xq(r,e,t)}return s}_compileMaterial(e){const t=new Wt(this._lodPlanes[0],e);this._renderer.compile(t,o_)}_sceneToCubeUV(e,t,i,s){const a=new Fn(90,1,t,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,h=u.autoClear,p=u.toneMapping;u.getClearColor(fD),u.toneMapping=Fr,u.autoClear=!1;const m=new Un({name:"PMREM.Background",side:Pi,depthWrite:!1,depthTest:!1}),g=new Wt(new vo,m);let v=!1;const y=e.background;y?y.isColor&&(m.color.copy(y),e.background=null,v=!0):(m.color.copy(fD),v=!0);for(let A=0;A<6;A++){const b=A%3;b===0?(a.up.set(0,l[A],0),a.lookAt(c[A],0,0)):b===1?(a.up.set(0,0,l[A]),a.lookAt(0,c[A],0)):(a.up.set(0,l[A],0),a.lookAt(0,0,c[A]));const w=this._cubeSize;K0(s,b*w,A>2?w:0,w,w),u.setRenderTarget(s),v&&u.render(g,a),u.render(e,a)}g.geometry.dispose(),g.material.dispose(),u.toneMapping=p,u.autoClear=h,e.background=y}_textureToCubeUV(e,t){const i=this._renderer,s=e.mapping===Ha||e.mapping===tc;s?(this._cubemapMaterial===null&&(this._cubemapMaterial=AD()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=gD());const r=s?this._cubemapMaterial:this._equirectMaterial,o=new Wt(this._lodPlanes[0],r),a=r.uniforms;a.envMap.value=e;const l=this._cubeSize;K0(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(o,o_)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const s=this._lodPlanes.length;for(let r=1;r<s;r++){const o=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),a=pD[(s-r-1)%pD.length];this._blur(e,r-1,r,o,a)}t.autoClear=i}_blur(e,t,i,s,r){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,s,"latitudinal",r),this._halfBlur(o,e,i,i,s,"longitudinal",r)}_halfBlur(e,t,i,s,r,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,h=new Wt(this._lodPlanes[s],c),p=c.uniforms,m=this._sizeLods[i]-1,g=isFinite(r)?Math.PI/(2*m):2*Math.PI/(2*au-1),v=r/g,y=isFinite(r)?1+Math.floor(u*v):au;y>au&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${y} samples when the maximum is set to ${au}`);const A=[];let b=0;for(let D=0;D<au;++D){const B=D/v,R=Math.exp(-B*B/2);A.push(R),D===0?b+=R:D<y&&(b+=2*R)}for(let D=0;D<A.length;D++)A[D]=A[D]/b;p.envMap.value=e.texture,p.samples.value=y,p.weights.value=A,p.latitudinal.value=o==="latitudinal",a&&(p.poleAxis.value=a);const{_lodMax:w}=this;p.dTheta.value=g,p.mipInt.value=w-i;const E=this._sizeLods[s],M=3*E*(s>w-Cd?s-w+Cd:0),I=4*(this._cubeSize-E);K0(t,M,I,3*E,2*E),l.setRenderTarget(t),l.render(h,o_)}}function Jq(n){const e=[],t=[],i=[];let s=n;const r=n-Cd+1+dD.length;for(let o=0;o<r;o++){const a=Math.pow(2,s);t.push(a);let l=1/a;o>n-Cd?l=dD[o-n+Cd-1]:o===0&&(l=0),i.push(l);const c=1/(a-2),u=-c,h=1+c,p=[u,u,h,u,h,h,u,u,h,h,u,h],m=6,g=6,v=3,y=2,A=1,b=new Float32Array(v*g*m),w=new Float32Array(y*g*m),E=new Float32Array(A*g*m);for(let I=0;I<m;I++){const D=I%3*2/3-1,B=I>2?0:-1,R=[D,B,0,D+2/3,B,0,D+2/3,B+1,0,D,B,0,D+2/3,B+1,0,D,B+1,0];b.set(R,v*g*I),w.set(p,y*g*I);const T=[I,I,I,I,I,I];E.set(T,A*g*I)}const M=new xt;M.setAttribute("position",new wt(b,v)),M.setAttribute("uv",new wt(w,y)),M.setAttribute("faceIndex",new wt(E,A)),e.push(M),s>Cd&&s--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function mD(n,e,t){const i=new Cs(n,e,t);return i.texture.mapping=Bf,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function K0(n,e,t,i,s){n.viewport.set(e,t,i,s),n.scissor.set(e,t,i,s)}function Xq(n,e,t){const i=new Float32Array(au),s=new O(0,1,0);return new cs({name:"SphericalGaussianBlur",defines:{n:au,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:jI(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:po,depthTest:!1,depthWrite:!1})}function gD(){return new cs({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:jI(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:po,depthTest:!1,depthWrite:!1})}function AD(){return new cs({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:jI(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:po,depthTest:!1,depthWrite:!1})}function jI(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Kq(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){const l=a.mapping,c=l===cf||l===qm,u=l===Ha||l===tc;if(c||u){let h=e.get(a);const p=h!==void 0?h.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==p)return t===null&&(t=new C1(n)),h=c?t.fromEquirectangular(a,h):t.fromCubemap(a,h),h.texture.pmremVersion=a.pmremVersion,e.set(a,h),h.texture;if(h!==void 0)return h.texture;{const m=a.image;return c&&m&&m.height>0||u&&m&&s(m)?(t===null&&(t=new C1(n)),h=c?t.fromEquirectangular(a):t.fromCubemap(a),h.texture.pmremVersion=a.pmremVersion,e.set(a,h),a.addEventListener("dispose",r),h.texture):null}}}return a}function s(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function r(a){const l=a.target;l.removeEventListener("dispose",r);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function $q(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let s;switch(i){case"WEBGL_depth_texture":s=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=n.getExtension(i)}return e[i]=s,s}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const s=t(i);return s===null&&ad("THREE.WebGLRenderer: "+i+" extension not supported."),s}}}function Yq(n,e,t,i){const s={},r=new WeakMap;function o(h){const p=h.target;p.index!==null&&e.remove(p.index);for(const g in p.attributes)e.remove(p.attributes[g]);p.removeEventListener("dispose",o),delete s[p.id];const m=r.get(p);m&&(e.remove(m),r.delete(p)),i.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,t.memory.geometries--}function a(h,p){return s[p.id]===!0||(p.addEventListener("dispose",o),s[p.id]=!0,t.memory.geometries++),p}function l(h){const p=h.attributes;for(const m in p)e.update(p[m],n.ARRAY_BUFFER)}function c(h){const p=[],m=h.index,g=h.attributes.position;let v=0;if(m!==null){const b=m.array;v=m.version;for(let w=0,E=b.length;w<E;w+=3){const M=b[w+0],I=b[w+1],D=b[w+2];p.push(M,I,I,D,D,M)}}else if(g!==void 0){const b=g.array;v=g.version;for(let w=0,E=b.length/3-1;w<E;w+=3){const M=w+0,I=w+1,D=w+2;p.push(M,I,I,D,D,M)}}else return;const y=new(dU(p)?wI:bI)(p,1);y.version=v;const A=r.get(h);A&&e.remove(A),r.set(h,y)}function u(h){const p=r.get(h);if(p){const m=h.index;m!==null&&p.version<m.version&&c(h)}else c(h);return r.get(h)}return{get:a,update:l,getWireframeAttribute:u}}function Zq(n,e,t){let i;function s(p){i=p}let r,o;function a(p){r=p.type,o=p.bytesPerElement}function l(p,m){n.drawElements(i,m,r,p*o),t.update(m,i,1)}function c(p,m,g){g!==0&&(n.drawElementsInstanced(i,m,r,p*o,g),t.update(m,i,g))}function u(p,m,g){if(g===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,m,0,r,p,0,g);let y=0;for(let A=0;A<g;A++)y+=m[A];t.update(y,i,1)}function h(p,m,g,v){if(g===0)return;const y=e.get("WEBGL_multi_draw");if(y===null)for(let A=0;A<p.length;A++)c(p[A]/o,m[A],v[A]);else{y.multiDrawElementsInstancedWEBGL(i,m,0,r,p,0,v,0,g);let A=0;for(let b=0;b<g;b++)A+=m[b]*v[b];t.update(A,i,1)}}this.setMode=s,this.setIndex=a,this.render=l,this.renderInstances=c,this.renderMultiDraw=u,this.renderMultiDrawInstances=h}function e7(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(r,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(r/3);break;case n.LINES:t.lines+=a*(r/2);break;case n.LINE_STRIP:t.lines+=a*(r-1);break;case n.LINE_LOOP:t.lines+=a*r;break;case n.POINTS:t.points+=a*r;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function s(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:s,update:i}}function t7(n,e,t){const i=new WeakMap,s=new Yt;function r(o,a,l){const c=o.morphTargetInfluences,u=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,h=u!==void 0?u.length:0;let p=i.get(a);if(p===void 0||p.count!==h){let T=function(){B.dispose(),i.delete(a),a.removeEventListener("dispose",T)};var m=T;p!==void 0&&p.texture.dispose();const g=a.morphAttributes.position!==void 0,v=a.morphAttributes.normal!==void 0,y=a.morphAttributes.color!==void 0,A=a.morphAttributes.position||[],b=a.morphAttributes.normal||[],w=a.morphAttributes.color||[];let E=0;g===!0&&(E=1),v===!0&&(E=2),y===!0&&(E=3);let M=a.attributes.position.count*E,I=1;M>e.maxTextureSize&&(I=Math.ceil(M/e.maxTextureSize),M=e.maxTextureSize);const D=new Float32Array(M*I*4*h),B=new Tg(D,M,I,h);B.type=Sn,B.needsUpdate=!0;const R=E*4;for(let k=0;k<h;k++){const H=A[k],Q=b[k],W=w[k],X=M*I*4*k;for(let J=0;J<H.count;J++){const K=J*R;g===!0&&(s.fromBufferAttribute(H,J),D[X+K+0]=s.x,D[X+K+1]=s.y,D[X+K+2]=s.z,D[X+K+3]=0),v===!0&&(s.fromBufferAttribute(Q,J),D[X+K+4]=s.x,D[X+K+5]=s.y,D[X+K+6]=s.z,D[X+K+7]=0),y===!0&&(s.fromBufferAttribute(W,J),D[X+K+8]=s.x,D[X+K+9]=s.y,D[X+K+10]=s.z,D[X+K+11]=W.itemSize===4?s.w:1)}}p={count:h,texture:B,size:new me(M,I)},i.set(a,p),a.addEventListener("dispose",T)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let g=0;for(let y=0;y<c.length;y++)g+=c[y];const v=a.morphTargetsRelative?1:1-g;l.getUniforms().setValue(n,"morphTargetBaseInfluence",v),l.getUniforms().setValue(n,"morphTargetInfluences",c)}l.getUniforms().setValue(n,"morphTargetsTexture",p.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",p.size)}return{update:r}}function n7(n,e,t,i){let s=new WeakMap;function r(l){const c=i.render.frame,u=l.geometry,h=e.get(l,u);if(s.get(h)!==c&&(e.update(h),s.set(h,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),s.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),s.set(l,c))),l.isSkinnedMesh){const p=l.skeleton;s.get(p)!==c&&(p.update(),s.set(p,c))}return h}function o(){s=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:r,dispose:o}}const uG=new ln,yD=new _I(1,1),hG=new Tg,dG=new Bg,fG=new Dg,vD=[],xD=[],bD=new Float32Array(16),wD=new Float32Array(9),ED=new Float32Array(4);function Ff(n,e,t){const i=n[0];if(i<=0||i>0)return n;const s=e*t;let r=vD[s];if(r===void 0&&(r=new Float32Array(s),vD[s]=r),e!==0){i.toArray(r,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(r,a)}return r}function xi(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function bi(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function Pb(n,e){let t=xD[e];t===void 0&&(t=new Int32Array(e),xD[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function i7(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function s7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(xi(t,e))return;n.uniform2fv(this.addr,e),bi(t,e)}}function r7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(xi(t,e))return;n.uniform3fv(this.addr,e),bi(t,e)}}function o7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(xi(t,e))return;n.uniform4fv(this.addr,e),bi(t,e)}}function a7(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(xi(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),bi(t,e)}else{if(xi(t,i))return;ED.set(i),n.uniformMatrix2fv(this.addr,!1,ED),bi(t,i)}}function l7(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(xi(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),bi(t,e)}else{if(xi(t,i))return;wD.set(i),n.uniformMatrix3fv(this.addr,!1,wD),bi(t,i)}}function c7(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(xi(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),bi(t,e)}else{if(xi(t,i))return;bD.set(i),n.uniformMatrix4fv(this.addr,!1,bD),bi(t,i)}}function u7(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function h7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(xi(t,e))return;n.uniform2iv(this.addr,e),bi(t,e)}}function d7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(xi(t,e))return;n.uniform3iv(this.addr,e),bi(t,e)}}function f7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(xi(t,e))return;n.uniform4iv(this.addr,e),bi(t,e)}}function p7(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function m7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(xi(t,e))return;n.uniform2uiv(this.addr,e),bi(t,e)}}function g7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(xi(t,e))return;n.uniform3uiv(this.addr,e),bi(t,e)}}function A7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(xi(t,e))return;n.uniform4uiv(this.addr,e),bi(t,e)}}function y7(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s);let r;this.type===n.SAMPLER_2D_SHADOW?(yD.compareFunction=vI,r=yD):r=uG,t.setTexture2D(e||r,s)}function v7(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTexture3D(e||dG,s)}function x7(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTextureCube(e||fG,s)}function b7(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTexture2DArray(e||hG,s)}function w7(n){switch(n){case 5126:return i7;case 35664:return s7;case 35665:return r7;case 35666:return o7;case 35674:return a7;case 35675:return l7;case 35676:return c7;case 5124:case 35670:return u7;case 35667:case 35671:return h7;case 35668:case 35672:return d7;case 35669:case 35673:return f7;case 5125:return p7;case 36294:return m7;case 36295:return g7;case 36296:return A7;case 35678:case 36198:case 36298:case 36306:case 35682:return y7;case 35679:case 36299:case 36307:return v7;case 35680:case 36300:case 36308:case 36293:return x7;case 36289:case 36303:case 36311:case 36292:return b7}}function E7(n,e){n.uniform1fv(this.addr,e)}function _7(n,e){const t=Ff(e,this.size,2);n.uniform2fv(this.addr,t)}function C7(n,e){const t=Ff(e,this.size,3);n.uniform3fv(this.addr,t)}function S7(n,e){const t=Ff(e,this.size,4);n.uniform4fv(this.addr,t)}function M7(n,e){const t=Ff(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function I7(n,e){const t=Ff(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function T7(n,e){const t=Ff(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function B7(n,e){n.uniform1iv(this.addr,e)}function R7(n,e){n.uniform2iv(this.addr,e)}function D7(n,e){n.uniform3iv(this.addr,e)}function P7(n,e){n.uniform4iv(this.addr,e)}function L7(n,e){n.uniform1uiv(this.addr,e)}function k7(n,e){n.uniform2uiv(this.addr,e)}function F7(n,e){n.uniform3uiv(this.addr,e)}function N7(n,e){n.uniform4uiv(this.addr,e)}function O7(n,e,t){const i=this.cache,s=e.length,r=Pb(t,s);xi(i,r)||(n.uniform1iv(this.addr,r),bi(i,r));for(let o=0;o!==s;++o)t.setTexture2D(e[o]||uG,r[o])}function U7(n,e,t){const i=this.cache,s=e.length,r=Pb(t,s);xi(i,r)||(n.uniform1iv(this.addr,r),bi(i,r));for(let o=0;o!==s;++o)t.setTexture3D(e[o]||dG,r[o])}function G7(n,e,t){const i=this.cache,s=e.length,r=Pb(t,s);xi(i,r)||(n.uniform1iv(this.addr,r),bi(i,r));for(let o=0;o!==s;++o)t.setTextureCube(e[o]||fG,r[o])}function z7(n,e,t){const i=this.cache,s=e.length,r=Pb(t,s);xi(i,r)||(n.uniform1iv(this.addr,r),bi(i,r));for(let o=0;o!==s;++o)t.setTexture2DArray(e[o]||hG,r[o])}function Q7(n){switch(n){case 5126:return E7;case 35664:return _7;case 35665:return C7;case 35666:return S7;case 35674:return M7;case 35675:return I7;case 35676:return T7;case 5124:case 35670:return B7;case 35667:case 35671:return R7;case 35668:case 35672:return D7;case 35669:case 35673:return P7;case 5125:return L7;case 36294:return k7;case 36295:return F7;case 36296:return N7;case 35678:case 36198:case 36298:case 36306:case 35682:return O7;case 35679:case 36299:case 36307:return U7;case 35680:case 36300:case 36308:case 36293:return G7;case 36289:case 36303:case 36311:case 36292:return z7}}class H7{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=w7(t.type)}}class V7{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=Q7(t.type)}}class j7{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const s=this.seq;for(let r=0,o=s.length;r!==o;++r){const a=s[r];a.setValue(e,t[a.id],i)}}}const h_=/(\w+)(\])?(\[|\.)?/g;function _D(n,e){n.seq.push(e),n.map[e.id]=e}function W7(n,e,t){const i=n.name,s=i.length;for(h_.lastIndex=0;;){const r=h_.exec(i),o=h_.lastIndex;let a=r[1];const l=r[2]==="]",c=r[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===s){_D(t,c===void 0?new H7(a,n,e):new V7(a,n,e));break}else{let h=t.map[a];h===void 0&&(h=new j7(a),_D(t,h)),t=h}}}class ev{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let s=0;s<i;++s){const r=e.getActiveUniform(t,s),o=e.getUniformLocation(t,r.name);W7(r,o,this)}}setValue(e,t,i,s){const r=this.map[t];r!==void 0&&r.setValue(e,i,s)}setOptional(e,t,i){const s=t[i];s!==void 0&&this.setValue(e,i,s)}static upload(e,t,i,s){for(let r=0,o=t.length;r!==o;++r){const a=t[r],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,s)}}static seqWithValue(e,t){const i=[];for(let s=0,r=e.length;s!==r;++s){const o=e[s];o.id in t&&i.push(o)}return i}}function CD(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const q7=37297;let J7=0;function X7(n,e){const t=n.split(`
`),i=[],s=Math.max(e-6,0),r=Math.min(e+6,t.length);for(let o=s;o<r;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join(`
`)}const SD=new bt;function K7(n){Ht._getMatrix(SD,Ht.workingColorSpace,n);const e=`mat3( ${SD.elements.map(t=>t.toFixed(4))} )`;switch(Ht.getTransfer(n)){case ng:return[e,"LinearTransferOETF"];case un:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function MD(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),s=n.getShaderInfoLog(e).trim();if(i&&s==="")return"";const r=/ERROR: 0:(\d+)/.exec(s);if(r){const o=parseInt(r[1]);return t.toUpperCase()+`

`+s+`

`+X7(n.getShaderSource(e),o)}else return s}function $7(n,e){const t=K7(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function Y7(n,e){let t;switch(e){case aI:t="Linear";break;case lI:t="Reinhard";break;case cI:t="Cineon";break;case Yx:t="ACESFilmic";break;case uI:t="AgX";break;case lf:t="Neutral";break;case eU:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const $0=new O;function Z7(){Ht.getLuminanceCoefficients($0);const n=$0.x.toFixed(4),e=$0.y.toFixed(4),t=$0.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function eJ(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(nm).join(`
`)}function tJ(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function nJ(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let s=0;s<i;s++){const r=n.getActiveAttrib(e,s),o=r.name;let a=1;r.type===n.FLOAT_MAT2&&(a=2),r.type===n.FLOAT_MAT3&&(a=3),r.type===n.FLOAT_MAT4&&(a=4),t[o]={type:r.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function nm(n){return n!==""}function ID(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function TD(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const iJ=/^[ \t]*#include +<([\w\d./]+)>/gm;function S1(n){return n.replace(iJ,rJ)}const sJ=new Map;function rJ(n,e){let t=Tt[e];if(t===void 0){const i=sJ.get(e);if(i!==void 0)t=Tt[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return S1(t)}const oJ=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function BD(n){return n.replace(oJ,aJ)}function aJ(n,e,t,i){let s="";for(let r=parseInt(e);r<parseInt(t);r++)s+=i.replace(/\[\s*i\s*\]/g,"[ "+r+" ]").replace(/UNROLLED_LOOP_INDEX/g,r);return s}function RD(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function lJ(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===$x?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===vm?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Zr&&(e="SHADOWMAP_TYPE_VSM"),e}function cJ(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Ha:case tc:e="ENVMAP_TYPE_CUBE";break;case Bf:e="ENVMAP_TYPE_CUBE_UV";break}return e}function uJ(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case tc:e="ENVMAP_MODE_REFRACTION";break}return e}function hJ(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Cg:e="ENVMAP_BLENDING_MULTIPLY";break;case YO:e="ENVMAP_BLENDING_MIX";break;case ZO:e="ENVMAP_BLENDING_ADD";break}return e}function dJ(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function fJ(n,e,t,i){const s=n.getContext(),r=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=lJ(t),c=cJ(t),u=uJ(t),h=hJ(t),p=dJ(t),m=eJ(t),g=tJ(r),v=s.createProgram();let y,A,b=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(y=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g].filter(nm).join(`
`),y.length>0&&(y+=`
`),A=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g].filter(nm).join(`
`),A.length>0&&(A+=`
`)):(y=[RD(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(nm).join(`
`),A=[RD(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+h:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Fr?"#define TONE_MAPPING":"",t.toneMapping!==Fr?Tt.tonemapping_pars_fragment:"",t.toneMapping!==Fr?Y7("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Tt.colorspace_pars_fragment,$7("linearToOutputTexel",t.outputColorSpace),Z7(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(nm).join(`
`)),o=S1(o),o=ID(o,t),o=TD(o,t),a=S1(a),a=ID(a,t),a=TD(a,t),o=BD(o),a=BD(a),t.isRawShaderMaterial!==!0&&(b=`#version 300 es
`,y=[m,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+y,A=["#define varying in",t.glslVersion===y1?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===y1?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+A);const w=b+y+o,E=b+A+a,M=CD(s,s.VERTEX_SHADER,w),I=CD(s,s.FRAGMENT_SHADER,E);s.attachShader(v,M),s.attachShader(v,I),t.index0AttributeName!==void 0?s.bindAttribLocation(v,0,t.index0AttributeName):t.morphTargets===!0&&s.bindAttribLocation(v,0,"position"),s.linkProgram(v);function D(k){if(n.debug.checkShaderErrors){const H=s.getProgramInfoLog(v).trim(),Q=s.getShaderInfoLog(M).trim(),W=s.getShaderInfoLog(I).trim();let X=!0,J=!0;if(s.getProgramParameter(v,s.LINK_STATUS)===!1)if(X=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(s,v,M,I);else{const K=MD(s,M,"vertex"),L=MD(s,I,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(v,s.VALIDATE_STATUS)+`

Material Name: `+k.name+`
Material Type: `+k.type+`

Program Info Log: `+H+`
`+K+`
`+L)}else H!==""?console.warn("THREE.WebGLProgram: Program Info Log:",H):(Q===""||W==="")&&(J=!1);J&&(k.diagnostics={runnable:X,programLog:H,vertexShader:{log:Q,prefix:y},fragmentShader:{log:W,prefix:A}})}s.deleteShader(M),s.deleteShader(I),B=new ev(s,v),R=nJ(s,v)}let B;this.getUniforms=function(){return B===void 0&&D(this),B};let R;this.getAttributes=function(){return R===void 0&&D(this),R};let T=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return T===!1&&(T=s.getProgramParameter(v,q7)),T},this.destroy=function(){i.releaseStatesOfProgram(this),s.deleteProgram(v),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=J7++,this.cacheKey=e,this.usedTimes=1,this.program=v,this.vertexShader=M,this.fragmentShader=I,this}let pJ=0;class mJ{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,s=this._getShaderStage(t),r=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(s)===!1&&(o.add(s),s.usedTimes++),o.has(r)===!1&&(o.add(r),r.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new gJ(e),t.set(e,i)),i}}class gJ{constructor(e){this.id=pJ++,this.code=e,this.usedTimes=0}}function AJ(n,e,t,i,s,r,o){const a=new Tu,l=new mJ,c=new Set,u=[],h=s.logarithmicDepthBuffer,p=s.vertexTextures;let m=s.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(R){return c.add(R),R===0?"uv":`uv${R}`}function y(R,T,k,H,Q){const W=H.fog,X=Q.geometry,J=R.isMeshStandardMaterial?H.environment:null,K=(R.isMeshStandardMaterial?t:e).get(R.envMap||J),L=K&&K.mapping===Bf?K.image.height:null,V=g[R.type];R.precision!==null&&(m=s.getMaxPrecision(R.precision),m!==R.precision&&console.warn("THREE.WebGLProgram.getParameters:",R.precision,"not supported, using",m,"instead."));const j=X.morphAttributes.position||X.morphAttributes.normal||X.morphAttributes.color,$=j!==void 0?j.length:0;let le=0;X.morphAttributes.position!==void 0&&(le=1),X.morphAttributes.normal!==void 0&&(le=2),X.morphAttributes.color!==void 0&&(le=3);let ve,q,ae,ge;if(V){const en=io[V];ve=en.vertexShader,q=en.fragmentShader}else ve=R.vertexShader,q=R.fragmentShader,l.update(R),ae=l.getVertexShaderID(R),ge=l.getFragmentShaderID(R);const se=n.getRenderTarget(),Fe=n.state.buffers.depth.getReversed(),qe=Q.isInstancedMesh===!0,st=Q.isBatchedMesh===!0,dt=!!R.map,Ae=!!R.matcap,be=!!K,G=!!R.aoMap,ot=!!R.lightMap,Ce=!!R.bumpMap,Ve=!!R.normalMap,Be=!!R.displacementMap,gt=!!R.emissiveMap,Pe=!!R.metalnessMap,U=!!R.roughnessMap,F=R.anisotropy>0,re=R.clearcoat>0,pe=R.dispersion>0,we=R.iridescence>0,ye=R.sheen>0,it=R.transmission>0,Ne=F&&!!R.anisotropyMap,He=re&&!!R.clearcoatMap,Ut=re&&!!R.clearcoatNormalMap,Ie=re&&!!R.clearcoatRoughnessMap,Xe=we&&!!R.iridescenceMap,mt=we&&!!R.iridescenceThicknessMap,vt=ye&&!!R.sheenColorMap,Ke=ye&&!!R.sheenRoughnessMap,Jt=!!R.specularMap,Ct=!!R.specularColorMap,pn=!!R.specularIntensityMap,Z=it&&!!R.transmissionMap,Oe=it&&!!R.thicknessMap,fe=!!R.gradientMap,xe=!!R.alphaMap,Qe=R.alphaTest>0,Ge=!!R.alphaHash,Et=!!R.extensions;let In=Fr;R.toneMapped&&(se===null||se.isXRRenderTarget===!0)&&(In=n.toneMapping);const di={shaderID:V,shaderType:R.type,shaderName:R.name,vertexShader:ve,fragmentShader:q,defines:R.defines,customVertexShaderID:ae,customFragmentShaderID:ge,isRawShaderMaterial:R.isRawShaderMaterial===!0,glslVersion:R.glslVersion,precision:m,batching:st,batchingColor:st&&Q._colorsTexture!==null,instancing:qe,instancingColor:qe&&Q.instanceColor!==null,instancingMorph:qe&&Q.morphTexture!==null,supportsVertexTextures:p,outputColorSpace:se===null?n.outputColorSpace:se.isXRRenderTarget===!0?se.texture.colorSpace:yn,alphaToCoverage:!!R.alphaToCoverage,map:dt,matcap:Ae,envMap:be,envMapMode:be&&K.mapping,envMapCubeUVHeight:L,aoMap:G,lightMap:ot,bumpMap:Ce,normalMap:Ve,displacementMap:p&&Be,emissiveMap:gt,normalMapObjectSpace:Ve&&R.normalMapType===sU,normalMapTangentSpace:Ve&&R.normalMapType===dc,metalnessMap:Pe,roughnessMap:U,anisotropy:F,anisotropyMap:Ne,clearcoat:re,clearcoatMap:He,clearcoatNormalMap:Ut,clearcoatRoughnessMap:Ie,dispersion:pe,iridescence:we,iridescenceMap:Xe,iridescenceThicknessMap:mt,sheen:ye,sheenColorMap:vt,sheenRoughnessMap:Ke,specularMap:Jt,specularColorMap:Ct,specularIntensityMap:pn,transmission:it,transmissionMap:Z,thicknessMap:Oe,gradientMap:fe,opaque:R.transparent===!1&&R.blending===Cu&&R.alphaToCoverage===!1,alphaMap:xe,alphaTest:Qe,alphaHash:Ge,combine:R.combine,mapUv:dt&&v(R.map.channel),aoMapUv:G&&v(R.aoMap.channel),lightMapUv:ot&&v(R.lightMap.channel),bumpMapUv:Ce&&v(R.bumpMap.channel),normalMapUv:Ve&&v(R.normalMap.channel),displacementMapUv:Be&&v(R.displacementMap.channel),emissiveMapUv:gt&&v(R.emissiveMap.channel),metalnessMapUv:Pe&&v(R.metalnessMap.channel),roughnessMapUv:U&&v(R.roughnessMap.channel),anisotropyMapUv:Ne&&v(R.anisotropyMap.channel),clearcoatMapUv:He&&v(R.clearcoatMap.channel),clearcoatNormalMapUv:Ut&&v(R.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ie&&v(R.clearcoatRoughnessMap.channel),iridescenceMapUv:Xe&&v(R.iridescenceMap.channel),iridescenceThicknessMapUv:mt&&v(R.iridescenceThicknessMap.channel),sheenColorMapUv:vt&&v(R.sheenColorMap.channel),sheenRoughnessMapUv:Ke&&v(R.sheenRoughnessMap.channel),specularMapUv:Jt&&v(R.specularMap.channel),specularColorMapUv:Ct&&v(R.specularColorMap.channel),specularIntensityMapUv:pn&&v(R.specularIntensityMap.channel),transmissionMapUv:Z&&v(R.transmissionMap.channel),thicknessMapUv:Oe&&v(R.thicknessMap.channel),alphaMapUv:xe&&v(R.alphaMap.channel),vertexTangents:!!X.attributes.tangent&&(Ve||F),vertexColors:R.vertexColors,vertexAlphas:R.vertexColors===!0&&!!X.attributes.color&&X.attributes.color.itemSize===4,pointsUvs:Q.isPoints===!0&&!!X.attributes.uv&&(dt||xe),fog:!!W,useFog:R.fog===!0,fogExp2:!!W&&W.isFogExp2,flatShading:R.flatShading===!0,sizeAttenuation:R.sizeAttenuation===!0,logarithmicDepthBuffer:h,reverseDepthBuffer:Fe,skinning:Q.isSkinnedMesh===!0,morphTargets:X.morphAttributes.position!==void 0,morphNormals:X.morphAttributes.normal!==void 0,morphColors:X.morphAttributes.color!==void 0,morphTargetsCount:$,morphTextureStride:le,numDirLights:T.directional.length,numPointLights:T.point.length,numSpotLights:T.spot.length,numSpotLightMaps:T.spotLightMap.length,numRectAreaLights:T.rectArea.length,numHemiLights:T.hemi.length,numDirLightShadows:T.directionalShadowMap.length,numPointLightShadows:T.pointShadowMap.length,numSpotLightShadows:T.spotShadowMap.length,numSpotLightShadowsWithMaps:T.numSpotLightShadowsWithMaps,numLightProbes:T.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:R.dithering,shadowMapEnabled:n.shadowMap.enabled&&k.length>0,shadowMapType:n.shadowMap.type,toneMapping:In,decodeVideoTexture:dt&&R.map.isVideoTexture===!0&&Ht.getTransfer(R.map.colorSpace)===un,decodeVideoTextureEmissive:gt&&R.emissiveMap.isVideoTexture===!0&&Ht.getTransfer(R.emissiveMap.colorSpace)===un,premultipliedAlpha:R.premultipliedAlpha,doubleSided:R.side===ci,flipSided:R.side===Pi,useDepthPacking:R.depthPacking>=0,depthPacking:R.depthPacking||0,index0AttributeName:R.index0AttributeName,extensionClipCullDistance:Et&&R.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Et&&R.extensions.multiDraw===!0||st)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:R.customProgramCacheKey()};return di.vertexUv1s=c.has(1),di.vertexUv2s=c.has(2),di.vertexUv3s=c.has(3),c.clear(),di}function A(R){const T=[];if(R.shaderID?T.push(R.shaderID):(T.push(R.customVertexShaderID),T.push(R.customFragmentShaderID)),R.defines!==void 0)for(const k in R.defines)T.push(k),T.push(R.defines[k]);return R.isRawShaderMaterial===!1&&(b(T,R),w(T,R),T.push(n.outputColorSpace)),T.push(R.customProgramCacheKey),T.join()}function b(R,T){R.push(T.precision),R.push(T.outputColorSpace),R.push(T.envMapMode),R.push(T.envMapCubeUVHeight),R.push(T.mapUv),R.push(T.alphaMapUv),R.push(T.lightMapUv),R.push(T.aoMapUv),R.push(T.bumpMapUv),R.push(T.normalMapUv),R.push(T.displacementMapUv),R.push(T.emissiveMapUv),R.push(T.metalnessMapUv),R.push(T.roughnessMapUv),R.push(T.anisotropyMapUv),R.push(T.clearcoatMapUv),R.push(T.clearcoatNormalMapUv),R.push(T.clearcoatRoughnessMapUv),R.push(T.iridescenceMapUv),R.push(T.iridescenceThicknessMapUv),R.push(T.sheenColorMapUv),R.push(T.sheenRoughnessMapUv),R.push(T.specularMapUv),R.push(T.specularColorMapUv),R.push(T.specularIntensityMapUv),R.push(T.transmissionMapUv),R.push(T.thicknessMapUv),R.push(T.combine),R.push(T.fogExp2),R.push(T.sizeAttenuation),R.push(T.morphTargetsCount),R.push(T.morphAttributeCount),R.push(T.numDirLights),R.push(T.numPointLights),R.push(T.numSpotLights),R.push(T.numSpotLightMaps),R.push(T.numHemiLights),R.push(T.numRectAreaLights),R.push(T.numDirLightShadows),R.push(T.numPointLightShadows),R.push(T.numSpotLightShadows),R.push(T.numSpotLightShadowsWithMaps),R.push(T.numLightProbes),R.push(T.shadowMapType),R.push(T.toneMapping),R.push(T.numClippingPlanes),R.push(T.numClipIntersection),R.push(T.depthPacking)}function w(R,T){a.disableAll(),T.supportsVertexTextures&&a.enable(0),T.instancing&&a.enable(1),T.instancingColor&&a.enable(2),T.instancingMorph&&a.enable(3),T.matcap&&a.enable(4),T.envMap&&a.enable(5),T.normalMapObjectSpace&&a.enable(6),T.normalMapTangentSpace&&a.enable(7),T.clearcoat&&a.enable(8),T.iridescence&&a.enable(9),T.alphaTest&&a.enable(10),T.vertexColors&&a.enable(11),T.vertexAlphas&&a.enable(12),T.vertexUv1s&&a.enable(13),T.vertexUv2s&&a.enable(14),T.vertexUv3s&&a.enable(15),T.vertexTangents&&a.enable(16),T.anisotropy&&a.enable(17),T.alphaHash&&a.enable(18),T.batching&&a.enable(19),T.dispersion&&a.enable(20),T.batchingColor&&a.enable(21),R.push(a.mask),a.disableAll(),T.fog&&a.enable(0),T.useFog&&a.enable(1),T.flatShading&&a.enable(2),T.logarithmicDepthBuffer&&a.enable(3),T.reverseDepthBuffer&&a.enable(4),T.skinning&&a.enable(5),T.morphTargets&&a.enable(6),T.morphNormals&&a.enable(7),T.morphColors&&a.enable(8),T.premultipliedAlpha&&a.enable(9),T.shadowMapEnabled&&a.enable(10),T.doubleSided&&a.enable(11),T.flipSided&&a.enable(12),T.useDepthPacking&&a.enable(13),T.dithering&&a.enable(14),T.transmission&&a.enable(15),T.sheen&&a.enable(16),T.opaque&&a.enable(17),T.pointsUvs&&a.enable(18),T.decodeVideoTexture&&a.enable(19),T.decodeVideoTextureEmissive&&a.enable(20),T.alphaToCoverage&&a.enable(21),R.push(a.mask)}function E(R){const T=g[R.type];let k;if(T){const H=io[T];k=AU.clone(H.uniforms)}else k=R.uniforms;return k}function M(R,T){let k;for(let H=0,Q=u.length;H<Q;H++){const W=u[H];if(W.cacheKey===T){k=W,++k.usedTimes;break}}return k===void 0&&(k=new fJ(n,T,R,r),u.push(k)),k}function I(R){if(--R.usedTimes===0){const T=u.indexOf(R);u[T]=u[u.length-1],u.pop(),R.destroy()}}function D(R){l.remove(R)}function B(){l.dispose()}return{getParameters:y,getProgramCacheKey:A,getUniforms:E,acquireProgram:M,releaseProgram:I,releaseShaderCache:D,programs:u,dispose:B}}function yJ(){let n=new WeakMap;function e(o){return n.has(o)}function t(o){let a=n.get(o);return a===void 0&&(a={},n.set(o,a)),a}function i(o){n.delete(o)}function s(o,a,l){n.get(o)[a]=l}function r(){n=new WeakMap}return{has:e,get:t,remove:i,update:s,dispose:r}}function vJ(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function DD(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function PD(){const n=[];let e=0;const t=[],i=[],s=[];function r(){e=0,t.length=0,i.length=0,s.length=0}function o(h,p,m,g,v,y){let A=n[e];return A===void 0?(A={id:h.id,object:h,geometry:p,material:m,groupOrder:g,renderOrder:h.renderOrder,z:v,group:y},n[e]=A):(A.id=h.id,A.object=h,A.geometry=p,A.material=m,A.groupOrder=g,A.renderOrder=h.renderOrder,A.z=v,A.group=y),e++,A}function a(h,p,m,g,v,y){const A=o(h,p,m,g,v,y);m.transmission>0?i.push(A):m.transparent===!0?s.push(A):t.push(A)}function l(h,p,m,g,v,y){const A=o(h,p,m,g,v,y);m.transmission>0?i.unshift(A):m.transparent===!0?s.unshift(A):t.unshift(A)}function c(h,p){t.length>1&&t.sort(h||vJ),i.length>1&&i.sort(p||DD),s.length>1&&s.sort(p||DD)}function u(){for(let h=e,p=n.length;h<p;h++){const m=n[h];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:t,transmissive:i,transparent:s,init:r,push:a,unshift:l,finish:u,sort:c}}function xJ(){let n=new WeakMap;function e(i,s){const r=n.get(i);let o;return r===void 0?(o=new PD,n.set(i,[o])):s>=r.length?(o=new PD,r.push(o)):o=r[s],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function bJ(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new O,color:new Me};break;case"SpotLight":t={position:new O,direction:new O,color:new Me,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new O,color:new Me,distance:0,decay:0};break;case"HemisphereLight":t={direction:new O,skyColor:new Me,groundColor:new Me};break;case"RectAreaLight":t={color:new Me,position:new O,halfWidth:new O,halfHeight:new O};break}return n[e.id]=t,t}}}function wJ(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new me};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new me};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new me,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let EJ=0;function _J(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function CJ(n){const e=new bJ,t=wJ(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)i.probe.push(new O);const s=new O,r=new tt,o=new tt;function a(c){let u=0,h=0,p=0;for(let R=0;R<9;R++)i.probe[R].set(0,0,0);let m=0,g=0,v=0,y=0,A=0,b=0,w=0,E=0,M=0,I=0,D=0;c.sort(_J);for(let R=0,T=c.length;R<T;R++){const k=c[R],H=k.color,Q=k.intensity,W=k.distance,X=k.shadow&&k.shadow.map?k.shadow.map.texture:null;if(k.isAmbientLight)u+=H.r*Q,h+=H.g*Q,p+=H.b*Q;else if(k.isLightProbe){for(let J=0;J<9;J++)i.probe[J].addScaledVector(k.sh.coefficients[J],Q);D++}else if(k.isDirectionalLight){const J=e.get(k);if(J.color.copy(k.color).multiplyScalar(k.intensity),k.castShadow){const K=k.shadow,L=t.get(k);L.shadowIntensity=K.intensity,L.shadowBias=K.bias,L.shadowNormalBias=K.normalBias,L.shadowRadius=K.radius,L.shadowMapSize=K.mapSize,i.directionalShadow[m]=L,i.directionalShadowMap[m]=X,i.directionalShadowMatrix[m]=k.shadow.matrix,b++}i.directional[m]=J,m++}else if(k.isSpotLight){const J=e.get(k);J.position.setFromMatrixPosition(k.matrixWorld),J.color.copy(H).multiplyScalar(Q),J.distance=W,J.coneCos=Math.cos(k.angle),J.penumbraCos=Math.cos(k.angle*(1-k.penumbra)),J.decay=k.decay,i.spot[v]=J;const K=k.shadow;if(k.map&&(i.spotLightMap[M]=k.map,M++,K.updateMatrices(k),k.castShadow&&I++),i.spotLightMatrix[v]=K.matrix,k.castShadow){const L=t.get(k);L.shadowIntensity=K.intensity,L.shadowBias=K.bias,L.shadowNormalBias=K.normalBias,L.shadowRadius=K.radius,L.shadowMapSize=K.mapSize,i.spotShadow[v]=L,i.spotShadowMap[v]=X,E++}v++}else if(k.isRectAreaLight){const J=e.get(k);J.color.copy(H).multiplyScalar(Q),J.halfWidth.set(k.width*.5,0,0),J.halfHeight.set(0,k.height*.5,0),i.rectArea[y]=J,y++}else if(k.isPointLight){const J=e.get(k);if(J.color.copy(k.color).multiplyScalar(k.intensity),J.distance=k.distance,J.decay=k.decay,k.castShadow){const K=k.shadow,L=t.get(k);L.shadowIntensity=K.intensity,L.shadowBias=K.bias,L.shadowNormalBias=K.normalBias,L.shadowRadius=K.radius,L.shadowMapSize=K.mapSize,L.shadowCameraNear=K.camera.near,L.shadowCameraFar=K.camera.far,i.pointShadow[g]=L,i.pointShadowMap[g]=X,i.pointShadowMatrix[g]=k.shadow.matrix,w++}i.point[g]=J,g++}else if(k.isHemisphereLight){const J=e.get(k);J.skyColor.copy(k.color).multiplyScalar(Q),J.groundColor.copy(k.groundColor).multiplyScalar(Q),i.hemi[A]=J,A++}}y>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=ke.LTC_FLOAT_1,i.rectAreaLTC2=ke.LTC_FLOAT_2):(i.rectAreaLTC1=ke.LTC_HALF_1,i.rectAreaLTC2=ke.LTC_HALF_2)),i.ambient[0]=u,i.ambient[1]=h,i.ambient[2]=p;const B=i.hash;(B.directionalLength!==m||B.pointLength!==g||B.spotLength!==v||B.rectAreaLength!==y||B.hemiLength!==A||B.numDirectionalShadows!==b||B.numPointShadows!==w||B.numSpotShadows!==E||B.numSpotMaps!==M||B.numLightProbes!==D)&&(i.directional.length=m,i.spot.length=v,i.rectArea.length=y,i.point.length=g,i.hemi.length=A,i.directionalShadow.length=b,i.directionalShadowMap.length=b,i.pointShadow.length=w,i.pointShadowMap.length=w,i.spotShadow.length=E,i.spotShadowMap.length=E,i.directionalShadowMatrix.length=b,i.pointShadowMatrix.length=w,i.spotLightMatrix.length=E+M-I,i.spotLightMap.length=M,i.numSpotLightShadowsWithMaps=I,i.numLightProbes=D,B.directionalLength=m,B.pointLength=g,B.spotLength=v,B.rectAreaLength=y,B.hemiLength=A,B.numDirectionalShadows=b,B.numPointShadows=w,B.numSpotShadows=E,B.numSpotMaps=M,B.numLightProbes=D,i.version=EJ++)}function l(c,u){let h=0,p=0,m=0,g=0,v=0;const y=u.matrixWorldInverse;for(let A=0,b=c.length;A<b;A++){const w=c[A];if(w.isDirectionalLight){const E=i.directional[h];E.direction.setFromMatrixPosition(w.matrixWorld),s.setFromMatrixPosition(w.target.matrixWorld),E.direction.sub(s),E.direction.transformDirection(y),h++}else if(w.isSpotLight){const E=i.spot[m];E.position.setFromMatrixPosition(w.matrixWorld),E.position.applyMatrix4(y),E.direction.setFromMatrixPosition(w.matrixWorld),s.setFromMatrixPosition(w.target.matrixWorld),E.direction.sub(s),E.direction.transformDirection(y),m++}else if(w.isRectAreaLight){const E=i.rectArea[g];E.position.setFromMatrixPosition(w.matrixWorld),E.position.applyMatrix4(y),o.identity(),r.copy(w.matrixWorld),r.premultiply(y),o.extractRotation(r),E.halfWidth.set(w.width*.5,0,0),E.halfHeight.set(0,w.height*.5,0),E.halfWidth.applyMatrix4(o),E.halfHeight.applyMatrix4(o),g++}else if(w.isPointLight){const E=i.point[p];E.position.setFromMatrixPosition(w.matrixWorld),E.position.applyMatrix4(y),p++}else if(w.isHemisphereLight){const E=i.hemi[v];E.direction.setFromMatrixPosition(w.matrixWorld),E.direction.transformDirection(y),v++}}}return{setup:a,setupView:l,state:i}}function LD(n){const e=new CJ(n),t=[],i=[];function s(u){c.camera=u,t.length=0,i.length=0}function r(u){t.push(u)}function o(u){i.push(u)}function a(){e.setup(t)}function l(u){e.setupView(t,u)}const c={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:s,state:c,setupLights:a,setupLightsView:l,pushLight:r,pushShadow:o}}function SJ(n){let e=new WeakMap;function t(s,r=0){const o=e.get(s);let a;return o===void 0?(a=new LD(n),e.set(s,[a])):r>=o.length?(a=new LD(n),o.push(a)):a=o[r],a}function i(){e=new WeakMap}return{get:t,dispose:i}}const MJ=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,IJ=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function TJ(n,e,t){let i=new Lg;const s=new me,r=new me,o=new Yt,a=new Ib({depthPacking:iU}),l=new RI,c={},u=t.maxTextureSize,h={[fr]:Pi,[Pi]:fr,[ci]:ci},p=new cs({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new me},radius:{value:4}},vertexShader:MJ,fragmentShader:IJ}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const g=new xt;g.setAttribute("position",new wt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const v=new Wt(g,p),y=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=$x;let A=this.type;this.render=function(I,D,B){if(y.enabled===!1||y.autoUpdate===!1&&y.needsUpdate===!1||I.length===0)return;const R=n.getRenderTarget(),T=n.getActiveCubeFace(),k=n.getActiveMipmapLevel(),H=n.state;H.setBlending(po),H.buffers.color.setClear(1,1,1,1),H.buffers.depth.setTest(!0),H.setScissorTest(!1);const Q=A!==Zr&&this.type===Zr,W=A===Zr&&this.type!==Zr;for(let X=0,J=I.length;X<J;X++){const K=I[X],L=K.shadow;if(L===void 0){console.warn("THREE.WebGLShadowMap:",K,"has no shadow.");continue}if(L.autoUpdate===!1&&L.needsUpdate===!1)continue;s.copy(L.mapSize);const V=L.getFrameExtents();if(s.multiply(V),r.copy(L.mapSize),(s.x>u||s.y>u)&&(s.x>u&&(r.x=Math.floor(u/V.x),s.x=r.x*V.x,L.mapSize.x=r.x),s.y>u&&(r.y=Math.floor(u/V.y),s.y=r.y*V.y,L.mapSize.y=r.y)),L.map===null||Q===!0||W===!0){const $=this.type!==Zr?{minFilter:Mn,magFilter:Mn}:{};L.map!==null&&L.map.dispose(),L.map=new Cs(s.x,s.y,$),L.map.texture.name=K.name+".shadowMap",L.camera.updateProjectionMatrix()}n.setRenderTarget(L.map),n.clear();const j=L.getViewportCount();for(let $=0;$<j;$++){const le=L.getViewport($);o.set(r.x*le.x,r.y*le.y,r.x*le.z,r.y*le.w),H.viewport(o),L.updateMatrices(K,$),i=L.getFrustum(),E(D,B,L.camera,K,this.type)}L.isPointLightShadow!==!0&&this.type===Zr&&b(L,B),L.needsUpdate=!1}A=this.type,y.needsUpdate=!1,n.setRenderTarget(R,T,k)};function b(I,D){const B=e.update(v);p.defines.VSM_SAMPLES!==I.blurSamples&&(p.defines.VSM_SAMPLES=I.blurSamples,m.defines.VSM_SAMPLES=I.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),I.mapPass===null&&(I.mapPass=new Cs(s.x,s.y)),p.uniforms.shadow_pass.value=I.map.texture,p.uniforms.resolution.value=I.mapSize,p.uniforms.radius.value=I.radius,n.setRenderTarget(I.mapPass),n.clear(),n.renderBufferDirect(D,null,B,p,v,null),m.uniforms.shadow_pass.value=I.mapPass.texture,m.uniforms.resolution.value=I.mapSize,m.uniforms.radius.value=I.radius,n.setRenderTarget(I.map),n.clear(),n.renderBufferDirect(D,null,B,m,v,null)}function w(I,D,B,R){let T=null;const k=B.isPointLight===!0?I.customDistanceMaterial:I.customDepthMaterial;if(k!==void 0)T=k;else if(T=B.isPointLight===!0?l:a,n.localClippingEnabled&&D.clipShadows===!0&&Array.isArray(D.clippingPlanes)&&D.clippingPlanes.length!==0||D.displacementMap&&D.displacementScale!==0||D.alphaMap&&D.alphaTest>0||D.map&&D.alphaTest>0){const H=T.uuid,Q=D.uuid;let W=c[H];W===void 0&&(W={},c[H]=W);let X=W[Q];X===void 0&&(X=T.clone(),W[Q]=X,D.addEventListener("dispose",M)),T=X}if(T.visible=D.visible,T.wireframe=D.wireframe,R===Zr?T.side=D.shadowSide!==null?D.shadowSide:D.side:T.side=D.shadowSide!==null?D.shadowSide:h[D.side],T.alphaMap=D.alphaMap,T.alphaTest=D.alphaTest,T.map=D.map,T.clipShadows=D.clipShadows,T.clippingPlanes=D.clippingPlanes,T.clipIntersection=D.clipIntersection,T.displacementMap=D.displacementMap,T.displacementScale=D.displacementScale,T.displacementBias=D.displacementBias,T.wireframeLinewidth=D.wireframeLinewidth,T.linewidth=D.linewidth,B.isPointLight===!0&&T.isMeshDistanceMaterial===!0){const H=n.properties.get(T);H.light=B}return T}function E(I,D,B,R,T){if(I.visible===!1)return;if(I.layers.test(D.layers)&&(I.isMesh||I.isLine||I.isPoints)&&(I.castShadow||I.receiveShadow&&T===Zr)&&(!I.frustumCulled||i.intersectsObject(I))){I.modelViewMatrix.multiplyMatrices(B.matrixWorldInverse,I.matrixWorld);const Q=e.update(I),W=I.material;if(Array.isArray(W)){const X=Q.groups;for(let J=0,K=X.length;J<K;J++){const L=X[J],V=W[L.materialIndex];if(V&&V.visible){const j=w(I,V,R,T);I.onBeforeShadow(n,I,D,B,Q,j,L),n.renderBufferDirect(B,null,Q,j,I,L),I.onAfterShadow(n,I,D,B,Q,j,L)}}}else if(W.visible){const X=w(I,W,R,T);I.onBeforeShadow(n,I,D,B,Q,X,null),n.renderBufferDirect(B,null,Q,X,I,null),I.onAfterShadow(n,I,D,B,Q,X,null)}}const H=I.children;for(let Q=0,W=H.length;Q<W;Q++)E(H[Q],D,B,R,T)}function M(I){I.target.removeEventListener("dispose",M);for(const B in c){const R=c[B],T=I.target.uuid;T in R&&(R[T].dispose(),delete R[T])}}}const BJ={[Gv]:zv,[Qv]:jv,[Hv]:Wv,[Ou]:Vv,[zv]:Gv,[jv]:Qv,[Wv]:Hv,[Vv]:Ou};function RJ(n,e){function t(){let Z=!1;const Oe=new Yt;let fe=null;const xe=new Yt(0,0,0,0);return{setMask:function(Qe){fe!==Qe&&!Z&&(n.colorMask(Qe,Qe,Qe,Qe),fe=Qe)},setLocked:function(Qe){Z=Qe},setClear:function(Qe,Ge,Et,In,di){di===!0&&(Qe*=In,Ge*=In,Et*=In),Oe.set(Qe,Ge,Et,In),xe.equals(Oe)===!1&&(n.clearColor(Qe,Ge,Et,In),xe.copy(Oe))},reset:function(){Z=!1,fe=null,xe.set(-1,0,0,0)}}}function i(){let Z=!1,Oe=!1,fe=null,xe=null,Qe=null;return{setReversed:function(Ge){if(Oe!==Ge){const Et=e.get("EXT_clip_control");Oe?Et.clipControlEXT(Et.LOWER_LEFT_EXT,Et.ZERO_TO_ONE_EXT):Et.clipControlEXT(Et.LOWER_LEFT_EXT,Et.NEGATIVE_ONE_TO_ONE_EXT);const In=Qe;Qe=null,this.setClear(In)}Oe=Ge},getReversed:function(){return Oe},setTest:function(Ge){Ge?se(n.DEPTH_TEST):Fe(n.DEPTH_TEST)},setMask:function(Ge){fe!==Ge&&!Z&&(n.depthMask(Ge),fe=Ge)},setFunc:function(Ge){if(Oe&&(Ge=BJ[Ge]),xe!==Ge){switch(Ge){case Gv:n.depthFunc(n.NEVER);break;case zv:n.depthFunc(n.ALWAYS);break;case Qv:n.depthFunc(n.LESS);break;case Ou:n.depthFunc(n.LEQUAL);break;case Hv:n.depthFunc(n.EQUAL);break;case Vv:n.depthFunc(n.GEQUAL);break;case jv:n.depthFunc(n.GREATER);break;case Wv:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}xe=Ge}},setLocked:function(Ge){Z=Ge},setClear:function(Ge){Qe!==Ge&&(Oe&&(Ge=1-Ge),n.clearDepth(Ge),Qe=Ge)},reset:function(){Z=!1,fe=null,xe=null,Qe=null,Oe=!1}}}function s(){let Z=!1,Oe=null,fe=null,xe=null,Qe=null,Ge=null,Et=null,In=null,di=null;return{setTest:function(en){Z||(en?se(n.STENCIL_TEST):Fe(n.STENCIL_TEST))},setMask:function(en){Oe!==en&&!Z&&(n.stencilMask(en),Oe=en)},setFunc:function(en,Ts,Vr){(fe!==en||xe!==Ts||Qe!==Vr)&&(n.stencilFunc(en,Ts,Vr),fe=en,xe=Ts,Qe=Vr)},setOp:function(en,Ts,Vr){(Ge!==en||Et!==Ts||In!==Vr)&&(n.stencilOp(en,Ts,Vr),Ge=en,Et=Ts,In=Vr)},setLocked:function(en){Z=en},setClear:function(en){di!==en&&(n.clearStencil(en),di=en)},reset:function(){Z=!1,Oe=null,fe=null,xe=null,Qe=null,Ge=null,Et=null,In=null,di=null}}}const r=new t,o=new i,a=new s,l=new WeakMap,c=new WeakMap;let u={},h={},p=new WeakMap,m=[],g=null,v=!1,y=null,A=null,b=null,w=null,E=null,M=null,I=null,D=new Me(0,0,0),B=0,R=!1,T=null,k=null,H=null,Q=null,W=null;const X=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let J=!1,K=0;const L=n.getParameter(n.VERSION);L.indexOf("WebGL")!==-1?(K=parseFloat(/^WebGL (\d)/.exec(L)[1]),J=K>=1):L.indexOf("OpenGL ES")!==-1&&(K=parseFloat(/^OpenGL ES (\d)/.exec(L)[1]),J=K>=2);let V=null,j={};const $=n.getParameter(n.SCISSOR_BOX),le=n.getParameter(n.VIEWPORT),ve=new Yt().fromArray($),q=new Yt().fromArray(le);function ae(Z,Oe,fe,xe){const Qe=new Uint8Array(4),Ge=n.createTexture();n.bindTexture(Z,Ge),n.texParameteri(Z,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(Z,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Et=0;Et<fe;Et++)Z===n.TEXTURE_3D||Z===n.TEXTURE_2D_ARRAY?n.texImage3D(Oe,0,n.RGBA,1,1,xe,0,n.RGBA,n.UNSIGNED_BYTE,Qe):n.texImage2D(Oe+Et,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Qe);return Ge}const ge={};ge[n.TEXTURE_2D]=ae(n.TEXTURE_2D,n.TEXTURE_2D,1),ge[n.TEXTURE_CUBE_MAP]=ae(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),ge[n.TEXTURE_2D_ARRAY]=ae(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),ge[n.TEXTURE_3D]=ae(n.TEXTURE_3D,n.TEXTURE_3D,1,1),r.setClear(0,0,0,1),o.setClear(1),a.setClear(0),se(n.DEPTH_TEST),o.setFunc(Ou),Ce(!1),Ve(h1),se(n.CULL_FACE),G(po);function se(Z){u[Z]!==!0&&(n.enable(Z),u[Z]=!0)}function Fe(Z){u[Z]!==!1&&(n.disable(Z),u[Z]=!1)}function qe(Z,Oe){return h[Z]!==Oe?(n.bindFramebuffer(Z,Oe),h[Z]=Oe,Z===n.DRAW_FRAMEBUFFER&&(h[n.FRAMEBUFFER]=Oe),Z===n.FRAMEBUFFER&&(h[n.DRAW_FRAMEBUFFER]=Oe),!0):!1}function st(Z,Oe){let fe=m,xe=!1;if(Z){fe=p.get(Oe),fe===void 0&&(fe=[],p.set(Oe,fe));const Qe=Z.textures;if(fe.length!==Qe.length||fe[0]!==n.COLOR_ATTACHMENT0){for(let Ge=0,Et=Qe.length;Ge<Et;Ge++)fe[Ge]=n.COLOR_ATTACHMENT0+Ge;fe.length=Qe.length,xe=!0}}else fe[0]!==n.BACK&&(fe[0]=n.BACK,xe=!0);xe&&n.drawBuffers(fe)}function dt(Z){return g!==Z?(n.useProgram(Z),g=Z,!0):!1}const Ae={[Il]:n.FUNC_ADD,[kO]:n.FUNC_SUBTRACT,[FO]:n.FUNC_REVERSE_SUBTRACT};Ae[NO]=n.MIN,Ae[OO]=n.MAX;const be={[UO]:n.ZERO,[GO]:n.ONE,[zO]:n.SRC_COLOR,[Ov]:n.SRC_ALPHA,[qO]:n.SRC_ALPHA_SATURATE,[jO]:n.DST_COLOR,[HO]:n.DST_ALPHA,[QO]:n.ONE_MINUS_SRC_COLOR,[Uv]:n.ONE_MINUS_SRC_ALPHA,[WO]:n.ONE_MINUS_DST_COLOR,[VO]:n.ONE_MINUS_DST_ALPHA,[JO]:n.CONSTANT_COLOR,[XO]:n.ONE_MINUS_CONSTANT_COLOR,[KO]:n.CONSTANT_ALPHA,[$O]:n.ONE_MINUS_CONSTANT_ALPHA};function G(Z,Oe,fe,xe,Qe,Ge,Et,In,di,en){if(Z===po){v===!0&&(Fe(n.BLEND),v=!1);return}if(v===!1&&(se(n.BLEND),v=!0),Z!==LO){if(Z!==y||en!==R){if((A!==Il||E!==Il)&&(n.blendEquation(n.FUNC_ADD),A=Il,E=Il),en)switch(Z){case Cu:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case d1:n.blendFunc(n.ONE,n.ONE);break;case f1:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case p1:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Z);break}else switch(Z){case Cu:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case d1:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case f1:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case p1:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Z);break}b=null,w=null,M=null,I=null,D.set(0,0,0),B=0,y=Z,R=en}return}Qe=Qe||Oe,Ge=Ge||fe,Et=Et||xe,(Oe!==A||Qe!==E)&&(n.blendEquationSeparate(Ae[Oe],Ae[Qe]),A=Oe,E=Qe),(fe!==b||xe!==w||Ge!==M||Et!==I)&&(n.blendFuncSeparate(be[fe],be[xe],be[Ge],be[Et]),b=fe,w=xe,M=Ge,I=Et),(In.equals(D)===!1||di!==B)&&(n.blendColor(In.r,In.g,In.b,di),D.copy(In),B=di),y=Z,R=!1}function ot(Z,Oe){Z.side===ci?Fe(n.CULL_FACE):se(n.CULL_FACE);let fe=Z.side===Pi;Oe&&(fe=!fe),Ce(fe),Z.blending===Cu&&Z.transparent===!1?G(po):G(Z.blending,Z.blendEquation,Z.blendSrc,Z.blendDst,Z.blendEquationAlpha,Z.blendSrcAlpha,Z.blendDstAlpha,Z.blendColor,Z.blendAlpha,Z.premultipliedAlpha),o.setFunc(Z.depthFunc),o.setTest(Z.depthTest),o.setMask(Z.depthWrite),r.setMask(Z.colorWrite);const xe=Z.stencilWrite;a.setTest(xe),xe&&(a.setMask(Z.stencilWriteMask),a.setFunc(Z.stencilFunc,Z.stencilRef,Z.stencilFuncMask),a.setOp(Z.stencilFail,Z.stencilZFail,Z.stencilZPass)),gt(Z.polygonOffset,Z.polygonOffsetFactor,Z.polygonOffsetUnits),Z.alphaToCoverage===!0?se(n.SAMPLE_ALPHA_TO_COVERAGE):Fe(n.SAMPLE_ALPHA_TO_COVERAGE)}function Ce(Z){T!==Z&&(Z?n.frontFace(n.CW):n.frontFace(n.CCW),T=Z)}function Ve(Z){Z!==RO?(se(n.CULL_FACE),Z!==k&&(Z===h1?n.cullFace(n.BACK):Z===DO?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Fe(n.CULL_FACE),k=Z}function Be(Z){Z!==H&&(J&&n.lineWidth(Z),H=Z)}function gt(Z,Oe,fe){Z?(se(n.POLYGON_OFFSET_FILL),(Q!==Oe||W!==fe)&&(n.polygonOffset(Oe,fe),Q=Oe,W=fe)):Fe(n.POLYGON_OFFSET_FILL)}function Pe(Z){Z?se(n.SCISSOR_TEST):Fe(n.SCISSOR_TEST)}function U(Z){Z===void 0&&(Z=n.TEXTURE0+X-1),V!==Z&&(n.activeTexture(Z),V=Z)}function F(Z,Oe,fe){fe===void 0&&(V===null?fe=n.TEXTURE0+X-1:fe=V);let xe=j[fe];xe===void 0&&(xe={type:void 0,texture:void 0},j[fe]=xe),(xe.type!==Z||xe.texture!==Oe)&&(V!==fe&&(n.activeTexture(fe),V=fe),n.bindTexture(Z,Oe||ge[Z]),xe.type=Z,xe.texture=Oe)}function re(){const Z=j[V];Z!==void 0&&Z.type!==void 0&&(n.bindTexture(Z.type,null),Z.type=void 0,Z.texture=void 0)}function pe(){try{n.compressedTexImage2D.apply(n,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function we(){try{n.compressedTexImage3D.apply(n,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function ye(){try{n.texSubImage2D.apply(n,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function it(){try{n.texSubImage3D.apply(n,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function Ne(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function He(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function Ut(){try{n.texStorage2D.apply(n,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function Ie(){try{n.texStorage3D.apply(n,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function Xe(){try{n.texImage2D.apply(n,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function mt(){try{n.texImage3D.apply(n,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function vt(Z){ve.equals(Z)===!1&&(n.scissor(Z.x,Z.y,Z.z,Z.w),ve.copy(Z))}function Ke(Z){q.equals(Z)===!1&&(n.viewport(Z.x,Z.y,Z.z,Z.w),q.copy(Z))}function Jt(Z,Oe){let fe=c.get(Oe);fe===void 0&&(fe=new WeakMap,c.set(Oe,fe));let xe=fe.get(Z);xe===void 0&&(xe=n.getUniformBlockIndex(Oe,Z.name),fe.set(Z,xe))}function Ct(Z,Oe){const xe=c.get(Oe).get(Z);l.get(Oe)!==xe&&(n.uniformBlockBinding(Oe,xe,Z.__bindingPointIndex),l.set(Oe,xe))}function pn(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),o.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),u={},V=null,j={},h={},p=new WeakMap,m=[],g=null,v=!1,y=null,A=null,b=null,w=null,E=null,M=null,I=null,D=new Me(0,0,0),B=0,R=!1,T=null,k=null,H=null,Q=null,W=null,ve.set(0,0,n.canvas.width,n.canvas.height),q.set(0,0,n.canvas.width,n.canvas.height),r.reset(),o.reset(),a.reset()}return{buffers:{color:r,depth:o,stencil:a},enable:se,disable:Fe,bindFramebuffer:qe,drawBuffers:st,useProgram:dt,setBlending:G,setMaterial:ot,setFlipSided:Ce,setCullFace:Ve,setLineWidth:Be,setPolygonOffset:gt,setScissorTest:Pe,activeTexture:U,bindTexture:F,unbindTexture:re,compressedTexImage2D:pe,compressedTexImage3D:we,texImage2D:Xe,texImage3D:mt,updateUBOMapping:Jt,uniformBlockBinding:Ct,texStorage2D:Ut,texStorage3D:Ie,texSubImage2D:ye,texSubImage3D:it,compressedTexSubImage2D:Ne,compressedTexSubImage3D:He,scissor:vt,viewport:Ke,reset:pn}}function DJ(n,e,t,i,s,r,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new me,u=new WeakMap;let h;const p=new WeakMap;let m=!1;try{m=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function g(U,F){return m?new OffscreenCanvas(U,F):rg("canvas")}function v(U,F,re){let pe=1;const we=Pe(U);if((we.width>re||we.height>re)&&(pe=re/Math.max(we.width,we.height)),pe<1)if(typeof HTMLImageElement<"u"&&U instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&U instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&U instanceof ImageBitmap||typeof VideoFrame<"u"&&U instanceof VideoFrame){const ye=Math.floor(pe*we.width),it=Math.floor(pe*we.height);h===void 0&&(h=g(ye,it));const Ne=F?g(ye,it):h;return Ne.width=ye,Ne.height=it,Ne.getContext("2d").drawImage(U,0,0,ye,it),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+we.width+"x"+we.height+") to ("+ye+"x"+it+")."),Ne}else return"data"in U&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+we.width+"x"+we.height+")."),U;return U}function y(U){return U.generateMipmaps}function A(U){n.generateMipmap(U)}function b(U){return U.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:U.isWebGL3DRenderTarget?n.TEXTURE_3D:U.isWebGLArrayRenderTarget||U.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function w(U,F,re,pe,we=!1){if(U!==null){if(n[U]!==void 0)return n[U];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+U+"'")}let ye=F;if(F===n.RED&&(re===n.FLOAT&&(ye=n.R32F),re===n.HALF_FLOAT&&(ye=n.R16F),re===n.UNSIGNED_BYTE&&(ye=n.R8)),F===n.RED_INTEGER&&(re===n.UNSIGNED_BYTE&&(ye=n.R8UI),re===n.UNSIGNED_SHORT&&(ye=n.R16UI),re===n.UNSIGNED_INT&&(ye=n.R32UI),re===n.BYTE&&(ye=n.R8I),re===n.SHORT&&(ye=n.R16I),re===n.INT&&(ye=n.R32I)),F===n.RG&&(re===n.FLOAT&&(ye=n.RG32F),re===n.HALF_FLOAT&&(ye=n.RG16F),re===n.UNSIGNED_BYTE&&(ye=n.RG8)),F===n.RG_INTEGER&&(re===n.UNSIGNED_BYTE&&(ye=n.RG8UI),re===n.UNSIGNED_SHORT&&(ye=n.RG16UI),re===n.UNSIGNED_INT&&(ye=n.RG32UI),re===n.BYTE&&(ye=n.RG8I),re===n.SHORT&&(ye=n.RG16I),re===n.INT&&(ye=n.RG32I)),F===n.RGB_INTEGER&&(re===n.UNSIGNED_BYTE&&(ye=n.RGB8UI),re===n.UNSIGNED_SHORT&&(ye=n.RGB16UI),re===n.UNSIGNED_INT&&(ye=n.RGB32UI),re===n.BYTE&&(ye=n.RGB8I),re===n.SHORT&&(ye=n.RGB16I),re===n.INT&&(ye=n.RGB32I)),F===n.RGBA_INTEGER&&(re===n.UNSIGNED_BYTE&&(ye=n.RGBA8UI),re===n.UNSIGNED_SHORT&&(ye=n.RGBA16UI),re===n.UNSIGNED_INT&&(ye=n.RGBA32UI),re===n.BYTE&&(ye=n.RGBA8I),re===n.SHORT&&(ye=n.RGBA16I),re===n.INT&&(ye=n.RGBA32I)),F===n.RGB&&re===n.UNSIGNED_INT_5_9_9_9_REV&&(ye=n.RGB9_E5),F===n.RGBA){const it=we?ng:Ht.getTransfer(pe);re===n.FLOAT&&(ye=n.RGBA32F),re===n.HALF_FLOAT&&(ye=n.RGBA16F),re===n.UNSIGNED_BYTE&&(ye=it===un?n.SRGB8_ALPHA8:n.RGBA8),re===n.UNSIGNED_SHORT_4_4_4_4&&(ye=n.RGBA4),re===n.UNSIGNED_SHORT_5_5_5_1&&(ye=n.RGB5_A1)}return(ye===n.R16F||ye===n.R32F||ye===n.RG16F||ye===n.RG32F||ye===n.RGBA16F||ye===n.RGBA32F)&&e.get("EXT_color_buffer_float"),ye}function E(U,F){let re;return U?F===null||F===Wo||F===Uu?re=n.DEPTH24_STENCIL8:F===Sn?re=n.DEPTH32F_STENCIL8:F===uf&&(re=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):F===null||F===Wo||F===Uu?re=n.DEPTH_COMPONENT24:F===Sn?re=n.DEPTH_COMPONENT32F:F===uf&&(re=n.DEPTH_COMPONENT16),re}function M(U,F){return y(U)===!0||U.isFramebufferTexture&&U.minFilter!==Mn&&U.minFilter!==Bt?Math.log2(Math.max(F.width,F.height))+1:U.mipmaps!==void 0&&U.mipmaps.length>0?U.mipmaps.length:U.isCompressedTexture&&Array.isArray(U.image)?F.mipmaps.length:1}function I(U){const F=U.target;F.removeEventListener("dispose",I),B(F),F.isVideoTexture&&u.delete(F)}function D(U){const F=U.target;F.removeEventListener("dispose",D),T(F)}function B(U){const F=i.get(U);if(F.__webglInit===void 0)return;const re=U.source,pe=p.get(re);if(pe){const we=pe[F.__cacheKey];we.usedTimes--,we.usedTimes===0&&R(U),Object.keys(pe).length===0&&p.delete(re)}i.remove(U)}function R(U){const F=i.get(U);n.deleteTexture(F.__webglTexture);const re=U.source,pe=p.get(re);delete pe[F.__cacheKey],o.memory.textures--}function T(U){const F=i.get(U);if(U.depthTexture&&(U.depthTexture.dispose(),i.remove(U.depthTexture)),U.isWebGLCubeRenderTarget)for(let pe=0;pe<6;pe++){if(Array.isArray(F.__webglFramebuffer[pe]))for(let we=0;we<F.__webglFramebuffer[pe].length;we++)n.deleteFramebuffer(F.__webglFramebuffer[pe][we]);else n.deleteFramebuffer(F.__webglFramebuffer[pe]);F.__webglDepthbuffer&&n.deleteRenderbuffer(F.__webglDepthbuffer[pe])}else{if(Array.isArray(F.__webglFramebuffer))for(let pe=0;pe<F.__webglFramebuffer.length;pe++)n.deleteFramebuffer(F.__webglFramebuffer[pe]);else n.deleteFramebuffer(F.__webglFramebuffer);if(F.__webglDepthbuffer&&n.deleteRenderbuffer(F.__webglDepthbuffer),F.__webglMultisampledFramebuffer&&n.deleteFramebuffer(F.__webglMultisampledFramebuffer),F.__webglColorRenderbuffer)for(let pe=0;pe<F.__webglColorRenderbuffer.length;pe++)F.__webglColorRenderbuffer[pe]&&n.deleteRenderbuffer(F.__webglColorRenderbuffer[pe]);F.__webglDepthRenderbuffer&&n.deleteRenderbuffer(F.__webglDepthRenderbuffer)}const re=U.textures;for(let pe=0,we=re.length;pe<we;pe++){const ye=i.get(re[pe]);ye.__webglTexture&&(n.deleteTexture(ye.__webglTexture),o.memory.textures--),i.remove(re[pe])}i.remove(U)}let k=0;function H(){k=0}function Q(){const U=k;return U>=s.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+U+" texture units while this GPU supports only "+s.maxTextures),k+=1,U}function W(U){const F=[];return F.push(U.wrapS),F.push(U.wrapT),F.push(U.wrapR||0),F.push(U.magFilter),F.push(U.minFilter),F.push(U.anisotropy),F.push(U.internalFormat),F.push(U.format),F.push(U.type),F.push(U.generateMipmaps),F.push(U.premultiplyAlpha),F.push(U.flipY),F.push(U.unpackAlignment),F.push(U.colorSpace),F.join()}function X(U,F){const re=i.get(U);if(U.isVideoTexture&&Be(U),U.isRenderTargetTexture===!1&&U.version>0&&re.__version!==U.version){const pe=U.image;if(pe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(pe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{q(re,U,F);return}}t.bindTexture(n.TEXTURE_2D,re.__webglTexture,n.TEXTURE0+F)}function J(U,F){const re=i.get(U);if(U.version>0&&re.__version!==U.version){q(re,U,F);return}t.bindTexture(n.TEXTURE_2D_ARRAY,re.__webglTexture,n.TEXTURE0+F)}function K(U,F){const re=i.get(U);if(U.version>0&&re.__version!==U.version){q(re,U,F);return}t.bindTexture(n.TEXTURE_3D,re.__webglTexture,n.TEXTURE0+F)}function L(U,F){const re=i.get(U);if(U.version>0&&re.__version!==U.version){ae(re,U,F);return}t.bindTexture(n.TEXTURE_CUBE_MAP,re.__webglTexture,n.TEXTURE0+F)}const V={[ls]:n.REPEAT,[Cn]:n.CLAMP_TO_EDGE,[jo]:n.MIRRORED_REPEAT},j={[Mn]:n.NEAREST,[hc]:n.NEAREST_MIPMAP_NEAREST,[ao]:n.NEAREST_MIPMAP_LINEAR,[Bt]:n.LINEAR,[Ho]:n.LINEAR_MIPMAP_NEAREST,[vi]:n.LINEAR_MIPMAP_LINEAR},$={[rU]:n.NEVER,[hU]:n.ALWAYS,[oU]:n.LESS,[vI]:n.LEQUAL,[aU]:n.EQUAL,[uU]:n.GEQUAL,[lU]:n.GREATER,[cU]:n.NOTEQUAL};function le(U,F){if(F.type===Sn&&e.has("OES_texture_float_linear")===!1&&(F.magFilter===Bt||F.magFilter===Ho||F.magFilter===ao||F.magFilter===vi||F.minFilter===Bt||F.minFilter===Ho||F.minFilter===ao||F.minFilter===vi)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(U,n.TEXTURE_WRAP_S,V[F.wrapS]),n.texParameteri(U,n.TEXTURE_WRAP_T,V[F.wrapT]),(U===n.TEXTURE_3D||U===n.TEXTURE_2D_ARRAY)&&n.texParameteri(U,n.TEXTURE_WRAP_R,V[F.wrapR]),n.texParameteri(U,n.TEXTURE_MAG_FILTER,j[F.magFilter]),n.texParameteri(U,n.TEXTURE_MIN_FILTER,j[F.minFilter]),F.compareFunction&&(n.texParameteri(U,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(U,n.TEXTURE_COMPARE_FUNC,$[F.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(F.magFilter===Mn||F.minFilter!==ao&&F.minFilter!==vi||F.type===Sn&&e.has("OES_texture_float_linear")===!1)return;if(F.anisotropy>1||i.get(F).__currentAnisotropy){const re=e.get("EXT_texture_filter_anisotropic");n.texParameterf(U,re.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(F.anisotropy,s.getMaxAnisotropy())),i.get(F).__currentAnisotropy=F.anisotropy}}}function ve(U,F){let re=!1;U.__webglInit===void 0&&(U.__webglInit=!0,F.addEventListener("dispose",I));const pe=F.source;let we=p.get(pe);we===void 0&&(we={},p.set(pe,we));const ye=W(F);if(ye!==U.__cacheKey){we[ye]===void 0&&(we[ye]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,re=!0),we[ye].usedTimes++;const it=we[U.__cacheKey];it!==void 0&&(we[U.__cacheKey].usedTimes--,it.usedTimes===0&&R(F)),U.__cacheKey=ye,U.__webglTexture=we[ye].texture}return re}function q(U,F,re){let pe=n.TEXTURE_2D;(F.isDataArrayTexture||F.isCompressedArrayTexture)&&(pe=n.TEXTURE_2D_ARRAY),F.isData3DTexture&&(pe=n.TEXTURE_3D);const we=ve(U,F),ye=F.source;t.bindTexture(pe,U.__webglTexture,n.TEXTURE0+re);const it=i.get(ye);if(ye.version!==it.__version||we===!0){t.activeTexture(n.TEXTURE0+re);const Ne=Ht.getPrimaries(Ht.workingColorSpace),He=F.colorSpace===nr?null:Ht.getPrimaries(F.colorSpace),Ut=F.colorSpace===nr||Ne===He?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,F.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,F.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,F.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ut);let Ie=v(F.image,!1,s.maxTextureSize);Ie=gt(F,Ie);const Xe=r.convert(F.format,F.colorSpace),mt=r.convert(F.type);let vt=w(F.internalFormat,Xe,mt,F.colorSpace,F.isVideoTexture);le(pe,F);let Ke;const Jt=F.mipmaps,Ct=F.isVideoTexture!==!0,pn=it.__version===void 0||we===!0,Z=ye.dataReady,Oe=M(F,Ie);if(F.isDepthTexture)vt=E(F.format===Gu,F.type),pn&&(Ct?t.texStorage2D(n.TEXTURE_2D,1,vt,Ie.width,Ie.height):t.texImage2D(n.TEXTURE_2D,0,vt,Ie.width,Ie.height,0,Xe,mt,null));else if(F.isDataTexture)if(Jt.length>0){Ct&&pn&&t.texStorage2D(n.TEXTURE_2D,Oe,vt,Jt[0].width,Jt[0].height);for(let fe=0,xe=Jt.length;fe<xe;fe++)Ke=Jt[fe],Ct?Z&&t.texSubImage2D(n.TEXTURE_2D,fe,0,0,Ke.width,Ke.height,Xe,mt,Ke.data):t.texImage2D(n.TEXTURE_2D,fe,vt,Ke.width,Ke.height,0,Xe,mt,Ke.data);F.generateMipmaps=!1}else Ct?(pn&&t.texStorage2D(n.TEXTURE_2D,Oe,vt,Ie.width,Ie.height),Z&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ie.width,Ie.height,Xe,mt,Ie.data)):t.texImage2D(n.TEXTURE_2D,0,vt,Ie.width,Ie.height,0,Xe,mt,Ie.data);else if(F.isCompressedTexture)if(F.isCompressedArrayTexture){Ct&&pn&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Oe,vt,Jt[0].width,Jt[0].height,Ie.depth);for(let fe=0,xe=Jt.length;fe<xe;fe++)if(Ke=Jt[fe],F.format!==dn)if(Xe!==null)if(Ct){if(Z)if(F.layerUpdates.size>0){const Qe=_1(Ke.width,Ke.height,F.format,F.type);for(const Ge of F.layerUpdates){const Et=Ke.data.subarray(Ge*Qe/Ke.data.BYTES_PER_ELEMENT,(Ge+1)*Qe/Ke.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,fe,0,0,Ge,Ke.width,Ke.height,1,Xe,Et)}F.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,fe,0,0,0,Ke.width,Ke.height,Ie.depth,Xe,Ke.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,fe,vt,Ke.width,Ke.height,Ie.depth,0,Ke.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Ct?Z&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,fe,0,0,0,Ke.width,Ke.height,Ie.depth,Xe,mt,Ke.data):t.texImage3D(n.TEXTURE_2D_ARRAY,fe,vt,Ke.width,Ke.height,Ie.depth,0,Xe,mt,Ke.data)}else{Ct&&pn&&t.texStorage2D(n.TEXTURE_2D,Oe,vt,Jt[0].width,Jt[0].height);for(let fe=0,xe=Jt.length;fe<xe;fe++)Ke=Jt[fe],F.format!==dn?Xe!==null?Ct?Z&&t.compressedTexSubImage2D(n.TEXTURE_2D,fe,0,0,Ke.width,Ke.height,Xe,Ke.data):t.compressedTexImage2D(n.TEXTURE_2D,fe,vt,Ke.width,Ke.height,0,Ke.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ct?Z&&t.texSubImage2D(n.TEXTURE_2D,fe,0,0,Ke.width,Ke.height,Xe,mt,Ke.data):t.texImage2D(n.TEXTURE_2D,fe,vt,Ke.width,Ke.height,0,Xe,mt,Ke.data)}else if(F.isDataArrayTexture)if(Ct){if(pn&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Oe,vt,Ie.width,Ie.height,Ie.depth),Z)if(F.layerUpdates.size>0){const fe=_1(Ie.width,Ie.height,F.format,F.type);for(const xe of F.layerUpdates){const Qe=Ie.data.subarray(xe*fe/Ie.data.BYTES_PER_ELEMENT,(xe+1)*fe/Ie.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,xe,Ie.width,Ie.height,1,Xe,mt,Qe)}F.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Ie.width,Ie.height,Ie.depth,Xe,mt,Ie.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,vt,Ie.width,Ie.height,Ie.depth,0,Xe,mt,Ie.data);else if(F.isData3DTexture)Ct?(pn&&t.texStorage3D(n.TEXTURE_3D,Oe,vt,Ie.width,Ie.height,Ie.depth),Z&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Ie.width,Ie.height,Ie.depth,Xe,mt,Ie.data)):t.texImage3D(n.TEXTURE_3D,0,vt,Ie.width,Ie.height,Ie.depth,0,Xe,mt,Ie.data);else if(F.isFramebufferTexture){if(pn)if(Ct)t.texStorage2D(n.TEXTURE_2D,Oe,vt,Ie.width,Ie.height);else{let fe=Ie.width,xe=Ie.height;for(let Qe=0;Qe<Oe;Qe++)t.texImage2D(n.TEXTURE_2D,Qe,vt,fe,xe,0,Xe,mt,null),fe>>=1,xe>>=1}}else if(Jt.length>0){if(Ct&&pn){const fe=Pe(Jt[0]);t.texStorage2D(n.TEXTURE_2D,Oe,vt,fe.width,fe.height)}for(let fe=0,xe=Jt.length;fe<xe;fe++)Ke=Jt[fe],Ct?Z&&t.texSubImage2D(n.TEXTURE_2D,fe,0,0,Xe,mt,Ke):t.texImage2D(n.TEXTURE_2D,fe,vt,Xe,mt,Ke);F.generateMipmaps=!1}else if(Ct){if(pn){const fe=Pe(Ie);t.texStorage2D(n.TEXTURE_2D,Oe,vt,fe.width,fe.height)}Z&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Xe,mt,Ie)}else t.texImage2D(n.TEXTURE_2D,0,vt,Xe,mt,Ie);y(F)&&A(pe),it.__version=ye.version,F.onUpdate&&F.onUpdate(F)}U.__version=F.version}function ae(U,F,re){if(F.image.length!==6)return;const pe=ve(U,F),we=F.source;t.bindTexture(n.TEXTURE_CUBE_MAP,U.__webglTexture,n.TEXTURE0+re);const ye=i.get(we);if(we.version!==ye.__version||pe===!0){t.activeTexture(n.TEXTURE0+re);const it=Ht.getPrimaries(Ht.workingColorSpace),Ne=F.colorSpace===nr?null:Ht.getPrimaries(F.colorSpace),He=F.colorSpace===nr||it===Ne?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,F.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,F.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,F.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,He);const Ut=F.isCompressedTexture||F.image[0].isCompressedTexture,Ie=F.image[0]&&F.image[0].isDataTexture,Xe=[];for(let xe=0;xe<6;xe++)!Ut&&!Ie?Xe[xe]=v(F.image[xe],!0,s.maxCubemapSize):Xe[xe]=Ie?F.image[xe].image:F.image[xe],Xe[xe]=gt(F,Xe[xe]);const mt=Xe[0],vt=r.convert(F.format,F.colorSpace),Ke=r.convert(F.type),Jt=w(F.internalFormat,vt,Ke,F.colorSpace),Ct=F.isVideoTexture!==!0,pn=ye.__version===void 0||pe===!0,Z=we.dataReady;let Oe=M(F,mt);le(n.TEXTURE_CUBE_MAP,F);let fe;if(Ut){Ct&&pn&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Oe,Jt,mt.width,mt.height);for(let xe=0;xe<6;xe++){fe=Xe[xe].mipmaps;for(let Qe=0;Qe<fe.length;Qe++){const Ge=fe[Qe];F.format!==dn?vt!==null?Ct?Z&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+xe,Qe,0,0,Ge.width,Ge.height,vt,Ge.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+xe,Qe,Jt,Ge.width,Ge.height,0,Ge.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ct?Z&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+xe,Qe,0,0,Ge.width,Ge.height,vt,Ke,Ge.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+xe,Qe,Jt,Ge.width,Ge.height,0,vt,Ke,Ge.data)}}}else{if(fe=F.mipmaps,Ct&&pn){fe.length>0&&Oe++;const xe=Pe(Xe[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,Oe,Jt,xe.width,xe.height)}for(let xe=0;xe<6;xe++)if(Ie){Ct?Z&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+xe,0,0,0,Xe[xe].width,Xe[xe].height,vt,Ke,Xe[xe].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+xe,0,Jt,Xe[xe].width,Xe[xe].height,0,vt,Ke,Xe[xe].data);for(let Qe=0;Qe<fe.length;Qe++){const Et=fe[Qe].image[xe].image;Ct?Z&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+xe,Qe+1,0,0,Et.width,Et.height,vt,Ke,Et.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+xe,Qe+1,Jt,Et.width,Et.height,0,vt,Ke,Et.data)}}else{Ct?Z&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+xe,0,0,0,vt,Ke,Xe[xe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+xe,0,Jt,vt,Ke,Xe[xe]);for(let Qe=0;Qe<fe.length;Qe++){const Ge=fe[Qe];Ct?Z&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+xe,Qe+1,0,0,vt,Ke,Ge.image[xe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+xe,Qe+1,Jt,vt,Ke,Ge.image[xe])}}}y(F)&&A(n.TEXTURE_CUBE_MAP),ye.__version=we.version,F.onUpdate&&F.onUpdate(F)}U.__version=F.version}function ge(U,F,re,pe,we,ye){const it=r.convert(re.format,re.colorSpace),Ne=r.convert(re.type),He=w(re.internalFormat,it,Ne,re.colorSpace),Ut=i.get(F),Ie=i.get(re);if(Ie.__renderTarget=F,!Ut.__hasExternalTextures){const Xe=Math.max(1,F.width>>ye),mt=Math.max(1,F.height>>ye);we===n.TEXTURE_3D||we===n.TEXTURE_2D_ARRAY?t.texImage3D(we,ye,He,Xe,mt,F.depth,0,it,Ne,null):t.texImage2D(we,ye,He,Xe,mt,0,it,Ne,null)}t.bindFramebuffer(n.FRAMEBUFFER,U),Ve(F)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,pe,we,Ie.__webglTexture,0,Ce(F)):(we===n.TEXTURE_2D||we>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&we<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,pe,we,Ie.__webglTexture,ye),t.bindFramebuffer(n.FRAMEBUFFER,null)}function se(U,F,re){if(n.bindRenderbuffer(n.RENDERBUFFER,U),F.depthBuffer){const pe=F.depthTexture,we=pe&&pe.isDepthTexture?pe.type:null,ye=E(F.stencilBuffer,we),it=F.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ne=Ce(F);Ve(F)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ne,ye,F.width,F.height):re?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ne,ye,F.width,F.height):n.renderbufferStorage(n.RENDERBUFFER,ye,F.width,F.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,it,n.RENDERBUFFER,U)}else{const pe=F.textures;for(let we=0;we<pe.length;we++){const ye=pe[we],it=r.convert(ye.format,ye.colorSpace),Ne=r.convert(ye.type),He=w(ye.internalFormat,it,Ne,ye.colorSpace),Ut=Ce(F);re&&Ve(F)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ut,He,F.width,F.height):Ve(F)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ut,He,F.width,F.height):n.renderbufferStorage(n.RENDERBUFFER,He,F.width,F.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Fe(U,F){if(F&&F.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,U),!(F.depthTexture&&F.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const pe=i.get(F.depthTexture);pe.__renderTarget=F,(!pe.__webglTexture||F.depthTexture.image.width!==F.width||F.depthTexture.image.height!==F.height)&&(F.depthTexture.image.width=F.width,F.depthTexture.image.height=F.height,F.depthTexture.needsUpdate=!0),X(F.depthTexture,0);const we=pe.__webglTexture,ye=Ce(F);if(F.depthTexture.format===Su)Ve(F)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,we,0,ye):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,we,0);else if(F.depthTexture.format===Gu)Ve(F)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,we,0,ye):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,we,0);else throw new Error("Unknown depthTexture format")}function qe(U){const F=i.get(U),re=U.isWebGLCubeRenderTarget===!0;if(F.__boundDepthTexture!==U.depthTexture){const pe=U.depthTexture;if(F.__depthDisposeCallback&&F.__depthDisposeCallback(),pe){const we=()=>{delete F.__boundDepthTexture,delete F.__depthDisposeCallback,pe.removeEventListener("dispose",we)};pe.addEventListener("dispose",we),F.__depthDisposeCallback=we}F.__boundDepthTexture=pe}if(U.depthTexture&&!F.__autoAllocateDepthBuffer){if(re)throw new Error("target.depthTexture not supported in Cube render targets");Fe(F.__webglFramebuffer,U)}else if(re){F.__webglDepthbuffer=[];for(let pe=0;pe<6;pe++)if(t.bindFramebuffer(n.FRAMEBUFFER,F.__webglFramebuffer[pe]),F.__webglDepthbuffer[pe]===void 0)F.__webglDepthbuffer[pe]=n.createRenderbuffer(),se(F.__webglDepthbuffer[pe],U,!1);else{const we=U.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ye=F.__webglDepthbuffer[pe];n.bindRenderbuffer(n.RENDERBUFFER,ye),n.framebufferRenderbuffer(n.FRAMEBUFFER,we,n.RENDERBUFFER,ye)}}else if(t.bindFramebuffer(n.FRAMEBUFFER,F.__webglFramebuffer),F.__webglDepthbuffer===void 0)F.__webglDepthbuffer=n.createRenderbuffer(),se(F.__webglDepthbuffer,U,!1);else{const pe=U.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,we=F.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,we),n.framebufferRenderbuffer(n.FRAMEBUFFER,pe,n.RENDERBUFFER,we)}t.bindFramebuffer(n.FRAMEBUFFER,null)}function st(U,F,re){const pe=i.get(U);F!==void 0&&ge(pe.__webglFramebuffer,U,U.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),re!==void 0&&qe(U)}function dt(U){const F=U.texture,re=i.get(U),pe=i.get(F);U.addEventListener("dispose",D);const we=U.textures,ye=U.isWebGLCubeRenderTarget===!0,it=we.length>1;if(it||(pe.__webglTexture===void 0&&(pe.__webglTexture=n.createTexture()),pe.__version=F.version,o.memory.textures++),ye){re.__webglFramebuffer=[];for(let Ne=0;Ne<6;Ne++)if(F.mipmaps&&F.mipmaps.length>0){re.__webglFramebuffer[Ne]=[];for(let He=0;He<F.mipmaps.length;He++)re.__webglFramebuffer[Ne][He]=n.createFramebuffer()}else re.__webglFramebuffer[Ne]=n.createFramebuffer()}else{if(F.mipmaps&&F.mipmaps.length>0){re.__webglFramebuffer=[];for(let Ne=0;Ne<F.mipmaps.length;Ne++)re.__webglFramebuffer[Ne]=n.createFramebuffer()}else re.__webglFramebuffer=n.createFramebuffer();if(it)for(let Ne=0,He=we.length;Ne<He;Ne++){const Ut=i.get(we[Ne]);Ut.__webglTexture===void 0&&(Ut.__webglTexture=n.createTexture(),o.memory.textures++)}if(U.samples>0&&Ve(U)===!1){re.__webglMultisampledFramebuffer=n.createFramebuffer(),re.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,re.__webglMultisampledFramebuffer);for(let Ne=0;Ne<we.length;Ne++){const He=we[Ne];re.__webglColorRenderbuffer[Ne]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,re.__webglColorRenderbuffer[Ne]);const Ut=r.convert(He.format,He.colorSpace),Ie=r.convert(He.type),Xe=w(He.internalFormat,Ut,Ie,He.colorSpace,U.isXRRenderTarget===!0),mt=Ce(U);n.renderbufferStorageMultisample(n.RENDERBUFFER,mt,Xe,U.width,U.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ne,n.RENDERBUFFER,re.__webglColorRenderbuffer[Ne])}n.bindRenderbuffer(n.RENDERBUFFER,null),U.depthBuffer&&(re.__webglDepthRenderbuffer=n.createRenderbuffer(),se(re.__webglDepthRenderbuffer,U,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(ye){t.bindTexture(n.TEXTURE_CUBE_MAP,pe.__webglTexture),le(n.TEXTURE_CUBE_MAP,F);for(let Ne=0;Ne<6;Ne++)if(F.mipmaps&&F.mipmaps.length>0)for(let He=0;He<F.mipmaps.length;He++)ge(re.__webglFramebuffer[Ne][He],U,F,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,He);else ge(re.__webglFramebuffer[Ne],U,F,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,0);y(F)&&A(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(it){for(let Ne=0,He=we.length;Ne<He;Ne++){const Ut=we[Ne],Ie=i.get(Ut);t.bindTexture(n.TEXTURE_2D,Ie.__webglTexture),le(n.TEXTURE_2D,Ut),ge(re.__webglFramebuffer,U,Ut,n.COLOR_ATTACHMENT0+Ne,n.TEXTURE_2D,0),y(Ut)&&A(n.TEXTURE_2D)}t.unbindTexture()}else{let Ne=n.TEXTURE_2D;if((U.isWebGL3DRenderTarget||U.isWebGLArrayRenderTarget)&&(Ne=U.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(Ne,pe.__webglTexture),le(Ne,F),F.mipmaps&&F.mipmaps.length>0)for(let He=0;He<F.mipmaps.length;He++)ge(re.__webglFramebuffer[He],U,F,n.COLOR_ATTACHMENT0,Ne,He);else ge(re.__webglFramebuffer,U,F,n.COLOR_ATTACHMENT0,Ne,0);y(F)&&A(Ne),t.unbindTexture()}U.depthBuffer&&qe(U)}function Ae(U){const F=U.textures;for(let re=0,pe=F.length;re<pe;re++){const we=F[re];if(y(we)){const ye=b(U),it=i.get(we).__webglTexture;t.bindTexture(ye,it),A(ye),t.unbindTexture()}}}const be=[],G=[];function ot(U){if(U.samples>0){if(Ve(U)===!1){const F=U.textures,re=U.width,pe=U.height;let we=n.COLOR_BUFFER_BIT;const ye=U.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,it=i.get(U),Ne=F.length>1;if(Ne)for(let He=0;He<F.length;He++)t.bindFramebuffer(n.FRAMEBUFFER,it.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+He,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,it.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+He,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,it.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,it.__webglFramebuffer);for(let He=0;He<F.length;He++){if(U.resolveDepthBuffer&&(U.depthBuffer&&(we|=n.DEPTH_BUFFER_BIT),U.stencilBuffer&&U.resolveStencilBuffer&&(we|=n.STENCIL_BUFFER_BIT)),Ne){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,it.__webglColorRenderbuffer[He]);const Ut=i.get(F[He]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Ut,0)}n.blitFramebuffer(0,0,re,pe,0,0,re,pe,we,n.NEAREST),l===!0&&(be.length=0,G.length=0,be.push(n.COLOR_ATTACHMENT0+He),U.depthBuffer&&U.resolveDepthBuffer===!1&&(be.push(ye),G.push(ye),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,G)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,be))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Ne)for(let He=0;He<F.length;He++){t.bindFramebuffer(n.FRAMEBUFFER,it.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+He,n.RENDERBUFFER,it.__webglColorRenderbuffer[He]);const Ut=i.get(F[He]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,it.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+He,n.TEXTURE_2D,Ut,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,it.__webglMultisampledFramebuffer)}else if(U.depthBuffer&&U.resolveDepthBuffer===!1&&l){const F=U.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[F])}}}function Ce(U){return Math.min(s.maxSamples,U.samples)}function Ve(U){const F=i.get(U);return U.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&F.__useRenderToTexture!==!1}function Be(U){const F=o.render.frame;u.get(U)!==F&&(u.set(U,F),U.update())}function gt(U,F){const re=U.colorSpace,pe=U.format,we=U.type;return U.isCompressedTexture===!0||U.isVideoTexture===!0||re!==yn&&re!==nr&&(Ht.getTransfer(re)===un?(pe!==dn||we!==kn)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",re)),F}function Pe(U){return typeof HTMLImageElement<"u"&&U instanceof HTMLImageElement?(c.width=U.naturalWidth||U.width,c.height=U.naturalHeight||U.height):typeof VideoFrame<"u"&&U instanceof VideoFrame?(c.width=U.displayWidth,c.height=U.displayHeight):(c.width=U.width,c.height=U.height),c}this.allocateTextureUnit=Q,this.resetTextureUnits=H,this.setTexture2D=X,this.setTexture2DArray=J,this.setTexture3D=K,this.setTextureCube=L,this.rebindTextures=st,this.setupRenderTarget=dt,this.updateRenderTargetMipmap=Ae,this.updateMultisampleRenderTarget=ot,this.setupDepthRenderbuffer=qe,this.setupFrameBufferTexture=ge,this.useMultisampledRTT=Ve}function pG(n,e){function t(i,s=nr){let r;const o=Ht.getTransfer(s);if(i===kn)return n.UNSIGNED_BYTE;if(i===tb)return n.UNSIGNED_SHORT_4_4_4_4;if(i===nb)return n.UNSIGNED_SHORT_5_5_5_1;if(i===hI)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===Zx)return n.BYTE;if(i===eb)return n.SHORT;if(i===uf)return n.UNSIGNED_SHORT;if(i===Sg)return n.INT;if(i===Wo)return n.UNSIGNED_INT;if(i===Sn)return n.FLOAT;if(i===Zn)return n.HALF_FLOAT;if(i===dI)return n.ALPHA;if(i===fI)return n.RGB;if(i===dn)return n.RGBA;if(i===pI)return n.LUMINANCE;if(i===mI)return n.LUMINANCE_ALPHA;if(i===Su)return n.DEPTH_COMPONENT;if(i===Gu)return n.DEPTH_STENCIL;if(i===Ba)return n.RED;if(i===Mg)return n.RED_INTEGER;if(i===kl)return n.RG;if(i===ib)return n.RG_INTEGER;if(i===sb)return n.RGBA_INTEGER;if(i===xm||i===Gd||i===bm||i===zd)if(o===un)if(r=e.get("WEBGL_compressed_texture_s3tc_srgb"),r!==null){if(i===xm)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===Gd)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===bm)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===zd)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(r=e.get("WEBGL_compressed_texture_s3tc"),r!==null){if(i===xm)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===Gd)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===bm)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===zd)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===Jm||i===qv||i===Xm||i===Jv)if(r=e.get("WEBGL_compressed_texture_pvrtc"),r!==null){if(i===Jm)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===qv)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===Xm)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===Jv)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===Km||i===$m||i===Ym)if(r=e.get("WEBGL_compressed_texture_etc"),r!==null){if(i===Km||i===$m)return o===un?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(i===Ym)return o===un?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===hf||i===Xv||i===Kv||i===$v||i===df||i===Yv||i===Zv||i===ex||i===tx||i===nx||i===ix||i===sx||i===rx||i===ox)if(r=e.get("WEBGL_compressed_texture_astc"),r!==null){if(i===hf)return o===un?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===Xv)return o===un?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===Kv)return o===un?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===$v)return o===un?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===df)return o===un?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===Yv)return o===un?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===Zv)return o===un?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===ex)return o===un?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===tx)return o===un?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===nx)return o===un?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===ix)return o===un?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===sx)return o===un?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===rx)return o===un?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===ox)return o===un?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===Qd||i===ax||i===Zm)if(r=e.get("EXT_texture_compression_bptc"),r!==null){if(i===Qd)return o===un?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===ax)return r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===Zm)return r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===gI||i===lx||i===cx||i===ux)if(r=e.get("EXT_texture_compression_rgtc"),r!==null){if(i===Qd)return r.COMPRESSED_RED_RGTC1_EXT;if(i===lx)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===cx)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===ux)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===Uu?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}const PJ={type:"move"};class d_{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new sr,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new sr,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new O,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new O),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new sr,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new O,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new O),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let s=null,r=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const v of e.hand.values()){const y=t.getJointPose(v,i),A=this._getHandJoint(c,v);y!==null&&(A.matrix.fromArray(y.transform.matrix),A.matrix.decompose(A.position,A.rotation,A.scale),A.matrixWorldNeedsUpdate=!0,A.jointRadius=y.radius),A.visible=y!==null}const u=c.joints["index-finger-tip"],h=c.joints["thumb-tip"],p=u.position.distanceTo(h.position),m=.02,g=.005;c.inputState.pinching&&p>m+g?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&p<=m-g&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(r=t.getPose(e.gripSpace,i),r!==null&&(l.matrix.fromArray(r.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,r.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(r.linearVelocity)):l.hasLinearVelocity=!1,r.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(r.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(s=t.getPose(e.targetRaySpace,i),s===null&&r!==null&&(s=r),s!==null&&(a.matrix.fromArray(s.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,s.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(s.linearVelocity)):a.hasLinearVelocity=!1,s.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(s.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(PJ)))}return a!==null&&(a.visible=s!==null),l!==null&&(l.visible=r!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new sr;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}const LJ=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,kJ=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class FJ{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){const s=new ln,r=e.properties.get(s);r.__webglTexture=t.texture,(t.depthNear!==i.depthNear||t.depthFar!==i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=s}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new cs({vertexShader:LJ,fragmentShader:kJ,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Wt(new bo(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class NJ extends js{constructor(e,t){super();const i=this;let s=null,r=1,o=null,a="local-floor",l=1,c=null,u=null,h=null,p=null,m=null,g=null;const v=new FJ,y=t.getContextAttributes();let A=null,b=null;const w=[],E=[],M=new me;let I=null;const D=new Fn;D.viewport=new Yt;const B=new Fn;B.viewport=new Yt;const R=[D,B],T=new iG;let k=null,H=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(q){let ae=w[q];return ae===void 0&&(ae=new d_,w[q]=ae),ae.getTargetRaySpace()},this.getControllerGrip=function(q){let ae=w[q];return ae===void 0&&(ae=new d_,w[q]=ae),ae.getGripSpace()},this.getHand=function(q){let ae=w[q];return ae===void 0&&(ae=new d_,w[q]=ae),ae.getHandSpace()};function Q(q){const ae=E.indexOf(q.inputSource);if(ae===-1)return;const ge=w[ae];ge!==void 0&&(ge.update(q.inputSource,q.frame,c||o),ge.dispatchEvent({type:q.type,data:q.inputSource}))}function W(){s.removeEventListener("select",Q),s.removeEventListener("selectstart",Q),s.removeEventListener("selectend",Q),s.removeEventListener("squeeze",Q),s.removeEventListener("squeezestart",Q),s.removeEventListener("squeezeend",Q),s.removeEventListener("end",W),s.removeEventListener("inputsourceschange",X);for(let q=0;q<w.length;q++){const ae=E[q];ae!==null&&(E[q]=null,w[q].disconnect(ae))}k=null,H=null,v.reset(),e.setRenderTarget(A),m=null,p=null,h=null,s=null,b=null,ve.stop(),i.isPresenting=!1,e.setPixelRatio(I),e.setSize(M.width,M.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(q){r=q,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(q){a=q,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(q){c=q},this.getBaseLayer=function(){return p!==null?p:m},this.getBinding=function(){return h},this.getFrame=function(){return g},this.getSession=function(){return s},this.setSession=async function(q){if(s=q,s!==null){if(A=e.getRenderTarget(),s.addEventListener("select",Q),s.addEventListener("selectstart",Q),s.addEventListener("selectend",Q),s.addEventListener("squeeze",Q),s.addEventListener("squeezestart",Q),s.addEventListener("squeezeend",Q),s.addEventListener("end",W),s.addEventListener("inputsourceschange",X),y.xrCompatible!==!0&&await t.makeXRCompatible(),I=e.getPixelRatio(),e.getSize(M),s.enabledFeatures!==void 0&&s.enabledFeatures.includes("layers")){let ge=null,se=null,Fe=null;y.depth&&(Fe=y.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,ge=y.stencil?Gu:Su,se=y.stencil?Uu:Wo);const qe={colorFormat:t.RGBA8,depthFormat:Fe,scaleFactor:r};h=new XRWebGLBinding(s,t),p=h.createProjectionLayer(qe),s.updateRenderState({layers:[p]}),e.setPixelRatio(1),e.setSize(p.textureWidth,p.textureHeight,!1),b=new Cs(p.textureWidth,p.textureHeight,{format:dn,type:kn,depthTexture:new _I(p.textureWidth,p.textureHeight,se,void 0,void 0,void 0,void 0,void 0,void 0,ge),stencilBuffer:y.stencil,colorSpace:e.outputColorSpace,samples:y.antialias?4:0,resolveDepthBuffer:p.ignoreDepthValues===!1})}else{const ge={antialias:y.antialias,alpha:!0,depth:y.depth,stencil:y.stencil,framebufferScaleFactor:r};m=new XRWebGLLayer(s,t,ge),s.updateRenderState({baseLayer:m}),e.setPixelRatio(1),e.setSize(m.framebufferWidth,m.framebufferHeight,!1),b=new Cs(m.framebufferWidth,m.framebufferHeight,{format:dn,type:kn,colorSpace:e.outputColorSpace,stencilBuffer:y.stencil})}b.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await s.requestReferenceSpace(a),ve.setContext(s),ve.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(s!==null)return s.environmentBlendMode},this.getDepthTexture=function(){return v.getDepthTexture()};function X(q){for(let ae=0;ae<q.removed.length;ae++){const ge=q.removed[ae],se=E.indexOf(ge);se>=0&&(E[se]=null,w[se].disconnect(ge))}for(let ae=0;ae<q.added.length;ae++){const ge=q.added[ae];let se=E.indexOf(ge);if(se===-1){for(let qe=0;qe<w.length;qe++)if(qe>=E.length){E.push(ge),se=qe;break}else if(E[qe]===null){E[qe]=ge,se=qe;break}if(se===-1)break}const Fe=w[se];Fe&&Fe.connect(ge)}}const J=new O,K=new O;function L(q,ae,ge){J.setFromMatrixPosition(ae.matrixWorld),K.setFromMatrixPosition(ge.matrixWorld);const se=J.distanceTo(K),Fe=ae.projectionMatrix.elements,qe=ge.projectionMatrix.elements,st=Fe[14]/(Fe[10]-1),dt=Fe[14]/(Fe[10]+1),Ae=(Fe[9]+1)/Fe[5],be=(Fe[9]-1)/Fe[5],G=(Fe[8]-1)/Fe[0],ot=(qe[8]+1)/qe[0],Ce=st*G,Ve=st*ot,Be=se/(-G+ot),gt=Be*-G;if(ae.matrixWorld.decompose(q.position,q.quaternion,q.scale),q.translateX(gt),q.translateZ(Be),q.matrixWorld.compose(q.position,q.quaternion,q.scale),q.matrixWorldInverse.copy(q.matrixWorld).invert(),Fe[10]===-1)q.projectionMatrix.copy(ae.projectionMatrix),q.projectionMatrixInverse.copy(ae.projectionMatrixInverse);else{const Pe=st+Be,U=dt+Be,F=Ce-gt,re=Ve+(se-gt),pe=Ae*dt/U*Pe,we=be*dt/U*Pe;q.projectionMatrix.makePerspective(F,re,pe,we,Pe,U),q.projectionMatrixInverse.copy(q.projectionMatrix).invert()}}function V(q,ae){ae===null?q.matrixWorld.copy(q.matrix):q.matrixWorld.multiplyMatrices(ae.matrixWorld,q.matrix),q.matrixWorldInverse.copy(q.matrixWorld).invert()}this.updateCamera=function(q){if(s===null)return;let ae=q.near,ge=q.far;v.texture!==null&&(v.depthNear>0&&(ae=v.depthNear),v.depthFar>0&&(ge=v.depthFar)),T.near=B.near=D.near=ae,T.far=B.far=D.far=ge,(k!==T.near||H!==T.far)&&(s.updateRenderState({depthNear:T.near,depthFar:T.far}),k=T.near,H=T.far),D.layers.mask=q.layers.mask|2,B.layers.mask=q.layers.mask|4,T.layers.mask=D.layers.mask|B.layers.mask;const se=q.parent,Fe=T.cameras;V(T,se);for(let qe=0;qe<Fe.length;qe++)V(Fe[qe],se);Fe.length===2?L(T,D,B):T.projectionMatrix.copy(D.projectionMatrix),j(q,T,se)};function j(q,ae,ge){ge===null?q.matrix.copy(ae.matrixWorld):(q.matrix.copy(ge.matrixWorld),q.matrix.invert(),q.matrix.multiply(ae.matrixWorld)),q.matrix.decompose(q.position,q.quaternion,q.scale),q.updateMatrixWorld(!0),q.projectionMatrix.copy(ae.projectionMatrix),q.projectionMatrixInverse.copy(ae.projectionMatrixInverse),q.isPerspectiveCamera&&(q.fov=pf*2*Math.atan(1/q.projectionMatrix.elements[5]),q.zoom=1)}this.getCamera=function(){return T},this.getFoveation=function(){if(!(p===null&&m===null))return l},this.setFoveation=function(q){l=q,p!==null&&(p.fixedFoveation=q),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=q)},this.hasDepthSensing=function(){return v.texture!==null},this.getDepthSensingMesh=function(){return v.getMesh(T)};let $=null;function le(q,ae){if(u=ae.getViewerPose(c||o),g=ae,u!==null){const ge=u.views;m!==null&&(e.setRenderTargetFramebuffer(b,m.framebuffer),e.setRenderTarget(b));let se=!1;ge.length!==T.cameras.length&&(T.cameras.length=0,se=!0);for(let qe=0;qe<ge.length;qe++){const st=ge[qe];let dt=null;if(m!==null)dt=m.getViewport(st);else{const be=h.getViewSubImage(p,st);dt=be.viewport,qe===0&&(e.setRenderTargetTextures(b,be.colorTexture,p.ignoreDepthValues?void 0:be.depthStencilTexture),e.setRenderTarget(b))}let Ae=R[qe];Ae===void 0&&(Ae=new Fn,Ae.layers.enable(qe),Ae.viewport=new Yt,R[qe]=Ae),Ae.matrix.fromArray(st.transform.matrix),Ae.matrix.decompose(Ae.position,Ae.quaternion,Ae.scale),Ae.projectionMatrix.fromArray(st.projectionMatrix),Ae.projectionMatrixInverse.copy(Ae.projectionMatrix).invert(),Ae.viewport.set(dt.x,dt.y,dt.width,dt.height),qe===0&&(T.matrix.copy(Ae.matrix),T.matrix.decompose(T.position,T.quaternion,T.scale)),se===!0&&T.cameras.push(Ae)}const Fe=s.enabledFeatures;if(Fe&&Fe.includes("depth-sensing")){const qe=h.getDepthInformation(ge[0]);qe&&qe.isValid&&qe.texture&&v.init(e,qe,s.renderState)}}for(let ge=0;ge<w.length;ge++){const se=E[ge],Fe=w[ge];se!==null&&Fe!==void 0&&Fe.update(se,ae,c||o)}$&&$(q,ae),ae.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:ae}),g=null}const ve=new cG;ve.setAnimationLoop(le),this.setAnimationLoop=function(q){$=q},this.dispose=function(){}}}const Nc=new Ss,OJ=new tt;function UJ(n,e){function t(y,A){y.matrixAutoUpdate===!0&&y.updateMatrix(),A.value.copy(y.matrix)}function i(y,A){A.color.getRGB(y.fogColor.value,gU(n)),A.isFog?(y.fogNear.value=A.near,y.fogFar.value=A.far):A.isFogExp2&&(y.fogDensity.value=A.density)}function s(y,A,b,w,E){A.isMeshBasicMaterial||A.isMeshLambertMaterial?r(y,A):A.isMeshToonMaterial?(r(y,A),h(y,A)):A.isMeshPhongMaterial?(r(y,A),u(y,A)):A.isMeshStandardMaterial?(r(y,A),p(y,A),A.isMeshPhysicalMaterial&&m(y,A,E)):A.isMeshMatcapMaterial?(r(y,A),g(y,A)):A.isMeshDepthMaterial?r(y,A):A.isMeshDistanceMaterial?(r(y,A),v(y,A)):A.isMeshNormalMaterial?r(y,A):A.isLineBasicMaterial?(o(y,A),A.isLineDashedMaterial&&a(y,A)):A.isPointsMaterial?l(y,A,b,w):A.isSpriteMaterial?c(y,A):A.isShadowMaterial?(y.color.value.copy(A.color),y.opacity.value=A.opacity):A.isShaderMaterial&&(A.uniformsNeedUpdate=!1)}function r(y,A){y.opacity.value=A.opacity,A.color&&y.diffuse.value.copy(A.color),A.emissive&&y.emissive.value.copy(A.emissive).multiplyScalar(A.emissiveIntensity),A.map&&(y.map.value=A.map,t(A.map,y.mapTransform)),A.alphaMap&&(y.alphaMap.value=A.alphaMap,t(A.alphaMap,y.alphaMapTransform)),A.bumpMap&&(y.bumpMap.value=A.bumpMap,t(A.bumpMap,y.bumpMapTransform),y.bumpScale.value=A.bumpScale,A.side===Pi&&(y.bumpScale.value*=-1)),A.normalMap&&(y.normalMap.value=A.normalMap,t(A.normalMap,y.normalMapTransform),y.normalScale.value.copy(A.normalScale),A.side===Pi&&y.normalScale.value.negate()),A.displacementMap&&(y.displacementMap.value=A.displacementMap,t(A.displacementMap,y.displacementMapTransform),y.displacementScale.value=A.displacementScale,y.displacementBias.value=A.displacementBias),A.emissiveMap&&(y.emissiveMap.value=A.emissiveMap,t(A.emissiveMap,y.emissiveMapTransform)),A.specularMap&&(y.specularMap.value=A.specularMap,t(A.specularMap,y.specularMapTransform)),A.alphaTest>0&&(y.alphaTest.value=A.alphaTest);const b=e.get(A),w=b.envMap,E=b.envMapRotation;w&&(y.envMap.value=w,Nc.copy(E),Nc.x*=-1,Nc.y*=-1,Nc.z*=-1,w.isCubeTexture&&w.isRenderTargetTexture===!1&&(Nc.y*=-1,Nc.z*=-1),y.envMapRotation.value.setFromMatrix4(OJ.makeRotationFromEuler(Nc)),y.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,y.reflectivity.value=A.reflectivity,y.ior.value=A.ior,y.refractionRatio.value=A.refractionRatio),A.lightMap&&(y.lightMap.value=A.lightMap,y.lightMapIntensity.value=A.lightMapIntensity,t(A.lightMap,y.lightMapTransform)),A.aoMap&&(y.aoMap.value=A.aoMap,y.aoMapIntensity.value=A.aoMapIntensity,t(A.aoMap,y.aoMapTransform))}function o(y,A){y.diffuse.value.copy(A.color),y.opacity.value=A.opacity,A.map&&(y.map.value=A.map,t(A.map,y.mapTransform))}function a(y,A){y.dashSize.value=A.dashSize,y.totalSize.value=A.dashSize+A.gapSize,y.scale.value=A.scale}function l(y,A,b,w){y.diffuse.value.copy(A.color),y.opacity.value=A.opacity,y.size.value=A.size*b,y.scale.value=w*.5,A.map&&(y.map.value=A.map,t(A.map,y.uvTransform)),A.alphaMap&&(y.alphaMap.value=A.alphaMap,t(A.alphaMap,y.alphaMapTransform)),A.alphaTest>0&&(y.alphaTest.value=A.alphaTest)}function c(y,A){y.diffuse.value.copy(A.color),y.opacity.value=A.opacity,y.rotation.value=A.rotation,A.map&&(y.map.value=A.map,t(A.map,y.mapTransform)),A.alphaMap&&(y.alphaMap.value=A.alphaMap,t(A.alphaMap,y.alphaMapTransform)),A.alphaTest>0&&(y.alphaTest.value=A.alphaTest)}function u(y,A){y.specular.value.copy(A.specular),y.shininess.value=Math.max(A.shininess,1e-4)}function h(y,A){A.gradientMap&&(y.gradientMap.value=A.gradientMap)}function p(y,A){y.metalness.value=A.metalness,A.metalnessMap&&(y.metalnessMap.value=A.metalnessMap,t(A.metalnessMap,y.metalnessMapTransform)),y.roughness.value=A.roughness,A.roughnessMap&&(y.roughnessMap.value=A.roughnessMap,t(A.roughnessMap,y.roughnessMapTransform)),A.envMap&&(y.envMapIntensity.value=A.envMapIntensity)}function m(y,A,b){y.ior.value=A.ior,A.sheen>0&&(y.sheenColor.value.copy(A.sheenColor).multiplyScalar(A.sheen),y.sheenRoughness.value=A.sheenRoughness,A.sheenColorMap&&(y.sheenColorMap.value=A.sheenColorMap,t(A.sheenColorMap,y.sheenColorMapTransform)),A.sheenRoughnessMap&&(y.sheenRoughnessMap.value=A.sheenRoughnessMap,t(A.sheenRoughnessMap,y.sheenRoughnessMapTransform))),A.clearcoat>0&&(y.clearcoat.value=A.clearcoat,y.clearcoatRoughness.value=A.clearcoatRoughness,A.clearcoatMap&&(y.clearcoatMap.value=A.clearcoatMap,t(A.clearcoatMap,y.clearcoatMapTransform)),A.clearcoatRoughnessMap&&(y.clearcoatRoughnessMap.value=A.clearcoatRoughnessMap,t(A.clearcoatRoughnessMap,y.clearcoatRoughnessMapTransform)),A.clearcoatNormalMap&&(y.clearcoatNormalMap.value=A.clearcoatNormalMap,t(A.clearcoatNormalMap,y.clearcoatNormalMapTransform),y.clearcoatNormalScale.value.copy(A.clearcoatNormalScale),A.side===Pi&&y.clearcoatNormalScale.value.negate())),A.dispersion>0&&(y.dispersion.value=A.dispersion),A.iridescence>0&&(y.iridescence.value=A.iridescence,y.iridescenceIOR.value=A.iridescenceIOR,y.iridescenceThicknessMinimum.value=A.iridescenceThicknessRange[0],y.iridescenceThicknessMaximum.value=A.iridescenceThicknessRange[1],A.iridescenceMap&&(y.iridescenceMap.value=A.iridescenceMap,t(A.iridescenceMap,y.iridescenceMapTransform)),A.iridescenceThicknessMap&&(y.iridescenceThicknessMap.value=A.iridescenceThicknessMap,t(A.iridescenceThicknessMap,y.iridescenceThicknessMapTransform))),A.transmission>0&&(y.transmission.value=A.transmission,y.transmissionSamplerMap.value=b.texture,y.transmissionSamplerSize.value.set(b.width,b.height),A.transmissionMap&&(y.transmissionMap.value=A.transmissionMap,t(A.transmissionMap,y.transmissionMapTransform)),y.thickness.value=A.thickness,A.thicknessMap&&(y.thicknessMap.value=A.thicknessMap,t(A.thicknessMap,y.thicknessMapTransform)),y.attenuationDistance.value=A.attenuationDistance,y.attenuationColor.value.copy(A.attenuationColor)),A.anisotropy>0&&(y.anisotropyVector.value.set(A.anisotropy*Math.cos(A.anisotropyRotation),A.anisotropy*Math.sin(A.anisotropyRotation)),A.anisotropyMap&&(y.anisotropyMap.value=A.anisotropyMap,t(A.anisotropyMap,y.anisotropyMapTransform))),y.specularIntensity.value=A.specularIntensity,y.specularColor.value.copy(A.specularColor),A.specularColorMap&&(y.specularColorMap.value=A.specularColorMap,t(A.specularColorMap,y.specularColorMapTransform)),A.specularIntensityMap&&(y.specularIntensityMap.value=A.specularIntensityMap,t(A.specularIntensityMap,y.specularIntensityMapTransform))}function g(y,A){A.matcap&&(y.matcap.value=A.matcap)}function v(y,A){const b=e.get(A).light;y.referencePosition.value.setFromMatrixPosition(b.matrixWorld),y.nearDistance.value=b.shadow.camera.near,y.farDistance.value=b.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:s}}function GJ(n,e,t,i){let s={},r={},o=[];const a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(b,w){const E=w.program;i.uniformBlockBinding(b,E)}function c(b,w){let E=s[b.id];E===void 0&&(g(b),E=u(b),s[b.id]=E,b.addEventListener("dispose",y));const M=w.program;i.updateUBOMapping(b,M);const I=e.render.frame;r[b.id]!==I&&(p(b),r[b.id]=I)}function u(b){const w=h();b.__bindingPointIndex=w;const E=n.createBuffer(),M=b.__size,I=b.usage;return n.bindBuffer(n.UNIFORM_BUFFER,E),n.bufferData(n.UNIFORM_BUFFER,M,I),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,w,E),E}function h(){for(let b=0;b<a;b++)if(o.indexOf(b)===-1)return o.push(b),b;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(b){const w=s[b.id],E=b.uniforms,M=b.__cache;n.bindBuffer(n.UNIFORM_BUFFER,w);for(let I=0,D=E.length;I<D;I++){const B=Array.isArray(E[I])?E[I]:[E[I]];for(let R=0,T=B.length;R<T;R++){const k=B[R];if(m(k,I,R,M)===!0){const H=k.__offset,Q=Array.isArray(k.value)?k.value:[k.value];let W=0;for(let X=0;X<Q.length;X++){const J=Q[X],K=v(J);typeof J=="number"||typeof J=="boolean"?(k.__data[0]=J,n.bufferSubData(n.UNIFORM_BUFFER,H+W,k.__data)):J.isMatrix3?(k.__data[0]=J.elements[0],k.__data[1]=J.elements[1],k.__data[2]=J.elements[2],k.__data[3]=0,k.__data[4]=J.elements[3],k.__data[5]=J.elements[4],k.__data[6]=J.elements[5],k.__data[7]=0,k.__data[8]=J.elements[6],k.__data[9]=J.elements[7],k.__data[10]=J.elements[8],k.__data[11]=0):(J.toArray(k.__data,W),W+=K.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,H,k.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function m(b,w,E,M){const I=b.value,D=w+"_"+E;if(M[D]===void 0)return typeof I=="number"||typeof I=="boolean"?M[D]=I:M[D]=I.clone(),!0;{const B=M[D];if(typeof I=="number"||typeof I=="boolean"){if(B!==I)return M[D]=I,!0}else if(B.equals(I)===!1)return B.copy(I),!0}return!1}function g(b){const w=b.uniforms;let E=0;const M=16;for(let D=0,B=w.length;D<B;D++){const R=Array.isArray(w[D])?w[D]:[w[D]];for(let T=0,k=R.length;T<k;T++){const H=R[T],Q=Array.isArray(H.value)?H.value:[H.value];for(let W=0,X=Q.length;W<X;W++){const J=Q[W],K=v(J),L=E%M,V=L%K.boundary,j=L+V;E+=V,j!==0&&M-j<K.storage&&(E+=M-j),H.__data=new Float32Array(K.storage/Float32Array.BYTES_PER_ELEMENT),H.__offset=E,E+=K.storage}}}const I=E%M;return I>0&&(E+=M-I),b.__size=E,b.__cache={},this}function v(b){const w={boundary:0,storage:0};return typeof b=="number"||typeof b=="boolean"?(w.boundary=4,w.storage=4):b.isVector2?(w.boundary=8,w.storage=8):b.isVector3||b.isColor?(w.boundary=16,w.storage=12):b.isVector4?(w.boundary=16,w.storage=16):b.isMatrix3?(w.boundary=48,w.storage=48):b.isMatrix4?(w.boundary=64,w.storage=64):b.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",b),w}function y(b){const w=b.target;w.removeEventListener("dispose",y);const E=o.indexOf(w.__bindingPointIndex);o.splice(E,1),n.deleteBuffer(s[w.id]),delete s[w.id],delete r[w.id]}function A(){for(const b in s)n.deleteBuffer(s[b]);o=[],s={},r={}}return{bind:l,update:c,dispose:A}}class Lb{constructor(e={}){const{canvas:t=fU(),context:i=null,depth:s=!0,stencil:r=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:h=!1,reverseDepthBuffer:p=!1}=e;this.isWebGLRenderer=!0;let m;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");m=i.getContextAttributes().alpha}else m=o;const g=new Uint32Array(4),v=new Int32Array(4);let y=null,A=null;const b=[],w=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=mn,this.toneMapping=Fr,this.toneMappingExposure=1;const E=this;let M=!1,I=0,D=0,B=null,R=-1,T=null;const k=new Yt,H=new Yt;let Q=null;const W=new Me(0);let X=0,J=t.width,K=t.height,L=1,V=null,j=null;const $=new Yt(0,0,J,K),le=new Yt(0,0,J,K);let ve=!1;const q=new Lg;let ae=!1,ge=!1;this.transmissionResolutionScale=1;const se=new tt,Fe=new tt,qe=new O,st=new Yt,dt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Ae=!1;function be(){return B===null?L:1}let G=i;function ot(N,te){return t.getContext(N,te)}try{const N={alpha:!0,depth:s,stencil:r,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:h};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Tf}`),t.addEventListener("webglcontextlost",xe,!1),t.addEventListener("webglcontextrestored",Qe,!1),t.addEventListener("webglcontextcreationerror",Ge,!1),G===null){const te="webgl2";if(G=ot(te,N),G===null)throw ot(te)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(N){throw console.error("THREE.WebGLRenderer: "+N.message),N}let Ce,Ve,Be,gt,Pe,U,F,re,pe,we,ye,it,Ne,He,Ut,Ie,Xe,mt,vt,Ke,Jt,Ct,pn,Z;function Oe(){Ce=new $q(G),Ce.init(),Ct=new pG(G,Ce),Ve=new jq(G,Ce,e,Ct),Be=new RJ(G,Ce),Ve.reverseDepthBuffer&&p&&Be.buffers.depth.setReversed(!0),gt=new e7(G),Pe=new yJ,U=new DJ(G,Ce,Be,Pe,Ve,Ct,gt),F=new qq(E),re=new Kq(E),pe=new aj(G),pn=new Hq(G,pe),we=new Yq(G,pe,gt,pn),ye=new n7(G,we,pe,gt),vt=new t7(G,Ve,U),Ie=new Wq(Pe),it=new AJ(E,F,re,Ce,Ve,pn,Ie),Ne=new UJ(E,Pe),He=new xJ,Ut=new SJ(Ce),mt=new Qq(E,F,re,Be,ye,m,l),Xe=new TJ(E,ye,Ve),Z=new GJ(G,gt,Ve,Be),Ke=new Vq(G,Ce,gt),Jt=new Zq(G,Ce,gt),gt.programs=it.programs,E.capabilities=Ve,E.extensions=Ce,E.properties=Pe,E.renderLists=He,E.shadowMap=Xe,E.state=Be,E.info=gt}Oe();const fe=new NJ(E,G);this.xr=fe,this.getContext=function(){return G},this.getContextAttributes=function(){return G.getContextAttributes()},this.forceContextLoss=function(){const N=Ce.get("WEBGL_lose_context");N&&N.loseContext()},this.forceContextRestore=function(){const N=Ce.get("WEBGL_lose_context");N&&N.restoreContext()},this.getPixelRatio=function(){return L},this.setPixelRatio=function(N){N!==void 0&&(L=N,this.setSize(J,K,!1))},this.getSize=function(N){return N.set(J,K)},this.setSize=function(N,te,ce=!0){if(fe.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}J=N,K=te,t.width=Math.floor(N*L),t.height=Math.floor(te*L),ce===!0&&(t.style.width=N+"px",t.style.height=te+"px"),this.setViewport(0,0,N,te)},this.getDrawingBufferSize=function(N){return N.set(J*L,K*L).floor()},this.setDrawingBufferSize=function(N,te,ce){J=N,K=te,L=ce,t.width=Math.floor(N*ce),t.height=Math.floor(te*ce),this.setViewport(0,0,N,te)},this.getCurrentViewport=function(N){return N.copy(k)},this.getViewport=function(N){return N.copy($)},this.setViewport=function(N,te,ce,ue){N.isVector4?$.set(N.x,N.y,N.z,N.w):$.set(N,te,ce,ue),Be.viewport(k.copy($).multiplyScalar(L).round())},this.getScissor=function(N){return N.copy(le)},this.setScissor=function(N,te,ce,ue){N.isVector4?le.set(N.x,N.y,N.z,N.w):le.set(N,te,ce,ue),Be.scissor(H.copy(le).multiplyScalar(L).round())},this.getScissorTest=function(){return ve},this.setScissorTest=function(N){Be.setScissorTest(ve=N)},this.setOpaqueSort=function(N){V=N},this.setTransparentSort=function(N){j=N},this.getClearColor=function(N){return N.copy(mt.getClearColor())},this.setClearColor=function(){mt.setClearColor.apply(mt,arguments)},this.getClearAlpha=function(){return mt.getClearAlpha()},this.setClearAlpha=function(){mt.setClearAlpha.apply(mt,arguments)},this.clear=function(N=!0,te=!0,ce=!0){let ue=0;if(N){let ne=!1;if(B!==null){const _e=B.texture.format;ne=_e===sb||_e===ib||_e===Mg}if(ne){const _e=B.texture.type,Le=_e===kn||_e===Wo||_e===uf||_e===Uu||_e===tb||_e===nb,je=mt.getClearColor(),We=mt.getClearAlpha(),ft=je.r,ht=je.g,De=je.b;Le?(g[0]=ft,g[1]=ht,g[2]=De,g[3]=We,G.clearBufferuiv(G.COLOR,0,g)):(v[0]=ft,v[1]=ht,v[2]=De,v[3]=We,G.clearBufferiv(G.COLOR,0,v))}else ue|=G.COLOR_BUFFER_BIT}te&&(ue|=G.DEPTH_BUFFER_BIT),ce&&(ue|=G.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),G.clear(ue)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",xe,!1),t.removeEventListener("webglcontextrestored",Qe,!1),t.removeEventListener("webglcontextcreationerror",Ge,!1),mt.dispose(),He.dispose(),Ut.dispose(),Pe.dispose(),F.dispose(),re.dispose(),ye.dispose(),pn.dispose(),Z.dispose(),it.dispose(),fe.dispose(),fe.removeEventListener("sessionstart",qg),fe.removeEventListener("sessionend",Jg),Eo.stop()};function xe(N){N.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),M=!0}function Qe(){console.log("THREE.WebGLRenderer: Context Restored."),M=!1;const N=gt.autoReset,te=Xe.enabled,ce=Xe.autoUpdate,ue=Xe.needsUpdate,ne=Xe.type;Oe(),gt.autoReset=N,Xe.enabled=te,Xe.autoUpdate=ce,Xe.needsUpdate=ue,Xe.type=ne}function Ge(N){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",N.statusMessage)}function Et(N){const te=N.target;te.removeEventListener("dispose",Et),In(te)}function In(N){di(N),Pe.remove(N)}function di(N){const te=Pe.get(N).programs;te!==void 0&&(te.forEach(function(ce){it.releaseProgram(ce)}),N.isShaderMaterial&&it.releaseShaderCache(N))}this.renderBufferDirect=function(N,te,ce,ue,ne,_e){te===null&&(te=dt);const Le=ne.isMesh&&ne.matrixWorld.determinant()<0,je=Vb(N,te,ce,ue,ne);Be.setMaterial(ue,Le);let We=ce.index,ft=1;if(ue.wireframe===!0){if(We=we.getWireframeAttribute(ce),We===void 0)return;ft=2}const ht=ce.drawRange,De=ce.attributes.position;let rt=ht.start*ft,kt=(ht.start+ht.count)*ft;_e!==null&&(rt=Math.max(rt,_e.start*ft),kt=Math.min(kt,(_e.start+_e.count)*ft)),We!==null?(rt=Math.max(rt,0),kt=Math.min(kt,We.count)):De!=null&&(rt=Math.max(rt,0),kt=Math.min(kt,De.count));const Gt=kt-rt;if(Gt<0||Gt===1/0)return;pn.setup(ne,ue,je,ce,We);let zt,Dt=Ke;if(We!==null&&(zt=pe.get(We),Dt=Jt,Dt.setIndex(zt)),ne.isMesh)ue.wireframe===!0?(Be.setLineWidth(ue.wireframeLinewidth*be()),Dt.setMode(G.LINES)):Dt.setMode(G.TRIANGLES);else if(ne.isLine){let at=ue.linewidth;at===void 0&&(at=1),Be.setLineWidth(at*be()),ne.isLineSegments?Dt.setMode(G.LINES):ne.isLineLoop?Dt.setMode(G.LINE_LOOP):Dt.setMode(G.LINE_STRIP)}else ne.isPoints?Dt.setMode(G.POINTS):ne.isSprite&&Dt.setMode(G.TRIANGLES);if(ne.isBatchedMesh)if(ne._multiDrawInstances!==null)Dt.renderMultiDrawInstances(ne._multiDrawStarts,ne._multiDrawCounts,ne._multiDrawCount,ne._multiDrawInstances);else if(Ce.get("WEBGL_multi_draw"))Dt.renderMultiDraw(ne._multiDrawStarts,ne._multiDrawCounts,ne._multiDrawCount);else{const at=ne._multiDrawStarts,tn=ne._multiDrawCounts,$t=ne._multiDrawCount,Bs=We?pe.get(We).bytesPerElement:1,Zo=Pe.get(ue).currentProgram.getUniforms();for(let wi=0;wi<$t;wi++)Zo.setValue(G,"_gl_DrawID",wi),Dt.render(at[wi]/Bs,tn[wi])}else if(ne.isInstancedMesh)Dt.renderInstances(rt,Gt,ne.count);else if(ce.isInstancedBufferGeometry){const at=ce._maxInstanceCount!==void 0?ce._maxInstanceCount:1/0,tn=Math.min(ce.instanceCount,at);Dt.renderInstances(rt,Gt,tn)}else Dt.render(rt,Gt)};function en(N,te,ce){N.transparent===!0&&N.side===ci&&N.forceSinglePass===!1?(N.side=Pi,N.needsUpdate=!0,oh(N,te,ce),N.side=fr,N.needsUpdate=!0,oh(N,te,ce),N.side=ci):oh(N,te,ce)}this.compile=function(N,te,ce=null){ce===null&&(ce=N),A=Ut.get(ce),A.init(te),w.push(A),ce.traverseVisible(function(ne){ne.isLight&&ne.layers.test(te.layers)&&(A.pushLight(ne),ne.castShadow&&A.pushShadow(ne))}),N!==ce&&N.traverseVisible(function(ne){ne.isLight&&ne.layers.test(te.layers)&&(A.pushLight(ne),ne.castShadow&&A.pushShadow(ne))}),A.setupLights();const ue=new Set;return N.traverse(function(ne){if(!(ne.isMesh||ne.isPoints||ne.isLine||ne.isSprite))return;const _e=ne.material;if(_e)if(Array.isArray(_e))for(let Le=0;Le<_e.length;Le++){const je=_e[Le];en(je,ce,ne),ue.add(je)}else en(_e,ce,ne),ue.add(_e)}),w.pop(),A=null,ue},this.compileAsync=function(N,te,ce=null){const ue=this.compile(N,te,ce);return new Promise(ne=>{function _e(){if(ue.forEach(function(Le){Pe.get(Le).currentProgram.isReady()&&ue.delete(Le)}),ue.size===0){ne(N);return}setTimeout(_e,10)}Ce.get("KHR_parallel_shader_compile")!==null?_e():setTimeout(_e,10)})};let Ts=null;function Vr(N){Ts&&Ts(N)}function qg(){Eo.stop()}function Jg(){Eo.start()}const Eo=new cG;Eo.setAnimationLoop(Vr),typeof self<"u"&&Eo.setContext(self),this.setAnimationLoop=function(N){Ts=N,fe.setAnimationLoop(N),N===null?Eo.stop():Eo.start()},fe.addEventListener("sessionstart",qg),fe.addEventListener("sessionend",Jg),this.render=function(N,te){if(te!==void 0&&te.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(M===!0)return;if(N.matrixWorldAutoUpdate===!0&&N.updateMatrixWorld(),te.parent===null&&te.matrixWorldAutoUpdate===!0&&te.updateMatrixWorld(),fe.enabled===!0&&fe.isPresenting===!0&&(fe.cameraAutoUpdate===!0&&fe.updateCamera(te),te=fe.getCamera()),N.isScene===!0&&N.onBeforeRender(E,N,te,B),A=Ut.get(N,w.length),A.init(te),w.push(A),Fe.multiplyMatrices(te.projectionMatrix,te.matrixWorldInverse),q.setFromProjectionMatrix(Fe),ge=this.localClippingEnabled,ae=Ie.init(this.clippingPlanes,ge),y=He.get(N,b.length),y.init(),b.push(y),fe.enabled===!0&&fe.isPresenting===!0){const _e=E.xr.getDepthSensingMesh();_e!==null&&mc(_e,te,-1/0,E.sortObjects)}mc(N,te,0,E.sortObjects),y.finish(),E.sortObjects===!0&&y.sort(V,j),Ae=fe.enabled===!1||fe.isPresenting===!1||fe.hasDepthSensing()===!1,Ae&&mt.addToRenderList(y,N),this.info.render.frame++,ae===!0&&Ie.beginShadows();const ce=A.state.shadowsArray;Xe.render(ce,N,te),ae===!0&&Ie.endShadows(),this.info.autoReset===!0&&this.info.reset();const ue=y.opaque,ne=y.transmissive;if(A.setupLights(),te.isArrayCamera){const _e=te.cameras;if(ne.length>0)for(let Le=0,je=_e.length;Le<je;Le++){const We=_e[Le];$a(ue,ne,N,We)}Ae&&mt.render(N);for(let Le=0,je=_e.length;Le<je;Le++){const We=_e[Le];Xg(y,N,We,We.viewport)}}else ne.length>0&&$a(ue,ne,N,te),Ae&&mt.render(N),Xg(y,N,te);B!==null&&D===0&&(U.updateMultisampleRenderTarget(B),U.updateRenderTargetMipmap(B)),N.isScene===!0&&N.onAfterRender(E,N,te),pn.resetDefaultState(),R=-1,T=null,w.pop(),w.length>0?(A=w[w.length-1],ae===!0&&Ie.setGlobalState(E.clippingPlanes,A.state.camera)):A=null,b.pop(),b.length>0?y=b[b.length-1]:y=null};function mc(N,te,ce,ue){if(N.visible===!1)return;if(N.layers.test(te.layers)){if(N.isGroup)ce=N.renderOrder;else if(N.isLOD)N.autoUpdate===!0&&N.update(te);else if(N.isLight)A.pushLight(N),N.castShadow&&A.pushShadow(N);else if(N.isSprite){if(!N.frustumCulled||q.intersectsSprite(N)){ue&&st.setFromMatrixPosition(N.matrixWorld).applyMatrix4(Fe);const Le=ye.update(N),je=N.material;je.visible&&y.push(N,Le,je,ce,st.z,null)}}else if((N.isMesh||N.isLine||N.isPoints)&&(!N.frustumCulled||q.intersectsObject(N))){const Le=ye.update(N),je=N.material;if(ue&&(N.boundingSphere!==void 0?(N.boundingSphere===null&&N.computeBoundingSphere(),st.copy(N.boundingSphere.center)):(Le.boundingSphere===null&&Le.computeBoundingSphere(),st.copy(Le.boundingSphere.center)),st.applyMatrix4(N.matrixWorld).applyMatrix4(Fe)),Array.isArray(je)){const We=Le.groups;for(let ft=0,ht=We.length;ft<ht;ft++){const De=We[ft],rt=je[De.materialIndex];rt&&rt.visible&&y.push(N,Le,rt,ce,st.z,De)}}else je.visible&&y.push(N,Le,je,ce,st.z,null)}}const _e=N.children;for(let Le=0,je=_e.length;Le<je;Le++)mc(_e[Le],te,ce,ue)}function Xg(N,te,ce,ue){const ne=N.opaque,_e=N.transmissive,Le=N.transparent;A.setupLightsView(ce),ae===!0&&Ie.setGlobalState(E.clippingPlanes,ce),ue&&Be.viewport(k.copy(ue)),ne.length>0&&rh(ne,te,ce),_e.length>0&&rh(_e,te,ce),Le.length>0&&rh(Le,te,ce),Be.buffers.depth.setTest(!0),Be.buffers.depth.setMask(!0),Be.buffers.color.setMask(!0),Be.setPolygonOffset(!1)}function $a(N,te,ce,ue){if((ce.isScene===!0?ce.overrideMaterial:null)!==null)return;A.state.transmissionRenderTarget[ue.id]===void 0&&(A.state.transmissionRenderTarget[ue.id]=new Cs(1,1,{generateMipmaps:!0,type:Ce.has("EXT_color_buffer_half_float")||Ce.has("EXT_color_buffer_float")?Zn:kn,minFilter:vi,samples:4,stencilBuffer:r,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Ht.workingColorSpace}));const _e=A.state.transmissionRenderTarget[ue.id],Le=ue.viewport||k;_e.setSize(Le.z*E.transmissionResolutionScale,Le.w*E.transmissionResolutionScale);const je=E.getRenderTarget();E.setRenderTarget(_e),E.getClearColor(W),X=E.getClearAlpha(),X<1&&E.setClearColor(16777215,.5),E.clear(),Ae&&mt.render(ce);const We=E.toneMapping;E.toneMapping=Fr;const ft=ue.viewport;if(ue.viewport!==void 0&&(ue.viewport=void 0),A.setupLightsView(ue),ae===!0&&Ie.setGlobalState(E.clippingPlanes,ue),rh(N,ce,ue),U.updateMultisampleRenderTarget(_e),U.updateRenderTargetMipmap(_e),Ce.has("WEBGL_multisampled_render_to_texture")===!1){let ht=!1;for(let De=0,rt=te.length;De<rt;De++){const kt=te[De],Gt=kt.object,zt=kt.geometry,Dt=kt.material,at=kt.group;if(Dt.side===ci&&Gt.layers.test(ue.layers)){const tn=Dt.side;Dt.side=Pi,Dt.needsUpdate=!0,Kg(Gt,ce,ue,zt,Dt,at),Dt.side=tn,Dt.needsUpdate=!0,ht=!0}}ht===!0&&(U.updateMultisampleRenderTarget(_e),U.updateRenderTargetMipmap(_e))}E.setRenderTarget(je),E.setClearColor(W,X),ft!==void 0&&(ue.viewport=ft),E.toneMapping=We}function rh(N,te,ce){const ue=te.isScene===!0?te.overrideMaterial:null;for(let ne=0,_e=N.length;ne<_e;ne++){const Le=N[ne],je=Le.object,We=Le.geometry,ft=ue===null?Le.material:ue,ht=Le.group;je.layers.test(ce.layers)&&Kg(je,te,ce,We,ft,ht)}}function Kg(N,te,ce,ue,ne,_e){N.onBeforeRender(E,te,ce,ue,ne,_e),N.modelViewMatrix.multiplyMatrices(ce.matrixWorldInverse,N.matrixWorld),N.normalMatrix.getNormalMatrix(N.modelViewMatrix),ne.onBeforeRender(E,te,ce,ue,N,_e),ne.transparent===!0&&ne.side===ci&&ne.forceSinglePass===!1?(ne.side=Pi,ne.needsUpdate=!0,E.renderBufferDirect(ce,te,ue,ne,N,_e),ne.side=fr,ne.needsUpdate=!0,E.renderBufferDirect(ce,te,ue,ne,N,_e),ne.side=ci):E.renderBufferDirect(ce,te,ue,ne,N,_e),N.onAfterRender(E,te,ce,ue,ne,_e)}function oh(N,te,ce){te.isScene!==!0&&(te=dt);const ue=Pe.get(N),ne=A.state.lights,_e=A.state.shadowsArray,Le=ne.state.version,je=it.getParameters(N,ne.state,_e,te,ce),We=it.getProgramCacheKey(je);let ft=ue.programs;ue.environment=N.isMeshStandardMaterial?te.environment:null,ue.fog=te.fog,ue.envMap=(N.isMeshStandardMaterial?re:F).get(N.envMap||ue.environment),ue.envMapRotation=ue.environment!==null&&N.envMap===null?te.environmentRotation:N.envMapRotation,ft===void 0&&(N.addEventListener("dispose",Et),ft=new Map,ue.programs=ft);let ht=ft.get(We);if(ht!==void 0){if(ue.currentProgram===ht&&ue.lightsStateVersion===Le)return Yg(N,je),ht}else je.uniforms=it.getUniforms(N),N.onBeforeCompile(je,E),ht=it.acquireProgram(je,We),ft.set(We,ht),ue.uniforms=je.uniforms;const De=ue.uniforms;return(!N.isShaderMaterial&&!N.isRawShaderMaterial||N.clipping===!0)&&(De.clippingPlanes=Ie.uniform),Yg(N,je),ue.needsLights=Zg(N),ue.lightsStateVersion=Le,ue.needsLights&&(De.ambientLightColor.value=ne.state.ambient,De.lightProbe.value=ne.state.probe,De.directionalLights.value=ne.state.directional,De.directionalLightShadows.value=ne.state.directionalShadow,De.spotLights.value=ne.state.spot,De.spotLightShadows.value=ne.state.spotShadow,De.rectAreaLights.value=ne.state.rectArea,De.ltc_1.value=ne.state.rectAreaLTC1,De.ltc_2.value=ne.state.rectAreaLTC2,De.pointLights.value=ne.state.point,De.pointLightShadows.value=ne.state.pointShadow,De.hemisphereLights.value=ne.state.hemi,De.directionalShadowMap.value=ne.state.directionalShadowMap,De.directionalShadowMatrix.value=ne.state.directionalShadowMatrix,De.spotShadowMap.value=ne.state.spotShadowMap,De.spotLightMatrix.value=ne.state.spotLightMatrix,De.spotLightMap.value=ne.state.spotLightMap,De.pointShadowMap.value=ne.state.pointShadowMap,De.pointShadowMatrix.value=ne.state.pointShadowMatrix),ue.currentProgram=ht,ue.uniformsList=null,ht}function $g(N){if(N.uniformsList===null){const te=N.currentProgram.getUniforms();N.uniformsList=ev.seqWithValue(te.seq,N.uniforms)}return N.uniformsList}function Yg(N,te){const ce=Pe.get(N);ce.outputColorSpace=te.outputColorSpace,ce.batching=te.batching,ce.batchingColor=te.batchingColor,ce.instancing=te.instancing,ce.instancingColor=te.instancingColor,ce.instancingMorph=te.instancingMorph,ce.skinning=te.skinning,ce.morphTargets=te.morphTargets,ce.morphNormals=te.morphNormals,ce.morphColors=te.morphColors,ce.morphTargetsCount=te.morphTargetsCount,ce.numClippingPlanes=te.numClippingPlanes,ce.numIntersection=te.numClipIntersection,ce.vertexAlphas=te.vertexAlphas,ce.vertexTangents=te.vertexTangents,ce.toneMapping=te.toneMapping}function Vb(N,te,ce,ue,ne){te.isScene!==!0&&(te=dt),U.resetTextureUnits();const _e=te.fog,Le=ue.isMeshStandardMaterial?te.environment:null,je=B===null?E.outputColorSpace:B.isXRRenderTarget===!0?B.texture.colorSpace:yn,We=(ue.isMeshStandardMaterial?re:F).get(ue.envMap||Le),ft=ue.vertexColors===!0&&!!ce.attributes.color&&ce.attributes.color.itemSize===4,ht=!!ce.attributes.tangent&&(!!ue.normalMap||ue.anisotropy>0),De=!!ce.morphAttributes.position,rt=!!ce.morphAttributes.normal,kt=!!ce.morphAttributes.color;let Gt=Fr;ue.toneMapped&&(B===null||B.isXRRenderTarget===!0)&&(Gt=E.toneMapping);const zt=ce.morphAttributes.position||ce.morphAttributes.normal||ce.morphAttributes.color,Dt=zt!==void 0?zt.length:0,at=Pe.get(ue),tn=A.state.lights;if(ae===!0&&(ge===!0||N!==T)){const ki=N===T&&ue.id===R;Ie.setState(ue,N,ki)}let $t=!1;ue.version===at.__version?(at.needsLights&&at.lightsStateVersion!==tn.state.version||at.outputColorSpace!==je||ne.isBatchedMesh&&at.batching===!1||!ne.isBatchedMesh&&at.batching===!0||ne.isBatchedMesh&&at.batchingColor===!0&&ne.colorTexture===null||ne.isBatchedMesh&&at.batchingColor===!1&&ne.colorTexture!==null||ne.isInstancedMesh&&at.instancing===!1||!ne.isInstancedMesh&&at.instancing===!0||ne.isSkinnedMesh&&at.skinning===!1||!ne.isSkinnedMesh&&at.skinning===!0||ne.isInstancedMesh&&at.instancingColor===!0&&ne.instanceColor===null||ne.isInstancedMesh&&at.instancingColor===!1&&ne.instanceColor!==null||ne.isInstancedMesh&&at.instancingMorph===!0&&ne.morphTexture===null||ne.isInstancedMesh&&at.instancingMorph===!1&&ne.morphTexture!==null||at.envMap!==We||ue.fog===!0&&at.fog!==_e||at.numClippingPlanes!==void 0&&(at.numClippingPlanes!==Ie.numPlanes||at.numIntersection!==Ie.numIntersection)||at.vertexAlphas!==ft||at.vertexTangents!==ht||at.morphTargets!==De||at.morphNormals!==rt||at.morphColors!==kt||at.toneMapping!==Gt||at.morphTargetsCount!==Dt)&&($t=!0):($t=!0,at.__version=ue.version);let Bs=at.currentProgram;$t===!0&&(Bs=oh(ue,te,ne));let Zo=!1,wi=!1,Ya=!1;const Xt=Bs.getUniforms(),Rs=at.uniforms;if(Be.useProgram(Bs.program)&&(Zo=!0,wi=!0,Ya=!0),ue.id!==R&&(R=ue.id,wi=!0),Zo||T!==N){Be.buffers.depth.getReversed()?(se.copy(N.projectionMatrix),z5(se),Q5(se),Xt.setValue(G,"projectionMatrix",se)):Xt.setValue(G,"projectionMatrix",N.projectionMatrix),Xt.setValue(G,"viewMatrix",N.matrixWorldInverse);const fi=Xt.map.cameraPosition;fi!==void 0&&fi.setValue(G,qe.setFromMatrixPosition(N.matrixWorld)),Ve.logarithmicDepthBuffer&&Xt.setValue(G,"logDepthBufFC",2/(Math.log(N.far+1)/Math.LN2)),(ue.isMeshPhongMaterial||ue.isMeshToonMaterial||ue.isMeshLambertMaterial||ue.isMeshBasicMaterial||ue.isMeshStandardMaterial||ue.isShaderMaterial)&&Xt.setValue(G,"isOrthographic",N.isOrthographicCamera===!0),T!==N&&(T=N,wi=!0,Ya=!0)}if(ne.isSkinnedMesh){Xt.setOptional(G,ne,"bindMatrix"),Xt.setOptional(G,ne,"bindMatrixInverse");const ki=ne.skeleton;ki&&(ki.boneTexture===null&&ki.computeBoneTexture(),Xt.setValue(G,"boneTexture",ki.boneTexture,U))}ne.isBatchedMesh&&(Xt.setOptional(G,ne,"batchingTexture"),Xt.setValue(G,"batchingTexture",ne._matricesTexture,U),Xt.setOptional(G,ne,"batchingIdTexture"),Xt.setValue(G,"batchingIdTexture",ne._indirectTexture,U),Xt.setOptional(G,ne,"batchingColorTexture"),ne._colorsTexture!==null&&Xt.setValue(G,"batchingColorTexture",ne._colorsTexture,U));const Ds=ce.morphAttributes;if((Ds.position!==void 0||Ds.normal!==void 0||Ds.color!==void 0)&&vt.update(ne,ce,Bs),(wi||at.receiveShadow!==ne.receiveShadow)&&(at.receiveShadow=ne.receiveShadow,Xt.setValue(G,"receiveShadow",ne.receiveShadow)),ue.isMeshGouraudMaterial&&ue.envMap!==null&&(Rs.envMap.value=We,Rs.flipEnvMap.value=We.isCubeTexture&&We.isRenderTargetTexture===!1?-1:1),ue.isMeshStandardMaterial&&ue.envMap===null&&te.environment!==null&&(Rs.envMapIntensity.value=te.environmentIntensity),wi&&(Xt.setValue(G,"toneMappingExposure",E.toneMappingExposure),at.needsLights&&jb(Rs,Ya),_e&&ue.fog===!0&&Ne.refreshFogUniforms(Rs,_e),Ne.refreshMaterialUniforms(Rs,ue,L,K,A.state.transmissionRenderTarget[N.id]),ev.upload(G,$g(at),Rs,U)),ue.isShaderMaterial&&ue.uniformsNeedUpdate===!0&&(ev.upload(G,$g(at),Rs,U),ue.uniformsNeedUpdate=!1),ue.isSpriteMaterial&&Xt.setValue(G,"center",ne.center),Xt.setValue(G,"modelViewMatrix",ne.modelViewMatrix),Xt.setValue(G,"normalMatrix",ne.normalMatrix),Xt.setValue(G,"modelMatrix",ne.matrixWorld),ue.isShaderMaterial||ue.isRawShaderMaterial){const ki=ue.uniformsGroups;for(let fi=0,Za=ki.length;fi<Za;fi++){const Ws=ki[fi];Z.update(Ws,Bs),Z.bind(Ws,Bs)}}return Bs}function jb(N,te){N.ambientLightColor.needsUpdate=te,N.lightProbe.needsUpdate=te,N.directionalLights.needsUpdate=te,N.directionalLightShadows.needsUpdate=te,N.pointLights.needsUpdate=te,N.pointLightShadows.needsUpdate=te,N.spotLights.needsUpdate=te,N.spotLightShadows.needsUpdate=te,N.rectAreaLights.needsUpdate=te,N.hemisphereLights.needsUpdate=te}function Zg(N){return N.isMeshLambertMaterial||N.isMeshToonMaterial||N.isMeshPhongMaterial||N.isMeshStandardMaterial||N.isShadowMaterial||N.isShaderMaterial&&N.lights===!0}this.getActiveCubeFace=function(){return I},this.getActiveMipmapLevel=function(){return D},this.getRenderTarget=function(){return B},this.setRenderTargetTextures=function(N,te,ce){Pe.get(N.texture).__webglTexture=te,Pe.get(N.depthTexture).__webglTexture=ce;const ue=Pe.get(N);ue.__hasExternalTextures=!0,ue.__autoAllocateDepthBuffer=ce===void 0,ue.__autoAllocateDepthBuffer||Ce.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ue.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(N,te){const ce=Pe.get(N);ce.__webglFramebuffer=te,ce.__useDefaultFramebuffer=te===void 0};const Wb=G.createFramebuffer();this.setRenderTarget=function(N,te=0,ce=0){B=N,I=te,D=ce;let ue=!0,ne=null,_e=!1,Le=!1;if(N){const We=Pe.get(N);if(We.__useDefaultFramebuffer!==void 0)Be.bindFramebuffer(G.FRAMEBUFFER,null),ue=!1;else if(We.__webglFramebuffer===void 0)U.setupRenderTarget(N);else if(We.__hasExternalTextures)U.rebindTextures(N,Pe.get(N.texture).__webglTexture,Pe.get(N.depthTexture).__webglTexture);else if(N.depthBuffer){const De=N.depthTexture;if(We.__boundDepthTexture!==De){if(De!==null&&Pe.has(De)&&(N.width!==De.image.width||N.height!==De.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");U.setupDepthRenderbuffer(N)}}const ft=N.texture;(ft.isData3DTexture||ft.isDataArrayTexture||ft.isCompressedArrayTexture)&&(Le=!0);const ht=Pe.get(N).__webglFramebuffer;N.isWebGLCubeRenderTarget?(Array.isArray(ht[te])?ne=ht[te][ce]:ne=ht[te],_e=!0):N.samples>0&&U.useMultisampledRTT(N)===!1?ne=Pe.get(N).__webglMultisampledFramebuffer:Array.isArray(ht)?ne=ht[ce]:ne=ht,k.copy(N.viewport),H.copy(N.scissor),Q=N.scissorTest}else k.copy($).multiplyScalar(L).floor(),H.copy(le).multiplyScalar(L).floor(),Q=ve;if(ce!==0&&(ne=Wb),Be.bindFramebuffer(G.FRAMEBUFFER,ne)&&ue&&Be.drawBuffers(N,ne),Be.viewport(k),Be.scissor(H),Be.setScissorTest(Q),_e){const We=Pe.get(N.texture);G.framebufferTexture2D(G.FRAMEBUFFER,G.COLOR_ATTACHMENT0,G.TEXTURE_CUBE_MAP_POSITIVE_X+te,We.__webglTexture,ce)}else if(Le){const We=Pe.get(N.texture),ft=te;G.framebufferTextureLayer(G.FRAMEBUFFER,G.COLOR_ATTACHMENT0,We.__webglTexture,ce,ft)}else if(N!==null&&ce!==0){const We=Pe.get(N.texture);G.framebufferTexture2D(G.FRAMEBUFFER,G.COLOR_ATTACHMENT0,G.TEXTURE_2D,We.__webglTexture,ce)}R=-1},this.readRenderTargetPixels=function(N,te,ce,ue,ne,_e,Le){if(!(N&&N.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let je=Pe.get(N).__webglFramebuffer;if(N.isWebGLCubeRenderTarget&&Le!==void 0&&(je=je[Le]),je){Be.bindFramebuffer(G.FRAMEBUFFER,je);try{const We=N.texture,ft=We.format,ht=We.type;if(!Ve.textureFormatReadable(ft)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Ve.textureTypeReadable(ht)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}te>=0&&te<=N.width-ue&&ce>=0&&ce<=N.height-ne&&G.readPixels(te,ce,ue,ne,Ct.convert(ft),Ct.convert(ht),_e)}finally{const We=B!==null?Pe.get(B).__webglFramebuffer:null;Be.bindFramebuffer(G.FRAMEBUFFER,We)}}},this.readRenderTargetPixelsAsync=async function(N,te,ce,ue,ne,_e,Le){if(!(N&&N.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let je=Pe.get(N).__webglFramebuffer;if(N.isWebGLCubeRenderTarget&&Le!==void 0&&(je=je[Le]),je){const We=N.texture,ft=We.format,ht=We.type;if(!Ve.textureFormatReadable(ft))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Ve.textureTypeReadable(ht))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(te>=0&&te<=N.width-ue&&ce>=0&&ce<=N.height-ne){Be.bindFramebuffer(G.FRAMEBUFFER,je);const De=G.createBuffer();G.bindBuffer(G.PIXEL_PACK_BUFFER,De),G.bufferData(G.PIXEL_PACK_BUFFER,_e.byteLength,G.STREAM_READ),G.readPixels(te,ce,ue,ne,Ct.convert(ft),Ct.convert(ht),0);const rt=B!==null?Pe.get(B).__webglFramebuffer:null;Be.bindFramebuffer(G.FRAMEBUFFER,rt);const kt=G.fenceSync(G.SYNC_GPU_COMMANDS_COMPLETE,0);return G.flush(),await G5(G,kt,4),G.bindBuffer(G.PIXEL_PACK_BUFFER,De),G.getBufferSubData(G.PIXEL_PACK_BUFFER,0,_e),G.deleteBuffer(De),G.deleteSync(kt),_e}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(N,te=null,ce=0){N.isTexture!==!0&&(ad("WebGLRenderer: copyFramebufferToTexture function signature has changed."),te=arguments[0]||null,N=arguments[1]);const ue=Math.pow(2,-ce),ne=Math.floor(N.image.width*ue),_e=Math.floor(N.image.height*ue),Le=te!==null?te.x:0,je=te!==null?te.y:0;U.setTexture2D(N,0),G.copyTexSubImage2D(G.TEXTURE_2D,ce,0,0,Le,je,ne,_e),Be.unbindTexture()};const qb=G.createFramebuffer(),Jb=G.createFramebuffer();this.copyTextureToTexture=function(N,te,ce=null,ue=null,ne=0,_e=null){N.isTexture!==!0&&(ad("WebGLRenderer: copyTextureToTexture function signature has changed."),ue=arguments[0]||null,N=arguments[1],te=arguments[2],_e=arguments[3]||0,ce=null),_e===null&&(ne!==0?(ad("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),_e=ne,ne=0):_e=0);let Le,je,We,ft,ht,De,rt,kt,Gt;const zt=N.isCompressedTexture?N.mipmaps[_e]:N.image;if(ce!==null)Le=ce.max.x-ce.min.x,je=ce.max.y-ce.min.y,We=ce.isBox3?ce.max.z-ce.min.z:1,ft=ce.min.x,ht=ce.min.y,De=ce.isBox3?ce.min.z:0;else{const Ds=Math.pow(2,-ne);Le=Math.floor(zt.width*Ds),je=Math.floor(zt.height*Ds),N.isDataArrayTexture?We=zt.depth:N.isData3DTexture?We=Math.floor(zt.depth*Ds):We=1,ft=0,ht=0,De=0}ue!==null?(rt=ue.x,kt=ue.y,Gt=ue.z):(rt=0,kt=0,Gt=0);const Dt=Ct.convert(te.format),at=Ct.convert(te.type);let tn;te.isData3DTexture?(U.setTexture3D(te,0),tn=G.TEXTURE_3D):te.isDataArrayTexture||te.isCompressedArrayTexture?(U.setTexture2DArray(te,0),tn=G.TEXTURE_2D_ARRAY):(U.setTexture2D(te,0),tn=G.TEXTURE_2D),G.pixelStorei(G.UNPACK_FLIP_Y_WEBGL,te.flipY),G.pixelStorei(G.UNPACK_PREMULTIPLY_ALPHA_WEBGL,te.premultiplyAlpha),G.pixelStorei(G.UNPACK_ALIGNMENT,te.unpackAlignment);const $t=G.getParameter(G.UNPACK_ROW_LENGTH),Bs=G.getParameter(G.UNPACK_IMAGE_HEIGHT),Zo=G.getParameter(G.UNPACK_SKIP_PIXELS),wi=G.getParameter(G.UNPACK_SKIP_ROWS),Ya=G.getParameter(G.UNPACK_SKIP_IMAGES);G.pixelStorei(G.UNPACK_ROW_LENGTH,zt.width),G.pixelStorei(G.UNPACK_IMAGE_HEIGHT,zt.height),G.pixelStorei(G.UNPACK_SKIP_PIXELS,ft),G.pixelStorei(G.UNPACK_SKIP_ROWS,ht),G.pixelStorei(G.UNPACK_SKIP_IMAGES,De);const Xt=N.isDataArrayTexture||N.isData3DTexture,Rs=te.isDataArrayTexture||te.isData3DTexture;if(N.isDepthTexture){const Ds=Pe.get(N),ki=Pe.get(te),fi=Pe.get(Ds.__renderTarget),Za=Pe.get(ki.__renderTarget);Be.bindFramebuffer(G.READ_FRAMEBUFFER,fi.__webglFramebuffer),Be.bindFramebuffer(G.DRAW_FRAMEBUFFER,Za.__webglFramebuffer);for(let Ws=0;Ws<We;Ws++)Xt&&(G.framebufferTextureLayer(G.READ_FRAMEBUFFER,G.COLOR_ATTACHMENT0,Pe.get(N).__webglTexture,ne,De+Ws),G.framebufferTextureLayer(G.DRAW_FRAMEBUFFER,G.COLOR_ATTACHMENT0,Pe.get(te).__webglTexture,_e,Gt+Ws)),G.blitFramebuffer(ft,ht,Le,je,rt,kt,Le,je,G.DEPTH_BUFFER_BIT,G.NEAREST);Be.bindFramebuffer(G.READ_FRAMEBUFFER,null),Be.bindFramebuffer(G.DRAW_FRAMEBUFFER,null)}else if(ne!==0||N.isRenderTargetTexture||Pe.has(N)){const Ds=Pe.get(N),ki=Pe.get(te);Be.bindFramebuffer(G.READ_FRAMEBUFFER,qb),Be.bindFramebuffer(G.DRAW_FRAMEBUFFER,Jb);for(let fi=0;fi<We;fi++)Xt?G.framebufferTextureLayer(G.READ_FRAMEBUFFER,G.COLOR_ATTACHMENT0,Ds.__webglTexture,ne,De+fi):G.framebufferTexture2D(G.READ_FRAMEBUFFER,G.COLOR_ATTACHMENT0,G.TEXTURE_2D,Ds.__webglTexture,ne),Rs?G.framebufferTextureLayer(G.DRAW_FRAMEBUFFER,G.COLOR_ATTACHMENT0,ki.__webglTexture,_e,Gt+fi):G.framebufferTexture2D(G.DRAW_FRAMEBUFFER,G.COLOR_ATTACHMENT0,G.TEXTURE_2D,ki.__webglTexture,_e),ne!==0?G.blitFramebuffer(ft,ht,Le,je,rt,kt,Le,je,G.COLOR_BUFFER_BIT,G.NEAREST):Rs?G.copyTexSubImage3D(tn,_e,rt,kt,Gt+fi,ft,ht,Le,je):G.copyTexSubImage2D(tn,_e,rt,kt,ft,ht,Le,je);Be.bindFramebuffer(G.READ_FRAMEBUFFER,null),Be.bindFramebuffer(G.DRAW_FRAMEBUFFER,null)}else Rs?N.isDataTexture||N.isData3DTexture?G.texSubImage3D(tn,_e,rt,kt,Gt,Le,je,We,Dt,at,zt.data):te.isCompressedArrayTexture?G.compressedTexSubImage3D(tn,_e,rt,kt,Gt,Le,je,We,Dt,zt.data):G.texSubImage3D(tn,_e,rt,kt,Gt,Le,je,We,Dt,at,zt):N.isDataTexture?G.texSubImage2D(G.TEXTURE_2D,_e,rt,kt,Le,je,Dt,at,zt.data):N.isCompressedTexture?G.compressedTexSubImage2D(G.TEXTURE_2D,_e,rt,kt,zt.width,zt.height,Dt,zt.data):G.texSubImage2D(G.TEXTURE_2D,_e,rt,kt,Le,je,Dt,at,zt);G.pixelStorei(G.UNPACK_ROW_LENGTH,$t),G.pixelStorei(G.UNPACK_IMAGE_HEIGHT,Bs),G.pixelStorei(G.UNPACK_SKIP_PIXELS,Zo),G.pixelStorei(G.UNPACK_SKIP_ROWS,wi),G.pixelStorei(G.UNPACK_SKIP_IMAGES,Ya),_e===0&&te.generateMipmaps&&G.generateMipmap(tn),Be.unbindTexture()},this.copyTextureToTexture3D=function(N,te,ce=null,ue=null,ne=0){return N.isTexture!==!0&&(ad("WebGLRenderer: copyTextureToTexture3D function signature has changed."),ce=arguments[0]||null,ue=arguments[1]||null,N=arguments[2],te=arguments[3],ne=arguments[4]||0),ad('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(N,te,ce,ue,ne)},this.initRenderTarget=function(N){Pe.get(N).__webglFramebuffer===void 0&&U.setupRenderTarget(N)},this.initTexture=function(N){N.isCubeTexture?U.setTextureCube(N,0):N.isData3DTexture?U.setTexture3D(N,0):N.isDataArrayTexture||N.isCompressedArrayTexture?U.setTexture2DArray(N,0):U.setTexture2D(N,0),Be.unbindTexture()},this.resetState=function(){I=0,D=0,B=null,Be.reset(),pn.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return lo}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorspace=Ht._getDrawingBufferColorSpace(e),t.unpackColorSpace=Ht._getUnpackColorSpace()}}const zJ=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:Yx,AddEquation:Il,AddOperation:ZO,AdditiveAnimationBlendMode:AI,AdditiveBlending:d1,AgXToneMapping:uI,AlphaFormat:dI,AlwaysCompare:hU,AlwaysDepth:zv,AlwaysStencilFunc:A1,AmbientLight:YU,AnimationAction:oG,AnimationClip:Hu,AnimationLoader:rV,AnimationMixer:aG,AnimationObjectGroup:TV,AnimationUtils:tV,ArcCurve:SU,ArrayCamera:iG,ArrowHelper:YV,AttachedBindMode:m1,Audio:sG,AudioAnalyser:vV,AudioContext:OI,AudioListener:gV,AudioLoader:fV,AxesHelper:ZV,BackSide:Pi,BasicDepthPacking:nU,BasicShadowMap:PO,BatchedMesh:bU,Bone:Pg,BooleanKeyframeTrack:th,Box2:OV,Box3:Nn,Box3Helper:KV,BoxGeometry:vo,BoxHelper:XV,BufferAttribute:wt,BufferGeometry:xt,BufferGeometryLoader:nG,ByteType:Zx,Cache:Ra,Camera:Rg,CameraHelper:JV,CanvasTexture:CU,CapsuleGeometry:mb,CatmullRomCurve3:MU,CineonToneMapping:cI,CircleGeometry:gb,ClampToEdgeWrapping:Cn,Clock:UI,Color:Me,ColorKeyframeTrack:LI,ColorManagement:Ht,CompressedArrayTexture:EU,CompressedCubeTexture:_U,CompressedTexture:Fa,CompressedTextureLoader:oV,ConeGeometry:Ab,ConstantAlphaFactor:KO,ConstantColorFactor:JO,Controls:tj,CubeCamera:hx,CubeReflectionMapping:Ha,CubeRefractionMapping:tc,CubeTexture:Dg,CubeTextureLoader:aV,CubeUVReflectionMapping:Bf,CubicBezierCurve:SI,CubicBezierCurve3:IU,CubicInterpolant:WU,CullFaceBack:h1,CullFaceFront:DO,CullFaceFrontBack:q8,CullFaceNone:RO,Curve:xo,CurvePath:BU,CustomBlending:LO,CustomToneMapping:eU,CylinderGeometry:Lf,Cylindrical:NV,Data3DTexture:Bg,DataArrayTexture:Tg,DataTexture:Nr,DataTextureLoader:KU,DataUtils:tm,DecrementStencilOp:i5,DecrementWrapStencilOp:r5,DefaultLoadingManager:XU,DepthFormat:Su,DepthStencilFormat:Gu,DepthTexture:_I,DetachedBindMode:tU,DirectionalLight:Ug,DirectionalLightHelper:qV,DiscreteInterpolant:qU,DodecahedronGeometry:yb,DoubleSide:ci,DstAlphaFactor:HO,DstColorFactor:jO,DynamicCopyUsage:x5,DynamicDrawUsage:p5,DynamicReadUsage:A5,EdgesGeometry:RU,EllipseCurve:pb,EqualCompare:aU,EqualDepth:Hv,EqualStencilFunc:c5,EquirectangularReflectionMapping:cf,EquirectangularRefractionMapping:qm,Euler:Ss,EventDispatcher:js,ExtrudeGeometry:xb,FileLoader:ni,Float16BufferAttribute:l6,Float32BufferAttribute:nt,FloatType:Sn,Fog:cb,FogExp2:lb,FramebufferTexture:C6,FrontSide:fr,Frustum:Lg,GLBufferAttribute:FV,GLSL1:w5,GLSL3:y1,GreaterCompare:lU,GreaterDepth:jv,GreaterEqualCompare:uU,GreaterEqualDepth:Vv,GreaterEqualStencilFunc:f5,GreaterStencilFunc:h5,GridHelper:jV,Group:sr,HalfFloatType:Zn,HemisphereLight:$U,HemisphereLightHelper:VV,IcosahedronGeometry:bb,ImageBitmapLoader:NI,ImageLoader:ug,ImageUtils:pU,IncrementStencilOp:n5,IncrementWrapStencilOp:s5,InstancedBufferAttribute:ic,InstancedBufferGeometry:tG,InstancedInterleavedBuffer:kV,InstancedMesh:hb,Int16BufferAttribute:o6,Int32BufferAttribute:a6,Int8BufferAttribute:i6,IntType:Sg,InterleavedBuffer:Df,InterleavedBufferAttribute:ja,Interpolant:eh,InterpolateDiscrete:nc,InterpolateLinear:Va,InterpolateSmooth:Yy,InvertStencilOp:o5,KeepStencilOp:eu,KeyframeTrack:wo,LOD:xU,LatheGeometry:Fg,Layers:Tu,LessCompare:oU,LessDepth:Qv,LessEqualCompare:vI,LessEqualDepth:Ou,LessEqualStencilFunc:u5,LessStencilFunc:l5,Light:pc,LightProbe:FI,Line:Gr,Line3:UV,LineBasicMaterial:Qi,LineCurve:MI,LineCurve3:TU,LineDashedMaterial:HU,LineLoop:db,LineSegments:Hr,LinearFilter:Bt,LinearInterpolant:PI,LinearMipMapLinearFilter:g1,LinearMipMapNearestFilter:K8,LinearMipmapLinearFilter:vi,LinearMipmapNearestFilter:Ho,LinearSRGBColorSpace:yn,LinearToneMapping:aI,LinearTransfer:ng,Loader:hi,LoaderUtils:ur,LoadingManager:Tb,LoopOnce:ff,LoopPingPong:eg,LoopRepeat:Mu,LuminanceAlphaFormat:mI,LuminanceFormat:pI,MOUSE:j8,Material:zn,MaterialLoader:Db,MathUtils:mf,Matrix2:VI,Matrix3:bt,Matrix4:tt,MaxEquation:OO,Mesh:Wt,MeshBasicMaterial:Un,MeshDepthMaterial:Ib,MeshDistanceMaterial:RI,MeshLambertMaterial:zU,MeshMatcapMaterial:QU,MeshNormalMaterial:GU,MeshPhongMaterial:OU,MeshPhysicalMaterial:Xn,MeshStandardMaterial:Wa,MeshToonMaterial:UU,MinEquation:NO,MirroredRepeatWrapping:jo,MixOperation:YO,MultiplyBlending:p1,MultiplyOperation:Cg,NearestFilter:Mn,NearestMipMapLinearFilter:X8,NearestMipMapNearestFilter:J8,NearestMipmapLinearFilter:ao,NearestMipmapNearestFilter:hc,NeutralToneMapping:lf,NeverCompare:rU,NeverDepth:Gv,NeverStencilFunc:a5,NoBlending:po,NoColorSpace:nr,NoToneMapping:Fr,NormalAnimationBlendMode:rb,NormalBlending:Cu,NotEqualCompare:cU,NotEqualDepth:Wv,NotEqualStencilFunc:d5,NumberKeyframeTrack:qa,Object3D:Rt,ObjectLoader:hV,ObjectSpaceNormalMap:sU,OctahedronGeometry:Ng,OneFactor:GO,OneMinusConstantAlphaFactor:$O,OneMinusConstantColorFactor:XO,OneMinusDstAlphaFactor:VO,OneMinusDstColorFactor:WO,OneMinusSrcAlphaFactor:Uv,OneMinusSrcColorFactor:QO,OrthographicCamera:Ko,PCFShadowMap:$x,PCFSoftShadowMap:vm,PMREMGenerator:C1,Path:og,PerspectiveCamera:Fn,Plane:_l,PlaneGeometry:bo,PlaneHelper:$V,PointLight:Og,PointLightHelper:QV,Points:fb,PointsMaterial:kg,PolarGridHelper:WV,PolyhedronGeometry:fc,PositionalAudio:yV,PropertyBinding:Ot,PropertyMixer:rG,QuadraticBezierCurve:II,QuadraticBezierCurve3:TI,Quaternion:qn,QuaternionKeyframeTrack:Ja,QuaternionLinearInterpolant:JU,RED_GREEN_RGTC2_Format:cx,RED_RGTC1_Format:gI,REVISION:Tf,RGBADepthPacking:iU,RGBAFormat:dn,RGBAIntegerFormat:sb,RGBA_ASTC_10x10_Format:sx,RGBA_ASTC_10x5_Format:tx,RGBA_ASTC_10x6_Format:nx,RGBA_ASTC_10x8_Format:ix,RGBA_ASTC_12x10_Format:rx,RGBA_ASTC_12x12_Format:ox,RGBA_ASTC_4x4_Format:hf,RGBA_ASTC_5x4_Format:Xv,RGBA_ASTC_5x5_Format:Kv,RGBA_ASTC_6x5_Format:$v,RGBA_ASTC_6x6_Format:df,RGBA_ASTC_8x5_Format:Yv,RGBA_ASTC_8x6_Format:Zv,RGBA_ASTC_8x8_Format:ex,RGBA_BPTC_Format:Qd,RGBA_ETC2_EAC_Format:Ym,RGBA_PVRTC_2BPPV1_Format:Jv,RGBA_PVRTC_4BPPV1_Format:Xm,RGBA_S3TC_DXT1_Format:Gd,RGBA_S3TC_DXT3_Format:bm,RGBA_S3TC_DXT5_Format:zd,RGBDepthPacking:Y8,RGBFormat:fI,RGBIntegerFormat:$8,RGB_BPTC_SIGNED_Format:ax,RGB_BPTC_UNSIGNED_Format:Zm,RGB_ETC1_Format:Km,RGB_ETC2_Format:$m,RGB_PVRTC_2BPPV1_Format:qv,RGB_PVRTC_4BPPV1_Format:Jm,RGB_S3TC_DXT1_Format:xm,RGDepthPacking:Z8,RGFormat:kl,RGIntegerFormat:ib,RawShaderMaterial:NU,Ray:Rf,Raycaster:HI,RectAreaLight:ZU,RedFormat:Ba,RedIntegerFormat:Mg,ReinhardToneMapping:lI,RenderTarget:ob,RenderTarget3D:RV,RenderTargetArray:DV,RepeatWrapping:ls,ReplaceStencilOp:t5,ReverseSubtractEquation:FO,RingGeometry:wb,SIGNED_RED_GREEN_RGTC2_Format:ux,SIGNED_RED_RGTC1_Format:lx,SRGBColorSpace:mn,SRGBTransfer:un,Scene:qo,ShaderChunk:Tt,ShaderLib:io,ShaderMaterial:cs,ShadowMaterial:FU,Shape:Bu,ShapeGeometry:Eb,ShapePath:ej,ShapeUtils:Vo,ShortType:eb,Skeleton:Pf,SkeletonHelper:zV,SkinnedMesh:ub,Source:Fl,Sphere:ui,SphereGeometry:kf,Spherical:Cm,SphericalHarmonics3:eG,SplineCurve:BI,SpotLight:Rb,SpotLightHelper:GV,Sprite:vU,SpriteMaterial:EI,SrcAlphaFactor:Ov,SrcAlphaSaturateFactor:qO,SrcColorFactor:zO,StaticCopyUsage:v5,StaticDrawUsage:ig,StaticReadUsage:g5,StereoCamera:pV,StreamCopyUsage:b5,StreamDrawUsage:m5,StreamReadUsage:y5,StringKeyframeTrack:nh,SubtractEquation:kO,SubtractiveBlending:f1,TOUCH:W8,TangentSpaceNormalMap:dc,TetrahedronGeometry:_b,Texture:ln,TextureLoader:Bb,TextureUtils:oj,TorusGeometry:Cb,TorusKnotGeometry:Sb,Triangle:ns,TriangleFanDrawMode:zu,TriangleStripDrawMode:Ig,TrianglesDrawMode:yI,TubeGeometry:Mb,UVMapping:ec,Uint16BufferAttribute:bI,Uint32BufferAttribute:wI,Uint8BufferAttribute:s6,Uint8ClampedBufferAttribute:r6,Uniform:QI,UniformsGroup:LV,UniformsLib:ke,UniformsUtils:AU,UnsignedByteType:kn,UnsignedInt248Type:Uu,UnsignedInt5999Type:hI,UnsignedIntType:Wo,UnsignedShort4444Type:tb,UnsignedShort5551Type:nb,UnsignedShortType:uf,VSMShadowMap:Zr,Vector2:me,Vector3:O,Vector4:Yt,VectorKeyframeTrack:Xa,VideoTexture:wU,WebGL3DRenderTarget:q5,WebGLArrayRenderTarget:W5,WebGLCoordinateSystem:lo,WebGLCubeRenderTarget:ab,WebGLRenderTarget:Cs,WebGLRenderer:Lb,WebGLUtils:pG,WebGPUCoordinateSystem:sg,WireframeGeometry:kU,WrapAroundEnding:tg,ZeroCurvatureEnding:fu,ZeroFactor:UO,ZeroSlopeEnding:pu,ZeroStencilOp:e5,createCanvasElement:fU},Symbol.toStringTag,{value:"Module"}));var mG={exports:{}},ih={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */ih.ConcurrentRoot=1;ih.ContinuousEventPriority=4;ih.DefaultEventPriority=16;ih.DiscreteEventPriority=1;ih.IdleEventPriority=536870912;ih.LegacyRoot=0;mG.exports=ih;var Sd=mG.exports;function QJ(n){let e;const t=new Set,i=(c,u)=>{const h=typeof c=="function"?c(e):c;if(h!==e){const p=e;e=u?h:Object.assign({},e,h),t.forEach(m=>m(e,p))}},s=()=>e,r=(c,u=s,h=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=u(e);function m(){const g=u(e);if(!h(p,g)){const v=p;c(p=g,v)}}return t.add(m),()=>t.delete(m)},l={setState:i,getState:s,subscribe:(c,u,h)=>u||h?r(c,u,h):(t.add(c),()=>t.delete(c)),destroy:()=>t.clear()};return e=n(i,s,l),l}const HJ=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),kD=HJ?ee.useEffect:ee.useLayoutEffect;function VJ(n){const e=typeof n=="function"?QJ(n):n,t=(i=e.getState,s=Object.is)=>{const[,r]=ee.useReducer(y=>y+1,0),o=e.getState(),a=ee.useRef(o),l=ee.useRef(i),c=ee.useRef(s),u=ee.useRef(!1),h=ee.useRef();h.current===void 0&&(h.current=i(o));let p,m=!1;(a.current!==o||l.current!==i||c.current!==s||u.current)&&(p=i(o),m=!s(h.current,p)),kD(()=>{m&&(h.current=p),a.current=o,l.current=i,c.current=s,u.current=!1});const g=ee.useRef(o);kD(()=>{const y=()=>{try{const b=e.getState(),w=l.current(b);c.current(h.current,w)||(a.current=b,h.current=w,r())}catch{u.current=!0,r()}},A=e.subscribe(y);return e.getState()!==g.current&&y(),A},[]);const v=m?p:h.current;return ee.useDebugValue(v),v};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const s=i.length<=0;return{value:i.shift(),done:s}}}},t}const jJ=n=>typeof n=="object"&&typeof n.then=="function",gu=[];function gG(n,e,t=(i,s)=>i===s){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let s=0;s<i;s++)if(!t(n[s],e[s]))return!1;return!0}function AG(n,e=null,t=!1,i={}){e===null&&(e=[n]);for(const r of gu)if(gG(e,r.keys,r.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(r,"error"))throw r.error;if(Object.prototype.hasOwnProperty.call(r,"response"))return i.lifespan&&i.lifespan>0&&(r.timeout&&clearTimeout(r.timeout),r.timeout=setTimeout(r.remove,i.lifespan)),r.response;if(!t)throw r.promise}const s={keys:e,equal:i.equal,remove:()=>{const r=gu.indexOf(s);r!==-1&&gu.splice(r,1)},promise:(jJ(n)?n:n(...e)).then(r=>{s.response=r,i.lifespan&&i.lifespan>0&&(s.timeout=setTimeout(s.remove,i.lifespan))}).catch(r=>s.error=r)};if(gu.push(s),!t)throw s.promise}const WJ=(n,e,t)=>AG(n,e,!1,t),qJ=(n,e,t)=>void AG(n,e,!0,t),JJ=n=>{if(n===void 0||n.length===0)gu.splice(0,gu.length);else{const e=gu.find(t=>gG(n,t.keys,t.equal));e&&e.remove()}};var yG={exports:{}},f_={exports:{}},p_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FD;function XJ(){return FD||(FD=1,function(n){function e(L,V){var j=L.length;L.push(V);e:for(;0<j;){var $=j-1>>>1,le=L[$];if(0<s(le,V))L[$]=V,L[j]=le,j=$;else break e}}function t(L){return L.length===0?null:L[0]}function i(L){if(L.length===0)return null;var V=L[0],j=L.pop();if(j!==V){L[0]=j;e:for(var $=0,le=L.length,ve=le>>>1;$<ve;){var q=2*($+1)-1,ae=L[q],ge=q+1,se=L[ge];if(0>s(ae,j))ge<le&&0>s(se,ae)?(L[$]=se,L[ge]=j,$=ge):(L[$]=ae,L[q]=j,$=q);else if(ge<le&&0>s(se,j))L[$]=se,L[ge]=j,$=ge;else break e}}return V}function s(L,V){var j=L.sortIndex-V.sortIndex;return j!==0?j:L.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,p=3,m=!1,g=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(L){for(var V=t(c);V!==null;){if(V.callback===null)i(c);else if(V.startTime<=L)i(c),V.sortIndex=V.expirationTime,e(l,V);else break;V=t(c)}}function E(L){if(v=!1,w(L),!g)if(t(l)!==null)g=!0,J(M);else{var V=t(c);V!==null&&K(E,V.startTime-L)}}function M(L,V){g=!1,v&&(v=!1,A(B),B=-1),m=!0;var j=p;try{for(w(V),h=t(l);h!==null&&(!(h.expirationTime>V)||L&&!k());){var $=h.callback;if(typeof $=="function"){h.callback=null,p=h.priorityLevel;var le=$(h.expirationTime<=V);V=n.unstable_now(),typeof le=="function"?h.callback=le:h===t(l)&&i(l),w(V)}else i(l);h=t(l)}if(h!==null)var ve=!0;else{var q=t(c);q!==null&&K(E,q.startTime-V),ve=!1}return ve}finally{h=null,p=j,m=!1}}var I=!1,D=null,B=-1,R=5,T=-1;function k(){return!(n.unstable_now()-T<R)}function H(){if(D!==null){var L=n.unstable_now();T=L;var V=!0;try{V=D(!0,L)}finally{V?Q():(I=!1,D=null)}}else I=!1}var Q;if(typeof b=="function")Q=function(){b(H)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,X=W.port2;W.port1.onmessage=H,Q=function(){X.postMessage(null)}}else Q=function(){y(H,0)};function J(L){D=L,I||(I=!0,Q())}function K(L,V){B=y(function(){L(n.unstable_now())},V)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(L){L.callback=null},n.unstable_continueExecution=function(){g||m||(g=!0,J(M))},n.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<L?Math.floor(1e3/L):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(L){switch(p){case 1:case 2:case 3:var V=3;break;default:V=p}var j=p;p=V;try{return L()}finally{p=j}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(L,V){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var j=p;p=L;try{return V()}finally{p=j}},n.unstable_scheduleCallback=function(L,V,j){var $=n.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?$+j:$):j=$,L){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=j+le,L={id:u++,callback:V,priorityLevel:L,startTime:j,expirationTime:le,sortIndex:-1},j>$?(L.sortIndex=j,e(c,L),t(l)===null&&L===t(c)&&(v?(A(B),B=-1):v=!0,K(E,j-$))):(L.sortIndex=le,e(l,L),g||m||(g=!0,J(M))),L},n.unstable_shouldYield=k,n.unstable_wrapCallback=function(L){var V=p;return function(){var j=p;p=V;try{return L.apply(this,arguments)}finally{p=j}}}}(p_)),p_}var ND;function KJ(){return ND||(ND=1,f_.exports=XJ()),f_.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $J=function(e){var t={},i=ee,s=KJ(),r=Object.assign;function o(d){for(var f="https://reactjs.org/docs/error-decoder.html?invariant="+d,x=1;x<arguments.length;x++)f+="&args[]="+encodeURIComponent(arguments[x]);return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),g=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),b=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),E=Symbol.for("react.offscreen"),M=Symbol.iterator;function I(d){return d===null||typeof d!="object"?null:(d=M&&d[M]||d["@@iterator"],typeof d=="function"?d:null)}function D(d){if(d==null)return null;if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case u:return"Fragment";case c:return"Portal";case p:return"Profiler";case h:return"StrictMode";case y:return"Suspense";case A:return"SuspenseList"}if(typeof d=="object")switch(d.$$typeof){case g:return(d.displayName||"Context")+".Consumer";case m:return(d._context.displayName||"Context")+".Provider";case v:var f=d.render;return d=d.displayName,d||(d=f.displayName||f.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case b:return f=d.displayName||null,f!==null?f:D(d.type)||"Memo";case w:f=d._payload,d=d._init;try{return D(d(f))}catch{}}return null}function B(d){var f=d.type;switch(d.tag){case 24:return"Cache";case 9:return(f.displayName||"Context")+".Consumer";case 10:return(f._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return d=f.render,d=d.displayName||d.name||"",f.displayName||(d!==""?"ForwardRef("+d+")":"ForwardRef");case 7:return"Fragment";case 5:return f;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return D(f);case 8:return f===h?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f}return null}function R(d){var f=d,x=d;if(d.alternate)for(;f.return;)f=f.return;else{d=f;do f=d,f.flags&4098&&(x=f.return),d=f.return;while(d)}return f.tag===3?x:null}function T(d){if(R(d)!==d)throw Error(o(188))}function k(d){var f=d.alternate;if(!f){if(f=R(d),f===null)throw Error(o(188));return f!==d?null:d}for(var x=d,_=f;;){var S=x.return;if(S===null)break;var P=S.alternate;if(P===null){if(_=S.return,_!==null){x=_;continue}break}if(S.child===P.child){for(P=S.child;P;){if(P===x)return T(S),d;if(P===_)return T(S),f;P=P.sibling}throw Error(o(188))}if(x.return!==_.return)x=S,_=P;else{for(var z=!1,Y=S.child;Y;){if(Y===x){z=!0,x=S,_=P;break}if(Y===_){z=!0,_=S,x=P;break}Y=Y.sibling}if(!z){for(Y=P.child;Y;){if(Y===x){z=!0,x=P,_=S;break}if(Y===_){z=!0,_=P,x=S;break}Y=Y.sibling}if(!z)throw Error(o(189))}}if(x.alternate!==_)throw Error(o(190))}if(x.tag!==3)throw Error(o(188));return x.stateNode.current===x?d:f}function H(d){return d=k(d),d!==null?Q(d):null}function Q(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){var f=Q(d);if(f!==null)return f;d=d.sibling}return null}function W(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){if(d.tag!==4){var f=W(d);if(f!==null)return f}d=d.sibling}return null}var X=Array.isArray,J=e.getPublicInstance,K=e.getRootHostContext,L=e.getChildHostContext,V=e.prepareForCommit,j=e.resetAfterCommit,$=e.createInstance,le=e.appendInitialChild,ve=e.finalizeInitialChildren,q=e.prepareUpdate,ae=e.shouldSetTextContent,ge=e.createTextInstance,se=e.scheduleTimeout,Fe=e.cancelTimeout,qe=e.noTimeout,st=e.isPrimaryRenderer,dt=e.supportsMutation,Ae=e.supportsPersistence,be=e.supportsHydration,G=e.getInstanceFromNode,ot=e.preparePortalMount,Ce=e.getCurrentEventPriority,Ve=e.detachDeletedInstance,Be=e.supportsMicrotasks,gt=e.scheduleMicrotask,Pe=e.supportsTestSelectors,U=e.findFiberRoot,F=e.getBoundingRect,re=e.getTextContent,pe=e.isHiddenSubtree,we=e.matchAccessibilityRole,ye=e.setFocusIfFocusable,it=e.setupIntersectionObserver,Ne=e.appendChild,He=e.appendChildToContainer,Ut=e.commitTextUpdate,Ie=e.commitMount,Xe=e.commitUpdate,mt=e.insertBefore,vt=e.insertInContainerBefore,Ke=e.removeChild,Jt=e.removeChildFromContainer,Ct=e.resetTextContent,pn=e.hideInstance,Z=e.hideTextInstance,Oe=e.unhideInstance,fe=e.unhideTextInstance,xe=e.clearContainer,Qe=e.cloneInstance,Ge=e.createContainerChildSet,Et=e.appendChildToContainerChildSet,In=e.finalizeContainerChildren,di=e.replaceContainerChildren,en=e.cloneHiddenInstance,Ts=e.cloneHiddenTextInstance,Vr=e.canHydrateInstance,qg=e.canHydrateTextInstance,Jg=e.canHydrateSuspenseInstance,Eo=e.isSuspenseInstancePending,mc=e.isSuspenseInstanceFallback,Xg=e.registerSuspenseInstanceRetry,$a=e.getNextHydratableSibling,rh=e.getFirstHydratableChild,Kg=e.getFirstHydratableChildWithinContainer,oh=e.getFirstHydratableChildWithinSuspenseInstance,$g=e.hydrateInstance,Yg=e.hydrateTextInstance,Vb=e.hydrateSuspenseInstance,jb=e.getNextHydratableInstanceAfterSuspenseInstance,Zg=e.commitHydratedContainer,Wb=e.commitHydratedSuspenseInstance,qb=e.clearSuspenseBoundary,Jb=e.clearSuspenseBoundaryFromContainer,N=e.shouldDeleteUnhydratedTailInstances,te=e.didNotMatchHydratedContainerTextInstance,ce=e.didNotMatchHydratedTextInstance,ue;function ne(d){if(ue===void 0)try{throw Error()}catch(x){var f=x.stack.trim().match(/\n( *(at )?)/);ue=f&&f[1]||""}return`
`+ue+d}var _e=!1;function Le(d,f){if(!d||_e)return"";_e=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(f)if(f=function(){throw Error()},Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(Te){var _=Te}Reflect.construct(d,[],f)}else{try{f.call()}catch(Te){_=Te}d.call(f.prototype)}else{try{throw Error()}catch(Te){_=Te}d()}}catch(Te){if(Te&&_&&typeof Te.stack=="string"){for(var S=Te.stack.split(`
`),P=_.stack.split(`
`),z=S.length-1,Y=P.length-1;1<=z&&0<=Y&&S[z]!==P[Y];)Y--;for(;1<=z&&0<=Y;z--,Y--)if(S[z]!==P[Y]){if(z!==1||Y!==1)do if(z--,Y--,0>Y||S[z]!==P[Y]){var de=`
`+S[z].replace(" at new "," at ");return d.displayName&&de.includes("<anonymous>")&&(de=de.replace("<anonymous>",d.displayName)),de}while(1<=z&&0<=Y);break}}}finally{_e=!1,Error.prepareStackTrace=x}return(d=d?d.displayName||d.name:"")?ne(d):""}var je=Object.prototype.hasOwnProperty,We=[],ft=-1;function ht(d){return{current:d}}function De(d){0>ft||(d.current=We[ft],We[ft]=null,ft--)}function rt(d,f){ft++,We[ft]=d.current,d.current=f}var kt={},Gt=ht(kt),zt=ht(!1),Dt=kt;function at(d,f){var x=d.type.contextTypes;if(!x)return kt;var _=d.stateNode;if(_&&_.__reactInternalMemoizedUnmaskedChildContext===f)return _.__reactInternalMemoizedMaskedChildContext;var S={},P;for(P in x)S[P]=f[P];return _&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=f,d.__reactInternalMemoizedMaskedChildContext=S),S}function tn(d){return d=d.childContextTypes,d!=null}function $t(){De(zt),De(Gt)}function Bs(d,f,x){if(Gt.current!==kt)throw Error(o(168));rt(Gt,f),rt(zt,x)}function Zo(d,f,x){var _=d.stateNode;if(f=f.childContextTypes,typeof _.getChildContext!="function")return x;_=_.getChildContext();for(var S in _)if(!(S in f))throw Error(o(108,B(d)||"Unknown",S));return r({},x,_)}function wi(d){return d=(d=d.stateNode)&&d.__reactInternalMemoizedMergedChildContext||kt,Dt=Gt.current,rt(Gt,d),rt(zt,zt.current),!0}function Ya(d,f,x){var _=d.stateNode;if(!_)throw Error(o(169));x?(d=Zo(d,f,Dt),_.__reactInternalMemoizedMergedChildContext=d,De(zt),De(Gt),rt(Gt,d)):De(zt),rt(zt,x)}var Xt=Math.clz32?Math.clz32:ki,Rs=Math.log,Ds=Math.LN2;function ki(d){return d>>>=0,d===0?32:31-(Rs(d)/Ds|0)|0}var fi=64,Za=4194304;function Ws(d){switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return d&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return d}}function eA(d,f){var x=d.pendingLanes;if(x===0)return 0;var _=0,S=d.suspendedLanes,P=d.pingedLanes,z=x&268435455;if(z!==0){var Y=z&~S;Y!==0?_=Ws(Y):(P&=z,P!==0&&(_=Ws(P)))}else z=x&~S,z!==0?_=Ws(z):P!==0&&(_=Ws(P));if(_===0)return 0;if(f!==0&&f!==_&&!(f&S)&&(S=_&-_,P=f&-f,S>=P||S===16&&(P&4194240)!==0))return f;if(_&4&&(_|=x&16),f=d.entangledLanes,f!==0)for(d=d.entanglements,f&=_;0<f;)x=31-Xt(f),S=1<<x,_|=d[x],f&=~S;return _}function yQ(d,f){switch(d){case 1:case 2:case 4:return f+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vQ(d,f){for(var x=d.suspendedLanes,_=d.pingedLanes,S=d.expirationTimes,P=d.pendingLanes;0<P;){var z=31-Xt(P),Y=1<<z,de=S[z];de===-1?(!(Y&x)||Y&_)&&(S[z]=yQ(Y,f)):de<=f&&(d.expiredLanes|=Y),P&=~Y}}function Xb(d){return d=d.pendingLanes&-1073741825,d!==0?d:d&1073741824?1073741824:0}function Kb(d){for(var f=[],x=0;31>x;x++)f.push(d);return f}function zf(d,f,x){d.pendingLanes|=f,f!==536870912&&(d.suspendedLanes=0,d.pingedLanes=0),d=d.eventTimes,f=31-Xt(f),d[f]=x}function xQ(d,f){var x=d.pendingLanes&~f;d.pendingLanes=f,d.suspendedLanes=0,d.pingedLanes=0,d.expiredLanes&=f,d.mutableReadLanes&=f,d.entangledLanes&=f,f=d.entanglements;var _=d.eventTimes;for(d=d.expirationTimes;0<x;){var S=31-Xt(x),P=1<<S;f[S]=0,_[S]=-1,d[S]=-1,x&=~P}}function $b(d,f){var x=d.entangledLanes|=f;for(d=d.entanglements;x;){var _=31-Xt(x),S=1<<_;S&f|d[_]&f&&(d[_]|=f),x&=~S}}var nn=0;function gT(d){return d&=-d,1<d?4<d?d&268435455?16:536870912:4:1}var Yb=s.unstable_scheduleCallback,AT=s.unstable_cancelCallback,bQ=s.unstable_shouldYield,wQ=s.unstable_requestPaint,Ei=s.unstable_now,Zb=s.unstable_ImmediatePriority,EQ=s.unstable_UserBlockingPriority,ew=s.unstable_NormalPriority,_Q=s.unstable_IdlePriority,tA=null,_o=null;function CQ(d){if(_o&&typeof _o.onCommitFiberRoot=="function")try{_o.onCommitFiberRoot(tA,d,void 0,(d.current.flags&128)===128)}catch{}}function SQ(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var Co=typeof Object.is=="function"?Object.is:SQ,ea=null,nA=!1,tw=!1;function yT(d){ea===null?ea=[d]:ea.push(d)}function MQ(d){nA=!0,yT(d)}function So(){if(!tw&&ea!==null){tw=!0;var d=0,f=nn;try{var x=ea;for(nn=1;d<x.length;d++){var _=x[d];do _=_(!0);while(_!==null)}ea=null,nA=!1}catch(S){throw ea!==null&&(ea=ea.slice(d+1)),Yb(Zb,So),S}finally{nn=f,tw=!1}}return null}var IQ=a.ReactCurrentBatchConfig;function iA(d,f){if(Co(d,f))return!0;if(typeof d!="object"||d===null||typeof f!="object"||f===null)return!1;var x=Object.keys(d),_=Object.keys(f);if(x.length!==_.length)return!1;for(_=0;_<x.length;_++){var S=x[_];if(!je.call(f,S)||!Co(d[S],f[S]))return!1}return!0}function TQ(d){switch(d.tag){case 5:return ne(d.type);case 16:return ne("Lazy");case 13:return ne("Suspense");case 19:return ne("SuspenseList");case 0:case 2:case 15:return d=Le(d.type,!1),d;case 11:return d=Le(d.type.render,!1),d;case 1:return d=Le(d.type,!0),d;default:return""}}function jr(d,f){if(d&&d.defaultProps){f=r({},f),d=d.defaultProps;for(var x in d)f[x]===void 0&&(f[x]=d[x]);return f}return f}var sA=ht(null),rA=null,ah=null,nw=null;function iw(){nw=ah=rA=null}function vT(d,f,x){st?(rt(sA,f._currentValue),f._currentValue=x):(rt(sA,f._currentValue2),f._currentValue2=x)}function sw(d){var f=sA.current;De(sA),st?d._currentValue=f:d._currentValue2=f}function rw(d,f,x){for(;d!==null;){var _=d.alternate;if((d.childLanes&f)!==f?(d.childLanes|=f,_!==null&&(_.childLanes|=f)):_!==null&&(_.childLanes&f)!==f&&(_.childLanes|=f),d===x)break;d=d.return}}function lh(d,f){rA=d,nw=ah=null,d=d.dependencies,d!==null&&d.firstContext!==null&&(d.lanes&f&&(Xs=!0),d.firstContext=null)}function Ar(d){var f=st?d._currentValue:d._currentValue2;if(nw!==d)if(d={context:d,memoizedValue:f,next:null},ah===null){if(rA===null)throw Error(o(308));ah=d,rA.dependencies={lanes:0,firstContext:d}}else ah=ah.next=d;return f}var Mo=null,el=!1;function ow(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xT(d,f){d=d.updateQueue,f.updateQueue===d&&(f.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,effects:d.effects})}function ta(d,f){return{eventTime:d,lane:f,tag:0,payload:null,callback:null,next:null}}function tl(d,f){var x=d.updateQueue;x!==null&&(x=x.shared,ii!==null&&d.mode&1&&!(Ft&2)?(d=x.interleaved,d===null?(f.next=f,Mo===null?Mo=[x]:Mo.push(x)):(f.next=d.next,d.next=f),x.interleaved=f):(d=x.pending,d===null?f.next=f:(f.next=d.next,d.next=f),x.pending=f))}function oA(d,f,x){if(f=f.updateQueue,f!==null&&(f=f.shared,(x&4194240)!==0)){var _=f.lanes;_&=d.pendingLanes,x|=_,f.lanes=x,$b(d,x)}}function bT(d,f){var x=d.updateQueue,_=d.alternate;if(_!==null&&(_=_.updateQueue,x===_)){var S=null,P=null;if(x=x.firstBaseUpdate,x!==null){do{var z={eventTime:x.eventTime,lane:x.lane,tag:x.tag,payload:x.payload,callback:x.callback,next:null};P===null?S=P=z:P=P.next=z,x=x.next}while(x!==null);P===null?S=P=f:P=P.next=f}else S=P=f;x={baseState:_.baseState,firstBaseUpdate:S,lastBaseUpdate:P,shared:_.shared,effects:_.effects},d.updateQueue=x;return}d=x.lastBaseUpdate,d===null?x.firstBaseUpdate=f:d.next=f,x.lastBaseUpdate=f}function aA(d,f,x,_){var S=d.updateQueue;el=!1;var P=S.firstBaseUpdate,z=S.lastBaseUpdate,Y=S.shared.pending;if(Y!==null){S.shared.pending=null;var de=Y,Te=de.next;de.next=null,z===null?P=Te:z.next=Te,z=de;var $e=d.alternate;$e!==null&&($e=$e.updateQueue,Y=$e.lastBaseUpdate,Y!==z&&(Y===null?$e.firstBaseUpdate=Te:Y.next=Te,$e.lastBaseUpdate=de))}if(P!==null){var St=S.baseState;z=0,$e=Te=de=null,Y=P;do{var pt=Y.lane,An=Y.eventTime;if((_&pt)===pt){$e!==null&&($e=$e.next={eventTime:An,lane:0,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null});e:{var ct=d,Wi=Y;switch(pt=f,An=x,Wi.tag){case 1:if(ct=Wi.payload,typeof ct=="function"){St=ct.call(An,St,pt);break e}St=ct;break e;case 3:ct.flags=ct.flags&-65537|128;case 0:if(ct=Wi.payload,pt=typeof ct=="function"?ct.call(An,St,pt):ct,pt==null)break e;St=r({},St,pt);break e;case 2:el=!0}}Y.callback!==null&&Y.lane!==0&&(d.flags|=64,pt=S.effects,pt===null?S.effects=[Y]:pt.push(Y))}else An={eventTime:An,lane:pt,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null},$e===null?(Te=$e=An,de=St):$e=$e.next=An,z|=pt;if(Y=Y.next,Y===null){if(Y=S.shared.pending,Y===null)break;pt=Y,Y=pt.next,pt.next=null,S.lastBaseUpdate=pt,S.shared.pending=null}}while(1);if($e===null&&(de=St),S.baseState=de,S.firstBaseUpdate=Te,S.lastBaseUpdate=$e,f=S.shared.interleaved,f!==null){S=f;do z|=S.lane,S=S.next;while(S!==f)}else P===null&&(S.shared.lanes=0);Ah|=z,d.lanes=z,d.memoizedState=St}}function wT(d,f,x){if(d=f.effects,f.effects=null,d!==null)for(f=0;f<d.length;f++){var _=d[f],S=_.callback;if(S!==null){if(_.callback=null,_=x,typeof S!="function")throw Error(o(191,S));S.call(_)}}}var ET=new i.Component().refs;function aw(d,f,x,_){f=d.memoizedState,x=x(_,f),x=x==null?f:r({},f,x),d.memoizedState=x,d.lanes===0&&(d.updateQueue.baseState=x)}var lA={isMounted:function(d){return(d=d._reactInternals)?R(d)===d:!1},enqueueSetState:function(d,f,x){d=d._reactInternals;var _=fs(),S=sl(d),P=ta(_,S);P.payload=f,x!=null&&(P.callback=x),tl(d,P),f=wr(d,S,_),f!==null&&oA(f,d,S)},enqueueReplaceState:function(d,f,x){d=d._reactInternals;var _=fs(),S=sl(d),P=ta(_,S);P.tag=1,P.payload=f,x!=null&&(P.callback=x),tl(d,P),f=wr(d,S,_),f!==null&&oA(f,d,S)},enqueueForceUpdate:function(d,f){d=d._reactInternals;var x=fs(),_=sl(d),S=ta(x,_);S.tag=2,f!=null&&(S.callback=f),tl(d,S),f=wr(d,_,x),f!==null&&oA(f,d,_)}};function _T(d,f,x,_,S,P,z){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(_,P,z):f.prototype&&f.prototype.isPureReactComponent?!iA(x,_)||!iA(S,P):!0}function CT(d,f,x){var _=!1,S=kt,P=f.contextType;return typeof P=="object"&&P!==null?P=Ar(P):(S=tn(f)?Dt:Gt.current,_=f.contextTypes,P=(_=_!=null)?at(d,S):kt),f=new f(x,P),d.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=lA,d.stateNode=f,f._reactInternals=d,_&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=S,d.__reactInternalMemoizedMaskedChildContext=P),f}function ST(d,f,x,_){d=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(x,_),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(x,_),f.state!==d&&lA.enqueueReplaceState(f,f.state,null)}function lw(d,f,x,_){var S=d.stateNode;S.props=x,S.state=d.memoizedState,S.refs=ET,ow(d);var P=f.contextType;typeof P=="object"&&P!==null?S.context=Ar(P):(P=tn(f)?Dt:Gt.current,S.context=at(d,P)),S.state=d.memoizedState,P=f.getDerivedStateFromProps,typeof P=="function"&&(aw(d,f,P,x),S.state=d.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(f=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),f!==S.state&&lA.enqueueReplaceState(S,S.state,null),aA(d,x,S,_),S.state=d.memoizedState),typeof S.componentDidMount=="function"&&(d.flags|=4194308)}var ch=[],uh=0,cA=null,uA=0,yr=[],vr=0,gc=null,na=1,ia="";function Ac(d,f){ch[uh++]=uA,ch[uh++]=cA,cA=d,uA=f}function MT(d,f,x){yr[vr++]=na,yr[vr++]=ia,yr[vr++]=gc,gc=d;var _=na;d=ia;var S=32-Xt(_)-1;_&=~(1<<S),x+=1;var P=32-Xt(f)+S;if(30<P){var z=S-S%5;P=(_&(1<<z)-1).toString(32),_>>=z,S-=z,na=1<<32-Xt(f)+S|x<<S|_,ia=P+d}else na=1<<P|x<<S|_,ia=d}function cw(d){d.return!==null&&(Ac(d,1),MT(d,1,0))}function uw(d){for(;d===cA;)cA=ch[--uh],ch[uh]=null,uA=ch[--uh],ch[uh]=null;for(;d===gc;)gc=yr[--vr],yr[vr]=null,ia=yr[--vr],yr[vr]=null,na=yr[--vr],yr[vr]=null}var qs=null,Js=null,Tn=!1,Qf=!1,Wr=null;function IT(d,f){var x=Er(5,null,null,0);x.elementType="DELETED",x.stateNode=f,x.return=d,f=d.deletions,f===null?(d.deletions=[x],d.flags|=16):f.push(x)}function TT(d,f){switch(d.tag){case 5:return f=Vr(f,d.type,d.pendingProps),f!==null?(d.stateNode=f,qs=d,Js=rh(f),!0):!1;case 6:return f=qg(f,d.pendingProps),f!==null?(d.stateNode=f,qs=d,Js=null,!0):!1;case 13:if(f=Jg(f),f!==null){var x=gc!==null?{id:na,overflow:ia}:null;return d.memoizedState={dehydrated:f,treeContext:x,retryLane:1073741824},x=Er(18,null,null,0),x.stateNode=f,x.return=d,d.child=x,qs=d,Js=null,!0}return!1;default:return!1}}function hw(d){return(d.mode&1)!==0&&(d.flags&128)===0}function dw(d){if(Tn){var f=Js;if(f){var x=f;if(!TT(d,f)){if(hw(d))throw Error(o(418));f=$a(x);var _=qs;f&&TT(d,f)?IT(_,x):(d.flags=d.flags&-4097|2,Tn=!1,qs=d)}}else{if(hw(d))throw Error(o(418));d.flags=d.flags&-4097|2,Tn=!1,qs=d}}}function BT(d){for(d=d.return;d!==null&&d.tag!==5&&d.tag!==3&&d.tag!==13;)d=d.return;qs=d}function Hf(d){if(!be||d!==qs)return!1;if(!Tn)return BT(d),Tn=!0,!1;if(d.tag!==3&&(d.tag!==5||N(d.type)&&!ae(d.type,d.memoizedProps))){var f=Js;if(f){if(hw(d)){for(d=Js;d;)d=$a(d);throw Error(o(418))}for(;f;)IT(d,f),f=$a(f)}}if(BT(d),d.tag===13){if(!be)throw Error(o(316));if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(o(317));Js=jb(d)}else Js=qs?$a(d.stateNode):null;return!0}function hh(){be&&(Js=qs=null,Qf=Tn=!1)}function fw(d){Wr===null?Wr=[d]:Wr.push(d)}function Vf(d,f,x){if(d=x.ref,d!==null&&typeof d!="function"&&typeof d!="object"){if(x._owner){if(x=x._owner,x){if(x.tag!==1)throw Error(o(309));var _=x.stateNode}if(!_)throw Error(o(147,d));var S=_,P=""+d;return f!==null&&f.ref!==null&&typeof f.ref=="function"&&f.ref._stringRef===P?f.ref:(f=function(z){var Y=S.refs;Y===ET&&(Y=S.refs={}),z===null?delete Y[P]:Y[P]=z},f._stringRef=P,f)}if(typeof d!="string")throw Error(o(284));if(!x._owner)throw Error(o(290,d))}return d}function hA(d,f){throw d=Object.prototype.toString.call(f),Error(o(31,d==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":d))}function RT(d){var f=d._init;return f(d._payload)}function DT(d){function f(oe,ie){if(d){var he=oe.deletions;he===null?(oe.deletions=[ie],oe.flags|=16):he.push(ie)}}function x(oe,ie){if(!d)return null;for(;ie!==null;)f(oe,ie),ie=ie.sibling;return null}function _(oe,ie){for(oe=new Map;ie!==null;)ie.key!==null?oe.set(ie.key,ie):oe.set(ie.index,ie),ie=ie.sibling;return oe}function S(oe,ie){return oe=ol(oe,ie),oe.index=0,oe.sibling=null,oe}function P(oe,ie,he){return oe.index=he,d?(he=oe.alternate,he!==null?(he=he.index,he<ie?(oe.flags|=2,ie):he):(oe.flags|=2,ie)):(oe.flags|=1048576,ie)}function z(oe){return d&&oe.alternate===null&&(oe.flags|=2),oe}function Y(oe,ie,he,ze){return ie===null||ie.tag!==6?(ie=Kw(he,oe.mode,ze),ie.return=oe,ie):(ie=S(ie,he),ie.return=oe,ie)}function de(oe,ie,he,ze){var lt=he.type;return lt===u?$e(oe,ie,he.props.children,ze,he.key):ie!==null&&(ie.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===w&&RT(lt)===ie.type)?(ze=S(ie,he.props),ze.ref=Vf(oe,ie,he),ze.return=oe,ze):(ze=QA(he.type,he.key,he.props,null,oe.mode,ze),ze.ref=Vf(oe,ie,he),ze.return=oe,ze)}function Te(oe,ie,he,ze){return ie===null||ie.tag!==4||ie.stateNode.containerInfo!==he.containerInfo||ie.stateNode.implementation!==he.implementation?(ie=$w(he,oe.mode,ze),ie.return=oe,ie):(ie=S(ie,he.children||[]),ie.return=oe,ie)}function $e(oe,ie,he,ze,lt){return ie===null||ie.tag!==7?(ie=_c(he,oe.mode,ze,lt),ie.return=oe,ie):(ie=S(ie,he),ie.return=oe,ie)}function St(oe,ie,he){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return ie=Kw(""+ie,oe.mode,he),ie.return=oe,ie;if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case l:return he=QA(ie.type,ie.key,ie.props,null,oe.mode,he),he.ref=Vf(oe,null,ie),he.return=oe,he;case c:return ie=$w(ie,oe.mode,he),ie.return=oe,ie;case w:var ze=ie._init;return St(oe,ze(ie._payload),he)}if(X(ie)||I(ie))return ie=_c(ie,oe.mode,he,null),ie.return=oe,ie;hA(oe,ie)}return null}function pt(oe,ie,he,ze){var lt=ie!==null?ie.key:null;if(typeof he=="string"&&he!==""||typeof he=="number")return lt!==null?null:Y(oe,ie,""+he,ze);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case l:return he.key===lt?de(oe,ie,he,ze):null;case c:return he.key===lt?Te(oe,ie,he,ze):null;case w:return lt=he._init,pt(oe,ie,lt(he._payload),ze)}if(X(he)||I(he))return lt!==null?null:$e(oe,ie,he,ze,null);hA(oe,he)}return null}function An(oe,ie,he,ze,lt){if(typeof ze=="string"&&ze!==""||typeof ze=="number")return oe=oe.get(he)||null,Y(ie,oe,""+ze,lt);if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case l:return oe=oe.get(ze.key===null?he:ze.key)||null,de(ie,oe,ze,lt);case c:return oe=oe.get(ze.key===null?he:ze.key)||null,Te(ie,oe,ze,lt);case w:var Pt=ze._init;return An(oe,ie,he,Pt(ze._payload),lt)}if(X(ze)||I(ze))return oe=oe.get(he)||null,$e(ie,oe,ze,lt,null);hA(ie,ze)}return null}function ct(oe,ie,he,ze){for(var lt=null,Pt=null,Mt=ie,sn=ie=0,Ci=null;Mt!==null&&sn<he.length;sn++){Mt.index>sn?(Ci=Mt,Mt=null):Ci=Mt.sibling;var rn=pt(oe,Mt,he[sn],ze);if(rn===null){Mt===null&&(Mt=Ci);break}d&&Mt&&rn.alternate===null&&f(oe,Mt),ie=P(rn,ie,sn),Pt===null?lt=rn:Pt.sibling=rn,Pt=rn,Mt=Ci}if(sn===he.length)return x(oe,Mt),Tn&&Ac(oe,sn),lt;if(Mt===null){for(;sn<he.length;sn++)Mt=St(oe,he[sn],ze),Mt!==null&&(ie=P(Mt,ie,sn),Pt===null?lt=Mt:Pt.sibling=Mt,Pt=Mt);return Tn&&Ac(oe,sn),lt}for(Mt=_(oe,Mt);sn<he.length;sn++)Ci=An(Mt,oe,sn,he[sn],ze),Ci!==null&&(d&&Ci.alternate!==null&&Mt.delete(Ci.key===null?sn:Ci.key),ie=P(Ci,ie,sn),Pt===null?lt=Ci:Pt.sibling=Ci,Pt=Ci);return d&&Mt.forEach(function(al){return f(oe,al)}),Tn&&Ac(oe,sn),lt}function Wi(oe,ie,he,ze){var lt=I(he);if(typeof lt!="function")throw Error(o(150));if(he=lt.call(he),he==null)throw Error(o(151));for(var Pt=lt=null,Mt=ie,sn=ie=0,Ci=null,rn=he.next();Mt!==null&&!rn.done;sn++,rn=he.next()){Mt.index>sn?(Ci=Mt,Mt=null):Ci=Mt.sibling;var al=pt(oe,Mt,rn.value,ze);if(al===null){Mt===null&&(Mt=Ci);break}d&&Mt&&al.alternate===null&&f(oe,Mt),ie=P(al,ie,sn),Pt===null?lt=al:Pt.sibling=al,Pt=al,Mt=Ci}if(rn.done)return x(oe,Mt),Tn&&Ac(oe,sn),lt;if(Mt===null){for(;!rn.done;sn++,rn=he.next())rn=St(oe,rn.value,ze),rn!==null&&(ie=P(rn,ie,sn),Pt===null?lt=rn:Pt.sibling=rn,Pt=rn);return Tn&&Ac(oe,sn),lt}for(Mt=_(oe,Mt);!rn.done;sn++,rn=he.next())rn=An(Mt,oe,sn,rn.value,ze),rn!==null&&(d&&rn.alternate!==null&&Mt.delete(rn.key===null?sn:rn.key),ie=P(rn,ie,sn),Pt===null?lt=rn:Pt.sibling=rn,Pt=rn);return d&&Mt.forEach(function(rH){return f(oe,rH)}),Tn&&Ac(oe,sn),lt}function _r(oe,ie,he,ze){if(typeof he=="object"&&he!==null&&he.type===u&&he.key===null&&(he=he.props.children),typeof he=="object"&&he!==null){switch(he.$$typeof){case l:e:{for(var lt=he.key,Pt=ie;Pt!==null;){if(Pt.key===lt){if(lt=he.type,lt===u){if(Pt.tag===7){x(oe,Pt.sibling),ie=S(Pt,he.props.children),ie.return=oe,oe=ie;break e}}else if(Pt.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===w&&RT(lt)===Pt.type){x(oe,Pt.sibling),ie=S(Pt,he.props),ie.ref=Vf(oe,Pt,he),ie.return=oe,oe=ie;break e}x(oe,Pt);break}else f(oe,Pt);Pt=Pt.sibling}he.type===u?(ie=_c(he.props.children,oe.mode,ze,he.key),ie.return=oe,oe=ie):(ze=QA(he.type,he.key,he.props,null,oe.mode,ze),ze.ref=Vf(oe,ie,he),ze.return=oe,oe=ze)}return z(oe);case c:e:{for(Pt=he.key;ie!==null;){if(ie.key===Pt)if(ie.tag===4&&ie.stateNode.containerInfo===he.containerInfo&&ie.stateNode.implementation===he.implementation){x(oe,ie.sibling),ie=S(ie,he.children||[]),ie.return=oe,oe=ie;break e}else{x(oe,ie);break}else f(oe,ie);ie=ie.sibling}ie=$w(he,oe.mode,ze),ie.return=oe,oe=ie}return z(oe);case w:return Pt=he._init,_r(oe,ie,Pt(he._payload),ze)}if(X(he))return ct(oe,ie,he,ze);if(I(he))return Wi(oe,ie,he,ze);hA(oe,he)}return typeof he=="string"&&he!==""||typeof he=="number"?(he=""+he,ie!==null&&ie.tag===6?(x(oe,ie.sibling),ie=S(ie,he),ie.return=oe,oe=ie):(x(oe,ie),ie=Kw(he,oe.mode,ze),ie.return=oe,oe=ie),z(oe)):x(oe,ie)}return _r}var dh=DT(!0),PT=DT(!1),jf={},xr=ht(jf),Wf=ht(jf),fh=ht(jf);function Io(d){if(d===jf)throw Error(o(174));return d}function pw(d,f){rt(fh,f),rt(Wf,d),rt(xr,jf),d=K(f),De(xr),rt(xr,d)}function ph(){De(xr),De(Wf),De(fh)}function LT(d){var f=Io(fh.current),x=Io(xr.current);f=L(x,d.type,f),x!==f&&(rt(Wf,d),rt(xr,f))}function mw(d){Wf.current===d&&(De(xr),De(Wf))}var Dn=ht(0);function dA(d){for(var f=d;f!==null;){if(f.tag===13){var x=f.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||Eo(x)||mc(x)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if(f.flags&128)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===d)break;for(;f.sibling===null;){if(f.return===null||f.return===d)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var gw=[];function Aw(){for(var d=0;d<gw.length;d++){var f=gw[d];st?f._workInProgressVersionPrimary=null:f._workInProgressVersionSecondary=null}gw.length=0}var fA=a.ReactCurrentDispatcher,br=a.ReactCurrentBatchConfig,mh=0,Hn=null,Hi=null,_i=null,pA=!1,qf=!1,Jf=0,BQ=0;function Vi(){throw Error(o(321))}function yw(d,f){if(f===null)return!1;for(var x=0;x<f.length&&x<d.length;x++)if(!Co(d[x],f[x]))return!1;return!0}function vw(d,f,x,_,S,P){if(mh=P,Hn=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,fA.current=d===null||d.memoizedState===null?LQ:kQ,d=x(_,S),qf){P=0;do{if(qf=!1,Jf=0,25<=P)throw Error(o(301));P+=1,_i=Hi=null,f.updateQueue=null,fA.current=FQ,d=x(_,S)}while(qf)}if(fA.current=vA,f=Hi!==null&&Hi.next!==null,mh=0,_i=Hi=Hn=null,pA=!1,f)throw Error(o(300));return d}function xw(){var d=Jf!==0;return Jf=0,d}function sa(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _i===null?Hn.memoizedState=_i=d:_i=_i.next=d,_i}function To(){if(Hi===null){var d=Hn.alternate;d=d!==null?d.memoizedState:null}else d=Hi.next;var f=_i===null?Hn.memoizedState:_i.next;if(f!==null)_i=f,Hi=d;else{if(d===null)throw Error(o(310));Hi=d,d={memoizedState:Hi.memoizedState,baseState:Hi.baseState,baseQueue:Hi.baseQueue,queue:Hi.queue,next:null},_i===null?Hn.memoizedState=_i=d:_i=_i.next=d}return _i}function yc(d,f){return typeof f=="function"?f(d):f}function mA(d){var f=To(),x=f.queue;if(x===null)throw Error(o(311));x.lastRenderedReducer=d;var _=Hi,S=_.baseQueue,P=x.pending;if(P!==null){if(S!==null){var z=S.next;S.next=P.next,P.next=z}_.baseQueue=S=P,x.pending=null}if(S!==null){P=S.next,_=_.baseState;var Y=z=null,de=null,Te=P;do{var $e=Te.lane;if((mh&$e)===$e)de!==null&&(de=de.next={lane:0,action:Te.action,hasEagerState:Te.hasEagerState,eagerState:Te.eagerState,next:null}),_=Te.hasEagerState?Te.eagerState:d(_,Te.action);else{var St={lane:$e,action:Te.action,hasEagerState:Te.hasEagerState,eagerState:Te.eagerState,next:null};de===null?(Y=de=St,z=_):de=de.next=St,Hn.lanes|=$e,Ah|=$e}Te=Te.next}while(Te!==null&&Te!==P);de===null?z=_:de.next=Y,Co(_,f.memoizedState)||(Xs=!0),f.memoizedState=_,f.baseState=z,f.baseQueue=de,x.lastRenderedState=_}if(d=x.interleaved,d!==null){S=d;do P=S.lane,Hn.lanes|=P,Ah|=P,S=S.next;while(S!==d)}else S===null&&(x.lanes=0);return[f.memoizedState,x.dispatch]}function gA(d){var f=To(),x=f.queue;if(x===null)throw Error(o(311));x.lastRenderedReducer=d;var _=x.dispatch,S=x.pending,P=f.memoizedState;if(S!==null){x.pending=null;var z=S=S.next;do P=d(P,z.action),z=z.next;while(z!==S);Co(P,f.memoizedState)||(Xs=!0),f.memoizedState=P,f.baseQueue===null&&(f.baseState=P),x.lastRenderedState=P}return[P,_]}function kT(){}function FT(d,f){var x=Hn,_=To(),S=f(),P=!Co(_.memoizedState,S);if(P&&(_.memoizedState=S,Xs=!0),_=_.queue,Kf(UT.bind(null,x,_,d),[d]),_.getSnapshot!==f||P||_i!==null&&_i.memoizedState.tag&1){if(x.flags|=2048,Xf(9,OT.bind(null,x,_,S,f),void 0,null),ii===null)throw Error(o(349));mh&30||NT(x,f,S)}return S}function NT(d,f,x){d.flags|=16384,d={getSnapshot:f,value:x},f=Hn.updateQueue,f===null?(f={lastEffect:null,stores:null},Hn.updateQueue=f,f.stores=[d]):(x=f.stores,x===null?f.stores=[d]:x.push(d))}function OT(d,f,x,_){f.value=x,f.getSnapshot=_,GT(f)&&wr(d,1,-1)}function UT(d,f,x){return x(function(){GT(f)&&wr(d,1,-1)})}function GT(d){var f=d.getSnapshot;d=d.value;try{var x=f();return!Co(d,x)}catch{return!0}}function bw(d){var f=sa();return typeof d=="function"&&(d=d()),f.memoizedState=f.baseState=d,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yc,lastRenderedState:d},f.queue=d,d=d.dispatch=PQ.bind(null,Hn,d),[f.memoizedState,d]}function Xf(d,f,x,_){return d={tag:d,create:f,destroy:x,deps:_,next:null},f=Hn.updateQueue,f===null?(f={lastEffect:null,stores:null},Hn.updateQueue=f,f.lastEffect=d.next=d):(x=f.lastEffect,x===null?f.lastEffect=d.next=d:(_=x.next,x.next=d,d.next=_,f.lastEffect=d)),d}function zT(){return To().memoizedState}function AA(d,f,x,_){var S=sa();Hn.flags|=d,S.memoizedState=Xf(1|f,x,void 0,_===void 0?null:_)}function yA(d,f,x,_){var S=To();_=_===void 0?null:_;var P=void 0;if(Hi!==null){var z=Hi.memoizedState;if(P=z.destroy,_!==null&&yw(_,z.deps)){S.memoizedState=Xf(f,x,P,_);return}}Hn.flags|=d,S.memoizedState=Xf(1|f,x,P,_)}function ww(d,f){return AA(8390656,8,d,f)}function Kf(d,f){return yA(2048,8,d,f)}function QT(d,f){return yA(4,2,d,f)}function HT(d,f){return yA(4,4,d,f)}function VT(d,f){if(typeof f=="function")return d=d(),f(d),function(){f(null)};if(f!=null)return d=d(),f.current=d,function(){f.current=null}}function jT(d,f,x){return x=x!=null?x.concat([d]):null,yA(4,4,VT.bind(null,f,d),x)}function Ew(){}function WT(d,f){var x=To();f=f===void 0?null:f;var _=x.memoizedState;return _!==null&&f!==null&&yw(f,_[1])?_[0]:(x.memoizedState=[d,f],d)}function qT(d,f){var x=To();f=f===void 0?null:f;var _=x.memoizedState;return _!==null&&f!==null&&yw(f,_[1])?_[0]:(d=d(),x.memoizedState=[d,f],d)}function RQ(d,f){var x=nn;nn=x!==0&&4>x?x:4,d(!0);var _=br.transition;br.transition={};try{d(!1),f()}finally{nn=x,br.transition=_}}function JT(){return To().memoizedState}function DQ(d,f,x){var _=sl(d);x={lane:_,action:x,hasEagerState:!1,eagerState:null,next:null},XT(d)?KT(f,x):($T(d,f,x),x=fs(),d=wr(d,_,x),d!==null&&YT(d,f,_))}function PQ(d,f,x){var _=sl(d),S={lane:_,action:x,hasEagerState:!1,eagerState:null,next:null};if(XT(d))KT(f,S);else{$T(d,f,S);var P=d.alternate;if(d.lanes===0&&(P===null||P.lanes===0)&&(P=f.lastRenderedReducer,P!==null))try{var z=f.lastRenderedState,Y=P(z,x);if(S.hasEagerState=!0,S.eagerState=Y,Co(Y,z))return}catch{}finally{}x=fs(),d=wr(d,_,x),d!==null&&YT(d,f,_)}}function XT(d){var f=d.alternate;return d===Hn||f!==null&&f===Hn}function KT(d,f){qf=pA=!0;var x=d.pending;x===null?f.next=f:(f.next=x.next,x.next=f),d.pending=f}function $T(d,f,x){ii!==null&&d.mode&1&&!(Ft&2)?(d=f.interleaved,d===null?(x.next=x,Mo===null?Mo=[f]:Mo.push(f)):(x.next=d.next,d.next=x),f.interleaved=x):(d=f.pending,d===null?x.next=x:(x.next=d.next,d.next=x),f.pending=x)}function YT(d,f,x){if(x&4194240){var _=f.lanes;_&=d.pendingLanes,x|=_,f.lanes=x,$b(d,x)}}var vA={readContext:Ar,useCallback:Vi,useContext:Vi,useEffect:Vi,useImperativeHandle:Vi,useInsertionEffect:Vi,useLayoutEffect:Vi,useMemo:Vi,useReducer:Vi,useRef:Vi,useState:Vi,useDebugValue:Vi,useDeferredValue:Vi,useTransition:Vi,useMutableSource:Vi,useSyncExternalStore:Vi,useId:Vi,unstable_isNewReconciler:!1},LQ={readContext:Ar,useCallback:function(d,f){return sa().memoizedState=[d,f===void 0?null:f],d},useContext:Ar,useEffect:ww,useImperativeHandle:function(d,f,x){return x=x!=null?x.concat([d]):null,AA(4194308,4,VT.bind(null,f,d),x)},useLayoutEffect:function(d,f){return AA(4194308,4,d,f)},useInsertionEffect:function(d,f){return AA(4,2,d,f)},useMemo:function(d,f){var x=sa();return f=f===void 0?null:f,d=d(),x.memoizedState=[d,f],d},useReducer:function(d,f,x){var _=sa();return f=x!==void 0?x(f):f,_.memoizedState=_.baseState=f,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:f},_.queue=d,d=d.dispatch=DQ.bind(null,Hn,d),[_.memoizedState,d]},useRef:function(d){var f=sa();return d={current:d},f.memoizedState=d},useState:bw,useDebugValue:Ew,useDeferredValue:function(d){var f=bw(d),x=f[0],_=f[1];return ww(function(){var S=br.transition;br.transition={};try{_(d)}finally{br.transition=S}},[d]),x},useTransition:function(){var d=bw(!1),f=d[0];return d=RQ.bind(null,d[1]),sa().memoizedState=d,[f,d]},useMutableSource:function(){},useSyncExternalStore:function(d,f,x){var _=Hn,S=sa();if(Tn){if(x===void 0)throw Error(o(407));x=x()}else{if(x=f(),ii===null)throw Error(o(349));mh&30||NT(_,f,x)}S.memoizedState=x;var P={value:x,getSnapshot:f};return S.queue=P,ww(UT.bind(null,_,P,d),[d]),_.flags|=2048,Xf(9,OT.bind(null,_,P,x,f),void 0,null),x},useId:function(){var d=sa(),f=ii.identifierPrefix;if(Tn){var x=ia,_=na;x=(_&~(1<<32-Xt(_)-1)).toString(32)+x,f=":"+f+"R"+x,x=Jf++,0<x&&(f+="H"+x.toString(32)),f+=":"}else x=BQ++,f=":"+f+"r"+x.toString(32)+":";return d.memoizedState=f},unstable_isNewReconciler:!1},kQ={readContext:Ar,useCallback:WT,useContext:Ar,useEffect:Kf,useImperativeHandle:jT,useInsertionEffect:QT,useLayoutEffect:HT,useMemo:qT,useReducer:mA,useRef:zT,useState:function(){return mA(yc)},useDebugValue:Ew,useDeferredValue:function(d){var f=mA(yc),x=f[0],_=f[1];return Kf(function(){var S=br.transition;br.transition={};try{_(d)}finally{br.transition=S}},[d]),x},useTransition:function(){var d=mA(yc)[0],f=To().memoizedState;return[d,f]},useMutableSource:kT,useSyncExternalStore:FT,useId:JT,unstable_isNewReconciler:!1},FQ={readContext:Ar,useCallback:WT,useContext:Ar,useEffect:Kf,useImperativeHandle:jT,useInsertionEffect:QT,useLayoutEffect:HT,useMemo:qT,useReducer:gA,useRef:zT,useState:function(){return gA(yc)},useDebugValue:Ew,useDeferredValue:function(d){var f=gA(yc),x=f[0],_=f[1];return Kf(function(){var S=br.transition;br.transition={};try{_(d)}finally{br.transition=S}},[d]),x},useTransition:function(){var d=gA(yc)[0],f=To().memoizedState;return[d,f]},useMutableSource:kT,useSyncExternalStore:FT,useId:JT,unstable_isNewReconciler:!1};function _w(d,f){try{var x="",_=f;do x+=TQ(_),_=_.return;while(_);var S=x}catch(P){S=`
Error generating stack: `+P.message+`
`+P.stack}return{value:d,source:f,stack:S}}function Cw(d,f){try{console.error(f.value)}catch(x){setTimeout(function(){throw x})}}var NQ=typeof WeakMap=="function"?WeakMap:Map;function ZT(d,f,x){x=ta(-1,x),x.tag=3,x.payload={element:null};var _=f.value;return x.callback=function(){kA||(kA=!0,Hw=_),Cw(d,f)},x}function eB(d,f,x){x=ta(-1,x),x.tag=3;var _=d.type.getDerivedStateFromError;if(typeof _=="function"){var S=f.value;x.payload=function(){return _(S)},x.callback=function(){Cw(d,f)}}var P=d.stateNode;return P!==null&&typeof P.componentDidCatch=="function"&&(x.callback=function(){Cw(d,f),typeof _!="function"&&(nl===null?nl=new Set([this]):nl.add(this));var z=f.stack;this.componentDidCatch(f.value,{componentStack:z!==null?z:""})}),x}function tB(d,f,x){var _=d.pingCache;if(_===null){_=d.pingCache=new NQ;var S=new Set;_.set(f,S)}else S=_.get(f),S===void 0&&(S=new Set,_.set(f,S));S.has(x)||(S.add(x),d=$Q.bind(null,d,f,x),f.then(d,d))}function nB(d){do{var f;if((f=d.tag===13)&&(f=d.memoizedState,f=f!==null?f.dehydrated!==null:!0),f)return d;d=d.return}while(d!==null);return null}function iB(d,f,x,_,S){return d.mode&1?(d.flags|=65536,d.lanes=S,d):(d===f?d.flags|=65536:(d.flags|=128,x.flags|=131072,x.flags&=-52805,x.tag===1&&(x.alternate===null?x.tag=17:(f=ta(-1,1),f.tag=2,tl(x,f))),x.lanes|=1),d)}function Bo(d){d.flags|=4}function sB(d,f){if(d!==null&&d.child===f.child)return!0;if(f.flags&16)return!1;for(d=f.child;d!==null;){if(d.flags&12854||d.subtreeFlags&12854)return!1;d=d.sibling}return!0}var $f,Yf,xA,bA;if(dt)$f=function(d,f){for(var x=f.child;x!==null;){if(x.tag===5||x.tag===6)le(d,x.stateNode);else if(x.tag!==4&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===f)break;for(;x.sibling===null;){if(x.return===null||x.return===f)return;x=x.return}x.sibling.return=x.return,x=x.sibling}},Yf=function(){},xA=function(d,f,x,_,S){if(d=d.memoizedProps,d!==_){var P=f.stateNode,z=Io(xr.current);x=q(P,x,d,_,S,z),(f.updateQueue=x)&&Bo(f)}},bA=function(d,f,x,_){x!==_&&Bo(f)};else if(Ae){$f=function(d,f,x,_){for(var S=f.child;S!==null;){if(S.tag===5){var P=S.stateNode;x&&_&&(P=en(P,S.type,S.memoizedProps,S)),le(d,P)}else if(S.tag===6)P=S.stateNode,x&&_&&(P=Ts(P,S.memoizedProps,S)),le(d,P);else if(S.tag!==4){if(S.tag===22&&S.memoizedState!==null)P=S.child,P!==null&&(P.return=S),$f(d,S,!0,!0);else if(S.child!==null){S.child.return=S,S=S.child;continue}}if(S===f)break;for(;S.sibling===null;){if(S.return===null||S.return===f)return;S=S.return}S.sibling.return=S.return,S=S.sibling}};var rB=function(d,f,x,_){for(var S=f.child;S!==null;){if(S.tag===5){var P=S.stateNode;x&&_&&(P=en(P,S.type,S.memoizedProps,S)),Et(d,P)}else if(S.tag===6)P=S.stateNode,x&&_&&(P=Ts(P,S.memoizedProps,S)),Et(d,P);else if(S.tag!==4){if(S.tag===22&&S.memoizedState!==null)P=S.child,P!==null&&(P.return=S),rB(d,S,!0,!0);else if(S.child!==null){S.child.return=S,S=S.child;continue}}if(S===f)break;for(;S.sibling===null;){if(S.return===null||S.return===f)return;S=S.return}S.sibling.return=S.return,S=S.sibling}};Yf=function(d,f){var x=f.stateNode;if(!sB(d,f)){d=x.containerInfo;var _=Ge(d);rB(_,f,!1,!1),x.pendingChildren=_,Bo(f),In(d,_)}},xA=function(d,f,x,_,S){var P=d.stateNode,z=d.memoizedProps;if((d=sB(d,f))&&z===_)f.stateNode=P;else{var Y=f.stateNode,de=Io(xr.current),Te=null;z!==_&&(Te=q(Y,x,z,_,S,de)),d&&Te===null?f.stateNode=P:(P=Qe(P,Te,x,z,_,f,d,Y),ve(P,x,_,S,de)&&Bo(f),f.stateNode=P,d?Bo(f):$f(P,f,!1,!1))}},bA=function(d,f,x,_){x!==_?(d=Io(fh.current),x=Io(xr.current),f.stateNode=ge(_,d,x,f),Bo(f)):f.stateNode=d.stateNode}}else Yf=function(){},xA=function(){},bA=function(){};function Zf(d,f){if(!Tn)switch(d.tailMode){case"hidden":f=d.tail;for(var x=null;f!==null;)f.alternate!==null&&(x=f),f=f.sibling;x===null?d.tail=null:x.sibling=null;break;case"collapsed":x=d.tail;for(var _=null;x!==null;)x.alternate!==null&&(_=x),x=x.sibling;_===null?f||d.tail===null?d.tail=null:d.tail.sibling=null:_.sibling=null}}function ji(d){var f=d.alternate!==null&&d.alternate.child===d.child,x=0,_=0;if(f)for(var S=d.child;S!==null;)x|=S.lanes|S.childLanes,_|=S.subtreeFlags&14680064,_|=S.flags&14680064,S.return=d,S=S.sibling;else for(S=d.child;S!==null;)x|=S.lanes|S.childLanes,_|=S.subtreeFlags,_|=S.flags,S.return=d,S=S.sibling;return d.subtreeFlags|=_,d.childLanes=x,f}function OQ(d,f,x){var _=f.pendingProps;switch(uw(f),f.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ji(f),null;case 1:return tn(f.type)&&$t(),ji(f),null;case 3:return _=f.stateNode,ph(),De(zt),De(Gt),Aw(),_.pendingContext&&(_.context=_.pendingContext,_.pendingContext=null),(d===null||d.child===null)&&(Hf(f)?Bo(f):d===null||d.memoizedState.isDehydrated&&!(f.flags&256)||(f.flags|=1024,Wr!==null&&(Ww(Wr),Wr=null))),Yf(d,f),ji(f),null;case 5:mw(f),x=Io(fh.current);var S=f.type;if(d!==null&&f.stateNode!=null)xA(d,f,S,_,x),d.ref!==f.ref&&(f.flags|=512,f.flags|=2097152);else{if(!_){if(f.stateNode===null)throw Error(o(166));return ji(f),null}if(d=Io(xr.current),Hf(f)){if(!be)throw Error(o(175));d=$g(f.stateNode,f.type,f.memoizedProps,x,d,f,!Qf),f.updateQueue=d,d!==null&&Bo(f)}else{var P=$(S,_,x,d,f);$f(P,f,!1,!1),f.stateNode=P,ve(P,S,_,x,d)&&Bo(f)}f.ref!==null&&(f.flags|=512,f.flags|=2097152)}return ji(f),null;case 6:if(d&&f.stateNode!=null)bA(d,f,d.memoizedProps,_);else{if(typeof _!="string"&&f.stateNode===null)throw Error(o(166));if(d=Io(fh.current),x=Io(xr.current),Hf(f)){if(!be)throw Error(o(176));if(d=f.stateNode,_=f.memoizedProps,(x=Yg(d,_,f,!Qf))&&(S=qs,S!==null))switch(P=(S.mode&1)!==0,S.tag){case 3:te(S.stateNode.containerInfo,d,_,P);break;case 5:ce(S.type,S.memoizedProps,S.stateNode,d,_,P)}x&&Bo(f)}else f.stateNode=ge(_,d,x,f)}return ji(f),null;case 13:if(De(Dn),_=f.memoizedState,Tn&&Js!==null&&f.mode&1&&!(f.flags&128)){for(d=Js;d;)d=$a(d);return hh(),f.flags|=98560,f}if(_!==null&&_.dehydrated!==null){if(_=Hf(f),d===null){if(!_)throw Error(o(318));if(!be)throw Error(o(344));if(d=f.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(o(317));Vb(d,f)}else hh(),!(f.flags&128)&&(f.memoizedState=null),f.flags|=4;return ji(f),null}return Wr!==null&&(Ww(Wr),Wr=null),f.flags&128?(f.lanes=x,f):(_=_!==null,x=!1,d===null?Hf(f):x=d.memoizedState!==null,_&&!x&&(f.child.flags|=8192,f.mode&1&&(d===null||Dn.current&1?pi===0&&(pi=3):Jw())),f.updateQueue!==null&&(f.flags|=4),ji(f),null);case 4:return ph(),Yf(d,f),d===null&&ot(f.stateNode.containerInfo),ji(f),null;case 10:return sw(f.type._context),ji(f),null;case 17:return tn(f.type)&&$t(),ji(f),null;case 19:if(De(Dn),S=f.memoizedState,S===null)return ji(f),null;if(_=(f.flags&128)!==0,P=S.rendering,P===null)if(_)Zf(S,!1);else{if(pi!==0||d!==null&&d.flags&128)for(d=f.child;d!==null;){if(P=dA(d),P!==null){for(f.flags|=128,Zf(S,!1),d=P.updateQueue,d!==null&&(f.updateQueue=d,f.flags|=4),f.subtreeFlags=0,d=x,_=f.child;_!==null;)x=_,S=d,x.flags&=14680066,P=x.alternate,P===null?(x.childLanes=0,x.lanes=S,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=P.childLanes,x.lanes=P.lanes,x.child=P.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=P.memoizedProps,x.memoizedState=P.memoizedState,x.updateQueue=P.updateQueue,x.type=P.type,S=P.dependencies,x.dependencies=S===null?null:{lanes:S.lanes,firstContext:S.firstContext}),_=_.sibling;return rt(Dn,Dn.current&1|2),f.child}d=d.sibling}S.tail!==null&&Ei()>Qw&&(f.flags|=128,_=!0,Zf(S,!1),f.lanes=4194304)}else{if(!_)if(d=dA(P),d!==null){if(f.flags|=128,_=!0,d=d.updateQueue,d!==null&&(f.updateQueue=d,f.flags|=4),Zf(S,!0),S.tail===null&&S.tailMode==="hidden"&&!P.alternate&&!Tn)return ji(f),null}else 2*Ei()-S.renderingStartTime>Qw&&x!==1073741824&&(f.flags|=128,_=!0,Zf(S,!1),f.lanes=4194304);S.isBackwards?(P.sibling=f.child,f.child=P):(d=S.last,d!==null?d.sibling=P:f.child=P,S.last=P)}return S.tail!==null?(f=S.tail,S.rendering=f,S.tail=f.sibling,S.renderingStartTime=Ei(),f.sibling=null,d=Dn.current,rt(Dn,_?d&1|2:d&1),f):(ji(f),null);case 22:case 23:return qw(),_=f.memoizedState!==null,d!==null&&d.memoizedState!==null!==_&&(f.flags|=8192),_&&f.mode&1?Ks&1073741824&&(ji(f),dt&&f.subtreeFlags&6&&(f.flags|=8192)):ji(f),null;case 24:return null;case 25:return null}throw Error(o(156,f.tag))}var UQ=a.ReactCurrentOwner,Xs=!1;function ds(d,f,x,_){f.child=d===null?PT(f,null,x,_):dh(f,d.child,x,_)}function oB(d,f,x,_,S){x=x.render;var P=f.ref;return lh(f,S),_=vw(d,f,x,_,P,S),x=xw(),d!==null&&!Xs?(f.updateQueue=d.updateQueue,f.flags&=-2053,d.lanes&=~S,ra(d,f,S)):(Tn&&x&&cw(f),f.flags|=1,ds(d,f,_,S),f.child)}function aB(d,f,x,_,S){if(d===null){var P=x.type;return typeof P=="function"&&!Xw(P)&&P.defaultProps===void 0&&x.compare===null&&x.defaultProps===void 0?(f.tag=15,f.type=P,lB(d,f,P,_,S)):(d=QA(x.type,null,_,f,f.mode,S),d.ref=f.ref,d.return=f,f.child=d)}if(P=d.child,!(d.lanes&S)){var z=P.memoizedProps;if(x=x.compare,x=x!==null?x:iA,x(z,_)&&d.ref===f.ref)return ra(d,f,S)}return f.flags|=1,d=ol(P,_),d.ref=f.ref,d.return=f,f.child=d}function lB(d,f,x,_,S){if(d!==null&&iA(d.memoizedProps,_)&&d.ref===f.ref)if(Xs=!1,(d.lanes&S)!==0)d.flags&131072&&(Xs=!0);else return f.lanes=d.lanes,ra(d,f,S);return Sw(d,f,x,_,S)}function cB(d,f,x){var _=f.pendingProps,S=_.children,P=d!==null?d.memoizedState:null;if(_.mode==="hidden")if(!(f.mode&1))f.memoizedState={baseLanes:0,cachePool:null},rt(gh,Ks),Ks|=x;else if(x&1073741824)f.memoizedState={baseLanes:0,cachePool:null},_=P!==null?P.baseLanes:x,rt(gh,Ks),Ks|=_;else return d=P!==null?P.baseLanes|x:x,f.lanes=f.childLanes=1073741824,f.memoizedState={baseLanes:d,cachePool:null},f.updateQueue=null,rt(gh,Ks),Ks|=d,null;else P!==null?(_=P.baseLanes|x,f.memoizedState=null):_=x,rt(gh,Ks),Ks|=_;return ds(d,f,S,x),f.child}function uB(d,f){var x=f.ref;(d===null&&x!==null||d!==null&&d.ref!==x)&&(f.flags|=512,f.flags|=2097152)}function Sw(d,f,x,_,S){var P=tn(x)?Dt:Gt.current;return P=at(f,P),lh(f,S),x=vw(d,f,x,_,P,S),_=xw(),d!==null&&!Xs?(f.updateQueue=d.updateQueue,f.flags&=-2053,d.lanes&=~S,ra(d,f,S)):(Tn&&_&&cw(f),f.flags|=1,ds(d,f,x,S),f.child)}function hB(d,f,x,_,S){if(tn(x)){var P=!0;wi(f)}else P=!1;if(lh(f,S),f.stateNode===null)d!==null&&(d.alternate=null,f.alternate=null,f.flags|=2),CT(f,x,_),lw(f,x,_,S),_=!0;else if(d===null){var z=f.stateNode,Y=f.memoizedProps;z.props=Y;var de=z.context,Te=x.contextType;typeof Te=="object"&&Te!==null?Te=Ar(Te):(Te=tn(x)?Dt:Gt.current,Te=at(f,Te));var $e=x.getDerivedStateFromProps,St=typeof $e=="function"||typeof z.getSnapshotBeforeUpdate=="function";St||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(Y!==_||de!==Te)&&ST(f,z,_,Te),el=!1;var pt=f.memoizedState;z.state=pt,aA(f,_,z,S),de=f.memoizedState,Y!==_||pt!==de||zt.current||el?(typeof $e=="function"&&(aw(f,x,$e,_),de=f.memoizedState),(Y=el||_T(f,x,Y,_,pt,de,Te))?(St||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount()),typeof z.componentDidMount=="function"&&(f.flags|=4194308)):(typeof z.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=_,f.memoizedState=de),z.props=_,z.state=de,z.context=Te,_=Y):(typeof z.componentDidMount=="function"&&(f.flags|=4194308),_=!1)}else{z=f.stateNode,xT(d,f),Y=f.memoizedProps,Te=f.type===f.elementType?Y:jr(f.type,Y),z.props=Te,St=f.pendingProps,pt=z.context,de=x.contextType,typeof de=="object"&&de!==null?de=Ar(de):(de=tn(x)?Dt:Gt.current,de=at(f,de));var An=x.getDerivedStateFromProps;($e=typeof An=="function"||typeof z.getSnapshotBeforeUpdate=="function")||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(Y!==St||pt!==de)&&ST(f,z,_,de),el=!1,pt=f.memoizedState,z.state=pt,aA(f,_,z,S);var ct=f.memoizedState;Y!==St||pt!==ct||zt.current||el?(typeof An=="function"&&(aw(f,x,An,_),ct=f.memoizedState),(Te=el||_T(f,x,Te,_,pt,ct,de)||!1)?($e||typeof z.UNSAFE_componentWillUpdate!="function"&&typeof z.componentWillUpdate!="function"||(typeof z.componentWillUpdate=="function"&&z.componentWillUpdate(_,ct,de),typeof z.UNSAFE_componentWillUpdate=="function"&&z.UNSAFE_componentWillUpdate(_,ct,de)),typeof z.componentDidUpdate=="function"&&(f.flags|=4),typeof z.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof z.componentDidUpdate!="function"||Y===d.memoizedProps&&pt===d.memoizedState||(f.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||Y===d.memoizedProps&&pt===d.memoizedState||(f.flags|=1024),f.memoizedProps=_,f.memoizedState=ct),z.props=_,z.state=ct,z.context=de,_=Te):(typeof z.componentDidUpdate!="function"||Y===d.memoizedProps&&pt===d.memoizedState||(f.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||Y===d.memoizedProps&&pt===d.memoizedState||(f.flags|=1024),_=!1)}return Mw(d,f,x,_,P,S)}function Mw(d,f,x,_,S,P){uB(d,f);var z=(f.flags&128)!==0;if(!_&&!z)return S&&Ya(f,x,!1),ra(d,f,P);_=f.stateNode,UQ.current=f;var Y=z&&typeof x.getDerivedStateFromError!="function"?null:_.render();return f.flags|=1,d!==null&&z?(f.child=dh(f,d.child,null,P),f.child=dh(f,null,Y,P)):ds(d,f,Y,P),f.memoizedState=_.state,S&&Ya(f,x,!0),f.child}function dB(d){var f=d.stateNode;f.pendingContext?Bs(d,f.pendingContext,f.pendingContext!==f.context):f.context&&Bs(d,f.context,!1),pw(d,f.containerInfo)}function fB(d,f,x,_,S){return hh(),fw(S),f.flags|=256,ds(d,f,x,_),f.child}var wA={dehydrated:null,treeContext:null,retryLane:0};function EA(d){return{baseLanes:d,cachePool:null}}function pB(d,f,x){var _=f.pendingProps,S=Dn.current,P=!1,z=(f.flags&128)!==0,Y;if((Y=z)||(Y=d!==null&&d.memoizedState===null?!1:(S&2)!==0),Y?(P=!0,f.flags&=-129):(d===null||d.memoizedState!==null)&&(S|=1),rt(Dn,S&1),d===null)return dw(f),d=f.memoizedState,d!==null&&(d=d.dehydrated,d!==null)?(f.mode&1?mc(d)?f.lanes=8:f.lanes=1073741824:f.lanes=1,null):(S=_.children,d=_.fallback,P?(_=f.mode,P=f.child,S={mode:"hidden",children:S},!(_&1)&&P!==null?(P.childLanes=0,P.pendingProps=S):P=HA(S,_,0,null),d=_c(d,_,x,null),P.return=f,d.return=f,P.sibling=d,f.child=P,f.child.memoizedState=EA(x),f.memoizedState=wA,d):Iw(f,S));if(S=d.memoizedState,S!==null){if(Y=S.dehydrated,Y!==null){if(z)return f.flags&256?(f.flags&=-257,_A(d,f,x,Error(o(422)))):f.memoizedState!==null?(f.child=d.child,f.flags|=128,null):(P=_.fallback,S=f.mode,_=HA({mode:"visible",children:_.children},S,0,null),P=_c(P,S,x,null),P.flags|=2,_.return=f,P.return=f,_.sibling=P,f.child=_,f.mode&1&&dh(f,d.child,null,x),f.child.memoizedState=EA(x),f.memoizedState=wA,P);if(!(f.mode&1))f=_A(d,f,x,null);else if(mc(Y))f=_A(d,f,x,Error(o(419)));else if(_=(x&d.childLanes)!==0,Xs||_){if(_=ii,_!==null){switch(x&-x){case 4:P=2;break;case 16:P=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:P=32;break;case 536870912:P=268435456;break;default:P=0}_=P&(_.suspendedLanes|x)?0:P,_!==0&&_!==S.retryLane&&(S.retryLane=_,wr(d,_,-1))}Jw(),f=_A(d,f,x,Error(o(421)))}else Eo(Y)?(f.flags|=128,f.child=d.child,f=YQ.bind(null,d),Xg(Y,f),f=null):(x=S.treeContext,be&&(Js=oh(Y),qs=f,Tn=!0,Wr=null,Qf=!1,x!==null&&(yr[vr++]=na,yr[vr++]=ia,yr[vr++]=gc,na=x.id,ia=x.overflow,gc=f)),f=Iw(f,f.pendingProps.children),f.flags|=4096);return f}return P?(_=gB(d,f,_.children,_.fallback,x),P=f.child,S=d.child.memoizedState,P.memoizedState=S===null?EA(x):{baseLanes:S.baseLanes|x,cachePool:null},P.childLanes=d.childLanes&~x,f.memoizedState=wA,_):(x=mB(d,f,_.children,x),f.memoizedState=null,x)}return P?(_=gB(d,f,_.children,_.fallback,x),P=f.child,S=d.child.memoizedState,P.memoizedState=S===null?EA(x):{baseLanes:S.baseLanes|x,cachePool:null},P.childLanes=d.childLanes&~x,f.memoizedState=wA,_):(x=mB(d,f,_.children,x),f.memoizedState=null,x)}function Iw(d,f){return f=HA({mode:"visible",children:f},d.mode,0,null),f.return=d,d.child=f}function mB(d,f,x,_){var S=d.child;return d=S.sibling,x=ol(S,{mode:"visible",children:x}),!(f.mode&1)&&(x.lanes=_),x.return=f,x.sibling=null,d!==null&&(_=f.deletions,_===null?(f.deletions=[d],f.flags|=16):_.push(d)),f.child=x}function gB(d,f,x,_,S){var P=f.mode;d=d.child;var z=d.sibling,Y={mode:"hidden",children:x};return!(P&1)&&f.child!==d?(x=f.child,x.childLanes=0,x.pendingProps=Y,f.deletions=null):(x=ol(d,Y),x.subtreeFlags=d.subtreeFlags&14680064),z!==null?_=ol(z,_):(_=_c(_,P,S,null),_.flags|=2),_.return=f,x.return=f,x.sibling=_,f.child=x,_}function _A(d,f,x,_){return _!==null&&fw(_),dh(f,d.child,null,x),d=Iw(f,f.pendingProps.children),d.flags|=2,f.memoizedState=null,d}function AB(d,f,x){d.lanes|=f;var _=d.alternate;_!==null&&(_.lanes|=f),rw(d.return,f,x)}function Tw(d,f,x,_,S){var P=d.memoizedState;P===null?d.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:_,tail:x,tailMode:S}:(P.isBackwards=f,P.rendering=null,P.renderingStartTime=0,P.last=_,P.tail=x,P.tailMode=S)}function yB(d,f,x){var _=f.pendingProps,S=_.revealOrder,P=_.tail;if(ds(d,f,_.children,x),_=Dn.current,_&2)_=_&1|2,f.flags|=128;else{if(d!==null&&d.flags&128)e:for(d=f.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&AB(d,x,f);else if(d.tag===19)AB(d,x,f);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===f)break e;for(;d.sibling===null;){if(d.return===null||d.return===f)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}_&=1}if(rt(Dn,_),!(f.mode&1))f.memoizedState=null;else switch(S){case"forwards":for(x=f.child,S=null;x!==null;)d=x.alternate,d!==null&&dA(d)===null&&(S=x),x=x.sibling;x=S,x===null?(S=f.child,f.child=null):(S=x.sibling,x.sibling=null),Tw(f,!1,S,x,P);break;case"backwards":for(x=null,S=f.child,f.child=null;S!==null;){if(d=S.alternate,d!==null&&dA(d)===null){f.child=S;break}d=S.sibling,S.sibling=x,x=S,S=d}Tw(f,!0,x,null,P);break;case"together":Tw(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function ra(d,f,x){if(d!==null&&(f.dependencies=d.dependencies),Ah|=f.lanes,!(x&f.childLanes))return null;if(d!==null&&f.child!==d.child)throw Error(o(153));if(f.child!==null){for(d=f.child,x=ol(d,d.pendingProps),f.child=x,x.return=f;d.sibling!==null;)d=d.sibling,x=x.sibling=ol(d,d.pendingProps),x.return=f;x.sibling=null}return f.child}function GQ(d,f,x){switch(f.tag){case 3:dB(f),hh();break;case 5:LT(f);break;case 1:tn(f.type)&&wi(f);break;case 4:pw(f,f.stateNode.containerInfo);break;case 10:vT(f,f.type._context,f.memoizedProps.value);break;case 13:var _=f.memoizedState;if(_!==null)return _.dehydrated!==null?(rt(Dn,Dn.current&1),f.flags|=128,null):x&f.child.childLanes?pB(d,f,x):(rt(Dn,Dn.current&1),d=ra(d,f,x),d!==null?d.sibling:null);rt(Dn,Dn.current&1);break;case 19:if(_=(x&f.childLanes)!==0,d.flags&128){if(_)return yB(d,f,x);f.flags|=128}var S=f.memoizedState;if(S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),rt(Dn,Dn.current),_)break;return null;case 22:case 23:return f.lanes=0,cB(d,f,x)}return ra(d,f,x)}function zQ(d,f){switch(uw(f),f.tag){case 1:return tn(f.type)&&$t(),d=f.flags,d&65536?(f.flags=d&-65537|128,f):null;case 3:return ph(),De(zt),De(Gt),Aw(),d=f.flags,d&65536&&!(d&128)?(f.flags=d&-65537|128,f):null;case 5:return mw(f),null;case 13:if(De(Dn),d=f.memoizedState,d!==null&&d.dehydrated!==null){if(f.alternate===null)throw Error(o(340));hh()}return d=f.flags,d&65536?(f.flags=d&-65537|128,f):null;case 19:return De(Dn),null;case 4:return ph(),null;case 10:return sw(f.type._context),null;case 22:case 23:return qw(),null;case 24:return null;default:return null}}var CA=!1,vc=!1,QQ=typeof WeakSet=="function"?WeakSet:Set,Ue=null;function SA(d,f){var x=d.ref;if(x!==null)if(typeof x=="function")try{x(null)}catch(_){ks(d,f,_)}else x.current=null}function Bw(d,f,x){try{x()}catch(_){ks(d,f,_)}}var vB=!1;function HQ(d,f){for(V(d.containerInfo),Ue=f;Ue!==null;)if(d=Ue,f=d.child,(d.subtreeFlags&1028)!==0&&f!==null)f.return=d,Ue=f;else for(;Ue!==null;){d=Ue;try{var x=d.alternate;if(d.flags&1024)switch(d.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var _=x.memoizedProps,S=x.memoizedState,P=d.stateNode,z=P.getSnapshotBeforeUpdate(d.elementType===d.type?_:jr(d.type,_),S);P.__reactInternalSnapshotBeforeUpdate=z}break;case 3:dt&&xe(d.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(Y){ks(d,d.return,Y)}if(f=d.sibling,f!==null){f.return=d.return,Ue=f;break}Ue=d.return}return x=vB,vB=!1,x}function xc(d,f,x){var _=f.updateQueue;if(_=_!==null?_.lastEffect:null,_!==null){var S=_=_.next;do{if((S.tag&d)===d){var P=S.destroy;S.destroy=void 0,P!==void 0&&Bw(f,x,P)}S=S.next}while(S!==_)}}function ep(d,f){if(f=f.updateQueue,f=f!==null?f.lastEffect:null,f!==null){var x=f=f.next;do{if((x.tag&d)===d){var _=x.create;x.destroy=_()}x=x.next}while(x!==f)}}function Rw(d){var f=d.ref;if(f!==null){var x=d.stateNode;switch(d.tag){case 5:d=J(x);break;default:d=x}typeof f=="function"?f(d):f.current=d}}function xB(d,f,x){if(_o&&typeof _o.onCommitFiberUnmount=="function")try{_o.onCommitFiberUnmount(tA,f)}catch{}switch(f.tag){case 0:case 11:case 14:case 15:if(d=f.updateQueue,d!==null&&(d=d.lastEffect,d!==null)){var _=d=d.next;do{var S=_,P=S.destroy;S=S.tag,P!==void 0&&(S&2||S&4)&&Bw(f,x,P),_=_.next}while(_!==d)}break;case 1:if(SA(f,x),d=f.stateNode,typeof d.componentWillUnmount=="function")try{d.props=f.memoizedProps,d.state=f.memoizedState,d.componentWillUnmount()}catch(z){ks(f,x,z)}break;case 5:SA(f,x);break;case 4:dt?SB(d,f,x):Ae&&Ae&&(f=f.stateNode.containerInfo,x=Ge(f),di(f,x))}}function bB(d,f,x){for(var _=f;;)if(xB(d,_,x),_.child===null||dt&&_.tag===4){if(_===f)break;for(;_.sibling===null;){if(_.return===null||_.return===f)return;_=_.return}_.sibling.return=_.return,_=_.sibling}else _.child.return=_,_=_.child}function wB(d){var f=d.alternate;f!==null&&(d.alternate=null,wB(f)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(f=d.stateNode,f!==null&&Ve(f)),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}function EB(d){return d.tag===5||d.tag===3||d.tag===4}function _B(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||EB(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function CB(d){if(dt){e:{for(var f=d.return;f!==null;){if(EB(f))break e;f=f.return}throw Error(o(160))}var x=f;switch(x.tag){case 5:f=x.stateNode,x.flags&32&&(Ct(f),x.flags&=-33),x=_B(d),Pw(d,x,f);break;case 3:case 4:f=x.stateNode.containerInfo,x=_B(d),Dw(d,x,f);break;default:throw Error(o(161))}}}function Dw(d,f,x){var _=d.tag;if(_===5||_===6)d=d.stateNode,f?vt(x,d,f):He(x,d);else if(_!==4&&(d=d.child,d!==null))for(Dw(d,f,x),d=d.sibling;d!==null;)Dw(d,f,x),d=d.sibling}function Pw(d,f,x){var _=d.tag;if(_===5||_===6)d=d.stateNode,f?mt(x,d,f):Ne(x,d);else if(_!==4&&(d=d.child,d!==null))for(Pw(d,f,x),d=d.sibling;d!==null;)Pw(d,f,x),d=d.sibling}function SB(d,f,x){for(var _=f,S=!1,P,z;;){if(!S){S=_.return;e:for(;;){if(S===null)throw Error(o(160));switch(P=S.stateNode,S.tag){case 5:z=!1;break e;case 3:P=P.containerInfo,z=!0;break e;case 4:P=P.containerInfo,z=!0;break e}S=S.return}S=!0}if(_.tag===5||_.tag===6)bB(d,_,x),z?Jt(P,_.stateNode):Ke(P,_.stateNode);else if(_.tag===18)z?Jb(P,_.stateNode):qb(P,_.stateNode);else if(_.tag===4){if(_.child!==null){P=_.stateNode.containerInfo,z=!0,_.child.return=_,_=_.child;continue}}else if(xB(d,_,x),_.child!==null){_.child.return=_,_=_.child;continue}if(_===f)break;for(;_.sibling===null;){if(_.return===null||_.return===f)return;_=_.return,_.tag===4&&(S=!1)}_.sibling.return=_.return,_=_.sibling}}function Lw(d,f){if(dt){switch(f.tag){case 0:case 11:case 14:case 15:xc(3,f,f.return),ep(3,f),xc(5,f,f.return);return;case 1:return;case 5:var x=f.stateNode;if(x!=null){var _=f.memoizedProps;d=d!==null?d.memoizedProps:_;var S=f.type,P=f.updateQueue;f.updateQueue=null,P!==null&&Xe(x,P,S,d,_,f)}return;case 6:if(f.stateNode===null)throw Error(o(162));x=f.memoizedProps,Ut(f.stateNode,d!==null?d.memoizedProps:x,x);return;case 3:be&&d!==null&&d.memoizedState.isDehydrated&&Zg(f.stateNode.containerInfo);return;case 12:return;case 13:MA(f);return;case 19:MA(f);return;case 17:return}throw Error(o(163))}switch(f.tag){case 0:case 11:case 14:case 15:xc(3,f,f.return),ep(3,f),xc(5,f,f.return);return;case 12:return;case 13:MA(f);return;case 19:MA(f);return;case 3:be&&d!==null&&d.memoizedState.isDehydrated&&Zg(f.stateNode.containerInfo);break;case 22:case 23:return}e:if(Ae){switch(f.tag){case 1:case 5:case 6:break e;case 3:case 4:f=f.stateNode,di(f.containerInfo,f.pendingChildren);break e}throw Error(o(163))}}function MA(d){var f=d.updateQueue;if(f!==null){d.updateQueue=null;var x=d.stateNode;x===null&&(x=d.stateNode=new QQ),f.forEach(function(_){var S=ZQ.bind(null,d,_);x.has(_)||(x.add(_),_.then(S,S))})}}function VQ(d,f){for(Ue=f;Ue!==null;){f=Ue;var x=f.deletions;if(x!==null)for(var _=0;_<x.length;_++){var S=x[_];try{var P=d;dt?SB(P,S,f):bB(P,S,f);var z=S.alternate;z!==null&&(z.return=null),S.return=null}catch(lt){ks(S,f,lt)}}if(x=f.child,f.subtreeFlags&12854&&x!==null)x.return=f,Ue=x;else for(;Ue!==null;){f=Ue;try{var Y=f.flags;if(Y&32&&dt&&Ct(f.stateNode),Y&512){var de=f.alternate;if(de!==null){var Te=de.ref;Te!==null&&(typeof Te=="function"?Te(null):Te.current=null)}}if(Y&8192)switch(f.tag){case 13:if(f.memoizedState!==null){var $e=f.alternate;($e===null||$e.memoizedState===null)&&(zw=Ei())}break;case 22:var St=f.memoizedState!==null,pt=f.alternate,An=pt!==null&&pt.memoizedState!==null;if(x=f,dt){e:if(_=x,S=St,P=null,dt)for(var ct=_;;){if(ct.tag===5){if(P===null){P=ct;var Wi=ct.stateNode;S?pn(Wi):Oe(ct.stateNode,ct.memoizedProps)}}else if(ct.tag===6){if(P===null){var _r=ct.stateNode;S?Z(_r):fe(_r,ct.memoizedProps)}}else if((ct.tag!==22&&ct.tag!==23||ct.memoizedState===null||ct===_)&&ct.child!==null){ct.child.return=ct,ct=ct.child;continue}if(ct===_)break;for(;ct.sibling===null;){if(ct.return===null||ct.return===_)break e;P===ct&&(P=null),ct=ct.return}P===ct&&(P=null),ct.sibling.return=ct.return,ct=ct.sibling}}if(St&&!An&&x.mode&1){Ue=x;for(var oe=x.child;oe!==null;){for(x=Ue=oe;Ue!==null;){_=Ue;var ie=_.child;switch(_.tag){case 0:case 11:case 14:case 15:xc(4,_,_.return);break;case 1:SA(_,_.return);var he=_.stateNode;if(typeof he.componentWillUnmount=="function"){var ze=_.return;try{he.props=_.memoizedProps,he.state=_.memoizedState,he.componentWillUnmount()}catch(lt){ks(_,ze,lt)}}break;case 5:SA(_,_.return);break;case 22:if(_.memoizedState!==null){TB(x);continue}}ie!==null?(ie.return=_,Ue=ie):TB(x)}oe=oe.sibling}}}switch(Y&4102){case 2:CB(f),f.flags&=-3;break;case 6:CB(f),f.flags&=-3,Lw(f.alternate,f);break;case 4096:f.flags&=-4097;break;case 4100:f.flags&=-4097,Lw(f.alternate,f);break;case 4:Lw(f.alternate,f)}}catch(lt){ks(f,f.return,lt)}if(x=f.sibling,x!==null){x.return=f.return,Ue=x;break}Ue=f.return}}}function jQ(d,f,x){Ue=d,MB(d)}function MB(d,f,x){for(var _=(d.mode&1)!==0;Ue!==null;){var S=Ue,P=S.child;if(S.tag===22&&_){var z=S.memoizedState!==null||CA;if(!z){var Y=S.alternate,de=Y!==null&&Y.memoizedState!==null||vc;Y=CA;var Te=vc;if(CA=z,(vc=de)&&!Te)for(Ue=S;Ue!==null;)z=Ue,de=z.child,z.tag===22&&z.memoizedState!==null?BB(S):de!==null?(de.return=z,Ue=de):BB(S);for(;P!==null;)Ue=P,MB(P),P=P.sibling;Ue=S,CA=Y,vc=Te}IB(d)}else S.subtreeFlags&8772&&P!==null?(P.return=S,Ue=P):IB(d)}}function IB(d){for(;Ue!==null;){var f=Ue;if(f.flags&8772){var x=f.alternate;try{if(f.flags&8772)switch(f.tag){case 0:case 11:case 15:vc||ep(5,f);break;case 1:var _=f.stateNode;if(f.flags&4&&!vc)if(x===null)_.componentDidMount();else{var S=f.elementType===f.type?x.memoizedProps:jr(f.type,x.memoizedProps);_.componentDidUpdate(S,x.memoizedState,_.__reactInternalSnapshotBeforeUpdate)}var P=f.updateQueue;P!==null&&wT(f,P,_);break;case 3:var z=f.updateQueue;if(z!==null){if(x=null,f.child!==null)switch(f.child.tag){case 5:x=J(f.child.stateNode);break;case 1:x=f.child.stateNode}wT(f,z,x)}break;case 5:var Y=f.stateNode;x===null&&f.flags&4&&Ie(Y,f.type,f.memoizedProps,f);break;case 6:break;case 4:break;case 12:break;case 13:if(be&&f.memoizedState===null){var de=f.alternate;if(de!==null){var Te=de.memoizedState;if(Te!==null){var $e=Te.dehydrated;$e!==null&&Wb($e)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}vc||f.flags&512&&Rw(f)}catch(St){ks(f,f.return,St)}}if(f===d){Ue=null;break}if(x=f.sibling,x!==null){x.return=f.return,Ue=x;break}Ue=f.return}}function TB(d){for(;Ue!==null;){var f=Ue;if(f===d){Ue=null;break}var x=f.sibling;if(x!==null){x.return=f.return,Ue=x;break}Ue=f.return}}function BB(d){for(;Ue!==null;){var f=Ue;try{switch(f.tag){case 0:case 11:case 15:var x=f.return;try{ep(4,f)}catch(de){ks(f,x,de)}break;case 1:var _=f.stateNode;if(typeof _.componentDidMount=="function"){var S=f.return;try{_.componentDidMount()}catch(de){ks(f,S,de)}}var P=f.return;try{Rw(f)}catch(de){ks(f,P,de)}break;case 5:var z=f.return;try{Rw(f)}catch(de){ks(f,z,de)}}}catch(de){ks(f,f.return,de)}if(f===d){Ue=null;break}var Y=f.sibling;if(Y!==null){Y.return=f.return,Ue=Y;break}Ue=f.return}}var IA=0,TA=1,BA=2,RA=3,DA=4;if(typeof Symbol=="function"&&Symbol.for){var tp=Symbol.for;IA=tp("selector.component"),TA=tp("selector.has_pseudo_class"),BA=tp("selector.role"),RA=tp("selector.test_id"),DA=tp("selector.text")}function kw(d){var f=G(d);if(f!=null){if(typeof f.memoizedProps["data-testname"]!="string")throw Error(o(364));return f}if(d=U(d),d===null)throw Error(o(362));return d.stateNode.current}function Fw(d,f){switch(f.$$typeof){case IA:if(d.type===f.value)return!0;break;case TA:e:{f=f.value,d=[d,0];for(var x=0;x<d.length;){var _=d[x++],S=d[x++],P=f[S];if(_.tag!==5||!pe(_)){for(;P!=null&&Fw(_,P);)S++,P=f[S];if(S===f.length){f=!0;break e}else for(_=_.child;_!==null;)d.push(_,S),_=_.sibling}}f=!1}return f;case BA:if(d.tag===5&&we(d.stateNode,f.value))return!0;break;case DA:if((d.tag===5||d.tag===6)&&(d=re(d),d!==null&&0<=d.indexOf(f.value)))return!0;break;case RA:if(d.tag===5&&(d=d.memoizedProps["data-testname"],typeof d=="string"&&d.toLowerCase()===f.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function Nw(d){switch(d.$$typeof){case IA:return"<"+(D(d.value)||"Unknown")+">";case TA:return":has("+(Nw(d)||"")+")";case BA:return'[role="'+d.value+'"]';case DA:return'"'+d.value+'"';case RA:return'[data-testname="'+d.value+'"]';default:throw Error(o(365))}}function RB(d,f){var x=[];d=[d,0];for(var _=0;_<d.length;){var S=d[_++],P=d[_++],z=f[P];if(S.tag!==5||!pe(S)){for(;z!=null&&Fw(S,z);)P++,z=f[P];if(P===f.length)x.push(S);else for(S=S.child;S!==null;)d.push(S,P),S=S.sibling}}return x}function Ow(d,f){if(!Pe)throw Error(o(363));d=kw(d),d=RB(d,f),f=[],d=Array.from(d);for(var x=0;x<d.length;){var _=d[x++];if(_.tag===5)pe(_)||f.push(_.stateNode);else for(_=_.child;_!==null;)d.push(_),_=_.sibling}return f}var WQ=Math.ceil,PA=a.ReactCurrentDispatcher,Uw=a.ReactCurrentOwner,Kn=a.ReactCurrentBatchConfig,Ft=0,ii=null,si=null,Fi=0,Ks=0,gh=ht(0),pi=0,np=null,Ah=0,LA=0,Gw=0,ip=null,Ps=null,zw=0,Qw=1/0;function yh(){Qw=Ei()+500}var kA=!1,Hw=null,nl=null,FA=!1,il=null,NA=0,sp=0,Vw=null,OA=-1,UA=0;function fs(){return Ft&6?Ei():OA!==-1?OA:OA=Ei()}function sl(d){return d.mode&1?Ft&2&&Fi!==0?Fi&-Fi:IQ.transition!==null?(UA===0&&(d=fi,fi<<=1,!(fi&4194240)&&(fi=64),UA=d),UA):(d=nn,d!==0?d:Ce()):1}function wr(d,f,x){if(50<sp)throw sp=0,Vw=null,Error(o(185));var _=GA(d,f);return _===null?null:(zf(_,f,x),(!(Ft&2)||_!==ii)&&(_===ii&&(!(Ft&2)&&(LA|=f),pi===4&&rl(_,Fi)),Ls(_,x),f===1&&Ft===0&&!(d.mode&1)&&(yh(),nA&&So())),_)}function GA(d,f){d.lanes|=f;var x=d.alternate;for(x!==null&&(x.lanes|=f),x=d,d=d.return;d!==null;)d.childLanes|=f,x=d.alternate,x!==null&&(x.childLanes|=f),x=d,d=d.return;return x.tag===3?x.stateNode:null}function Ls(d,f){var x=d.callbackNode;vQ(d,f);var _=eA(d,d===ii?Fi:0);if(_===0)x!==null&&AT(x),d.callbackNode=null,d.callbackPriority=0;else if(f=_&-_,d.callbackPriority!==f){if(x!=null&&AT(x),f===1)d.tag===0?MQ(PB.bind(null,d)):yT(PB.bind(null,d)),Be?gt(function(){Ft===0&&So()}):Yb(Zb,So),x=null;else{switch(gT(_)){case 1:x=Zb;break;case 4:x=EQ;break;case 16:x=ew;break;case 536870912:x=_Q;break;default:x=ew}x=QB(x,DB.bind(null,d))}d.callbackPriority=f,d.callbackNode=x}}function DB(d,f){if(OA=-1,UA=0,Ft&6)throw Error(o(327));var x=d.callbackNode;if(Ec()&&d.callbackNode!==x)return null;var _=eA(d,d===ii?Fi:0);if(_===0)return null;if(_&30||_&d.expiredLanes||f)f=zA(d,_);else{f=_;var S=Ft;Ft|=2;var P=FB();(ii!==d||Fi!==f)&&(yh(),bc(d,f));do try{XQ();break}catch(Y){kB(d,Y)}while(1);iw(),PA.current=P,Ft=S,si!==null?f=0:(ii=null,Fi=0,f=pi)}if(f!==0){if(f===2&&(S=Xb(d),S!==0&&(_=S,f=jw(d,S))),f===1)throw x=np,bc(d,0),rl(d,_),Ls(d,Ei()),x;if(f===6)rl(d,_);else{if(S=d.current.alternate,!(_&30)&&!qQ(S)&&(f=zA(d,_),f===2&&(P=Xb(d),P!==0&&(_=P,f=jw(d,P))),f===1))throw x=np,bc(d,0),rl(d,_),Ls(d,Ei()),x;switch(d.finishedWork=S,d.finishedLanes=_,f){case 0:case 1:throw Error(o(345));case 2:wc(d,Ps);break;case 3:if(rl(d,_),(_&130023424)===_&&(f=zw+500-Ei(),10<f)){if(eA(d,0)!==0)break;if(S=d.suspendedLanes,(S&_)!==_){fs(),d.pingedLanes|=d.suspendedLanes&S;break}d.timeoutHandle=se(wc.bind(null,d,Ps),f);break}wc(d,Ps);break;case 4:if(rl(d,_),(_&4194240)===_)break;for(f=d.eventTimes,S=-1;0<_;){var z=31-Xt(_);P=1<<z,z=f[z],z>S&&(S=z),_&=~P}if(_=S,_=Ei()-_,_=(120>_?120:480>_?480:1080>_?1080:1920>_?1920:3e3>_?3e3:4320>_?4320:1960*WQ(_/1960))-_,10<_){d.timeoutHandle=se(wc.bind(null,d,Ps),_);break}wc(d,Ps);break;case 5:wc(d,Ps);break;default:throw Error(o(329))}}}return Ls(d,Ei()),d.callbackNode===x?DB.bind(null,d):null}function jw(d,f){var x=ip;return d.current.memoizedState.isDehydrated&&(bc(d,f).flags|=256),d=zA(d,f),d!==2&&(f=Ps,Ps=x,f!==null&&Ww(f)),d}function Ww(d){Ps===null?Ps=d:Ps.push.apply(Ps,d)}function qQ(d){for(var f=d;;){if(f.flags&16384){var x=f.updateQueue;if(x!==null&&(x=x.stores,x!==null))for(var _=0;_<x.length;_++){var S=x[_],P=S.getSnapshot;S=S.value;try{if(!Co(P(),S))return!1}catch{return!1}}}if(x=f.child,f.subtreeFlags&16384&&x!==null)x.return=f,f=x;else{if(f===d)break;for(;f.sibling===null;){if(f.return===null||f.return===d)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function rl(d,f){for(f&=~Gw,f&=~LA,d.suspendedLanes|=f,d.pingedLanes&=~f,d=d.expirationTimes;0<f;){var x=31-Xt(f),_=1<<x;d[x]=-1,f&=~_}}function PB(d){if(Ft&6)throw Error(o(327));Ec();var f=eA(d,0);if(!(f&1))return Ls(d,Ei()),null;var x=zA(d,f);if(d.tag!==0&&x===2){var _=Xb(d);_!==0&&(f=_,x=jw(d,_))}if(x===1)throw x=np,bc(d,0),rl(d,f),Ls(d,Ei()),x;if(x===6)throw Error(o(345));return d.finishedWork=d.current.alternate,d.finishedLanes=f,wc(d,Ps),Ls(d,Ei()),null}function LB(d){il!==null&&il.tag===0&&!(Ft&6)&&Ec();var f=Ft;Ft|=1;var x=Kn.transition,_=nn;try{if(Kn.transition=null,nn=1,d)return d()}finally{nn=_,Kn.transition=x,Ft=f,!(Ft&6)&&So()}}function qw(){Ks=gh.current,De(gh)}function bc(d,f){d.finishedWork=null,d.finishedLanes=0;var x=d.timeoutHandle;if(x!==qe&&(d.timeoutHandle=qe,Fe(x)),si!==null)for(x=si.return;x!==null;){var _=x;switch(uw(_),_.tag){case 1:_=_.type.childContextTypes,_!=null&&$t();break;case 3:ph(),De(zt),De(Gt),Aw();break;case 5:mw(_);break;case 4:ph();break;case 13:De(Dn);break;case 19:De(Dn);break;case 10:sw(_.type._context);break;case 22:case 23:qw()}x=x.return}if(ii=d,si=d=ol(d.current,null),Fi=Ks=f,pi=0,np=null,Gw=LA=Ah=0,Ps=ip=null,Mo!==null){for(f=0;f<Mo.length;f++)if(x=Mo[f],_=x.interleaved,_!==null){x.interleaved=null;var S=_.next,P=x.pending;if(P!==null){var z=P.next;P.next=S,_.next=z}x.pending=_}Mo=null}return d}function kB(d,f){do{var x=si;try{if(iw(),fA.current=vA,pA){for(var _=Hn.memoizedState;_!==null;){var S=_.queue;S!==null&&(S.pending=null),_=_.next}pA=!1}if(mh=0,_i=Hi=Hn=null,qf=!1,Jf=0,Uw.current=null,x===null||x.return===null){pi=1,np=f,si=null;break}e:{var P=d,z=x.return,Y=x,de=f;if(f=Fi,Y.flags|=32768,de!==null&&typeof de=="object"&&typeof de.then=="function"){var Te=de,$e=Y,St=$e.tag;if(!($e.mode&1)&&(St===0||St===11||St===15)){var pt=$e.alternate;pt?($e.updateQueue=pt.updateQueue,$e.memoizedState=pt.memoizedState,$e.lanes=pt.lanes):($e.updateQueue=null,$e.memoizedState=null)}var An=nB(z);if(An!==null){An.flags&=-257,iB(An,z,Y,P,f),An.mode&1&&tB(P,Te,f),f=An,de=Te;var ct=f.updateQueue;if(ct===null){var Wi=new Set;Wi.add(de),f.updateQueue=Wi}else ct.add(de);break e}else{if(!(f&1)){tB(P,Te,f),Jw();break e}de=Error(o(426))}}else if(Tn&&Y.mode&1){var _r=nB(z);if(_r!==null){!(_r.flags&65536)&&(_r.flags|=256),iB(_r,z,Y,P,f),fw(de);break e}}P=de,pi!==4&&(pi=2),ip===null?ip=[P]:ip.push(P),de=_w(de,Y),Y=z;do{switch(Y.tag){case 3:Y.flags|=65536,f&=-f,Y.lanes|=f;var oe=ZT(Y,de,f);bT(Y,oe);break e;case 1:P=de;var ie=Y.type,he=Y.stateNode;if(!(Y.flags&128)&&(typeof ie.getDerivedStateFromError=="function"||he!==null&&typeof he.componentDidCatch=="function"&&(nl===null||!nl.has(he)))){Y.flags|=65536,f&=-f,Y.lanes|=f;var ze=eB(Y,P,f);bT(Y,ze);break e}}Y=Y.return}while(Y!==null)}OB(x)}catch(lt){f=lt,si===x&&x!==null&&(si=x=x.return);continue}break}while(1)}function FB(){var d=PA.current;return PA.current=vA,d===null?vA:d}function Jw(){(pi===0||pi===3||pi===2)&&(pi=4),ii===null||!(Ah&268435455)&&!(LA&268435455)||rl(ii,Fi)}function zA(d,f){var x=Ft;Ft|=2;var _=FB();ii===d&&Fi===f||bc(d,f);do try{JQ();break}catch(S){kB(d,S)}while(1);if(iw(),Ft=x,PA.current=_,si!==null)throw Error(o(261));return ii=null,Fi=0,pi}function JQ(){for(;si!==null;)NB(si)}function XQ(){for(;si!==null&&!bQ();)NB(si)}function NB(d){var f=zB(d.alternate,d,Ks);d.memoizedProps=d.pendingProps,f===null?OB(d):si=f,Uw.current=null}function OB(d){var f=d;do{var x=f.alternate;if(d=f.return,f.flags&32768){if(x=zQ(x,f),x!==null){x.flags&=32767,si=x;return}if(d!==null)d.flags|=32768,d.subtreeFlags=0,d.deletions=null;else{pi=6,si=null;return}}else if(x=OQ(x,f,Ks),x!==null){si=x;return}if(f=f.sibling,f!==null){si=f;return}si=f=d}while(f!==null);pi===0&&(pi=5)}function wc(d,f){var x=nn,_=Kn.transition;try{Kn.transition=null,nn=1,KQ(d,f,x)}finally{Kn.transition=_,nn=x}return null}function KQ(d,f,x){do Ec();while(il!==null);if(Ft&6)throw Error(o(327));var _=d.finishedWork,S=d.finishedLanes;if(_===null)return null;if(d.finishedWork=null,d.finishedLanes=0,_===d.current)throw Error(o(177));d.callbackNode=null,d.callbackPriority=0;var P=_.lanes|_.childLanes;if(xQ(d,P),d===ii&&(si=ii=null,Fi=0),!(_.subtreeFlags&2064)&&!(_.flags&2064)||FA||(FA=!0,QB(ew,function(){return Ec(),null})),P=(_.flags&15990)!==0,_.subtreeFlags&15990||P){P=Kn.transition,Kn.transition=null;var z=nn;nn=1;var Y=Ft;Ft|=4,Uw.current=null,HQ(d,_),VQ(d,_),j(d.containerInfo),d.current=_,jQ(_),wQ(),Ft=Y,nn=z,Kn.transition=P}else d.current=_;if(FA&&(FA=!1,il=d,NA=S),P=d.pendingLanes,P===0&&(nl=null),CQ(_.stateNode),Ls(d,Ei()),f!==null)for(x=d.onRecoverableError,_=0;_<f.length;_++)x(f[_]);if(kA)throw kA=!1,d=Hw,Hw=null,d;return NA&1&&d.tag!==0&&Ec(),P=d.pendingLanes,P&1?d===Vw?sp++:(sp=0,Vw=d):sp=0,So(),null}function Ec(){if(il!==null){var d=gT(NA),f=Kn.transition,x=nn;try{if(Kn.transition=null,nn=16>d?16:d,il===null)var _=!1;else{if(d=il,il=null,NA=0,Ft&6)throw Error(o(331));var S=Ft;for(Ft|=4,Ue=d.current;Ue!==null;){var P=Ue,z=P.child;if(Ue.flags&16){var Y=P.deletions;if(Y!==null){for(var de=0;de<Y.length;de++){var Te=Y[de];for(Ue=Te;Ue!==null;){var $e=Ue;switch($e.tag){case 0:case 11:case 15:xc(8,$e,P)}var St=$e.child;if(St!==null)St.return=$e,Ue=St;else for(;Ue!==null;){$e=Ue;var pt=$e.sibling,An=$e.return;if(wB($e),$e===Te){Ue=null;break}if(pt!==null){pt.return=An,Ue=pt;break}Ue=An}}}var ct=P.alternate;if(ct!==null){var Wi=ct.child;if(Wi!==null){ct.child=null;do{var _r=Wi.sibling;Wi.sibling=null,Wi=_r}while(Wi!==null)}}Ue=P}}if(P.subtreeFlags&2064&&z!==null)z.return=P,Ue=z;else e:for(;Ue!==null;){if(P=Ue,P.flags&2048)switch(P.tag){case 0:case 11:case 15:xc(9,P,P.return)}var oe=P.sibling;if(oe!==null){oe.return=P.return,Ue=oe;break e}Ue=P.return}}var ie=d.current;for(Ue=ie;Ue!==null;){z=Ue;var he=z.child;if(z.subtreeFlags&2064&&he!==null)he.return=z,Ue=he;else e:for(z=ie;Ue!==null;){if(Y=Ue,Y.flags&2048)try{switch(Y.tag){case 0:case 11:case 15:ep(9,Y)}}catch(lt){ks(Y,Y.return,lt)}if(Y===z){Ue=null;break e}var ze=Y.sibling;if(ze!==null){ze.return=Y.return,Ue=ze;break e}Ue=Y.return}}if(Ft=S,So(),_o&&typeof _o.onPostCommitFiberRoot=="function")try{_o.onPostCommitFiberRoot(tA,d)}catch{}_=!0}return _}finally{nn=x,Kn.transition=f}}return!1}function UB(d,f,x){f=_w(x,f),f=ZT(d,f,1),tl(d,f),f=fs(),d=GA(d,1),d!==null&&(zf(d,1,f),Ls(d,f))}function ks(d,f,x){if(d.tag===3)UB(d,d,x);else for(;f!==null;){if(f.tag===3){UB(f,d,x);break}else if(f.tag===1){var _=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof _.componentDidCatch=="function"&&(nl===null||!nl.has(_))){d=_w(x,d),d=eB(f,d,1),tl(f,d),d=fs(),f=GA(f,1),f!==null&&(zf(f,1,d),Ls(f,d));break}}f=f.return}}function $Q(d,f,x){var _=d.pingCache;_!==null&&_.delete(f),f=fs(),d.pingedLanes|=d.suspendedLanes&x,ii===d&&(Fi&x)===x&&(pi===4||pi===3&&(Fi&130023424)===Fi&&500>Ei()-zw?bc(d,0):Gw|=x),Ls(d,f)}function GB(d,f){f===0&&(d.mode&1?(f=Za,Za<<=1,!(Za&130023424)&&(Za=4194304)):f=1);var x=fs();d=GA(d,f),d!==null&&(zf(d,f,x),Ls(d,x))}function YQ(d){var f=d.memoizedState,x=0;f!==null&&(x=f.retryLane),GB(d,x)}function ZQ(d,f){var x=0;switch(d.tag){case 13:var _=d.stateNode,S=d.memoizedState;S!==null&&(x=S.retryLane);break;case 19:_=d.stateNode;break;default:throw Error(o(314))}_!==null&&_.delete(f),GB(d,x)}var zB;zB=function(d,f,x){if(d!==null)if(d.memoizedProps!==f.pendingProps||zt.current)Xs=!0;else{if(!(d.lanes&x)&&!(f.flags&128))return Xs=!1,GQ(d,f,x);Xs=!!(d.flags&131072)}else Xs=!1,Tn&&f.flags&1048576&&MT(f,uA,f.index);switch(f.lanes=0,f.tag){case 2:var _=f.type;d!==null&&(d.alternate=null,f.alternate=null,f.flags|=2),d=f.pendingProps;var S=at(f,Gt.current);lh(f,x),S=vw(null,f,_,d,S,x);var P=xw();return f.flags|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0?(f.tag=1,f.memoizedState=null,f.updateQueue=null,tn(_)?(P=!0,wi(f)):P=!1,f.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,ow(f),S.updater=lA,f.stateNode=S,S._reactInternals=f,lw(f,_,d,x),f=Mw(null,f,_,!0,P,x)):(f.tag=0,Tn&&P&&cw(f),ds(null,f,S,x),f=f.child),f;case 16:_=f.elementType;e:{switch(d!==null&&(d.alternate=null,f.alternate=null,f.flags|=2),d=f.pendingProps,S=_._init,_=S(_._payload),f.type=_,S=f.tag=tH(_),d=jr(_,d),S){case 0:f=Sw(null,f,_,d,x);break e;case 1:f=hB(null,f,_,d,x);break e;case 11:f=oB(null,f,_,d,x);break e;case 14:f=aB(null,f,_,jr(_.type,d),x);break e}throw Error(o(306,_,""))}return f;case 0:return _=f.type,S=f.pendingProps,S=f.elementType===_?S:jr(_,S),Sw(d,f,_,S,x);case 1:return _=f.type,S=f.pendingProps,S=f.elementType===_?S:jr(_,S),hB(d,f,_,S,x);case 3:e:{if(dB(f),d===null)throw Error(o(387));_=f.pendingProps,P=f.memoizedState,S=P.element,xT(d,f),aA(f,_,null,x);var z=f.memoizedState;if(_=z.element,be&&P.isDehydrated)if(P={element:_,isDehydrated:!1,cache:z.cache,transitions:z.transitions},f.updateQueue.baseState=P,f.memoizedState=P,f.flags&256){S=Error(o(423)),f=fB(d,f,_,x,S);break e}else if(_!==S){S=Error(o(424)),f=fB(d,f,_,x,S);break e}else for(be&&(Js=Kg(f.stateNode.containerInfo),qs=f,Tn=!0,Wr=null,Qf=!1),x=PT(f,null,_,x),f.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(hh(),_===S){f=ra(d,f,x);break e}ds(d,f,_,x)}f=f.child}return f;case 5:return LT(f),d===null&&dw(f),_=f.type,S=f.pendingProps,P=d!==null?d.memoizedProps:null,z=S.children,ae(_,S)?z=null:P!==null&&ae(_,P)&&(f.flags|=32),uB(d,f),ds(d,f,z,x),f.child;case 6:return d===null&&dw(f),null;case 13:return pB(d,f,x);case 4:return pw(f,f.stateNode.containerInfo),_=f.pendingProps,d===null?f.child=dh(f,null,_,x):ds(d,f,_,x),f.child;case 11:return _=f.type,S=f.pendingProps,S=f.elementType===_?S:jr(_,S),oB(d,f,_,S,x);case 7:return ds(d,f,f.pendingProps,x),f.child;case 8:return ds(d,f,f.pendingProps.children,x),f.child;case 12:return ds(d,f,f.pendingProps.children,x),f.child;case 10:e:{if(_=f.type._context,S=f.pendingProps,P=f.memoizedProps,z=S.value,vT(f,_,z),P!==null)if(Co(P.value,z)){if(P.children===S.children&&!zt.current){f=ra(d,f,x);break e}}else for(P=f.child,P!==null&&(P.return=f);P!==null;){var Y=P.dependencies;if(Y!==null){z=P.child;for(var de=Y.firstContext;de!==null;){if(de.context===_){if(P.tag===1){de=ta(-1,x&-x),de.tag=2;var Te=P.updateQueue;if(Te!==null){Te=Te.shared;var $e=Te.pending;$e===null?de.next=de:(de.next=$e.next,$e.next=de),Te.pending=de}}P.lanes|=x,de=P.alternate,de!==null&&(de.lanes|=x),rw(P.return,x,f),Y.lanes|=x;break}de=de.next}}else if(P.tag===10)z=P.type===f.type?null:P.child;else if(P.tag===18){if(z=P.return,z===null)throw Error(o(341));z.lanes|=x,Y=z.alternate,Y!==null&&(Y.lanes|=x),rw(z,x,f),z=P.sibling}else z=P.child;if(z!==null)z.return=P;else for(z=P;z!==null;){if(z===f){z=null;break}if(P=z.sibling,P!==null){P.return=z.return,z=P;break}z=z.return}P=z}ds(d,f,S.children,x),f=f.child}return f;case 9:return S=f.type,_=f.pendingProps.children,lh(f,x),S=Ar(S),_=_(S),f.flags|=1,ds(d,f,_,x),f.child;case 14:return _=f.type,S=jr(_,f.pendingProps),S=jr(_.type,S),aB(d,f,_,S,x);case 15:return lB(d,f,f.type,f.pendingProps,x);case 17:return _=f.type,S=f.pendingProps,S=f.elementType===_?S:jr(_,S),d!==null&&(d.alternate=null,f.alternate=null,f.flags|=2),f.tag=1,tn(_)?(d=!0,wi(f)):d=!1,lh(f,x),CT(f,_,S),lw(f,_,S,x),Mw(null,f,_,!0,d,x);case 19:return yB(d,f,x);case 22:return cB(d,f,x)}throw Error(o(156,f.tag))};function QB(d,f){return Yb(d,f)}function eH(d,f,x,_){this.tag=d,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Er(d,f,x,_){return new eH(d,f,x,_)}function Xw(d){return d=d.prototype,!(!d||!d.isReactComponent)}function tH(d){if(typeof d=="function")return Xw(d)?1:0;if(d!=null){if(d=d.$$typeof,d===v)return 11;if(d===b)return 14}return 2}function ol(d,f){var x=d.alternate;return x===null?(x=Er(d.tag,f,d.key,d.mode),x.elementType=d.elementType,x.type=d.type,x.stateNode=d.stateNode,x.alternate=d,d.alternate=x):(x.pendingProps=f,x.type=d.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=d.flags&14680064,x.childLanes=d.childLanes,x.lanes=d.lanes,x.child=d.child,x.memoizedProps=d.memoizedProps,x.memoizedState=d.memoizedState,x.updateQueue=d.updateQueue,f=d.dependencies,x.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},x.sibling=d.sibling,x.index=d.index,x.ref=d.ref,x}function QA(d,f,x,_,S,P){var z=2;if(_=d,typeof d=="function")Xw(d)&&(z=1);else if(typeof d=="string")z=5;else e:switch(d){case u:return _c(x.children,S,P,f);case h:z=8,S|=8;break;case p:return d=Er(12,x,f,S|2),d.elementType=p,d.lanes=P,d;case y:return d=Er(13,x,f,S),d.elementType=y,d.lanes=P,d;case A:return d=Er(19,x,f,S),d.elementType=A,d.lanes=P,d;case E:return HA(x,S,P,f);default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case m:z=10;break e;case g:z=9;break e;case v:z=11;break e;case b:z=14;break e;case w:z=16,_=null;break e}throw Error(o(130,d==null?d:typeof d,""))}return f=Er(z,x,f,S),f.elementType=d,f.type=_,f.lanes=P,f}function _c(d,f,x,_){return d=Er(7,d,_,f),d.lanes=x,d}function HA(d,f,x,_){return d=Er(22,d,_,f),d.elementType=E,d.lanes=x,d.stateNode={},d}function Kw(d,f,x){return d=Er(6,d,null,f),d.lanes=x,d}function $w(d,f,x){return f=Er(4,d.children!==null?d.children:[],d.key,f),f.lanes=x,f.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},f}function nH(d,f,x,_,S){this.tag=f,this.containerInfo=d,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=qe,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Kb(0),this.expirationTimes=Kb(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kb(0),this.identifierPrefix=_,this.onRecoverableError=S,be&&(this.mutableSourceEagerHydrationData=null)}function HB(d,f,x,_,S,P,z,Y,de){return d=new nH(d,f,x,Y,de),f===1?(f=1,P===!0&&(f|=8)):f=0,P=Er(3,null,null,f),d.current=P,P.stateNode=d,P.memoizedState={element:_,isDehydrated:x,cache:null,transitions:null},ow(P),d}function VB(d){if(!d)return kt;d=d._reactInternals;e:{if(R(d)!==d||d.tag!==1)throw Error(o(170));var f=d;do{switch(f.tag){case 3:f=f.stateNode.context;break e;case 1:if(tn(f.type)){f=f.stateNode.__reactInternalMemoizedMergedChildContext;break e}}f=f.return}while(f!==null);throw Error(o(171))}if(d.tag===1){var x=d.type;if(tn(x))return Zo(d,x,f)}return f}function jB(d){var f=d._reactInternals;if(f===void 0)throw typeof d.render=="function"?Error(o(188)):(d=Object.keys(d).join(","),Error(o(268,d)));return d=H(f),d===null?null:d.stateNode}function WB(d,f){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var x=d.retryLane;d.retryLane=x!==0&&x<f?x:f}}function Yw(d,f){WB(d,f),(d=d.alternate)&&WB(d,f)}function iH(d){return d=H(d),d===null?null:d.stateNode}function sH(){return null}return t.attemptContinuousHydration=function(d){if(d.tag===13){var f=fs();wr(d,134217728,f),Yw(d,134217728)}},t.attemptHydrationAtCurrentPriority=function(d){if(d.tag===13){var f=fs(),x=sl(d);wr(d,x,f),Yw(d,x)}},t.attemptSynchronousHydration=function(d){switch(d.tag){case 3:var f=d.stateNode;if(f.current.memoizedState.isDehydrated){var x=Ws(f.pendingLanes);x!==0&&($b(f,x|1),Ls(f,Ei()),!(Ft&6)&&(yh(),So()))}break;case 13:var _=fs();LB(function(){return wr(d,1,_)}),Yw(d,1)}},t.batchedUpdates=function(d,f){var x=Ft;Ft|=1;try{return d(f)}finally{Ft=x,Ft===0&&(yh(),nA&&So())}},t.createComponentSelector=function(d){return{$$typeof:IA,value:d}},t.createContainer=function(d,f,x,_,S,P,z){return HB(d,f,!1,null,x,_,S,P,z)},t.createHasPseudoClassSelector=function(d){return{$$typeof:TA,value:d}},t.createHydrationContainer=function(d,f,x,_,S,P,z,Y,de){return d=HB(x,_,!0,d,S,P,z,Y,de),d.context=VB(null),x=d.current,_=fs(),S=sl(x),P=ta(_,S),P.callback=f??null,tl(x,P),d.current.lanes=S,zf(d,S,_),Ls(d,_),d},t.createPortal=function(d,f,x){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:_==null?null:""+_,children:d,containerInfo:f,implementation:x}},t.createRoleSelector=function(d){return{$$typeof:BA,value:d}},t.createTestNameSelector=function(d){return{$$typeof:RA,value:d}},t.createTextSelector=function(d){return{$$typeof:DA,value:d}},t.deferredUpdates=function(d){var f=nn,x=Kn.transition;try{return Kn.transition=null,nn=16,d()}finally{nn=f,Kn.transition=x}},t.discreteUpdates=function(d,f,x,_,S){var P=nn,z=Kn.transition;try{return Kn.transition=null,nn=1,d(f,x,_,S)}finally{nn=P,Kn.transition=z,Ft===0&&yh()}},t.findAllNodes=Ow,t.findBoundingRects=function(d,f){if(!Pe)throw Error(o(363));f=Ow(d,f),d=[];for(var x=0;x<f.length;x++)d.push(F(f[x]));for(f=d.length-1;0<f;f--){x=d[f];for(var _=x.x,S=_+x.width,P=x.y,z=P+x.height,Y=f-1;0<=Y;Y--)if(f!==Y){var de=d[Y],Te=de.x,$e=Te+de.width,St=de.y,pt=St+de.height;if(_>=Te&&P>=St&&S<=$e&&z<=pt){d.splice(f,1);break}else if(_!==Te||x.width!==de.width||pt<P||St>z){if(!(P!==St||x.height!==de.height||$e<_||Te>S)){Te>_&&(de.width+=Te-_,de.x=_),$e<S&&(de.width=S-Te),d.splice(f,1);break}}else{St>P&&(de.height+=St-P,de.y=P),pt<z&&(de.height=z-St),d.splice(f,1);break}}}return d},t.findHostInstance=jB,t.findHostInstanceWithNoPortals=function(d){return d=k(d),d=d!==null?W(d):null,d===null?null:d.stateNode},t.findHostInstanceWithWarning=function(d){return jB(d)},t.flushControlled=function(d){var f=Ft;Ft|=1;var x=Kn.transition,_=nn;try{Kn.transition=null,nn=1,d()}finally{nn=_,Kn.transition=x,Ft=f,Ft===0&&(yh(),So())}},t.flushPassiveEffects=Ec,t.flushSync=LB,t.focusWithin=function(d,f){if(!Pe)throw Error(o(363));for(d=kw(d),f=RB(d,f),f=Array.from(f),d=0;d<f.length;){var x=f[d++];if(!pe(x)){if(x.tag===5&&ye(x.stateNode))return!0;for(x=x.child;x!==null;)f.push(x),x=x.sibling}}return!1},t.getCurrentUpdatePriority=function(){return nn},t.getFindAllNodesFailureDescription=function(d,f){if(!Pe)throw Error(o(363));var x=0,_=[];d=[kw(d),0];for(var S=0;S<d.length;){var P=d[S++],z=d[S++],Y=f[z];if((P.tag!==5||!pe(P))&&(Fw(P,Y)&&(_.push(Nw(Y)),z++,z>x&&(x=z)),z<f.length))for(P=P.child;P!==null;)d.push(P,z),P=P.sibling}if(x<f.length){for(d=[];x<f.length;x++)d.push(Nw(f[x]));return`findAllNodes was able to match part of the selector:
  `+(_.join(" > ")+`

No matching component was found for:
  `)+d.join(" > ")}return null},t.getPublicRootInstance=function(d){if(d=d.current,!d.child)return null;switch(d.child.tag){case 5:return J(d.child.stateNode);default:return d.child.stateNode}},t.injectIntoDevTools=function(d){if(d={bundleType:d.bundleType,version:d.version,rendererPackageName:d.rendererPackageName,rendererConfig:d.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:iH,findFiberByHostInstance:d.findFiberByHostInstance||sH,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")d=!1;else{var f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(f.isDisabled||!f.supportsFiber)d=!0;else{try{tA=f.inject(d),_o=f}catch{}d=!!f.checkDCE}}return d},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(d,f,x,_){if(!Pe)throw Error(o(363));d=Ow(d,f);var S=it(d,x,_).disconnect;return{disconnect:function(){S()}}},t.registerMutableSourceForHydration=function(d,f){var x=f._getVersion;x=x(f._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[f,x]:d.mutableSourceEagerHydrationData.push(f,x)},t.runWithPriority=function(d,f){var x=nn;try{return nn=d,f()}finally{nn=x}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(d,f,x,_){var S=f.current,P=fs(),z=sl(S);return x=VB(x),f.context===null?f.context=x:f.pendingContext=x,f=ta(P,z),f.payload={element:d},_=_===void 0?null:_,_!==null&&(f.callback=_),tl(S,f),d=wr(S,z,P),d!==null&&oA(d,S,z),z},t};yG.exports=$J;var YJ=yG.exports;const ZJ=pN(YJ);var vG={exports:{}},xG={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(L,V){var j=L.length;L.push(V);e:for(;0<j;){var $=j-1>>>1,le=L[$];if(0<s(le,V))L[$]=V,L[j]=le,j=$;else break e}}function t(L){return L.length===0?null:L[0]}function i(L){if(L.length===0)return null;var V=L[0],j=L.pop();if(j!==V){L[0]=j;e:for(var $=0,le=L.length,ve=le>>>1;$<ve;){var q=2*($+1)-1,ae=L[q],ge=q+1,se=L[ge];if(0>s(ae,j))ge<le&&0>s(se,ae)?(L[$]=se,L[ge]=j,$=ge):(L[$]=ae,L[q]=j,$=q);else if(ge<le&&0>s(se,j))L[$]=se,L[ge]=j,$=ge;else break e}}return V}function s(L,V){var j=L.sortIndex-V.sortIndex;return j!==0?j:L.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,p=3,m=!1,g=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(L){for(var V=t(c);V!==null;){if(V.callback===null)i(c);else if(V.startTime<=L)i(c),V.sortIndex=V.expirationTime,e(l,V);else break;V=t(c)}}function E(L){if(v=!1,w(L),!g)if(t(l)!==null)g=!0,J(M);else{var V=t(c);V!==null&&K(E,V.startTime-L)}}function M(L,V){g=!1,v&&(v=!1,A(B),B=-1),m=!0;var j=p;try{for(w(V),h=t(l);h!==null&&(!(h.expirationTime>V)||L&&!k());){var $=h.callback;if(typeof $=="function"){h.callback=null,p=h.priorityLevel;var le=$(h.expirationTime<=V);V=n.unstable_now(),typeof le=="function"?h.callback=le:h===t(l)&&i(l),w(V)}else i(l);h=t(l)}if(h!==null)var ve=!0;else{var q=t(c);q!==null&&K(E,q.startTime-V),ve=!1}return ve}finally{h=null,p=j,m=!1}}var I=!1,D=null,B=-1,R=5,T=-1;function k(){return!(n.unstable_now()-T<R)}function H(){if(D!==null){var L=n.unstable_now();T=L;var V=!0;try{V=D(!0,L)}finally{V?Q():(I=!1,D=null)}}else I=!1}var Q;if(typeof b=="function")Q=function(){b(H)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,X=W.port2;W.port1.onmessage=H,Q=function(){X.postMessage(null)}}else Q=function(){y(H,0)};function J(L){D=L,I||(I=!0,Q())}function K(L,V){B=y(function(){L(n.unstable_now())},V)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(L){L.callback=null},n.unstable_continueExecution=function(){g||m||(g=!0,J(M))},n.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<L?Math.floor(1e3/L):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(L){switch(p){case 1:case 2:case 3:var V=3;break;default:V=p}var j=p;p=V;try{return L()}finally{p=j}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(L,V){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var j=p;p=L;try{return V()}finally{p=j}},n.unstable_scheduleCallback=function(L,V,j){var $=n.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?$+j:$):j=$,L){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=j+le,L={id:u++,callback:V,priorityLevel:L,startTime:j,expirationTime:le,sortIndex:-1},j>$?(L.sortIndex=j,e(c,L),t(l)===null&&L===t(c)&&(v?(A(B),B=-1):v=!0,K(E,j-$))):(L.sortIndex=le,e(l,L),g||m||(g=!0,J(M))),L},n.unstable_shouldYield=k,n.unstable_wrapCallback=function(L){var V=p;return function(){var j=p;p=V;try{return L.apply(this,arguments)}finally{p=j}}}})(xG);vG.exports=xG;var OD=vG.exports;const WI={},eX=n=>void Object.assign(WI,n);function tX(n,e){function t(u,{args:h=[],attach:p,...m},g){let v=`${u[0].toUpperCase()}${u.slice(1)}`,y;if(u==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const A=m.object;y=ld(A,{type:u,root:g,attach:p,primitive:!0})}else{const A=WI[v];if(!A)throw new Error(`R3F: ${v} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(h))throw new Error("R3F: The args prop must be an array!");y=ld(new A(...h),{type:u,root:g,attach:p,memoizedProps:{args:h}})}return y.__r3f.attach===void 0&&(y.isBufferGeometry?y.__r3f.attach="geometry":y.isMaterial&&(y.__r3f.attach="material")),v!=="inject"&&A_(y,m),y}function i(u,h){let p=!1;if(h){var m,g;(m=h.__r3f)!=null&&m.attach?g_(u,h,h.__r3f.attach):h.isObject3D&&u.isObject3D&&(u.add(h),p=!0),p||(g=u.__r3f)==null||g.objects.push(h),h.__r3f||ld(h,{}),h.__r3f.parent=u,I1(h),cd(h)}}function s(u,h,p){let m=!1;if(h){var g,v;if((g=h.__r3f)!=null&&g.attach)g_(u,h,h.__r3f.attach);else if(h.isObject3D&&u.isObject3D){h.parent=u,h.dispatchEvent({type:"added"}),u.dispatchEvent({type:"childadded",child:h});const y=u.children.filter(b=>b!==h),A=y.indexOf(p);u.children=[...y.slice(0,A),h,...y.slice(A)],m=!0}m||(v=u.__r3f)==null||v.objects.push(h),h.__r3f||ld(h,{}),h.__r3f.parent=u,I1(h),cd(h)}}function r(u,h,p=!1){u&&[...u].forEach(m=>o(h,m,p))}function o(u,h,p){if(h){var m,g,v;if(h.__r3f&&(h.__r3f.parent=null),(m=u.__r3f)!=null&&m.objects&&(u.__r3f.objects=u.__r3f.objects.filter(E=>E!==h)),(g=h.__r3f)!=null&&g.attach)HD(u,h,h.__r3f.attach);else if(h.isObject3D&&u.isObject3D){var y;u.remove(h),(y=h.__r3f)!=null&&y.root&&uX(tv(h),h)}const b=(v=h.__r3f)==null?void 0:v.primitive,w=!b&&(p===void 0?h.dispose!==null:p);if(!b){var A;r((A=h.__r3f)==null?void 0:A.objects,h,w),r(h.children,h,w)}if(delete h.__r3f,w&&h.dispose&&h.type!=="Scene"){const E=()=>{try{h.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?OD.unstable_scheduleCallback(OD.unstable_IdlePriority,E):E()}cd(u)}}function a(u,h,p,m){var g;const v=(g=u.__r3f)==null?void 0:g.parent;if(!v)return;const y=t(h,p,u.__r3f.root);if(u.children){for(const A of u.children)A.__r3f&&i(y,A);u.children=u.children.filter(A=>!A.__r3f)}u.__r3f.objects.forEach(A=>i(y,A)),u.__r3f.objects=[],u.__r3f.autoRemovedBeforeAppend||o(v,u),y.parent&&(y.__r3f.autoRemovedBeforeAppend=!0),i(v,y),y.raycast&&y.__r3f.eventCount&&tv(y).getState().internal.interaction.push(y),[m,m.alternate].forEach(A=>{A!==null&&(A.stateNode=y,A.ref&&(typeof A.ref=="function"?A.ref(y):A.ref.current=y))})}const l=()=>{};return{reconciler:ZJ({createInstance:t,removeChild:o,appendChild:i,appendInitialChild:i,insertBefore:s,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(u,h)=>{if(!h)return;const p=u.getState().scene;p.__r3f&&(p.__r3f.root=u,i(p,h))},removeChildFromContainer:(u,h)=>{h&&o(u.getState().scene,h)},insertInContainerBefore:(u,h,p)=>{if(!h||!p)return;const m=u.getState().scene;m.__r3f&&s(m,h,p)},getRootHostContext:()=>null,getChildHostContext:u=>u,finalizeInitialChildren(u){var h;return!!((h=u==null?void 0:u.__r3f)!=null?h:{}).handlers},prepareUpdate(u,h,p,m){var g;if(((g=u==null?void 0:u.__r3f)!=null?g:{}).primitive&&m.object&&m.object!==u)return[!0];{const{args:y=[],children:A,...b}=m,{args:w=[],children:E,...M}=p;if(!Array.isArray(y))throw new Error("R3F: the args prop must be an array!");if(y.some((D,B)=>D!==w[B]))return[!0];const I=MG(u,b,M,!0);return I.changes.length?[!1,I]:null}},commitUpdate(u,[h,p],m,g,v,y){h?a(u,m,v,y):A_(u,p)},commitMount(u,h,p,m){var g;const v=(g=u.__r3f)!=null?g:{};u.raycast&&v.handlers&&v.eventCount&&tv(u).getState().internal.interaction.push(u)},getPublicInstance:u=>u,prepareForCommit:()=>null,preparePortalMount:u=>ld(u.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(u){var h;const{attach:p,parent:m}=(h=u.__r3f)!=null?h:{};p&&m&&HD(m,u,p),u.isObject3D&&(u.visible=!1),cd(u)},unhideInstance(u,h){var p;const{attach:m,parent:g}=(p=u.__r3f)!=null?p:{};m&&g&&g_(g,u,m),(u.isObject3D&&h.visible==null||h.visible)&&(u.visible=!0),cd(u)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():Sd.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&vn.fun(performance.now)?performance.now:vn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:vn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:vn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:A_}}var UD,GD;const m_=n=>"colorSpace"in n||"outputColorSpace"in n,bG=()=>{var n;return(n=WI.ColorManagement)!=null?n:null},wG=n=>n&&n.isOrthographicCamera,nX=n=>n&&n.hasOwnProperty("current"),Gg=typeof window<"u"&&((UD=window.document)!=null&&UD.createElement||((GD=window.navigator)==null?void 0:GD.product)==="ReactNative")?ee.useLayoutEffect:ee.useEffect;function EG(n){const e=ee.useRef(n);return Gg(()=>void(e.current=n),[n]),e}function iX({set:n}){return Gg(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class _G extends ee.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}_G.getDerivedStateFromError=()=>({error:!0});const CG="__default",zD=new Map,sX=n=>n&&!!n.memoized&&!!n.changes;function SG(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const Cp=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function tv(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const vn={obj:n=>n===Object(n)&&!vn.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:s=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(vn.str(n)||vn.num(n)||vn.boo(n))return n===e;const r=vn.obj(n);if(r&&i==="reference")return n===e;const o=vn.arr(n);if(o&&t==="reference")return n===e;if((o||r)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(r&&t==="shallow"&&i==="shallow"){for(a in s?e:n)if(!vn.equ(n[a],e[a],{strict:s,objects:"reference"}))return!1}else for(a in s?e:n)if(n[a]!==e[a])return!1;if(vn.und(a)){if(o&&n.length===0&&e.length===0||r&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function rX(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function oX(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function ld(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function M1(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),s=i.pop();return t=i.reduce((r,o)=>r[o],n),{target:t,key:s}}else return{target:t,key:e}}const QD=/-\d+$/;function g_(n,e,t){if(vn.str(t)){if(QD.test(t)){const r=t.replace(QD,""),{target:o,key:a}=M1(n,r);Array.isArray(o[a])||(o[a]=[])}const{target:i,key:s}=M1(n,t);e.__r3f.previousAttach=i[s],i[s]=e}else e.__r3f.previousAttach=t(n,e)}function HD(n,e,t){var i,s;if(vn.str(t)){const{target:r,key:o}=M1(n,t),a=e.__r3f.previousAttach;a===void 0?delete r[o]:r[o]=a}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(s=e.__r3f)==null||delete s.previousAttach}function MG(n,{children:e,key:t,ref:i,...s},{children:r,key:o,ref:a,...l}={},c=!1){const u=n.__r3f,h=Object.entries(s),p=[];if(c){const g=Object.keys(l);for(let v=0;v<g.length;v++)s.hasOwnProperty(g[v])||h.unshift([g[v],CG+"remove"])}h.forEach(([g,v])=>{var y;if((y=n.__r3f)!=null&&y.primitive&&g==="object"||vn.equ(v,l[g]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(g))return p.push([g,v,!0,[]]);let A=[];g.includes("-")&&(A=g.split("-")),p.push([g,v,!1,A]);for(const b in s){const w=s[b];b.startsWith(`${g}-`)&&p.push([b,w,!1,b.split("-")])}});const m={...s};return u!=null&&u.memoizedProps&&u!=null&&u.memoizedProps.args&&(m.args=u.memoizedProps.args),u!=null&&u.memoizedProps&&u!=null&&u.memoizedProps.attach&&(m.attach=u.memoizedProps.attach),{memoized:m,changes:p}}const aX=typeof process<"u"&&!1;function A_(n,e){var t;const i=n.__r3f,s=i==null?void 0:i.root,r=s==null||s.getState==null?void 0:s.getState(),{memoized:o,changes:a}=sX(e)?e:MG(n,e),l=i==null?void 0:i.eventCount;n.__r3f&&(n.__r3f.memoizedProps=o);for(let p=0;p<a.length;p++){let[m,g,v,y]=a[p];if(m_(n)){const E="srgb",M="srgb-linear";m==="encoding"?(m="colorSpace",g=g===3001?E:M):m==="outputEncoding"&&(m="outputColorSpace",g=g===3001?E:M)}let A=n,b=A[m];if(y.length&&(b=y.reduce((w,E)=>w[E],n),!(b&&b.set))){const[w,...E]=y.reverse();A=E.reverse().reduce((M,I)=>M[I],n),m=w}if(g===CG+"remove")if(A.constructor){let w=zD.get(A.constructor);w||(w=new A.constructor,zD.set(A.constructor,w)),g=w[m]}else g=0;if(v&&i)g?i.handlers[m]=g:delete i.handlers[m],i.eventCount=Object.keys(i.handlers).length;else if(b&&b.set&&(b.copy||b instanceof Tu)){if(Array.isArray(g))b.fromArray?b.fromArray(g):b.set(...g);else if(b.copy&&g&&g.constructor&&(aX?b.constructor.name===g.constructor.name:b.constructor===g.constructor))b.copy(g);else if(g!==void 0){var c;const w=(c=b)==null?void 0:c.isColor;!w&&b.setScalar?b.setScalar(g):b instanceof Tu&&g instanceof Tu?b.mask=g.mask:b.set(g),!bG()&&r&&!r.linear&&w&&b.convertSRGBToLinear()}}else{var u;if(A[m]=g,(u=A[m])!=null&&u.isTexture&&A[m].format===dn&&A[m].type===kn&&r){const w=A[m];m_(w)&&m_(r.gl)?w.colorSpace=r.gl.outputColorSpace:w.encoding=r.gl.outputEncoding}}cd(n)}if(i&&i.parent&&n.raycast&&l!==i.eventCount){const p=tv(n).getState().internal,m=p.interaction.indexOf(n);m>-1&&p.interaction.splice(m,1),i.eventCount&&p.interaction.push(n)}return!(a.length===1&&a[0][0]==="onUpdate")&&a.length&&(t=n.__r3f)!=null&&t.parent&&I1(n),n}function cd(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function I1(n){n.onUpdate==null||n.onUpdate(n)}function lX(n,e){n.manual||(wG(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function Y0(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function cX(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Sd.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Sd.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Sd.ContinuousEventPriority;default:return Sd.DefaultEventPriority}}function IG(n,e,t,i){const s=t.get(e);s&&(t.delete(e),t.size===0&&(n.delete(i),s.target.releasePointerCapture(i)))}function uX(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,s)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(s)}),t.capturedMap.forEach((i,s)=>{IG(t.capturedMap,e,i,s)})}function hX(n){function e(l){const{internal:c}=n.getState(),u=l.offsetX-c.initialClick[0],h=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(u*u+h*h))}function t(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(u=>{var h;return(h=c.__r3f)==null?void 0:h.handlers["onPointer"+u]}))}function i(l,c){const u=n.getState(),h=new Set,p=[],m=c?c(u.internal.interaction):u.internal.interaction;for(let A=0;A<m.length;A++){const b=Cp(m[A]);b&&(b.raycaster.camera=void 0)}u.previousRoot||u.events.compute==null||u.events.compute(l,u);function g(A){const b=Cp(A);if(!b||!b.events.enabled||b.raycaster.camera===null)return[];if(b.raycaster.camera===void 0){var w;b.events.compute==null||b.events.compute(l,b,(w=b.previousRoot)==null?void 0:w.getState()),b.raycaster.camera===void 0&&(b.raycaster.camera=null)}return b.raycaster.camera?b.raycaster.intersectObject(A,!0):[]}let v=m.flatMap(g).sort((A,b)=>{const w=Cp(A.object),E=Cp(b.object);return!w||!E?A.distance-b.distance:E.events.priority-w.events.priority||A.distance-b.distance}).filter(A=>{const b=Y0(A);return h.has(b)?!1:(h.add(b),!0)});u.events.filter&&(v=u.events.filter(v,u));for(const A of v){let b=A.object;for(;b;){var y;(y=b.__r3f)!=null&&y.eventCount&&p.push({...A,eventObject:b}),b=b.parent}}if("pointerId"in l&&u.internal.capturedMap.has(l.pointerId))for(let A of u.internal.capturedMap.get(l.pointerId).values())h.has(Y0(A.intersection))||p.push(A.intersection);return p}function s(l,c,u,h){const p=n.getState();if(l.length){const m={stopped:!1};for(const g of l){const v=Cp(g.object)||p,{raycaster:y,pointer:A,camera:b,internal:w}=v,E=new O(A.x,A.y,0).unproject(b),M=T=>{var k,H;return(k=(H=w.capturedMap.get(T))==null?void 0:H.has(g.eventObject))!=null?k:!1},I=T=>{const k={intersection:g,target:c.target};w.capturedMap.has(T)?w.capturedMap.get(T).set(g.eventObject,k):w.capturedMap.set(T,new Map([[g.eventObject,k]])),c.target.setPointerCapture(T)},D=T=>{const k=w.capturedMap.get(T);k&&IG(w.capturedMap,g.eventObject,k,T)};let B={};for(let T in c){let k=c[T];typeof k!="function"&&(B[T]=k)}let R={...g,...B,pointer:A,intersections:l,stopped:m.stopped,delta:u,unprojectedPoint:E,ray:y.ray,camera:b,stopPropagation(){const T="pointerId"in c&&w.capturedMap.get(c.pointerId);if((!T||T.has(g.eventObject))&&(R.stopped=m.stopped=!0,w.hovered.size&&Array.from(w.hovered.values()).find(k=>k.eventObject===g.eventObject))){const k=l.slice(0,l.indexOf(g));r([...k,g])}},target:{hasPointerCapture:M,setPointerCapture:I,releasePointerCapture:D},currentTarget:{hasPointerCapture:M,setPointerCapture:I,releasePointerCapture:D},nativeEvent:c};if(h(R),m.stopped===!0)break}}return l}function r(l){const{internal:c}=n.getState();for(const u of c.hovered.values())if(!l.length||!l.find(h=>h.object===u.object&&h.index===u.index&&h.instanceId===u.instanceId)){const p=u.eventObject.__r3f,m=p==null?void 0:p.handlers;if(c.hovered.delete(Y0(u)),p!=null&&p.eventCount){const g={...u,intersections:l};m.onPointerOut==null||m.onPointerOut(g),m.onPointerLeave==null||m.onPointerLeave(g)}}}function o(l,c){for(let u=0;u<c.length;u++){const h=c[u].__r3f;h==null||h.handlers.onPointerMissed==null||h.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>r([]);case"onLostPointerCapture":return c=>{const{internal:u}=n.getState();"pointerId"in c&&u.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{u.capturedMap.has(c.pointerId)&&(u.capturedMap.delete(c.pointerId),r([]))})}}return function(u){const{onPointerMissed:h,internal:p}=n.getState();p.lastEvent.current=u;const m=l==="onPointerMove",g=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",y=i(u,m?t:void 0),A=g?e(u):0;l==="onPointerDown"&&(p.initialClick=[u.offsetX,u.offsetY],p.initialHits=y.map(w=>w.eventObject)),g&&!y.length&&A<=2&&(o(u,p.interaction),h&&h(u)),m&&r(y);function b(w){const E=w.eventObject,M=E.__r3f,I=M==null?void 0:M.handlers;if(M!=null&&M.eventCount)if(m){if(I.onPointerOver||I.onPointerEnter||I.onPointerOut||I.onPointerLeave){const D=Y0(w),B=p.hovered.get(D);B?B.stopped&&w.stopPropagation():(p.hovered.set(D,w),I.onPointerOver==null||I.onPointerOver(w),I.onPointerEnter==null||I.onPointerEnter(w))}I.onPointerMove==null||I.onPointerMove(w)}else{const D=I[l];D?(!g||p.initialHits.includes(E))&&(o(u,p.interaction.filter(B=>!p.initialHits.includes(B))),D(w)):g&&p.initialHits.includes(E)&&o(u,p.interaction.filter(B=>!p.initialHits.includes(B)))}}s(y,u,A,b)}}return{handlePointer:a}}const TG=n=>!!(n!=null&&n.render),BG=ee.createContext(null),dX=(n,e)=>{const t=VJ((a,l)=>{const c=new O,u=new O,h=new O;function p(A=l().camera,b=u,w=l().size){const{width:E,height:M,top:I,left:D}=w,B=E/M;b.isVector3?h.copy(b):h.set(...b);const R=A.getWorldPosition(c).distanceTo(h);if(wG(A))return{width:E/A.zoom,height:M/A.zoom,top:I,left:D,factor:1,distance:R,aspect:B};{const T=A.fov*Math.PI/180,k=2*Math.tan(T/2)*R,H=k*(E/M);return{width:H,height:k,top:I,left:D,factor:E/H,distance:R,aspect:B}}}let m;const g=A=>a(b=>({performance:{...b.performance,current:A}})),v=new me;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(A=1)=>n(l(),A),advance:(A,b)=>e(A,b,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new UI,pointer:v,mouse:v,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const A=l();m&&clearTimeout(m),A.performance.current!==A.performance.min&&g(A.performance.min),m=setTimeout(()=>g(l().performance.max),A.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:A=>a(b=>({...b,events:{...b.events,...A}})),setSize:(A,b,w,E,M)=>{const I=l().camera,D={width:A,height:b,top:E||0,left:M||0,updateStyle:w};a(B=>({size:D,viewport:{...B.viewport,...p(I,u,D)}}))},setDpr:A=>a(b=>{const w=SG(A);return{viewport:{...b.viewport,dpr:w,initialDpr:b.viewport.initialDpr||w}}}),setFrameloop:(A="always")=>{const b=l().clock;b.stop(),b.elapsedTime=0,A!=="never"&&(b.start(),b.elapsedTime=0),a(()=>({frameloop:A}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:ee.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(A,b,w)=>{const E=l().internal;return E.priority=E.priority+(b>0?1:0),E.subscribers.push({ref:A,priority:b,store:w}),E.subscribers=E.subscribers.sort((M,I)=>M.priority-I.priority),()=>{const M=l().internal;M!=null&&M.subscribers&&(M.priority=M.priority-(b>0?1:0),M.subscribers=M.subscribers.filter(I=>I.ref!==A))}}}}}),i=t.getState();let s=i.size,r=i.viewport.dpr,o=i.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:u,set:h}=t.getState();if(l.width!==s.width||l.height!==s.height||c.dpr!==r){var p;s=l,r=c.dpr,lX(a,l),u.setPixelRatio(c.dpr);const m=(p=l.updateStyle)!=null?p:typeof HTMLCanvasElement<"u"&&u.domElement instanceof HTMLCanvasElement;u.setSize(l.width,l.height,m)}a!==o&&(o=a,h(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};let Z0,fX=new Set,pX=new Set,mX=new Set;function y_(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function Sp(n,e){switch(n){case"before":return y_(fX,e);case"after":return y_(pX,e);case"tail":return y_(mX,e)}}let v_,x_;function b_(n,e,t){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),v_=e.internal.subscribers,Z0=0;Z0<v_.length;Z0++)x_=v_[Z0],x_.ref.current(x_.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function gX(n){let e=!1,t=!1,i,s,r;function o(c){s=requestAnimationFrame(o),e=!0,i=0,Sp("before",c),t=!0;for(const h of n.values()){var u;r=h.store.getState(),r.internal.active&&(r.frameloop==="always"||r.internal.frames>0)&&!((u=r.gl.xr)!=null&&u.isPresenting)&&(i+=b_(c,r))}if(t=!1,Sp("after",c),i===0)return Sp("tail",c),e=!1,cancelAnimationFrame(s)}function a(c,u=1){var h;if(!c)return n.forEach(p=>a(p.store.getState(),u));(h=c.gl.xr)!=null&&h.isPresenting||!c.internal.active||c.frameloop==="never"||(u>1?c.internal.frames=Math.min(60,c.internal.frames+u):t?c.internal.frames=2:c.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function l(c,u=!0,h,p){if(u&&Sp("before",c),h)b_(c,h,p);else for(const m of n.values())b_(c,m.store.getState());u&&Sp("after",c)}return{loop:o,invalidate:a,advance:l}}function AX(){const n=ee.useContext(BG);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function yX(n,e=0){const t=AX(),i=t.getState().internal.subscribe,s=EG(n);return Gg(()=>i(s,e,t),[e,i,t]),null}const VD=new WeakMap;function RG(n,e){return function(t,...i){let s=VD.get(t);return s||(s=new t,VD.set(t,s)),n&&n(s),Promise.all(i.map(r=>new Promise((o,a)=>s.load(r,l=>{l.scene&&Object.assign(l,rX(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${r}: ${l==null?void 0:l.message}`))))))}}function zg(n,e,t,i){const s=Array.isArray(e)?e:[e],r=WJ(RG(t,i),[n,...s],{equal:vn.equ});return Array.isArray(e)?r:r[0]}zg.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return qJ(RG(t),[n,...i])};zg.clear=function(n,e){const t=Array.isArray(e)?e:[e];return JJ([n,...t])};const Af=new Map,{invalidate:jD,advance:WD}=gX(Af),{reconciler:mx,applyProps:Oh}=tX(Af,cX),Uh={objects:"shallow",strict:!1},vX=(n,e)=>{const t=typeof n=="function"?n(e):n;return TG(t)?t:new Lb({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function xX(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:i,height:s,top:r,left:o,updateStyle:a=t}=e;return{width:i,height:s,top:r,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:i,height:s,top:r,left:o}=n.parentElement.getBoundingClientRect();return{width:i,height:s,top:r,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function bX(n){const e=Af.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const s=typeof reportError=="function"?reportError:console.error,r=i||dX(jD,WD),o=t||mx.createContainer(r,Sd.ConcurrentRoot,null,!1,null,"",s,null);e||Af.set(n,{fiber:o,store:r});let a,l=!1,c;return{configure(u={}){let{gl:h,size:p,scene:m,events:g,onCreated:v,shadows:y=!1,linear:A=!1,flat:b=!1,legacy:w=!1,orthographic:E=!1,frameloop:M="always",dpr:I=[1,2],performance:D,raycaster:B,camera:R,onPointerMissed:T}=u,k=r.getState(),H=k.gl;k.gl||k.set({gl:H=vX(h,n)});let Q=k.raycaster;Q||k.set({raycaster:Q=new HI});const{params:W,...X}=B||{};if(vn.equ(X,Q,Uh)||Oh(Q,{...X}),vn.equ(W,Q.params,Uh)||Oh(Q,{params:{...Q.params,...W}}),!k.camera||k.camera===c&&!vn.equ(c,R,Uh)){c=R;const j=R instanceof Rg,$=j?R:E?new Ko(0,0,0,0,.1,1e3):new Fn(75,0,.1,1e3);j||($.position.z=5,R&&(Oh($,R),("aspect"in R||"left"in R||"right"in R||"bottom"in R||"top"in R)&&($.manual=!0,$.updateProjectionMatrix())),!k.camera&&!(R!=null&&R.rotation)&&$.lookAt(0,0,0)),k.set({camera:$}),Q.camera=$}if(!k.scene){let j;m!=null&&m.isScene?j=m:(j=new qo,m&&Oh(j,m)),k.set({scene:ld(j)})}if(!k.xr){var J;const j=(ve,q)=>{const ae=r.getState();ae.frameloop!=="never"&&WD(ve,!0,ae,q)},$=()=>{const ve=r.getState();ve.gl.xr.enabled=ve.gl.xr.isPresenting,ve.gl.xr.setAnimationLoop(ve.gl.xr.isPresenting?j:null),ve.gl.xr.isPresenting||jD(ve)},le={connect(){const ve=r.getState().gl;ve.xr.addEventListener("sessionstart",$),ve.xr.addEventListener("sessionend",$)},disconnect(){const ve=r.getState().gl;ve.xr.removeEventListener("sessionstart",$),ve.xr.removeEventListener("sessionend",$)}};typeof((J=H.xr)==null?void 0:J.addEventListener)=="function"&&le.connect(),k.set({xr:le})}if(H.shadowMap){const j=H.shadowMap.enabled,$=H.shadowMap.type;if(H.shadowMap.enabled=!!y,vn.boo(y))H.shadowMap.type=vm;else if(vn.str(y)){var K;const le={basic:PO,percentage:$x,soft:vm,variance:Zr};H.shadowMap.type=(K=le[y])!=null?K:vm}else vn.obj(y)&&Object.assign(H.shadowMap,y);(j!==H.shadowMap.enabled||$!==H.shadowMap.type)&&(H.shadowMap.needsUpdate=!0)}const L=bG();L&&("enabled"in L?L.enabled=!w:"legacyMode"in L&&(L.legacyMode=w)),l||Oh(H,{outputEncoding:A?3e3:3001,toneMapping:b?Fr:Yx}),k.legacy!==w&&k.set(()=>({legacy:w})),k.linear!==A&&k.set(()=>({linear:A})),k.flat!==b&&k.set(()=>({flat:b})),h&&!vn.fun(h)&&!TG(h)&&!vn.equ(h,H,Uh)&&Oh(H,h),g&&!k.events.handlers&&k.set({events:g(r)});const V=xX(n,p);return vn.equ(V,k.size,Uh)||k.setSize(V.width,V.height,V.updateStyle,V.top,V.left),I&&k.viewport.dpr!==SG(I)&&k.setDpr(I),k.frameloop!==M&&k.setFrameloop(M),k.onPointerMissed||k.set({onPointerMissed:T}),D&&!vn.equ(D,k.performance,Uh)&&k.set(j=>({performance:{...j.performance,...D}})),a=v,l=!0,this},render(u){return l||this.configure(),mx.updateContainer(C.jsx(wX,{store:r,children:u,onCreated:a,rootElement:n}),o,null,()=>{}),r},unmount(){DG(n)}}}function wX({store:n,children:e,onCreated:t,rootElement:i}){return Gg(()=>{const s=n.getState();s.set(r=>({internal:{...r.internal,active:!0}})),t&&t(s),n.getState().events.connected||s.events.connect==null||s.events.connect(i)},[]),C.jsx(BG.Provider,{value:n,children:e})}function DG(n,e){const t=Af.get(n),i=t==null?void 0:t.fiber;if(i){const s=t==null?void 0:t.store.getState();s&&(s.internal.active=!1),mx.updateContainer(null,i,null,()=>{s&&setTimeout(()=>{try{var r,o,a,l;s.events.disconnect==null||s.events.disconnect(),(r=s.gl)==null||(o=r.renderLists)==null||o.dispose==null||o.dispose(),(a=s.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=s.gl)!=null&&l.xr&&s.xr.disconnect(),oX(s),Af.delete(n),e&&e(n)}catch{}},500)})}}mx.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:ee.version});const w_={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function EX(n){const{handlePointer:e}=hX(n);return{priority:1,enabled:!0,compute(t,i,s){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(w_).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:s}=n.getState();(t=s.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(s.lastEvent.current)},connect:t=>{var i;const{set:s,events:r}=n.getState();r.disconnect==null||r.disconnect(),s(o=>({events:{...o.events,connected:t}})),Object.entries((i=r.handlers)!=null?i:[]).forEach(([o,a])=>{const[l,c]=w_[o];t.addEventListener(l,a,{passive:c})})},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){var s;Object.entries((s=i.handlers)!=null?s:[]).forEach(([r,o])=>{if(i&&i.connected instanceof HTMLElement){const[a]=w_[r];i.connected.removeEventListener(a,o)}}),t(r=>({events:{...r.events,connected:void 0}}))}}}}function qD(n,e){let t;return(...i)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...i),e)}}function _X({debounce:n,scroll:e,polyfill:t,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const s=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[r,o]=ee.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),a=ee.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:r,orientationHandler:null}),l=n?typeof n=="number"?n:n.scroll:null,c=n?typeof n=="number"?n:n.resize:null,u=ee.useRef(!1);ee.useEffect(()=>(u.current=!0,()=>void(u.current=!1)));const[h,p,m]=ee.useMemo(()=>{const A=()=>{if(!a.current.element)return;const{left:b,top:w,width:E,height:M,bottom:I,right:D,x:B,y:R}=a.current.element.getBoundingClientRect(),T={left:b,top:w,width:E,height:M,bottom:I,right:D,x:B,y:R};a.current.element instanceof HTMLElement&&i&&(T.height=a.current.element.offsetHeight,T.width=a.current.element.offsetWidth),Object.freeze(T),u.current&&!IX(a.current.lastBounds,T)&&o(a.current.lastBounds=T)};return[A,c?qD(A,c):A,l?qD(A,l):A]},[o,i,l,c]);function g(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(A=>A.removeEventListener("scroll",m,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null),a.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",a.current.orientationHandler))}function v(){a.current.element&&(a.current.resizeObserver=new s(m),a.current.resizeObserver.observe(a.current.element),e&&a.current.scrollContainers&&a.current.scrollContainers.forEach(A=>A.addEventListener("scroll",m,{capture:!0,passive:!0})),a.current.orientationHandler=()=>{m()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",a.current.orientationHandler))}const y=A=>{!A||A===a.current.element||(g(),a.current.element=A,a.current.scrollContainers=PG(A),v())};return SX(m,!!e),CX(p),ee.useEffect(()=>{g(),v()},[e,m,p]),ee.useEffect(()=>g,[]),[y,r,h]}function CX(n){ee.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function SX(n,e){ee.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function PG(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:s}=window.getComputedStyle(n);return[t,i,s].some(r=>r==="auto"||r==="scroll")&&e.push(n),[...e,...PG(n.parentElement)]}const MX=["x","y","top","bottom","left","right","width","height"],IX=(n,e)=>MX.every(t=>n[t]===e[t]);var TX=Object.defineProperty,BX=Object.defineProperties,RX=Object.getOwnPropertyDescriptors,JD=Object.getOwnPropertySymbols,DX=Object.prototype.hasOwnProperty,PX=Object.prototype.propertyIsEnumerable,XD=(n,e,t)=>e in n?TX(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,KD=(n,e)=>{for(var t in e||(e={}))DX.call(e,t)&&XD(n,t,e[t]);if(JD)for(var t of JD(e))PX.call(e,t)&&XD(n,t,e[t]);return n},LX=(n,e)=>BX(n,RX(e)),$D,YD;typeof window<"u"&&(($D=window.document)!=null&&$D.createElement||((YD=window.navigator)==null?void 0:YD.product)==="ReactNative")?ee.useLayoutEffect:ee.useEffect;function LG(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=e?n.return:n.child;for(;i;){const s=LG(i,e,t);if(s)return s;i=e?null:i.sibling}}function kG(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const ZD=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=ZD;return}return ZD.apply(this,arguments)};const qI=kG(ee.createContext(null));class FG extends ee.Component{render(){return ee.createElement(qI.Provider,{value:this._reactInternals},this.props.children)}}function kX(){const n=ee.useContext(qI);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=ee.useId();return ee.useMemo(()=>{for(const i of[n,n==null?void 0:n.alternate]){if(!i)continue;const s=LG(i,!1,r=>{let o=r.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(s)return s}},[n,e])}function FX(){const n=kX(),[e]=ee.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const s=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;s&&s!==qI&&!e.has(s)&&e.set(s,ee.useContext(kG(s)))}t=t.return}return e}function NX(){const n=FX();return ee.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>ee.createElement(e,null,ee.createElement(t.Provider,LX(KD({},i),{value:n.get(t)}))),e=>ee.createElement(FG,KD({},e))),[n])}const OX=ee.forwardRef(function({children:e,fallback:t,resize:i,style:s,gl:r,events:o=EX,eventSource:a,eventPrefix:l,shadows:c,linear:u,flat:h,legacy:p,orthographic:m,frameloop:g,dpr:v,performance:y,raycaster:A,camera:b,scene:w,onPointerMissed:E,onCreated:M,...I},D){ee.useMemo(()=>eX(zJ),[]);const B=NX(),[R,T]=_X({scroll:!0,debounce:{scroll:50,resize:0},...i}),k=ee.useRef(null),H=ee.useRef(null);ee.useImperativeHandle(D,()=>k.current);const Q=EG(E),[W,X]=ee.useState(!1),[J,K]=ee.useState(!1);if(W)throw W;if(J)throw J;const L=ee.useRef(null);Gg(()=>{const j=k.current;T.width>0&&T.height>0&&j&&(L.current||(L.current=bX(j)),L.current.configure({gl:r,events:o,shadows:c,linear:u,flat:h,legacy:p,orthographic:m,frameloop:g,dpr:v,performance:y,raycaster:A,camera:b,scene:w,size:T,onPointerMissed:(...$)=>Q.current==null?void 0:Q.current(...$),onCreated:$=>{$.events.connect==null||$.events.connect(a?nX(a)?a.current:a:H.current),l&&$.setEvents({compute:(le,ve)=>{const q=le[l+"X"],ae=le[l+"Y"];ve.pointer.set(q/ve.size.width*2-1,-(ae/ve.size.height)*2+1),ve.raycaster.setFromCamera(ve.pointer,ve.camera)}}),M==null||M($)}}),L.current.render(C.jsx(B,{children:C.jsx(_G,{set:K,children:C.jsx(ee.Suspense,{fallback:C.jsx(iX,{set:X}),children:e??null})})})))}),ee.useEffect(()=>{const j=k.current;if(j)return()=>DG(j)},[]);const V=a?"none":"auto";return C.jsx("div",{ref:H,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:V,...s},...I,children:C.jsx("div",{ref:R,style:{width:"100%",height:"100%"},children:C.jsx("canvas",{ref:k,style:{display:"block"},children:t})})})}),UX=ee.forwardRef(function(e,t){return C.jsx(FG,{children:C.jsx(OX,{...e,ref:t})})}),GX=(()=>parseInt(Tf.replace(/\D+/g,"")))();function eP(n,e){if(e===yI)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===zu||e===Ig){let t=n.getIndex();if(t===null){const o=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const i=t.count-2,s=[];if(t)if(e===zu)for(let o=1;o<=i;o++)s.push(t.getX(0)),s.push(t.getX(o)),s.push(t.getX(o+1));else for(let o=0;o<i;o++)o%2===0?(s.push(t.getX(o)),s.push(t.getX(o+1)),s.push(t.getX(o+2))):(s.push(t.getX(o+2)),s.push(t.getX(o+1)),s.push(t.getX(o)));s.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const r=n.clone();return r.setIndex(s),r.clearGroups(),r}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}function gx(n){if(typeof TextDecoder<"u")return new TextDecoder().decode(n);let e="";for(let t=0,i=n.length;t<i;t++)e+=String.fromCharCode(n[t]);try{return decodeURIComponent(escape(e))}catch{return e}}const Au="srgb",Na="srgb-linear",tP=3001,zX=3e3;let JI=class extends hi{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new WX(t)}),this.register(function(t){return new qX(t)}),this.register(function(t){return new nK(t)}),this.register(function(t){return new iK(t)}),this.register(function(t){return new sK(t)}),this.register(function(t){return new XX(t)}),this.register(function(t){return new KX(t)}),this.register(function(t){return new $X(t)}),this.register(function(t){return new YX(t)}),this.register(function(t){return new jX(t)}),this.register(function(t){return new ZX(t)}),this.register(function(t){return new JX(t)}),this.register(function(t){return new tK(t)}),this.register(function(t){return new eK(t)}),this.register(function(t){return new HX(t)}),this.register(function(t){return new rK(t)}),this.register(function(t){return new oK(t)})}load(e,t,i,s){const r=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const c=ur.extractUrlBase(e);o=ur.resolveURL(c,this.path)}else o=ur.extractUrlBase(e);this.manager.itemStart(e);const a=function(c){s?s(c):console.error(c),r.manager.itemError(e),r.manager.itemEnd(e)},l=new ni(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{r.parse(c,o,function(u){t(u),r.manager.itemEnd(e)},a)}catch(u){a(u)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,s){let r;const o={},a={};if(typeof e=="string")r=JSON.parse(e);else if(e instanceof ArrayBuffer)if(gx(new Uint8Array(e.slice(0,4)))===NG){try{o[Vt.KHR_BINARY_GLTF]=new aK(e)}catch(u){s&&s(u);return}r=JSON.parse(o[Vt.KHR_BINARY_GLTF].content)}else r=JSON.parse(gx(new Uint8Array(e)));else r=e;if(r.asset===void 0||r.asset.version[0]<2){s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new xK(r,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const u=this.pluginCallbacks[c](l);u.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[u.name]=u,o[u.name]=!0}if(r.extensionsUsed)for(let c=0;c<r.extensionsUsed.length;++c){const u=r.extensionsUsed[c],h=r.extensionsRequired||[];switch(u){case Vt.KHR_MATERIALS_UNLIT:o[u]=new VX;break;case Vt.KHR_DRACO_MESH_COMPRESSION:o[u]=new lK(r,this.dracoLoader);break;case Vt.KHR_TEXTURE_TRANSFORM:o[u]=new cK;break;case Vt.KHR_MESH_QUANTIZATION:o[u]=new uK;break;default:h.indexOf(u)>=0&&a[u]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(i,s)}parseAsync(e,t){const i=this;return new Promise(function(s,r){i.parse(e,t,s,r)})}};function QX(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const Vt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};let HX=class{constructor(e){this.parser=e,this.name=Vt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,s=t.length;i<s;i++){const r=t[i];r.extensions&&r.extensions[this.name]&&r.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let s=t.cache.get(i);if(s)return s;const r=t.json,l=((r.extensions&&r.extensions[this.name]||{}).lights||[])[e];let c;const u=new Me(16777215);l.color!==void 0&&u.setRGB(l.color[0],l.color[1],l.color[2],Na);const h=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new Ug(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new Og(u),c.distance=h;break;case"spot":c=new Rb(u),c.distance=h,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,Ea(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),s=Promise.resolve(c),t.cache.add(i,s),s}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,r=i.json.nodes[e],a=(r.extensions&&r.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return i._getNodeRef(t.cache,a,l)})}},VX=class{constructor(){this.name=Vt.KHR_MATERIALS_UNLIT}getMaterialType(){return Un}extendParams(e,t,i){const s=[];e.color=new Me(1,1,1),e.opacity=1;const r=t.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const o=r.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],Na),e.opacity=o[3]}r.baseColorTexture!==void 0&&s.push(i.assignTexture(e,"map",r.baseColorTexture,Au))}return Promise.all(s)}},jX=class{constructor(e){this.parser=e,this.name=Vt.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name].emissiveStrength;return r!==void 0&&(t.emissiveIntensity=r),Promise.resolve()}},WX=class{constructor(e){this.parser=e,this.name=Vt.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Xn}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&r.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&r.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(r.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new me(a,a)}return Promise.all(r)}},qX=class{constructor(e){this.parser=e,this.name=Vt.KHR_MATERIALS_DISPERSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Xn}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name];return t.dispersion=r.dispersion!==void 0?r.dispersion:0,Promise.resolve()}},JX=class{constructor(e){this.parser=e,this.name=Vt.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Xn}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&r.push(i.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&r.push(i.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(r)}},XX=class{constructor(e){this.parser=e,this.name=Vt.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Xn}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[];t.sheenColor=new Me(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=s.extensions[this.name];if(o.sheenColorFactor!==void 0){const a=o.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],Na)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&r.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture,Au)),o.sheenRoughnessTexture!==void 0&&r.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(r)}},KX=class{constructor(e){this.parser=e,this.name=Vt.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Xn}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&r.push(i.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(r)}},$X=class{constructor(e){this.parser=e,this.name=Vt.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Xn}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&r.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new Me().setRGB(a[0],a[1],a[2],Na),Promise.all(r)}},YX=class{constructor(e){this.parser=e,this.name=Vt.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Xn}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name];return t.ior=r.ior!==void 0?r.ior:1.5,Promise.resolve()}},ZX=class{constructor(e){this.parser=e,this.name=Vt.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Xn}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&r.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new Me().setRGB(a[0],a[1],a[2],Na),o.specularColorTexture!==void 0&&r.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture,Au)),Promise.all(r)}},eK=class{constructor(e){this.parser=e,this.name=Vt.EXT_MATERIALS_BUMP}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Xn}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&r.push(i.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(r)}},tK=class{constructor(e){this.parser=e,this.name=Vt.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Xn}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&r.push(i.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(r)}},nK=class{constructor(e){this.parser=e,this.name=Vt.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,s=i.textures[e];if(!s.extensions||!s.extensions[this.name])return null;const r=s.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,r.source,o)}},iK=class{constructor(e){this.parser=e,this.name=Vt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,s=i.json,r=s.textures[e];if(!r.extensions||!r.extensions[t])return null;const o=r.extensions[t],a=s.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}},sK=class{constructor(e){this.parser=e,this.name=Vt.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,s=i.json,r=s.textures[e];if(!r.extensions||!r.extensions[t])return null;const o=r.extensions[t],a=s.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}},rK=class{constructor(e){this.name=Vt.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const s=i.extensions[this.name],r=this.parser.getDependency("buffer",s.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return r.then(function(a){const l=s.byteOffset||0,c=s.byteLength||0,u=s.count,h=s.byteStride,p=new Uint8Array(a,l,c);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,h,p,s.mode,s.filter).then(function(m){return m.buffer}):o.ready.then(function(){const m=new ArrayBuffer(u*h);return o.decodeGltfBuffer(new Uint8Array(m),u,h,p,s.mode,s.filter),m})})}else return null}},oK=class{constructor(e){this.name=Vt.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const s=t.meshes[i.mesh];for(const c of s.primitives)if(c.mode!==Ir.TRIANGLES&&c.mode!==Ir.TRIANGLE_STRIP&&c.mode!==Ir.TRIANGLE_FAN&&c.mode!==void 0)return null;const o=i.extensions[this.name].attributes,a=[],l={};for(const c in o)a.push(this.parser.getDependency("accessor",o[c]).then(u=>(l[c]=u,l[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(c=>{const u=c.pop(),h=u.isGroup?u.children:[u],p=c[0].count,m=[];for(const g of h){const v=new tt,y=new O,A=new qn,b=new O(1,1,1),w=new hb(g.geometry,g.material,p);for(let E=0;E<p;E++)l.TRANSLATION&&y.fromBufferAttribute(l.TRANSLATION,E),l.ROTATION&&A.fromBufferAttribute(l.ROTATION,E),l.SCALE&&b.fromBufferAttribute(l.SCALE,E),w.setMatrixAt(E,v.compose(y,A,b));for(const E in l)if(E==="_COLOR_0"){const M=l[E];w.instanceColor=new ic(M.array,M.itemSize,M.normalized)}else E!=="TRANSLATION"&&E!=="ROTATION"&&E!=="SCALE"&&g.geometry.setAttribute(E,l[E]);Rt.prototype.copy.call(w,g),this.parser.assignFinalMaterial(w),m.push(w)}return u.isGroup?(u.clear(),u.add(...m),u):m[0]}))}};const NG="glTF",Mp=12,nP={JSON:1313821514,BIN:5130562};let aK=class{constructor(e){this.name=Vt.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Mp);if(this.header={magic:gx(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==NG)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-Mp,s=new DataView(e,Mp);let r=0;for(;r<i;){const o=s.getUint32(r,!0);r+=4;const a=s.getUint32(r,!0);if(r+=4,a===nP.JSON){const l=new Uint8Array(e,Mp+r,o);this.content=gx(l)}else if(a===nP.BIN){const l=Mp+r;this.body=e.slice(l,l+o)}r+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}},lK=class{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Vt.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,s=this.dracoLoader,r=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const u in o){const h=T1[u]||u.toLowerCase();a[h]=o[u]}for(const u in e.attributes){const h=T1[u]||u.toLowerCase();if(o[u]!==void 0){const p=i.accessors[e.attributes[u]],m=Vd[p.componentType];c[h]=m.name,l[h]=p.normalized===!0}}return t.getDependency("bufferView",r).then(function(u){return new Promise(function(h,p){s.decodeDracoFile(u,function(m){for(const g in m.attributes){const v=m.attributes[g],y=l[g];y!==void 0&&(v.normalized=y)}h(m)},a,c,Na,p)})})}},cK=class{constructor(){this.name=Vt.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}},uK=class{constructor(){this.name=Vt.KHR_MESH_QUANTIZATION}},OG=class extends eh{constructor(e,t,i,s){super(e,t,i,s)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,s=this.valueSize,r=e*s*3+s;for(let o=0;o!==s;o++)t[o]=i[r+o];return t}interpolate_(e,t,i,s){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,c=a*3,u=s-t,h=(i-t)/u,p=h*h,m=p*h,g=e*c,v=g-c,y=-2*m+3*p,A=m-p,b=1-y,w=A-p+h;for(let E=0;E!==a;E++){const M=o[v+E+a],I=o[v+E+l]*u,D=o[g+E+a],B=o[g+E]*u;r[E]=b*M+w*I+y*D+A*B}return r}};const hK=new qn;let dK=class extends OG{interpolate_(e,t,i,s){const r=super.interpolate_(e,t,i,s);return hK.fromArray(r).normalize().toArray(r),r}};const Ir={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Vd={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},iP={9728:Mn,9729:Bt,9984:hc,9985:Ho,9986:ao,9987:vi},sP={33071:Cn,33648:jo,10497:ls},E_={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},T1={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...GX>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},gl={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},fK={CUBICSPLINE:void 0,LINEAR:Va,STEP:nc},__={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function pK(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new Wa({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:fr})),n.DefaultMaterial}function Oc(n,e,t){for(const i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function Ea(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function mK(n,e,t){let i=!1,s=!1,r=!1;for(let c=0,u=e.length;c<u;c++){const h=e[c];if(h.POSITION!==void 0&&(i=!0),h.NORMAL!==void 0&&(s=!0),h.COLOR_0!==void 0&&(r=!0),i&&s&&r)break}if(!i&&!s&&!r)return Promise.resolve(n);const o=[],a=[],l=[];for(let c=0,u=e.length;c<u;c++){const h=e[c];if(i){const p=h.POSITION!==void 0?t.getDependency("accessor",h.POSITION):n.attributes.position;o.push(p)}if(s){const p=h.NORMAL!==void 0?t.getDependency("accessor",h.NORMAL):n.attributes.normal;a.push(p)}if(r){const p=h.COLOR_0!==void 0?t.getDependency("accessor",h.COLOR_0):n.attributes.color;l.push(p)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const u=c[0],h=c[1],p=c[2];return i&&(n.morphAttributes.position=u),s&&(n.morphAttributes.normal=h),r&&(n.morphAttributes.color=p),n.morphTargetsRelative=!0,n})}function gK(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,s=t.length;i<s;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function AK(n){let e;const t=n.extensions&&n.extensions[Vt.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+C_(t.attributes):e=n.indices+":"+C_(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,s=n.targets.length;i<s;i++)e+=":"+C_(n.targets[i]);return e}function C_(n){let e="";const t=Object.keys(n).sort();for(let i=0,s=t.length;i<s;i++)e+=t[i]+":"+n[t[i]]+";";return e}function B1(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function yK(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const vK=new tt;let xK=class{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new QX,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,s=!1,r=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,s=navigator.userAgent.indexOf("Firefox")>-1,r=s?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||i||s&&r<98?this.textureLoader=new Bb(this.options.manager):this.textureLoader=new NI(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new ni(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,s=this.json,r=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][s.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:s.asset,parser:i,userData:{}};return Oc(r,a,s),Ea(a,s),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){for(const l of a.scenes)l.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let s=0,r=t.length;s<r;s++){const o=t[s].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let s=0,r=e.length;s<r;s++){const o=e[s];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(i[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const s=i.clone(),r=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[c,u]of o.children.entries())r(u,a.children[c])};return r(i,s),s.name+="_instance_"+e.uses[t]++,s}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const s=e(t[i]);if(s)return s}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let s=0;s<t.length;s++){const r=e(t[s]);r&&i.push(r)}return i}getDependency(e,t){const i=e+":"+t;let s=this.cache.get(i);if(!s){switch(e){case"scene":s=this.loadScene(t);break;case"node":s=this._invokeOne(function(r){return r.loadNode&&r.loadNode(t)});break;case"mesh":s=this._invokeOne(function(r){return r.loadMesh&&r.loadMesh(t)});break;case"accessor":s=this.loadAccessor(t);break;case"bufferView":s=this._invokeOne(function(r){return r.loadBufferView&&r.loadBufferView(t)});break;case"buffer":s=this.loadBuffer(t);break;case"material":s=this._invokeOne(function(r){return r.loadMaterial&&r.loadMaterial(t)});break;case"texture":s=this._invokeOne(function(r){return r.loadTexture&&r.loadTexture(t)});break;case"skin":s=this.loadSkin(t);break;case"animation":s=this._invokeOne(function(r){return r.loadAnimation&&r.loadAnimation(t)});break;case"camera":s=this.loadCamera(t);break;default:if(s=this._invokeOne(function(r){return r!=this&&r.getDependency&&r.getDependency(e,t)}),!s)throw new Error("Unknown type: "+e);break}this.cache.add(i,s)}return s}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,s=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(s.map(function(r,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Vt.KHR_BINARY_GLTF].body);const s=this.options;return new Promise(function(r,o){i.load(ur.resolveURL(t.uri,s.path),r,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const s=t.byteLength||0,r=t.byteOffset||0;return i.slice(r,r+s)})}loadAccessor(e){const t=this,i=this.json,s=this.json.accessors[e];if(s.bufferView===void 0&&s.sparse===void 0){const o=E_[s.type],a=Vd[s.componentType],l=s.normalized===!0,c=new a(s.count*o);return Promise.resolve(new wt(c,o,l))}const r=[];return s.bufferView!==void 0?r.push(this.getDependency("bufferView",s.bufferView)):r.push(null),s.sparse!==void 0&&(r.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(r).then(function(o){const a=o[0],l=E_[s.type],c=Vd[s.componentType],u=c.BYTES_PER_ELEMENT,h=u*l,p=s.byteOffset||0,m=s.bufferView!==void 0?i.bufferViews[s.bufferView].byteStride:void 0,g=s.normalized===!0;let v,y;if(m&&m!==h){const A=Math.floor(p/m),b="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+A+":"+s.count;let w=t.cache.get(b);w||(v=new c(a,A*m,s.count*m/u),w=new Df(v,m/u),t.cache.add(b,w)),y=new ja(w,l,p%m/u,g)}else a===null?v=new c(s.count*l):v=new c(a,p,s.count*l),y=new wt(v,l,g);if(s.sparse!==void 0){const A=E_.SCALAR,b=Vd[s.sparse.indices.componentType],w=s.sparse.indices.byteOffset||0,E=s.sparse.values.byteOffset||0,M=new b(o[1],w,s.sparse.count*A),I=new c(o[2],E,s.sparse.count*l);a!==null&&(y=new wt(y.array.slice(),y.itemSize,y.normalized));for(let D=0,B=M.length;D<B;D++){const R=M[D];if(y.setX(R,I[D*l]),l>=2&&y.setY(R,I[D*l+1]),l>=3&&y.setZ(R,I[D*l+2]),l>=4&&y.setW(R,I[D*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return y})}loadTexture(e){const t=this.json,i=this.options,r=t.textures[e].source,o=t.images[r];let a=this.textureLoader;if(o.uri){const l=i.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,r,a)}loadTextureImage(e,t,i){const s=this,r=this.json,o=r.textures[e],a=r.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,i).then(function(u){u.flipY=!1,u.name=o.name||a.name||"",u.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(u.name=a.uri);const p=(r.samplers||{})[o.sampler]||{};return u.magFilter=iP[p.magFilter]||Bt,u.minFilter=iP[p.minFilter]||vi,u.wrapS=sP[p.wrapS]||ls,u.wrapT=sP[p.wrapT]||ls,s.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const i=this,s=this.json,r=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(h=>h.clone());const o=s.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(o.bufferView!==void 0)l=i.getDependency("bufferView",o.bufferView).then(function(h){c=!0;const p=new Blob([h],{type:o.mimeType});return l=a.createObjectURL(p),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(l).then(function(h){return new Promise(function(p,m){let g=p;t.isImageBitmapLoader===!0&&(g=function(v){const y=new ln(v);y.needsUpdate=!0,p(y)}),t.load(ur.resolveURL(h,r.path),g,void 0,m)})}).then(function(h){return c===!0&&a.revokeObjectURL(l),Ea(h,o),h.userData.mimeType=o.mimeType||yK(o.uri),h}).catch(function(h){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),h});return this.sourceCache[e]=u,u}assignTexture(e,t,i,s){const r=this;return this.getDependency("texture",i.index).then(function(o){if(!o)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(o=o.clone(),o.channel=i.texCoord),r.extensions[Vt.KHR_TEXTURE_TRANSFORM]){const a=i.extensions!==void 0?i.extensions[Vt.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=r.associations.get(o);o=r.extensions[Vt.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),r.associations.set(o,l)}}return s!==void 0&&(typeof s=="number"&&(s=s===tP?Au:Na),"colorSpace"in o?o.colorSpace=s:o.encoding=s===Au?tP:zX),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const s=t.attributes.tangent===void 0,r=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new kg,zn.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(a,l)),i=l}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new Qi,zn.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,this.cache.add(a,l)),i=l}if(s||r||o){let a="ClonedMaterial:"+i.uuid+":";s&&(a+="derivative-tangents:"),r&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=i.clone(),r&&(l.vertexColors=!0),o&&(l.flatShading=!0),s&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(i))),i=l}e.material=i}getMaterialType(){return Wa}loadMaterial(e){const t=this,i=this.json,s=this.extensions,r=i.materials[e];let o;const a={},l=r.extensions||{},c=[];if(l[Vt.KHR_MATERIALS_UNLIT]){const h=s[Vt.KHR_MATERIALS_UNLIT];o=h.getMaterialType(),c.push(h.extendParams(a,r,t))}else{const h=r.pbrMetallicRoughness||{};if(a.color=new Me(1,1,1),a.opacity=1,Array.isArray(h.baseColorFactor)){const p=h.baseColorFactor;a.color.setRGB(p[0],p[1],p[2],Na),a.opacity=p[3]}h.baseColorTexture!==void 0&&c.push(t.assignTexture(a,"map",h.baseColorTexture,Au)),a.metalness=h.metallicFactor!==void 0?h.metallicFactor:1,a.roughness=h.roughnessFactor!==void 0?h.roughnessFactor:1,h.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(a,"metalnessMap",h.metallicRoughnessTexture)),c.push(t.assignTexture(a,"roughnessMap",h.metallicRoughnessTexture))),o=this._invokeOne(function(p){return p.getMaterialType&&p.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(p){return p.extendMaterialParams&&p.extendMaterialParams(e,a)})))}r.doubleSided===!0&&(a.side=ci);const u=r.alphaMode||__.OPAQUE;if(u===__.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,u===__.MASK&&(a.alphaTest=r.alphaCutoff!==void 0?r.alphaCutoff:.5)),r.normalTexture!==void 0&&o!==Un&&(c.push(t.assignTexture(a,"normalMap",r.normalTexture)),a.normalScale=new me(1,1),r.normalTexture.scale!==void 0)){const h=r.normalTexture.scale;a.normalScale.set(h,h)}if(r.occlusionTexture!==void 0&&o!==Un&&(c.push(t.assignTexture(a,"aoMap",r.occlusionTexture)),r.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=r.occlusionTexture.strength)),r.emissiveFactor!==void 0&&o!==Un){const h=r.emissiveFactor;a.emissive=new Me().setRGB(h[0],h[1],h[2],Na)}return r.emissiveTexture!==void 0&&o!==Un&&c.push(t.assignTexture(a,"emissiveMap",r.emissiveTexture,Au)),Promise.all(c).then(function(){const h=new o(a);return r.name&&(h.name=r.name),Ea(h,r),t.associations.set(h,{materials:e}),r.extensions&&Oc(s,h,r),h})}createUniqueName(e){const t=Ot.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,s=this.primitiveCache;function r(a){return i[Vt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return rP(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],u=AK(c),h=s[u];if(h)o.push(h.promise);else{let p;c.extensions&&c.extensions[Vt.KHR_DRACO_MESH_COMPRESSION]?p=r(c):p=rP(new xt,c,t),s[u]={primitive:c,promise:p},o.push(p)}}return Promise.all(o)}loadMesh(e){const t=this,i=this.json,s=this.extensions,r=i.meshes[e],o=r.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const u=o[l].material===void 0?pK(this.cache):this.getDependency("material",o[l].material);a.push(u)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),u=l[l.length-1],h=[];for(let m=0,g=u.length;m<g;m++){const v=u[m],y=o[m];let A;const b=c[m];if(y.mode===Ir.TRIANGLES||y.mode===Ir.TRIANGLE_STRIP||y.mode===Ir.TRIANGLE_FAN||y.mode===void 0)A=r.isSkinnedMesh===!0?new ub(v,b):new Wt(v,b),A.isSkinnedMesh===!0&&A.normalizeSkinWeights(),y.mode===Ir.TRIANGLE_STRIP?A.geometry=eP(A.geometry,Ig):y.mode===Ir.TRIANGLE_FAN&&(A.geometry=eP(A.geometry,zu));else if(y.mode===Ir.LINES)A=new Hr(v,b);else if(y.mode===Ir.LINE_STRIP)A=new Gr(v,b);else if(y.mode===Ir.LINE_LOOP)A=new db(v,b);else if(y.mode===Ir.POINTS)A=new fb(v,b);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+y.mode);Object.keys(A.geometry.morphAttributes).length>0&&gK(A,r),A.name=t.createUniqueName(r.name||"mesh_"+e),Ea(A,r),y.extensions&&Oc(s,A,y),t.assignFinalMaterial(A),h.push(A)}for(let m=0,g=h.length;m<g;m++)t.associations.set(h[m],{meshes:e,primitives:m});if(h.length===1)return r.extensions&&Oc(s,h[0],r),h[0];const p=new sr;r.extensions&&Oc(s,p,r),t.associations.set(p,{meshes:e});for(let m=0,g=h.length;m<g;m++)p.add(h[m]);return p})}loadCamera(e){let t;const i=this.json.cameras[e],s=i[i.type];if(!s){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new Fn(mf.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):i.type==="orthographic"&&(t=new Ko(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),Ea(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i=[];for(let s=0,r=t.joints.length;s<r;s++)i.push(this._loadNodeShallow(t.joints[s]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(s){const r=s.pop(),o=s,a=[],l=[];for(let c=0,u=o.length;c<u;c++){const h=o[c];if(h){a.push(h);const p=new tt;r!==null&&p.fromArray(r.array,c*16),l.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new Pf(a,l)})}loadAnimation(e){const t=this.json,i=this,s=t.animations[e],r=s.name?s.name:"animation_"+e,o=[],a=[],l=[],c=[],u=[];for(let h=0,p=s.channels.length;h<p;h++){const m=s.channels[h],g=s.samplers[m.sampler],v=m.target,y=v.node,A=s.parameters!==void 0?s.parameters[g.input]:g.input,b=s.parameters!==void 0?s.parameters[g.output]:g.output;v.node!==void 0&&(o.push(this.getDependency("node",y)),a.push(this.getDependency("accessor",A)),l.push(this.getDependency("accessor",b)),c.push(g),u.push(v))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(c),Promise.all(u)]).then(function(h){const p=h[0],m=h[1],g=h[2],v=h[3],y=h[4],A=[];for(let b=0,w=p.length;b<w;b++){const E=p[b],M=m[b],I=g[b],D=v[b],B=y[b];if(E===void 0)continue;E.updateMatrix&&E.updateMatrix();const R=i._createAnimationTracks(E,M,I,D,B);if(R)for(let T=0;T<R.length;T++)A.push(R[T])}return new Hu(r,void 0,A)})}createNodeMesh(e){const t=this.json,i=this,s=t.nodes[e];return s.mesh===void 0?null:i.getDependency("mesh",s.mesh).then(function(r){const o=i._getNodeRef(i.meshCache,s.mesh,r);return s.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=s.weights.length;l<c;l++)a.morphTargetInfluences[l]=s.weights[l]}),o})}loadNode(e){const t=this.json,i=this,s=t.nodes[e],r=i._loadNodeShallow(e),o=[],a=s.children||[];for(let c=0,u=a.length;c<u;c++)o.push(i.getDependency("node",a[c]));const l=s.skin===void 0?Promise.resolve(null):i.getDependency("skin",s.skin);return Promise.all([r,Promise.all(o),l]).then(function(c){const u=c[0],h=c[1],p=c[2];p!==null&&u.traverse(function(m){m.isSkinnedMesh&&m.bind(p,vK)});for(let m=0,g=h.length;m<g;m++)u.add(h[m]);return u})}_loadNodeShallow(e){const t=this.json,i=this.extensions,s=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const r=t.nodes[e],o=r.name?s.createUniqueName(r.name):"",a=[],l=s._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),r.camera!==void 0&&a.push(s.getDependency("camera",r.camera).then(function(c){return s._getNodeRef(s.cameraCache,r.camera,c)})),s._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),this.nodeCache[e]=Promise.all(a).then(function(c){let u;if(r.isBone===!0?u=new Pg:c.length>1?u=new sr:c.length===1?u=c[0]:u=new Rt,u!==c[0])for(let h=0,p=c.length;h<p;h++)u.add(c[h]);if(r.name&&(u.userData.name=r.name,u.name=o),Ea(u,r),r.extensions&&Oc(i,u,r),r.matrix!==void 0){const h=new tt;h.fromArray(r.matrix),u.applyMatrix4(h)}else r.translation!==void 0&&u.position.fromArray(r.translation),r.rotation!==void 0&&u.quaternion.fromArray(r.rotation),r.scale!==void 0&&u.scale.fromArray(r.scale);return s.associations.has(u)||s.associations.set(u,{}),s.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],s=this,r=new sr;i.name&&(r.name=s.createUniqueName(i.name)),Ea(r,i),i.extensions&&Oc(t,r,i);const o=i.nodes||[],a=[];for(let l=0,c=o.length;l<c;l++)a.push(s.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let u=0,h=l.length;u<h;u++)r.add(l[u]);const c=u=>{const h=new Map;for(const[p,m]of s.associations)(p instanceof zn||p instanceof ln)&&h.set(p,m);return u.traverse(p=>{const m=s.associations.get(p);m!=null&&h.set(p,m)}),h};return s.associations=c(r),r})}_createAnimationTracks(e,t,i,s,r){const o=[],a=e.name?e.name:e.uuid,l=[];gl[r.path]===gl.weights?e.traverse(function(p){p.morphTargetInfluences&&l.push(p.name?p.name:p.uuid)}):l.push(a);let c;switch(gl[r.path]){case gl.weights:c=qa;break;case gl.rotation:c=Ja;break;case gl.position:case gl.scale:c=Xa;break;default:switch(i.itemSize){case 1:c=qa;break;case 2:case 3:default:c=Xa;break}break}const u=s.interpolation!==void 0?fK[s.interpolation]:Va,h=this._getArrayFromAccessor(i);for(let p=0,m=l.length;p<m;p++){const g=new c(l[p]+"."+gl[r.path],t.array,h,u);s.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(g),o.push(g)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const i=B1(t.constructor),s=new Float32Array(t.length);for(let r=0,o=t.length;r<o;r++)s[r]=t[r]*i;t=s}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){const s=this instanceof Ja?dK:OG;return new s(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}};function bK(n,e,t){const i=e.attributes,s=new Nn;if(i.POSITION!==void 0){const a=t.json.accessors[i.POSITION],l=a.min,c=a.max;if(l!==void 0&&c!==void 0){if(s.set(new O(l[0],l[1],l[2]),new O(c[0],c[1],c[2])),a.normalized){const u=B1(Vd[a.componentType]);s.min.multiplyScalar(u),s.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const r=e.targets;if(r!==void 0){const a=new O,l=new O;for(let c=0,u=r.length;c<u;c++){const h=r[c];if(h.POSITION!==void 0){const p=t.json.accessors[h.POSITION],m=p.min,g=p.max;if(m!==void 0&&g!==void 0){if(l.setX(Math.max(Math.abs(m[0]),Math.abs(g[0]))),l.setY(Math.max(Math.abs(m[1]),Math.abs(g[1]))),l.setZ(Math.max(Math.abs(m[2]),Math.abs(g[2]))),p.normalized){const v=B1(Vd[p.componentType]);l.multiplyScalar(v)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(a)}n.boundingBox=s;const o=new ui;s.getCenter(o.center),o.radius=s.min.distanceTo(s.max)/2,n.boundingSphere=o}function rP(n,e,t){const i=e.attributes,s=[];function r(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in i){const a=T1[o]||o.toLowerCase();a in n.attributes||s.push(r(i[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});s.push(o)}return Ea(n,e),bK(n,e,t),Promise.all(s).then(function(){return e.targets!==void 0?mK(n,e.targets,t):n})}const S_=new WeakMap;let wK=class extends hi{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,s){const r=new ni(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(t).catch(s)},i,s)}decodeDracoFile(e,t,i,s){const r={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:s||this.defaultAttributeTypes,useUniqueIDs:!!i};this.decodeGeometry(e,r).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const c=t.attributeTypes[l];c.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=c.name)}const i=JSON.stringify(t);if(S_.has(e)){const l=S_.get(e);if(l.key===i)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let s;const r=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(r,o).then(l=>(s=l,new Promise((c,u)=>{s._callbacks[r]={resolve:c,reject:u},s.postMessage({type:"decode",id:r,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{s&&r&&this._releaseTask(s,r)}),S_.set(e,{key:i,promise:a}),a}_createGeometry(e){const t=new xt;e.index&&t.setIndex(new wt(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const s=e.attributes[i],r=s.name,o=s.array,a=s.itemSize;t.setAttribute(r,new wt(o,a))}return t}_loadLibrary(e,t){const i=new ni(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((s,r)=>{i.load(e,s,void 0,r)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{const s=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const r=EK.toString(),o=["/* draco decoder */",s,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const s=new Worker(this.workerSourceURL);s._callbacks={},s._taskCosts={},s._taskLoad=0,s.postMessage({type:"init",decoderConfig:this.decoderConfig}),s.onmessage=function(r){const o=r.data;switch(o.type){case"decode":s._callbacks[o.id].resolve(o);break;case"error":s._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(s)}else this.workerPool.sort(function(s,r){return s._taskLoad>r._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}};function EK(){let n,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":n=a.decoderConfig,e=new Promise(function(u){n.onModuleLoaded=function(h){u({draco:h})},DracoDecoderModule(n)});break;case"decode":const l=a.buffer,c=a.taskConfig;e.then(u=>{const h=u.draco,p=new h.Decoder,m=new h.DecoderBuffer;m.Init(new Int8Array(l),l.byteLength);try{const g=t(h,p,m,c),v=g.attributes.map(y=>y.array.buffer);g.index&&v.push(g.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:g},v)}catch(g){console.error(g),self.postMessage({type:"error",id:a.id,error:g.message})}finally{h.destroy(m),h.destroy(p)}});break}};function t(o,a,l,c){const u=c.attributeIDs,h=c.attributeTypes;let p,m;const g=a.GetEncodedGeometryType(l);if(g===o.TRIANGULAR_MESH)p=new o.Mesh,m=a.DecodeBufferToMesh(l,p);else if(g===o.POINT_CLOUD)p=new o.PointCloud,m=a.DecodeBufferToPointCloud(l,p);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!m.ok()||p.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+m.error_msg());const v={index:null,attributes:[]};for(const y in u){const A=self[h[y]];let b,w;if(c.useUniqueIDs)w=u[y],b=a.GetAttributeByUniqueId(p,w);else{if(w=a.GetAttributeId(p,o[u[y]]),w===-1)continue;b=a.GetAttribute(p,w)}v.attributes.push(s(o,a,p,y,A,b))}return g===o.TRIANGULAR_MESH&&(v.index=i(o,a,p)),o.destroy(p),v}function i(o,a,l){const u=l.num_faces()*3,h=u*4,p=o._malloc(h);a.GetTrianglesUInt32Array(l,h,p);const m=new Uint32Array(o.HEAPF32.buffer,p,u).slice();return o._free(p),{array:m,itemSize:1}}function s(o,a,l,c,u,h){const p=h.num_components(),g=l.num_points()*p,v=g*u.BYTES_PER_ELEMENT,y=r(o,u),A=o._malloc(v);a.GetAttributeDataArrayForAllPoints(l,h,y,v,A);const b=new u(o.HEAPF32.buffer,A,g).slice();return o._free(A),{name:c,array:b,itemSize:p}}function r(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let ey;const M_=()=>{if(ey)return ey;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),i=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let s=n;WebAssembly.validate(t)&&(s=e);let r;const o=WebAssembly.instantiate(a(s),{}).then(h=>{r=h.instance,r.exports.__wasm_call_ctors()});function a(h){const p=new Uint8Array(h.length);for(let g=0;g<h.length;++g){const v=h.charCodeAt(g);p[g]=v>96?v-71:v>64?v-65:v>47?v+4:v>46?63:62}let m=0;for(let g=0;g<h.length;++g)p[m++]=p[g]<60?i[p[g]]:(p[g]-60)*64+p[++g];return p.buffer.slice(0,m)}function l(h,p,m,g,v,y){const A=r.exports.sbrk,b=m+3&-4,w=A(b*g),E=A(v.length),M=new Uint8Array(r.exports.memory.buffer);M.set(v,E);const I=h(w,m,g,E,v.length);if(I===0&&y&&y(w,b,g),p.set(M.subarray(w,w+m*g)),A(w-A(0)),I!==0)throw new Error(`Malformed buffer data: ${I}`)}const c={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},u={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return ey={ready:o,supported:!0,decodeVertexBuffer(h,p,m,g,v){l(r.exports.meshopt_decodeVertexBuffer,h,p,m,g,r.exports[c[v]])},decodeIndexBuffer(h,p,m,g){l(r.exports.meshopt_decodeIndexBuffer,h,p,m,g)},decodeIndexSequence(h,p,m,g){l(r.exports.meshopt_decodeIndexSequence,h,p,m,g)},decodeGltfBuffer(h,p,m,g,v,y){l(r.exports[u[v]],h,p,m,g,r.exports[c[y]])}},ey};let ty=null,UG="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function GG(n=!0,e=!0,t){return i=>{t&&t(i),n&&(ty||(ty=new wK),ty.setDecoderPath(typeof n=="string"?n:UG),i.setDRACOLoader(ty)),e&&i.setMeshoptDecoder(typeof M_=="function"?M_():M_)}}const Qg=(n,e,t,i)=>zg(JI,n,GG(e,t,i));Qg.preload=(n,e,t,i)=>zg.preload(JI,n,GG(e,t,i));Qg.clear=n=>zg.clear(JI,n);Qg.setDecoderPath=n=>{UG=n};const _K="modulepreload",CK=function(n){return"/"+n},oP={},SK=function(e,t,i){if(!t||t.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(t.map(r=>{if(r=CK(r),r in oP)return;oP[r]=!0;const o=r.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!i)for(let u=s.length-1;u>=0;u--){const h=s[u];if(h.href===r&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":_K,o||(c.as="script",c.crossOrigin=""),c.href=r,document.head.appendChild(c),o)return new Promise((u,h)=>{c.addEventListener("load",u),c.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>e()).catch(r=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=r,window.dispatchEvent(o),!o.defaultPrevented)throw r})},zG=(n,e,t)=>{let i;switch(n){case kn:i=new Uint8ClampedArray(e*t*4);break;case Zn:i=new Uint16Array(e*t*4);break;case Wo:i=new Uint32Array(e*t*4);break;case Zx:i=new Int8Array(e*t*4);break;case eb:i=new Int16Array(e*t*4);break;case Sg:i=new Int32Array(e*t*4);break;case Sn:i=new Float32Array(e*t*4);break;default:throw new Error("Unsupported data type")}return i};let ny;const MK=(n,e,t,i)=>{if(ny!==void 0)return ny;const s=new Cs(1,1,i);e.setRenderTarget(s);const r=new Wt(new bo,new Un({color:16777215}));e.render(r,t),e.setRenderTarget(null);const o=zG(n,s.width,s.height);return e.readRenderTargetPixels(s,0,0,s.width,s.height,o),s.dispose(),r.geometry.dispose(),r.material.dispose(),ny=o[0]!==0,ny};class XI{constructor(e){var t,i,s,r,o,a,l,c,u,h,p,m,g,v,y,A;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(w){throw this._renderer.setRenderTarget(null),w}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const b={format:dn,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((t=e.renderTargetOptions)===null||t===void 0?void 0:t.anisotropy)!==void 0?(i=e.renderTargetOptions)===null||i===void 0?void 0:i.anisotropy:1,generateMipmaps:((s=e.renderTargetOptions)===null||s===void 0?void 0:s.generateMipmaps)!==void 0?(r=e.renderTargetOptions)===null||r===void 0?void 0:r.generateMipmaps:!1,magFilter:((o=e.renderTargetOptions)===null||o===void 0?void 0:o.magFilter)!==void 0?(a=e.renderTargetOptions)===null||a===void 0?void 0:a.magFilter:Bt,minFilter:((l=e.renderTargetOptions)===null||l===void 0?void 0:l.minFilter)!==void 0?(c=e.renderTargetOptions)===null||c===void 0?void 0:c.minFilter:Bt,samples:((u=e.renderTargetOptions)===null||u===void 0?void 0:u.samples)!==void 0?(h=e.renderTargetOptions)===null||h===void 0?void 0:h.samples:void 0,wrapS:((p=e.renderTargetOptions)===null||p===void 0?void 0:p.wrapS)!==void 0?(m=e.renderTargetOptions)===null||m===void 0?void 0:m.wrapS:Cn,wrapT:((g=e.renderTargetOptions)===null||g===void 0?void 0:g.wrapT)!==void 0?(v=e.renderTargetOptions)===null||v===void 0?void 0:v.wrapT:Cn};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=XI.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new qo,this._camera=new Ko,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!MK(this._type,this._renderer,this._camera,b)){let w;switch(this._type){case Zn:w=this._renderer.extensions.has("EXT_color_buffer_float")?Sn:void 0;break}w!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${Sn}`),this._type=w):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new Wt(new bo,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new Cs(this.width,this.height,b),this._renderTarget.texture.mapping=((y=e.renderTargetOptions)===null||y===void 0?void 0:y.mapping)!==void 0?(A=e.renderTargetOptions)===null||A===void 0?void 0:A.mapping:ec}static instantiateRenderer(){const e=new Lb;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=zG(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new Nr(this.toArray(),this.width,this.height,dn,this._type,(e==null?void 0:e.mapping)||ec,(e==null?void 0:e.wrapS)||Cn,(e==null?void 0:e.wrapT)||Cn,(e==null?void 0:e.magFilter)||Bt,(e==null?void 0:e.minFilter)||Bt,(e==null?void 0:e.anisotropy)||1,yn);return t.generateMipmaps=(e==null?void 0:e.generateMipmaps)!==void 0?e==null?void 0:e.generateMipmaps:!1,t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof cs&&Object.values(this.material.uniforms).forEach(t=>{t.value instanceof ln&&t.value.dispose()}),Object.values(this.material).forEach(t=>{t instanceof ln&&t.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const IK=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,TK=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class BK extends cs{constructor({gamma:e,offsetHdr:t,offsetSdr:i,gainMapMin:s,gainMapMax:r,maxDisplayBoost:o,hdrCapacityMin:a,hdrCapacityMax:l,sdr:c,gainMap:u}){super({name:"GainMapDecoderMaterial",vertexShader:IK,fragmentShader:TK,uniforms:{sdr:{value:c},gainMap:{value:u},gamma:{value:new O(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new O().fromArray(t)},offsetSdr:{value:new O().fromArray(i)},gainMapMin:{value:new O().fromArray(s)},gainMapMax:{value:new O().fromArray(r)},weightFactor:{value:(Math.log2(o)-a)/(l-a)}},blending:po,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=o,this._hdrCapacityMin=a,this._hdrCapacityMax=l,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const t=this.uniforms.gamma.value;t.x=1/e[0],t.y=1/e[1],t.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class QG extends Error{}class HG extends Error{}const Ip=(n,e,t)=>{const i=new RegExp(`${e}="([^"]*)"`,"i").exec(n);if(i)return i[1];const s=new RegExp(`<${e}[^>]*>([\\s\\S]*?)</${e}>`,"i").exec(n);if(s){const r=s[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return r&&r.length===3?r.map(o=>o.replace(/<\/?rdf:li>/g,"")):s[1].trim()}if(t!==void 0)return t;throw new Error(`Can't find ${e} in gainmap metadata`)},RK=n=>{let e;typeof TextDecoder<"u"?e=new TextDecoder().decode(n):e=n.toString();let t=e.indexOf("<x:xmpmeta");for(;t!==-1;){const i=e.indexOf("x:xmpmeta>",t),s=e.slice(t,i+10);try{const r=Ip(s,"hdrgm:GainMapMin","0"),o=Ip(s,"hdrgm:GainMapMax"),a=Ip(s,"hdrgm:Gamma","1"),l=Ip(s,"hdrgm:OffsetSDR","0.015625"),c=Ip(s,"hdrgm:OffsetHDR","0.015625"),u=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(s),h=u?u[1]:"0",p=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(s);if(!p)throw new Error("Incomplete gainmap metadata");const m=p[1];return{gainMapMin:Array.isArray(r)?r.map(g=>parseFloat(g)):[parseFloat(r),parseFloat(r),parseFloat(r)],gainMapMax:Array.isArray(o)?o.map(g=>parseFloat(g)):[parseFloat(o),parseFloat(o),parseFloat(o)],gamma:Array.isArray(a)?a.map(g=>parseFloat(g)):[parseFloat(a),parseFloat(a),parseFloat(a)],offsetSdr:Array.isArray(l)?l.map(g=>parseFloat(g)):[parseFloat(l),parseFloat(l),parseFloat(l)],offsetHdr:Array.isArray(c)?c.map(g=>parseFloat(g)):[parseFloat(c),parseFloat(c),parseFloat(c)],hdrCapacityMin:parseFloat(h),hdrCapacityMax:parseFloat(m)}}catch{}t=e.indexOf("<x:xmpmeta",i)}};class DK{constructor(e){this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((t,i)=>{const s=this.options.debug,r=new DataView(e.buffer);if(r.getUint16(0)!==65496){i(new Error("Not a valid jpeg"));return}const o=r.byteLength;let a=2,l=0,c;for(;a<o;){if(++l>250){i(new Error(`Found no marker after ${l} loops 😵`));return}if(r.getUint8(a)!==255){i(new Error(`Not a valid marker at offset 0x${a.toString(16)}, found: 0x${r.getUint8(a).toString(16)}`));return}if(c=r.getUint8(a+1),s&&console.log(`Marker: ${c.toString(16)}`),c===226){s&&console.log("Found APP2 marker (0xffe2)");const u=a+4;if(r.getUint32(u)===1297106432){const h=u+4;let p;if(r.getUint16(h)===18761)p=!1;else if(r.getUint16(h)===19789)p=!0;else{i(new Error("No valid endianness marker found in TIFF header"));return}if(r.getUint16(h+2,!p)!==42){i(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const m=r.getUint32(h+4,!p);if(m<8){i(new Error("Not valid TIFF data! (First offset less than 8)"));return}const g=h+m,v=r.getUint16(g,!p),y=g+2;let A=0;for(let M=y;M<y+12*v;M+=12)r.getUint16(M,!p)===45057&&(A=r.getUint32(M+8,!p));const b=4,w=g+2+v*12+b,E=[];for(let M=w;M<w+A*16;M+=16){const I={MPType:r.getUint32(M,!p),size:r.getUint32(M+4,!p),dataOffset:r.getUint32(M+8,!p),dependantImages:r.getUint32(M+12,!p),start:-1,end:-1,isFII:!1};I.dataOffset?(I.start=h+I.dataOffset,I.isFII=!1):(I.start=0,I.isFII=!0),I.end=I.start+I.size,E.push(I)}if(this.options.extractNonFII&&E.length){const M=new Blob([r]),I=[];for(const D of E){if(D.isFII&&!this.options.extractFII)continue;const B=M.slice(D.start,D.end+1,"image/jpeg");I.push(B)}t(I)}}}a+=2+r.getUint16(a+2)}})}}const PK=async n=>{const e=RK(n);if(!e)throw new HG("Gain map XMP metadata not found");const i=await new DK({extractFII:!0,extractNonFII:!0}).extract(n);if(i.length!==2)throw new QG("Gain map recovery image not found");return{sdr:new Uint8Array(await i[0].arrayBuffer()),gainMap:new Uint8Array(await i[1].arrayBuffer()),metadata:e}},aP=n=>new Promise((e,t)=>{const i=document.createElement("img");i.onload=()=>{e(i)},i.onerror=s=>{t(s)},i.src=URL.createObjectURL(n)});class LK extends hi{constructor(e,t){super(t),e&&(this._renderer=e),this._internalLoadingManager=new Tb}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=new BK({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new ln,sdr:new ln});return new XI({width:16,height:16,type:Zn,colorSpace:yn,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,t,i,s){const r=s?new Blob([s],{type:"image/jpeg"}):void 0,o=new Blob([i],{type:"image/jpeg"});let a,l,c=!1;if(typeof createImageBitmap>"u"){const p=await Promise.all([r?aP(r):Promise.resolve(void 0),aP(o)]);l=p[0],a=p[1],c=!0}else{const p=await Promise.all([r?createImageBitmap(r,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(o,{imageOrientation:"flipY"})]);l=p[0],a=p[1]}const u=new ln(l||new ImageData(2,2),ec,Cn,Cn,Bt,g1,dn,kn,1,yn);u.flipY=c,u.needsUpdate=!0;const h=new ln(a,ec,Cn,Cn,Bt,g1,dn,kn,1,mn);h.flipY=c,h.needsUpdate=!0,e.width=a.width,e.height=a.height,e.material.gainMap=u,e.material.sdr=h,e.material.gainMapMin=t.gainMapMin,e.material.gainMapMax=t.gainMapMax,e.material.offsetHdr=t.offsetHdr,e.material.offsetSdr=t.offsetSdr,e.material.gamma=t.gamma,e.material.hdrCapacityMin=t.hdrCapacityMin,e.material.hdrCapacityMax=t.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,t.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class kK extends LK{load(e,t,i,s){const r=this.prepareQuadRenderer(),o=new ni(this._internalLoadingManager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(this.withCredentials),this.manager.itemStart(e),o.load(e,async a=>{if(typeof a=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const l=new Uint8Array(a);let c,u,h;try{const p=await PK(l);c=p.sdr,u=p.gainMap,h=p.metadata}catch(p){if(p instanceof HG||p instanceof QG)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),h={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},c=l;else throw p}try{await this.render(r,h,c,u)}catch(p){this.manager.itemError(e),typeof s=="function"&&s(p),r.disposeOnDemandRenderer();return}typeof t=="function"&&t(r),this.manager.itemEnd(e),r.disposeOnDemandRenderer()},i,a=>{this.manager.itemError(e),typeof s=="function"&&s(a)}),r}}function FK(){const{scene:n}=Qg("/sun.glb"),e=ee.useRef(null);return yX((t,i)=>{e.current&&(e.current.rotation.y+=i*.5)}),C.jsx("group",{ref:e,children:C.jsx("primitive",{object:n,scale:[3,3,3],position:[0,0,0]})})}function NK(){return C.jsxs("div",{className:"relative flex items-center justify-center animate-float",style:{width:"300px",height:"300px",background:`
          radial-gradient(circle at 30% 30%, 
            #fff9e6 0%, 
            #ffed4e 20%, 
            #ffa500 60%, 
            #ff6b00 100%
          )
        `,borderRadius:"50%",boxShadow:`
          0 0 50px rgba(255, 200, 0, 0.8),
          0 0 100px rgba(255, 149, 0, 0.4),
          inset -20px -20px 40px rgba(255, 100, 0, 0.3)
        `,animation:"float 3s ease-in-out infinite, sunGlow 2s ease-in-out infinite alternate"},children:[C.jsx("div",{className:"absolute inset-0 rounded-full",style:{background:`
            radial-gradient(circle at 60% 40%, rgba(255, 255, 150, 0.3) 0%, transparent 30%),
            radial-gradient(circle at 20% 70%, rgba(255, 100, 0, 0.2) 0%, transparent 25%),
            radial-gradient(circle at 80% 80%, rgba(255, 150, 0, 0.25) 0%, transparent 20%)
          `}}),C.jsx("div",{className:"absolute inset-8 rounded-full",style:{background:"radial-gradient(circle, rgba(255, 255, 200, 0.6) 0%, transparent 70%)"}})]})}const OK=()=>C.jsx("div",{className:"relative w-full h-64 flex items-center justify-center",children:C.jsx("div",{style:{width:"400px",height:"400px"},className:"animate-float",children:C.jsxs(UX,{camera:{position:[0,0,8],fov:50},style:{background:"transparent",filter:"drop-shadow(0 0 30px rgba(255, 200, 0, 0.6))"},children:[C.jsx("ambientLight",{intensity:.4}),C.jsx("directionalLight",{position:[10,10,5],intensity:1.2,color:"#ffffff"}),C.jsx("pointLight",{position:[0,0,10],intensity:.8,color:"#ffaa00"}),C.jsx("pointLight",{position:[-5,-5,5],intensity:.3,color:"#ff6600"}),C.jsx(ee.Suspense,{fallback:C.jsx(NK,{}),children:C.jsx(FK,{})})]})})});Qg.preload("/sun.glb");const lP=({onExplore:n})=>{const[e,t]=ee.useState(!1);return ee.useEffect(()=>{const i=setTimeout(()=>{t(!0)},300);return()=>clearTimeout(i)},[]),C.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 relative z-10",children:C.jsxs("div",{className:"text-center max-w-4xl mx-auto relative z-10",children:[C.jsxs("div",{className:`mb-16 transition-all duration-1000 ${e?"animate-fadeInUp":"opacity-0 translate-y-10"}`,children:[C.jsx("h1",{className:"text-7xl lg:text-8xl font-bold gradient-text mb-8 animate-float animate-glow",children:"Stellar X"}),C.jsx("p",{className:`text-2xl lg:text-3xl text-blue-200 mb-4 text-shadow transition-all duration-1000 ${e?"animate-fadeInUp animate-delay-200":"opacity-0 translate-y-10"}`,children:"A Child's Journey to Discover Space Weather"}),C.jsx("p",{className:`text-lg text-blue-300 max-w-2xl mx-auto leading-relaxed transition-all duration-1000 ${e?"animate-fadeInUp animate-delay-300":"opacity-0 translate-y-10"}`,children:"Embark on an educational adventure to understand the invisible forces that connect our planet to the cosmos"})]}),C.jsxs("div",{className:`relative z-20 transition-all duration-1000 ${e?"animate-bounceIn animate-delay-500":"opacity-0 scale-50"}`,children:[C.jsxs("button",{onClick:n,className:"group bg-gradient-to-r from-stellar-gold to-orange-500 hover:from-orange-500 hover:to-stellar-gold text-black font-bold py-6 px-12 rounded-full text-2xl transition-all duration-300 transform hover:scale-110 animate-glow flex items-center space-x-4 mx-auto shadow-2xl hover:shadow-stellar-gold/50",children:[C.jsx(oo,{className:"w-8 h-8 group-hover:rotate-12 transition-transform animate-pulse"}),C.jsx("span",{children:"Explore"}),C.jsx(oo,{className:"w-8 h-8 group-hover:-rotate-12 transition-transform animate-pulse"})]}),C.jsx("div",{className:`absolute top-full left-1/2 transform -translate-x-1/2 mt-8 z-10 transition-all duration-1000 ${e?"animate-scaleIn animate-delay-700":"opacity-0 scale-0"}`,style:{mixBlendMode:"screen",opacity:.9},children:C.jsx(OK,{})})]}),C.jsx("div",{className:`absolute top-20 left-10 w-4 h-4 bg-stellar-gold rounded-full animate-float opacity-60 transition-all duration-1000 ${e?"animate-fadeIn animate-delay-1000":"opacity-0"}`}),C.jsx("div",{className:`absolute top-40 right-20 w-6 h-6 bg-nebula-pink rounded-full animate-float opacity-40 transition-all duration-1000 ${e?"animate-fadeIn animate-delay-1000":"opacity-0"}`,style:{animationDelay:"1s"}}),C.jsx("div",{className:`absolute bottom-32 left-20 w-3 h-3 bg-blue-400 rounded-full animate-float opacity-50 transition-all duration-1000 ${e?"animate-fadeIn animate-delay-1000":"opacity-0"}`,style:{animationDelay:"2s"}}),C.jsx("div",{className:`absolute bottom-20 right-10 w-5 h-5 bg-purple-400 rounded-full animate-float opacity-30 transition-all duration-1000 ${e?"animate-fadeIn animate-delay-1000":"opacity-0"}`,style:{animationDelay:"0.5s"}}),C.jsx("div",{className:`absolute top-1/3 left-1/4 w-2 h-2 bg-white rounded-full animate-pulse opacity-70 transition-all duration-1000 ${e?"animate-fadeIn animate-delay-700":"opacity-0"}`}),C.jsx("div",{className:`absolute top-2/3 right-1/4 w-3 h-3 bg-cyan-400 rounded-full animate-pulse opacity-60 transition-all duration-1000 ${e?"animate-fadeIn animate-delay-500":"opacity-0"}`}),C.jsx("div",{className:`absolute top-1/2 left-1/6 w-1 h-1 bg-stellar-gold rounded-full animate-ping opacity-80 transition-all duration-1000 ${e?"animate-fadeIn animate-delay-300":"opacity-0"}`}),C.jsx("div",{className:`absolute top-1/4 right-1/6 w-2 h-2 bg-pink-400 rounded-full animate-ping opacity-50 transition-all duration-1000 ${e?"animate-fadeIn animate-delay-200":"opacity-0"}`})]})})},UK=({onNext:n,onSkipToElements:e})=>{const[t,i]=ee.useState(0),[s,r]=ee.useState(!1),[o,a]=ee.useState(!1),[l,c]=ee.useState(!0),[u,h]=ee.useState(""),[p,m]=ee.useState(!1),g=["My father was a fisherman. One day, he went fishing in the deep ocean.","But something strange happened—he never came back. His GPS stopped working, and he lost his path in the vast sea.","For years, I wondered why this happened. Later, I discovered the truth: it was caused by solar weather.","A powerful space storm disrupted his navigation system.","I realized many lives—fishermen, farmers, pilots, even power operators—can be affected by space weather.","I decided to create this website to help people understand and prepare."];ee.useEffect(()=>{const y=setTimeout(()=>{t<g.length-1?i(t+1):r(!0)},4e3);return()=>{clearTimeout(y)}},[t,g.length]);const v=y=>{h(y?"Wow! Let's know more":"Okay, no problem! Let's learn about solar weather"),m(!0),setTimeout(()=>{a(!1),e()},2e3)};return C.jsxs("div",{className:"min-h-screen flex items-center justify-center px-4 relative z-10",children:[C.jsxs("div",{className:"max-w-6xl mx-auto grid lg:grid-cols-2 gap-12 items-center",children:[C.jsx("div",{className:"flex justify-center lg:justify-end",children:C.jsxs("div",{className:"relative",children:[C.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-400 to-purple-500 rounded-full blur-3xl opacity-30 animate-pulse"}),C.jsx("div",{className:"relative anime-character animate-float",children:C.jsxs("div",{className:"w-80 h-80 rounded-full relative overflow-hidden border-4 border-stellar-gold shadow-2xl",children:[C.jsx("img",{src:"/Girl Portrait.png",alt:"Character Portrait",className:"w-full h-full object-cover"}),C.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent"}),C.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10"})]})})]})}),C.jsxs("div",{className:"text-center lg:text-left space-y-8",children:[C.jsxs("div",{className:"space-y-4",children:[C.jsx("h1",{className:"text-5xl lg:text-6xl font-bold gradient-text animate-fade-in",children:"Stellar X"}),C.jsx("p",{className:"text-xl text-blue-200 animate-fade-in",children:"A Child's Journey to Discover Space Weather"})]}),C.jsx("div",{className:"bg-black bg-opacity-30 backdrop-blur-sm rounded-2xl p-8 min-h-[200px] flex items-center",children:C.jsx("p",{className:"text-lg lg:text-xl text-white leading-relaxed animate-slide-up text-shadow",children:g[t]})}),C.jsx("div",{className:"flex space-x-2 justify-center lg:justify-start",children:g.map((y,A)=>C.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${A<=t?"bg-stellar-gold w-8":"bg-gray-600 w-2"}`},A))}),s&&C.jsx("div",{className:"animate-fade-in space-y-4",children:l&&C.jsxs("button",{onClick:()=>a(!0),className:"group bg-gradient-to-r from-blue-500 to-purple-600 hover:from-purple-600 hover:to-blue-500 text-white font-bold py-4 px-8 rounded-full text-lg transition-all duration-300 transform hover:scale-105 flex items-center space-x-2 mx-auto lg:mx-0",children:[C.jsx(oo,{className:"w-5 h-5"}),C.jsx("span",{children:"Learn About Space Weather Elements"}),C.jsx(oo,{className:"w-5 h-5"})]})})]})]}),o&&C.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 modal-backdrop animate-fade-in",children:C.jsx("div",{className:"bg-black bg-opacity-90 backdrop-blur-sm rounded-2xl max-w-md w-full animate-slide-up border border-stellar-gold border-opacity-30",children:C.jsx("div",{className:"p-8 text-center",children:p?C.jsxs("div",{className:"animate-fade-in",children:[C.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-stellar-gold to-orange-500 rounded-full flex items-center justify-center mx-auto mb-4 animate-pulse",children:C.jsx(oo,{className:"w-8 h-8 text-black"})}),C.jsx("p",{className:"text-xl text-stellar-gold font-bold mb-4",children:u}),C.jsxs("div",{className:"flex items-center justify-center space-x-2 text-blue-200",children:[C.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-stellar-gold"}),C.jsx("span",{children:"Redirecting..."})]})]}):C.jsxs(C.Fragment,{children:[C.jsxs("div",{className:"mb-6",children:[C.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-stellar-gold to-orange-500 rounded-full flex items-center justify-center mx-auto mb-4",children:C.jsx(oo,{className:"w-8 h-8 text-black"})}),C.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"Quick Question!"}),C.jsx("p",{className:"text-lg text-blue-200",children:"Do you know about solar weather?"})]}),C.jsxs("div",{className:"flex space-x-4",children:[C.jsx("button",{onClick:()=>v(!0),className:"flex-1 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-emerald-600 hover:to-green-500 text-white font-bold py-3 px-6 rounded-full transition-all duration-300 transform hover:scale-105",children:"Yes"}),C.jsx("button",{onClick:()=>v(!1),className:"flex-1 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-purple-600 hover:to-blue-500 text-white font-bold py-3 px-6 rounded-full transition-all duration-300 transform hover:scale-105",children:"No"})]})]})})})})]})},GK=({onNext:n,onLearnMore:e})=>{const[t,i]=ee.useState(0),[s,r]=ee.useState(!1),[o,a]=ee.useState(!1),[l,c]=ee.useState(!1);ee.useEffect(()=>{const g=setTimeout(()=>{a(!0)},200);return()=>clearTimeout(g)},[]);const u=[{id:"cme",title:"Coronal Mass Ejections (CME)",icon:C.jsx(BO,{className:"w-16 h-16"}),description:"Massive bursts of solar wind and magnetic fields released from the Sun's corona",details:"Coronal Mass Ejections are like giant bubbles of gas and magnetic field lines that are ejected from the Sun over the course of several hours. When they reach Earth, they can cause beautiful auroras but also disrupt our technology.",color:"from-yellow-400 to-orange-600",facts:["CMEs can travel at speeds up to 3,000 km/s","They can contain billions of tons of plasma","The largest CME on record occurred in 1859","They cause the beautiful Northern and Southern Lights"]},{id:"solar-flares",title:"Solar Flares",icon:C.jsx(Kx,{className:"w-16 h-16"}),description:"Intense bursts of radiation from the Sun's surface",details:"Solar flares are like giant explosions on the Sun that release enormous amounts of energy. They happen when magnetic field lines get tangled up and suddenly snap back into place, releasing energy equivalent to billions of nuclear bombs!",color:"from-red-500 to-orange-500",facts:["The largest flares are called X-class flares","They can disrupt radio communications on Earth","Flares travel at the speed of light","They often occur near sunspots"]},{id:"geomagnetic-storms",title:"Geomagnetic Storms",icon:C.jsx(Q8,{className:"w-16 h-16"}),description:"Disturbances in Earth's magnetic field caused by solar activity",details:"When solar particles reach Earth, they interact with our planet's magnetic field, creating geomagnetic storms. These storms can make compasses spin wildly and cause power outages, but they also create spectacular light shows in the sky!",color:"from-green-400 to-blue-600",facts:["They can last from hours to several days","Stronger storms can be seen at lower latitudes","They can disrupt GPS and satellite communications","The Carrington Event of 1859 was the strongest recorded"]},{id:"solar-wind",title:"Solar Wind",icon:C.jsx(H8,{className:"w-16 h-16"}),description:"A stream of charged particles flowing from the Sun",details:"The solar wind is like an invisible river of particles that flows from the Sun at all times. It's made of electrons and protons that have escaped from the Sun's atmosphere and travel through space at incredible speeds!",color:"from-cyan-400 to-blue-500",facts:["Solar wind speed ranges from 300-800 km/s","It creates the shape of comet tails","Earth's magnetic field protects us from it","It extends beyond Pluto's orbit"]}],h=u[t],p=()=>{t<u.length-1?(c(!0),setTimeout(()=>{i(t+1),r(!1),c(!1)},300)):n()},m=()=>{t>0&&(c(!0),setTimeout(()=>{i(t-1),r(!1),c(!1)},300))};return C.jsx("div",{className:"min-h-screen py-16 px-4 relative z-10",children:C.jsxs("div",{className:"max-w-4xl mx-auto",children:[C.jsxs("div",{className:`text-center mb-12 transition-all duration-1000 ${o?"animate-fadeInUp":"opacity-0 translate-y-10"}`,children:[C.jsx("h1",{className:"text-5xl font-bold gradient-text mb-6 animate-glow",children:"Space Weather Elements"}),C.jsx("p",{className:`text-xl text-blue-200 transition-all duration-1000 ${o?"animate-fadeInUp animate-delay-200":"opacity-0 translate-y-10"}`,children:"Let's explore the amazing forces from our Sun!"})]}),C.jsx("div",{className:`flex justify-center space-x-3 mb-12 transition-all duration-1000 ${o?"animate-slideInUp animate-delay-300":"opacity-0 translate-y-10"}`,children:u.map((g,v)=>C.jsx("div",{className:`h-3 rounded-full transition-all duration-500 ${v<=t?"bg-stellar-gold w-12 animate-glow":"bg-gray-600 w-3"}`},v))}),C.jsxs("div",{className:`bg-black bg-opacity-40 backdrop-blur-sm rounded-3xl p-8 mb-8 border border-white border-opacity-20 transition-all duration-700 ${o?"animate-scaleIn animate-delay-500":"opacity-0 scale-90"} ${l?"opacity-50 transform scale-95":"opacity-100 transform scale-100"}`,children:[C.jsxs("div",{className:"text-center mb-8",children:[C.jsx("div",{className:`bg-gradient-to-r ${h.color} rounded-full w-24 h-24 flex items-center justify-center mx-auto mb-6 text-white animate-float animate-glow transition-all duration-500`,children:h.icon}),C.jsx("h2",{className:`text-3xl font-bold text-white mb-4 transition-all duration-500 ${l?"opacity-0 translate-y-4":"opacity-100 translate-y-0"}`,children:h.title}),C.jsx("p",{className:`text-lg text-blue-200 mb-6 transition-all duration-500 ${l?"opacity-0 translate-y-4":"opacity-100 translate-y-0"}`,children:h.description})]}),C.jsxs("div",{className:`bg-black bg-opacity-30 rounded-2xl p-6 mb-8 transition-all duration-500 ${l?"opacity-0 translate-y-4":"opacity-100 translate-y-0"}`,children:[C.jsx("p",{className:"text-white text-lg leading-relaxed mb-6",children:h.details}),s?C.jsxs("div",{className:"animate-fadeInUp",children:[C.jsx("h3",{className:"text-stellar-gold text-xl font-bold mb-4 text-center animate-glow",children:"🌟 Amazing Facts! 🌟"}),C.jsx("div",{className:"grid gap-3",children:h.facts.map((g,v)=>C.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-purple-900 rounded-lg p-4 text-white border border-stellar-gold border-opacity-30 animate-slideInLeft",style:{animationDelay:`${v*.1}s`},children:C.jsxs("div",{className:"flex items-start space-x-3",children:[C.jsx("span",{className:"text-stellar-gold text-xl",children:"✨"}),C.jsx("span",{children:g})]})},v))})]}):C.jsxs("button",{onClick:()=>r(!0),className:"bg-gradient-to-r from-stellar-gold to-orange-500 hover:from-orange-500 hover:to-stellar-gold text-black font-bold py-3 px-6 rounded-full transition-all duration-300 transform hover:scale-105 flex items-center space-x-2 mx-auto animate-bounceIn",children:[C.jsx(oo,{className:"w-5 h-5 animate-pulse"}),C.jsx("span",{children:"Show Fun Facts!"})]})]}),C.jsxs("div",{className:"flex justify-between items-center",children:[C.jsxs("button",{onClick:m,disabled:t===0,className:`flex items-center space-x-2 px-6 py-3 rounded-full transition-all duration-300 transform hover:scale-105 ${t===0?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-purple-600 hover:to-blue-600 text-white animate-slideInLeft"}`,children:[C.jsx(oI,{className:"w-5 h-5"}),C.jsx("span",{children:"Previous"})]}),C.jsx("div",{className:"text-center",children:C.jsxs("span",{className:"text-stellar-gold font-bold text-lg animate-pulse",children:[t+1," of ",u.length]})}),C.jsxs("button",{onClick:p,className:"flex items-center space-x-2 px-6 py-3 rounded-full bg-gradient-to-r from-stellar-gold to-orange-500 hover:from-orange-500 hover:to-stellar-gold text-black font-bold transition-all duration-300 transform hover:scale-105 animate-slideInRight",children:[C.jsx("span",{children:t===u.length-1?"Continue":"Next"}),C.jsx(_g,{className:"w-5 h-5"})]})]}),e&&C.jsx("div",{className:"text-center mt-8",children:C.jsx("button",{onClick:e,className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-pink-600 hover:to-purple-600 text-white font-bold py-3 px-8 rounded-full transition-all duration-300 transform hover:scale-105 animate-pulse",children:C.jsxs("span",{className:"flex items-center space-x-2",children:[C.jsx(oo,{className:"w-5 h-5"}),C.jsx("span",{children:"Learn More in Gallery"}),C.jsx(oo,{className:"w-5 h-5"})]})})})]}),C.jsx("div",{className:`absolute top-20 left-10 w-3 h-3 bg-stellar-gold rounded-full animate-float opacity-60 transition-all duration-1000 ${o?"animate-fadeIn animate-delay-1000":"opacity-0"}`}),C.jsx("div",{className:`absolute top-1/3 right-20 w-4 h-4 bg-blue-400 rounded-full animate-pulse opacity-50 transition-all duration-1000 ${o?"animate-fadeIn animate-delay-700":"opacity-0"}`}),C.jsx("div",{className:`absolute bottom-32 left-1/4 w-2 h-2 bg-purple-400 rounded-full animate-ping opacity-70 transition-all duration-1000 ${o?"animate-fadeIn animate-delay-500":"opacity-0"}`}),C.jsx("div",{className:`absolute bottom-20 right-1/3 w-3 h-3 bg-cyan-400 rounded-full animate-bounce opacity-40 transition-all duration-1000 ${o?"animate-fadeIn animate-delay-300":"opacity-0"}`})]})})},zK=({onBack:n})=>{const[e,t]=ee.useState(0),[i,s]=ee.useState(Math.floor(Math.random()*100)),r=[{title:"Satellite Monitoring",icon:C.jsx(TO,{className:"w-16 h-16"}),description:"Advanced satellites continuously monitor the Sun's activity, detecting solar flares and coronal mass ejections in real-time."},{title:"AI Analysis",icon:C.jsx(O8,{className:"w-16 h-16"}),description:"Artificial intelligence systems analyze vast amounts of solar data to predict space weather patterns and potential impacts."},{title:"Ground Observatories",icon:C.jsx(U8,{className:"w-16 h-16"}),description:"Earth-based observatories work together with space missions to provide comprehensive space weather monitoring."},{title:"Global Alerts",icon:C.jsx(IO,{className:"w-16 h-16"}),description:"Warning systems alert governments, airlines, power companies, and the public about incoming space weather events."}];return ee.useEffect(()=>{const o=setInterval(()=>{t(a=>(a+1)%r.length),s(Math.floor(Math.random()*100))},4e3);return()=>clearInterval(o)},[r.length]),C.jsx("div",{className:"min-h-screen py-16 px-4 relative z-10",children:C.jsxs("div",{className:"max-w-6xl mx-auto",children:[C.jsxs("div",{className:"text-center mb-16 animate-fade-in",children:[C.jsxs("div",{className:"relative mb-8",children:[C.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-400 to-purple-500 rounded-full blur-3xl opacity-20 animate-pulse"}),C.jsx("div",{className:"relative anime-character animate-float mx-auto w-fit",children:C.jsxs("div",{className:"w-64 h-64 rounded-full relative overflow-hidden border-4 border-cyan-400 shadow-2xl",children:[C.jsx("img",{src:"/Girl Portrait.png",alt:"Character Portrait",className:"w-full h-full object-cover"}),C.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/30 to-transparent"}),C.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-cyan-500/15 to-purple-500/15"}),C.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-transparent via-transparent to-blue-400/10"})]})})]}),C.jsx("h1",{className:"text-5xl font-bold gradient-text mb-6",children:"Space Weather Prediction"}),C.jsx("p",{className:"text-xl text-blue-200 max-w-3xl mx-auto",children:"How scientists predict and monitor space weather to protect our world"})]}),C.jsxs("div",{className:"relative mb-16",children:[C.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-space-blue to-transparent rounded-2xl"}),C.jsx("div",{className:"bg-black bg-opacity-20 backdrop-blur-sm rounded-2xl p-8 relative",children:C.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center",children:[C.jsx("div",{className:"animate-slide-up",children:C.jsxs("div",{className:"text-center mb-8",children:[C.jsx("div",{className:"bg-gradient-to-r from-cyan-500 to-purple-500 rounded-full w-24 h-24 flex items-center justify-center mx-auto mb-6 text-white animate-pulse",children:r[e].icon}),C.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:r[e].title}),C.jsx("p",{className:"text-blue-200 leading-relaxed",children:r[e].description})]})}),C.jsx("div",{className:"animate-slide-up",children:C.jsxs("div",{className:"bg-black bg-opacity-40 rounded-xl p-6",children:[C.jsx("h4",{className:"text-xl font-bold text-stellar-gold mb-4 text-center",children:"Live Solar Activity Monitor"}),C.jsxs("div",{className:"space-y-4",children:[C.jsxs("div",{className:"flex justify-between items-center",children:[C.jsx("span",{className:"text-white",children:"Solar Activity Level:"}),C.jsxs("span",{className:`font-bold ${i>70?"text-red-400":i>40?"text-yellow-400":"text-green-400"}`,children:[i,"%"]})]}),C.jsx("div",{className:"w-full bg-gray-700 rounded-full h-3",children:C.jsx("div",{className:`h-3 rounded-full transition-all duration-1000 ${i>70?"bg-gradient-to-r from-red-500 to-red-600":i>40?"bg-gradient-to-r from-yellow-500 to-orange-500":"bg-gradient-to-r from-green-500 to-green-600"}`,style:{width:`${i}%`}})}),C.jsx("div",{className:"text-center",children:C.jsx("span",{className:`text-sm font-semibold ${i>70?"text-red-400":i>40?"text-yellow-400":"text-green-400"}`,children:i>70?"HIGH ALERT":i>40?"MODERATE":"QUIET"})})]})]})})]})})]}),C.jsx("div",{className:"flex justify-center space-x-4 mb-16",children:r.map((o,a)=>C.jsx("div",{className:`w-4 h-4 rounded-full transition-all duration-500 ${a===e?"bg-stellar-gold scale-125":"bg-gray-600"}`},a))}),C.jsxs("div",{className:"bg-black bg-opacity-30 backdrop-blur-sm rounded-2xl p-8 text-center animate-fade-in",children:[C.jsxs("div",{className:"flex items-center justify-center mb-6",children:[C.jsx(n2,{className:"w-8 h-8 text-red-400 mr-3"}),C.jsx("h2",{className:"text-3xl font-bold gradient-text",children:"A Message from Our Young Scientist"}),C.jsx(n2,{className:"w-8 h-8 text-red-400 ml-3"})]}),C.jsx("p",{className:"text-xl text-white leading-relaxed mb-8 max-w-4xl mx-auto",children:'"Space weather affects all of us—from the fisherman navigating the seas to the farmer growing our food, from the pilot flying overhead to the engineer managing our power grid. By understanding and predicting these cosmic forces, we can protect lives, preserve technology, and build a more resilient future. Stay informed, stay prepared, and help spread awareness about the invisible forces that connect us all to the stars."'}),C.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[C.jsxs("button",{onClick:n,className:"group bg-gradient-to-r from-blue-600 to-purple-600 hover:from-purple-600 hover:to-blue-600 text-white font-bold py-3 px-6 rounded-full transition-all duration-300 transform hover:scale-105 flex items-center space-x-2",children:[C.jsx(rI,{className:"w-5 h-5 group-hover:-translate-x-1 transition-transform"}),C.jsx("span",{children:"Start Over"})]}),C.jsx("a",{href:"https://www.nasa.gov/space-weather",target:"_blank",rel:"noopener noreferrer",className:"bg-gradient-to-r from-stellar-gold to-orange-500 hover:from-orange-500 hover:to-stellar-gold text-black font-bold py-3 px-6 rounded-full transition-all duration-300 transform hover:scale-105",children:"Learn More from NASA"})]})]})]})})},QK=({starCount:n=100,className:e="stars z-15"})=>{const[t,i]=ee.useState([]),[s,r]=ee.useState(!0),o=ee.useCallback(l=>{try{const c=[];for(let u=0;u<l;u++)c.push({id:u,x:Math.random()*100,y:Math.random()*100,delay:Math.random()*3,size:Math.random()*2+1,opacity:Math.random()*.7+.3});return c}catch(c){return console.warn("Error generating stars:",c),[]}},[]);ee.useEffect(()=>{const l=o(n);i(l)},[o,n]),ee.useEffect(()=>{const l=()=>{r(!document.hidden)};return document.addEventListener("visibilitychange",l),()=>{document.removeEventListener("visibilitychange",l)}},[]);const a=ee.useMemo(()=>!s||t.length===0?null:t.map(l=>C.jsx("div",{className:"star",style:{left:`${l.x}%`,top:`${l.y}%`,animationDelay:`${l.delay}s`,width:`${l.size}px`,height:`${l.size}px`,opacity:l.opacity},"aria-hidden":"true"},l.id)),[t,s]);return t.length===0?C.jsxs("div",{className:e,"aria-label":"Starfield background",role:"img",children:[C.jsx("div",{className:"star",style:{left:"10%",top:"20%"},"aria-hidden":"true"}),C.jsx("div",{className:"star",style:{left:"80%",top:"30%"},"aria-hidden":"true"}),C.jsx("div",{className:"star",style:{left:"60%",top:"70%"},"aria-hidden":"true"}),C.jsx("div",{className:"star",style:{left:"30%",top:"80%"},"aria-hidden":"true"}),C.jsx("div",{className:"star",style:{left:"90%",top:"10%"},"aria-hidden":"true"})]}):C.jsx("div",{className:e,"aria-label":"Animated starfield background",role:"img",children:a})},HK=({selectedCharacter:n,onNext:e,onBack:t,onLearnMore:i})=>{const[s,r]=ee.useState(50),[o,a]=ee.useState(!1),[l,c]=ee.useState(!1),[u,h]=ee.useState(null),[p,m]=ee.useState(null),[g,v]=ee.useState(!1),[y,A]=ee.useState(0),[b,w]=ee.useState(0),[E,M]=ee.useState(!1),[I,D]=ee.useState(!1),[B,R]=ee.useState(!1);ee.useEffect(()=>{const q=setTimeout(()=>{D(!0)},300);return()=>clearTimeout(q)},[]),ee.useEffect(()=>{if(n||p){R(!0);const q=setTimeout(()=>{R(!1)},500);return()=>clearTimeout(q)}},[n,p]);const T=[{id:"farmer",name:"Farmer",emoji:"🌾",icon:C.jsx(Nv,{className:"w-6 h-6"}),baseHealth:100,vulnerability:.6,color:"from-green-500 to-emerald-600",description:"Growing crops and feeding communities",impact:"Solar storms can disrupt GPS systems used for precision farming, affecting crop monitoring, automated tractors, and irrigation systems. This can lead to reduced crop yields and food security issues.",solutions:["Use backup navigation systems during solar storm warnings","Monitor space weather forecasts before critical farming operations","Implement manual override systems for automated equipment","Diversify farming techniques to reduce GPS dependency"]},{id:"fisherman",name:"Fisherman",emoji:"🎣",icon:C.jsx(af,{className:"w-6 h-6"}),baseHealth:100,vulnerability:.8,color:"from-blue-500 to-cyan-600",description:"Navigating the vast oceans to catch fish",impact:"GPS navigation failures during geomagnetic storms can leave fishermen lost at sea, unable to find their way back to shore or locate fishing grounds. This puts lives at risk and affects livelihoods.",solutions:["Carry traditional compass and paper charts as backup","Learn celestial navigation techniques","Stay informed about space weather conditions","Use multiple navigation systems for redundancy"]},{id:"grid-operator",name:"Grid Operator",emoji:"⚡",icon:C.jsx(Kx,{className:"w-6 h-6"}),baseHealth:100,vulnerability:.9,color:"from-yellow-500 to-orange-600",description:"Managing electrical power systems",impact:"Geomagnetic storms can induce currents in power lines, causing transformer damage, blackouts, and cascading failures across the electrical grid, affecting millions of people.",solutions:["Monitor space weather alerts and forecasts","Implement protective relay systems","Have backup power generation ready","Coordinate with other grid operators during storms"]},{id:"astronaut",name:"Astronaut",emoji:"🚀",icon:C.jsx(Jl,{className:"w-6 h-6"}),baseHealth:100,vulnerability:1,color:"from-purple-500 to-pink-600",description:"Exploring space and conducting research",impact:"Direct exposure to solar radiation and particles during space missions can cause serious health issues, equipment failures, and mission abort scenarios.",solutions:["Monitor space weather forecasts before EVAs","Use radiation shielding in spacecraft","Have emergency protocols for solar storms","Coordinate with ground control for safety updates"]}],k=n?T.find(q=>q.id===n.id)||null:p,H=q=>{m(q),v(!1),a(!1),c(!1),h(null)},Q=()=>{m(null),v(!1),a(!1),c(!1),h(null)},W=()=>{v(!0)},X=[{character:"farmer",question:"A solar storm warning has been issued. As a farmer using GPS-guided tractors, what should you do first?",options:["Continue farming operations as normal","Switch to manual navigation and monitor space weather alerts","Only use GPS systems for navigation","Ignore the warning and work faster"],correct:1,explanation:"During solar storms, GPS accuracy can be severely compromised. Switching to backup navigation systems ensures continued operations."},{character:"farmer",question:"Your automated irrigation system relies on GPS timing. During a geomagnetic storm, you should:",options:["Let the system run automatically","Manually monitor and control irrigation timing","Turn off all irrigation systems","Increase automation settings"],correct:1,explanation:"Manual monitoring ensures crops receive proper irrigation when GPS timing systems may be disrupted."},{character:"farmer",question:"To prepare for future space weather events, farmers should:",options:["Rely only on modern GPS technology","Implement backup navigation and timing systems","Avoid using any technology","Only farm during clear weather"],correct:1,explanation:"Having backup systems ensures farming operations can continue even when space weather affects GPS systems."},{character:"farmer",question:"Space weather forecasts are important for farmers because they help:",options:["Predict rainfall patterns","Plan operations around potential GPS disruptions","Determine soil quality","Control pest populations"],correct:1,explanation:"Space weather forecasts help farmers plan operations and prepare backup systems before GPS disruptions occur."},{character:"farmer",question:"If GPS-guided equipment malfunctions during a solar storm, the best immediate action is:",options:["Force the equipment to continue operating","Switch to manual operation and check backup systems","Wait for the storm to pass without working","Use the equipment at maximum speed"],correct:1,explanation:"Switching to manual operation prevents equipment damage and ensures safe, continued farming operations."},{character:"fisherman",question:"You're at sea when a geomagnetic storm warning is issued. Your GPS stops working. What should you do?",options:["Continue fishing and hope GPS returns","Use compass, charts, and celestial navigation to return to shore","Stay in the same spot until GPS works","Follow other boats randomly"],correct:1,explanation:"Traditional navigation methods are essential backup systems when GPS fails during space weather events."},{character:"fisherman",question:"Before heading out to sea, you should check space weather forecasts to:",options:["Predict fish behavior","Prepare backup navigation equipment for potential GPS disruptions","Determine water temperature","Plan fishing routes only"],correct:1,explanation:"Space weather can disrupt GPS navigation, so preparing backup systems is crucial for safe return to shore."},{character:"fisherman",question:"Essential backup navigation tools for fishermen include:",options:["Only modern GPS devices","Compass, paper charts, and knowledge of celestial navigation","Just radio communication","Only electronic fish finders"],correct:1,explanation:"Traditional navigation tools don't rely on satellites and remain functional during space weather events."},{character:"fisherman",question:"During a solar storm, communication systems may also be affected. You should:",options:["Rely only on cell phones","Have multiple communication methods including VHF radio","Avoid all communication","Only use satellite phones"],correct:1,explanation:"VHF radio and other communication methods provide redundancy when satellite-based systems fail."},{character:"fisherman",question:"If you notice GPS accuracy decreasing while at sea, you should:",options:["Ignore it and continue fishing","Immediately switch to backup navigation and consider returning to shore","Try to fix the GPS yourself","Go further out to sea"],correct:1,explanation:"Early recognition of GPS problems allows time to safely navigate back to shore using backup methods."},{character:"grid-operator",question:"A severe geomagnetic storm is forecasted. As a grid operator, your first priority should be:",options:["Increase power generation to maximum","Monitor space weather alerts and prepare protective systems","Shut down the entire grid immediately","Ignore the forecast and continue normal operations"],correct:1,explanation:"Monitoring alerts and preparing protective systems helps prevent transformer damage and cascading failures."},{character:"grid-operator",question:"Geomagnetic storms can induce currents in power lines. To protect transformers, you should:",options:["Increase voltage levels","Activate protective relay systems and consider load reduction","Disconnect all power lines","Ignore the induced currents"],correct:1,explanation:"Protective relays and load management help prevent transformer damage from geomagnetically induced currents."},{character:"grid-operator",question:"During a space weather event, coordination with other grid operators is important to:",options:["Compete for customers","Share load and prevent cascading failures across regions","Increase prices","Reduce communication"],correct:1,explanation:"Regional coordination helps maintain grid stability and prevents widespread blackouts during space weather events."},{character:"grid-operator",question:"Backup power generation during geomagnetic storms should be:",options:["Avoided completely","Ready and tested to handle increased demand if main systems fail","Used only for profit","Kept offline permanently"],correct:1,explanation:"Backup systems ensure power continuity when main grid components are affected by space weather."},{character:"grid-operator",question:"The most vulnerable grid components during geomagnetic storms are:",options:["Light bulbs and small appliances","High-voltage transformers and transmission lines","Customer meters","Office computers"],correct:1,explanation:"High-voltage equipment is most susceptible to geomagnetically induced currents and requires special protection."},{character:"astronaut",question:"A solar particle event is detected while you're on a spacewalk (EVA). You should:",options:["Continue the EVA as planned","Immediately return to the spacecraft's shielded area","Stay outside longer to study the event","Remove your helmet for better visibility"],correct:1,explanation:"Solar particle events pose serious radiation risks. Immediate shelter in shielded areas is essential for astronaut safety."},{character:"astronaut",question:"Space weather monitoring is crucial for astronauts because it helps:",options:["Plan meal schedules","Schedule EVAs during safe periods and prepare for radiation exposure","Determine spacecraft color","Choose entertainment options"],correct:1,explanation:"Space weather forecasts help plan safe EVA times and prepare radiation protection measures."},{character:"astronaut",question:"The most effective protection against solar radiation in space is:",options:["Wearing sunglasses","Using spacecraft shielding and limiting EVA time during storms","Drinking more water","Exercising more frequently"],correct:1,explanation:"Physical shielding and timing restrictions are the primary defenses against space radiation."},{character:"astronaut",question:"If spacecraft systems malfunction during a solar storm, astronauts should:",options:["Panic and abandon the mission","Follow emergency protocols and communicate with ground control","Try to fix everything immediately","Ignore the problems"],correct:1,explanation:"Emergency protocols and ground communication ensure proper response to space weather-related system failures."},{character:"astronaut",question:"Long-term exposure to space radiation can cause:",options:["Improved vision","Increased cancer risk and other health issues","Better physical strength","Enhanced mental abilities"],correct:1,explanation:"Space radiation exposure increases cancer risk and can cause various health problems, requiring careful monitoring and protection."}],J=q=>{const ae=s*q.vulnerability/100;return Math.max(0,q.baseHealth-ae*100)},K=()=>s<30?{label:"Calm",color:"text-green-400"}:s<60?{label:"Moderate",color:"text-yellow-400"}:s<80?{label:"Strong",color:"text-orange-400"}:{label:"Severe",color:"text-red-400"},L=q=>{const ge=100-J(q);let se={shake:"",glow:"",opacity:1,filter:"",particles:!1,warningColor:""};return ge>80?(se.shake="animate-pulse animate-bounce",se.glow="drop-shadow-[0_0_20px_rgba(239,68,68,0.8)]",se.opacity=.7,se.filter="hue-rotate(0deg) saturate(150%) brightness(120%)",se.particles=!0,se.warningColor="text-red-500"):ge>60?(se.shake="animate-pulse",se.glow="drop-shadow-[0_0_15px_rgba(251,146,60,0.6)]",se.opacity=.8,se.filter="hue-rotate(15deg) saturate(130%) brightness(110%)",se.particles=!0,se.warningColor="text-orange-500"):ge>30?(se.shake="",se.glow="drop-shadow-[0_0_10px_rgba(251,191,36,0.4)]",se.opacity=.9,se.filter="hue-rotate(30deg) saturate(110%)",se.particles=!1,se.warningColor="text-yellow-500"):(se.shake="",se.glow="",se.opacity=1,se.filter="",se.particles=!1,se.warningColor="text-green-500"),se},V=()=>{i&&k?i({id:k.id,name:k.name,emoji:k.emoji}):(a(!0),setTimeout(()=>c(!0),3e3))},j=()=>{a(!0)},$=q=>{const ae=X.filter(se=>se.character===(k==null?void 0:k.id)),ge=ae[y];q===ge.correct&&w(b+1),h(q.toString()),setTimeout(()=>{y<ae.length-1?(A(y+1),h(null)):M(!0)},2e3)},le=()=>{A(0),w(0),M(!1),h(null),c(!1)},ve=K();if(o&&k){const q=T.find(ae=>ae.id===k.id);return q?l?C.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 relative z-10",children:C.jsx("div",{className:"max-w-2xl mx-auto text-center",children:C.jsxs("div",{className:"bg-black bg-opacity-40 backdrop-blur-sm rounded-2xl p-8 animate-fade-in",children:[C.jsxs("div",{className:"flex justify-between items-center mb-6",children:[C.jsxs("h3",{className:"text-2xl font-bold text-white",children:["🧠 Knowledge Check - Save the ",k.name,"!"]}),C.jsx("button",{onClick:()=>c(!1),className:"text-gray-400 hover:text-white transition-colors",children:"✕"})]}),E?C.jsxs("div",{className:"text-center",children:[C.jsx("div",{className:"mb-6",children:b>=4?C.jsxs("div",{children:[C.jsx("div",{className:"text-6xl mb-4",children:"🎉"}),C.jsxs("h3",{className:"text-3xl font-bold text-green-400 mb-2",children:["Congratulations! You Saved the ",k.name,"!"]}),C.jsxs("p",{className:"text-xl text-green-300 mb-4",children:["Score: ",b,"/5 - Excellent Knowledge!"]}),C.jsxs("p",{className:"text-gray-300",children:["You've demonstrated excellent understanding of space weather protection strategies. The ",k.name," is now well-prepared for future space weather events!"]})]}):b>=3?C.jsxs("div",{children:[C.jsx("div",{className:"text-6xl mb-4",children:"👍"}),C.jsxs("h3",{className:"text-3xl font-bold text-yellow-400 mb-2",children:["Good Job! The ",k.name," is Safer!"]}),C.jsxs("p",{className:"text-xl text-yellow-300 mb-4",children:["Score: ",b,"/5 - Good Knowledge!"]}),C.jsx("p",{className:"text-gray-300",children:"You have a solid understanding of space weather protection. Consider reviewing the solutions for even better preparation!"})]}):C.jsxs("div",{children:[C.jsx("div",{className:"text-6xl mb-4",children:"⚠️"}),C.jsxs("h3",{className:"text-3xl font-bold text-red-400 mb-2",children:["The ",k.name," Needs More Protection!"]}),C.jsxs("p",{className:"text-xl text-red-300 mb-4",children:["Score: ",b,"/5 - Review Needed"]}),C.jsxs("p",{className:"text-gray-300",children:["Please review the protection strategies and try again to better protect the ",k.name,"!"]})]})}),C.jsxs("div",{className:"flex gap-4 justify-center",children:[C.jsx("button",{onClick:le,className:"px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-semibold transition-colors",children:"Try Again"}),C.jsx("button",{onClick:()=>c(!1),className:"px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-semibold transition-colors",children:"Close Quiz"}),e&&C.jsxs("button",{onClick:e,className:"px-6 py-3 bg-gradient-to-r from-stellar-gold to-orange-500 hover:from-orange-500 hover:to-stellar-gold text-black font-semibold rounded-lg transition-all duration-300 transform hover:scale-105 flex items-center space-x-2",children:[C.jsx("span",{children:"Next Page"}),C.jsx(_g,{className:"w-4 h-4"})]})]})]}):(()=>{const ae=X.filter(se=>se.character===k.id),ge=ae[y];return C.jsxs("div",{children:[C.jsxs("div",{className:"mb-6",children:[C.jsxs("div",{className:"flex justify-between text-sm text-gray-300 mb-2",children:[C.jsxs("span",{children:["Question ",y+1," of ",ae.length]}),C.jsxs("span",{children:["Score: ",b,"/",ae.length]})]}),C.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:C.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full transition-all duration-300",style:{width:`${(y+1)/ae.length*100}%`}})})]}),C.jsxs("div",{className:"mb-6",children:[C.jsx("h4",{className:"text-lg font-semibold text-white mb-4",children:ge.question}),C.jsx("div",{className:"space-y-3",children:ge.options.map((se,Fe)=>C.jsxs("button",{onClick:()=>$(Fe),disabled:u!==null,className:`w-full p-4 text-left rounded-lg border transition-all duration-200 ${u===null?"border-gray-600 bg-gray-700/50 hover:bg-gray-600/50 hover:border-purple-400 text-white":u===Fe.toString()?Fe===ge.correct?"border-green-500 bg-green-500/20 text-green-300":"border-red-500 bg-red-500/20 text-red-300":Fe===ge.correct?"border-green-500 bg-green-500/20 text-green-300":"border-gray-600 bg-gray-700/30 text-gray-400"}`,children:[C.jsxs("span",{className:"font-medium",children:[String.fromCharCode(65+Fe),"."]})," ",se]},Fe))}),u!==null&&C.jsx("div",{className:"mt-4 p-4 bg-blue-900/30 border border-blue-500/30 rounded-lg",children:C.jsxs("p",{className:"text-blue-200",children:[C.jsx("strong",{children:"Explanation:"})," ",ge.explanation]})})]})]})})()]})})}):C.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 relative z-10",children:C.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[C.jsxs("div",{className:"mb-8 animate-fade-in",children:[C.jsx("div",{className:`bg-gradient-to-r ${q.color} rounded-full w-32 h-32 flex items-center justify-center mx-auto mb-6 animate-float`,children:C.jsx("span",{className:"text-6xl",children:q.emoji})}),C.jsx("h2",{className:"text-4xl font-bold text-white mb-4",children:q.name}),C.jsx("p",{className:"text-xl text-blue-200 mb-8",children:q.description})]}),C.jsxs("div",{className:"bg-black bg-opacity-40 backdrop-blur-sm rounded-2xl p-8 animate-slide-up",children:[C.jsx("h3",{className:"text-2xl font-bold text-stellar-gold mb-6",children:"Impact of Space Weather"}),C.jsx("p",{className:"text-lg text-blue-200 leading-relaxed mb-8",children:q.impact}),C.jsxs("h4",{className:"text-xl font-bold text-white mb-6 flex items-center",children:[C.jsx(af,{className:"w-6 h-6 text-green-400 mr-2"}),"Protection Strategies & Solutions"]}),C.jsx("div",{className:"grid gap-4 text-left mb-8",children:q.solutions.map((ae,ge)=>C.jsxs("div",{className:"flex items-start space-x-3 animate-slide-up bg-green-900 bg-opacity-20 rounded-lg p-4 border border-green-500 border-opacity-30 hover:border-opacity-50 transition-all duration-300",style:{animationDelay:`${ge*.1}s`},children:[C.jsx(MO,{className:"w-6 h-6 text-green-400 mt-1 flex-shrink-0"}),C.jsx("p",{className:"text-green-100 font-medium",children:ae})]},ge))}),C.jsxs("div",{className:"bg-blue-900 bg-opacity-30 rounded-lg p-6 border border-blue-500 border-opacity-30 mb-6",children:[C.jsxs("h5",{className:"text-lg font-bold text-blue-300 mb-3 flex items-center",children:[C.jsx(Jl,{className:"w-5 h-5 text-yellow-400 mr-2"}),"Emergency Action Plan"]}),C.jsxs("div",{className:"space-y-2 text-blue-200",children:[C.jsx("p",{className:"text-sm",children:"• Monitor space weather alerts continuously"}),C.jsx("p",{className:"text-sm",children:"• Have backup systems ready and tested"}),C.jsx("p",{className:"text-sm",children:"• Establish communication protocols"}),C.jsx("p",{className:"text-sm",children:"• Train team members on emergency procedures"})]})]}),C.jsxs("div",{className:"text-center",children:[C.jsx("p",{className:"text-blue-300 mb-4 font-medium",children:"Ready to test your knowledge?"}),C.jsxs("button",{onClick:()=>c(!0),className:"bg-gradient-to-r from-purple-500 to-pink-600 hover:from-pink-600 hover:to-purple-500 text-white font-bold py-3 px-8 rounded-full text-lg transition-all duration-300 transform hover:scale-105 animate-pulse",children:["🧠 Take the Quiz to Save ",q.name,"!"]}),e&&C.jsx("div",{className:"mt-4",children:C.jsx("button",{onClick:e,className:"bg-gray-600 hover:bg-gray-500 text-white font-medium py-2 px-6 rounded-full text-sm transition-all duration-300 transform hover:scale-105",children:"Skip Quiz"})})]})]})]})}):null}return!k&&!n||g?C.jsx("div",{className:"min-h-screen py-16 px-4 relative z-10",children:C.jsxs("div",{className:"max-w-6xl mx-auto",children:[C.jsxs("div",{className:"text-center mb-12 animate-fade-in",children:[C.jsx("h1",{className:"text-5xl font-bold gradient-text mb-6",children:"Interactive Damage Simulator"}),C.jsx("p",{className:"text-xl text-blue-200 max-w-3xl mx-auto mb-8",children:"Choose a character to see how solar weather affects their daily operations"})]}),C.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:T.map((q,ae)=>C.jsx("div",{onClick:()=>H(q),className:`bg-black bg-opacity-40 backdrop-blur-sm rounded-2xl p-6 border border-white border-opacity-20 cursor-pointer hover:border-opacity-40 transition-all duration-300 transform hover:scale-105 ${I?"animate-slideInUp opacity-100":"opacity-0 translate-y-12"}`,style:{animationDelay:`${600+ae*100}ms`},children:C.jsxs("div",{className:"text-center",children:[C.jsx("div",{className:`text-6xl mb-4 transition-all duration-700 ${I?"animate-bounceIn":"opacity-0 scale-75"}`,style:{animationDelay:`${700+ae*100}ms`},children:q.emoji}),C.jsx("h3",{className:`text-xl font-bold text-white mb-2 transition-all duration-700 ${I?"animate-fadeInUp opacity-100":"opacity-0 translate-y-4"}`,style:{animationDelay:`${800+ae*100}ms`},children:q.name}),C.jsx("div",{className:`bg-gradient-to-r ${q.color} rounded-full w-12 h-12 flex items-center justify-center mx-auto mb-3 text-white animate-glow transition-all duration-700 ${I?"animate-scaleIn opacity-100":"opacity-0 scale-75"}`,style:{animationDelay:`${900+ae*100}ms`},children:q.icon}),C.jsx("p",{className:`text-sm text-blue-200 mb-4 transition-all duration-700 ${I?"animate-fadeInUp opacity-100":"opacity-0 translate-y-4"}`,style:{animationDelay:`${1e3+ae*100}ms`},children:q.description}),C.jsxs("div",{className:`text-xs text-gray-400 transition-all duration-700 ${I?"animate-fadeIn opacity-100":"opacity-0"}`,style:{animationDelay:`${1100+ae*100}ms`},children:["Vulnerability: ",(q.vulnerability*100).toFixed(0),"%"]})]})},q.id))}),C.jsxs("div",{className:`bg-black bg-opacity-40 backdrop-blur-sm rounded-2xl p-8 transition-all duration-700 delay-1200 ${I?"animate-fadeInUp opacity-100":"opacity-0 translate-y-8"}`,children:[C.jsx("h3",{className:`text-2xl font-bold text-stellar-gold mb-4 text-center animate-glow transition-all duration-700 delay-1300 ${I?"animate-bounceIn opacity-100":"opacity-0 scale-75"}`,children:"About the Simulator"}),C.jsxs("div",{className:"grid md:grid-cols-2 gap-6 text-blue-200",children:[C.jsxs("div",{className:`transition-all duration-700 delay-1400 ${I?"animate-slideInLeft opacity-100":"opacity-0 -translate-x-8"}`,children:[C.jsx("h4",{className:"font-bold text-white mb-2",children:"How It Works"}),C.jsx("p",{className:"text-sm leading-relaxed",children:"Select a character above to explore how solar weather events affect different professions. Each character has unique vulnerabilities based on their reliance on technology that can be disrupted by space weather."})]}),C.jsxs("div",{className:`transition-all duration-700 delay-1500 ${I?"animate-slideInRight opacity-100":"opacity-0 translate-x-8"}`,children:[C.jsx("h4",{className:"font-bold text-white mb-2",children:"Interactive Learning"}),C.jsx("p",{className:"text-sm leading-relaxed",children:"Adjust solar storm intensity and see real-time impacts on operational status. Learn about protection strategies and test your knowledge with interactive quizzes."})]})]})]})]})}):C.jsx("div",{className:"min-h-screen py-16 px-4 relative z-10",children:C.jsxs("div",{className:"max-w-6xl mx-auto",children:[C.jsxs("div",{className:"text-center mb-12 animate-fade-in",children:[(t||k)&&C.jsx("div",{className:"mb-6"}),C.jsx("h1",{className:"text-5xl font-bold gradient-text mb-6",children:"Interactive Damage Simulator"}),C.jsx("p",{className:"text-xl text-blue-200 max-w-3xl mx-auto mb-4",children:k?`See how solar weather affects ${k.name}'s daily operations`:"Adjust the solar weather intensity and see how it affects different people"}),k&&p&&C.jsx("button",{onClick:Q,className:"bg-gradient-to-r from-gray-600 to-gray-700 hover:from-gray-700 hover:to-gray-600 text-white font-bold py-2 px-6 rounded-full text-sm transition-all duration-300 transform hover:scale-105 mb-4",children:"← Back to Character Selection"}),k&&C.jsx("div",{className:"bg-black bg-opacity-40 backdrop-blur-sm rounded-2xl p-4 max-w-md mx-auto mb-4",children:C.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[C.jsx("span",{className:"text-3xl",children:k.emoji}),C.jsxs("div",{children:[C.jsx("h3",{className:"text-lg font-bold text-white",children:k.name}),C.jsx("p",{className:"text-sm text-blue-200",children:k.description})]})]})})]}),C.jsxs("div",{className:"bg-black bg-opacity-40 backdrop-blur-sm rounded-2xl p-8 mb-8 animate-slide-up relative overflow-hidden",children:[C.jsx("div",{className:"absolute inset-0 opacity-20 transition-all duration-1000 ease-in-out",style:{background:s<30?"linear-gradient(135deg, #1e3a8a, #1e40af)":s<60?"linear-gradient(135deg, #f59e0b, #f97316)":s<80?"linear-gradient(135deg, #dc2626, #b91c1c)":"linear-gradient(135deg, #7c2d12, #991b1b)",filter:`blur(${s/10}px)`}}),C.jsx("div",{className:"absolute inset-0 pointer-events-none",children:Array.from({length:Math.floor(s/10)}).map((q,ae)=>C.jsx("div",{className:"absolute w-2 h-2 bg-stellar-gold rounded-full animate-pulse",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*2}s`,animationDuration:`${1+Math.random()*2}s`,opacity:s/100}},ae))}),C.jsxs("div",{className:"relative z-10",children:[C.jsxs("h2",{className:"text-2xl font-bold text-stellar-gold mb-6 text-center flex items-center justify-center space-x-2",children:[C.jsx("span",{className:`text-3xl ${s>70?"animate-pulse":""}`,children:s<30?"🌙":s<60?"☀️":s<80?"🔥":"⚡"}),C.jsx("span",{children:"Solar Weather Intensity Control"}),C.jsx("span",{className:`text-3xl ${s>70?"animate-pulse":""}`,children:s<30?"🌙":s<60?"☀️":s<80?"🔥":"⚡"})]}),C.jsxs("div",{className:"max-w-2xl mx-auto",children:[C.jsxs("div",{className:"flex items-center justify-between mb-4",children:[C.jsx("span",{className:"text-blue-200",children:"Calm"}),C.jsxs("span",{className:`font-bold text-lg ${ve.color} px-4 py-2 rounded-full bg-black bg-opacity-30 backdrop-blur-sm border transition-all duration-300`,style:{borderColor:s<30?"#3b82f6":s<60?"#f59e0b":s<80?"#dc2626":"#7c2d12",boxShadow:`0 0 ${s/5}px ${s<30?"#3b82f6":s<60?"#f59e0b":s<80?"#dc2626":"#7c2d12"}`},children:[ve.label," (",s,"%)"]}),C.jsxs("span",{className:"text-red-400 flex items-center space-x-1",children:[C.jsx("span",{children:"Severe"}),C.jsx("span",{children:"⚡"})]})]}),C.jsxs("div",{className:"relative mb-6",children:[C.jsx("div",{className:"absolute inset-0 h-6 bg-gray-800 rounded-full shadow-inner"}),C.jsx("div",{className:"absolute inset-0 h-6 rounded-full transition-all duration-300",style:{background:`linear-gradient(to right, 
                      #1e3a8a 0%, 
                      #3b82f6 25%, 
                      #f59e0b 50%, 
                      #dc2626 75%, 
                      #7c2d12 100%)`,opacity:.7,clipPath:`inset(0 ${100-s}% 0 0)`}}),C.jsx("div",{className:"absolute inset-0 h-6 rounded-full transition-all duration-300",style:{background:`linear-gradient(to right, 
                      transparent 0%, 
                      ${s<30?"#3b82f6":s<60?"#f59e0b":s<80?"#dc2626":"#7c2d12"} ${s}%, 
                      transparent ${s+5}%)`,filter:"blur(8px)",opacity:s/100}}),C.jsx("input",{type:"range",min:"0",max:"100",value:s,onChange:q=>r(Number(q.target.value)),className:"relative z-10 slider w-full h-6 bg-transparent rounded-lg appearance-none cursor-pointer","data-intensity":s>=75?"high":"normal",style:{background:"transparent"},onMouseDown:()=>{navigator.vibrate&&navigator.vibrate(50)},onInput:q=>{Number(q.target.value)}}),C.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-2 px-2",children:[C.jsx("span",{className:`transition-all duration-300 ${s<25?"text-blue-400 font-bold":""}`,children:"🌙 Minimal"}),C.jsx("span",{className:`transition-all duration-300 ${s>=25&&s<50?"text-yellow-400 font-bold":""}`,children:"☀️ Moderate"}),C.jsx("span",{className:`transition-all duration-300 ${s>=50&&s<75?"text-orange-400 font-bold":""}`,children:"🔥 Strong"}),C.jsx("span",{className:`transition-all duration-300 ${s>=75?"text-red-400 font-bold animate-pulse":""}`,children:"⚡ Severe"})]})]}),C.jsx("div",{className:"text-center",children:C.jsxs("div",{className:`p-4 rounded-lg transition-all duration-500 ${s<30?"bg-blue-900 bg-opacity-30 border border-blue-500 border-opacity-30":s<60?"bg-yellow-900 bg-opacity-30 border border-yellow-500 border-opacity-30":s<80?"bg-orange-900 bg-opacity-30 border border-orange-500 border-opacity-30":"bg-red-900 bg-opacity-30 border border-red-500 border-opacity-30 animate-pulse"}`,children:[C.jsxs("p",{className:`text-sm font-medium transition-all duration-300 ${s<30?"text-blue-200":s<60?"text-yellow-200":s<80?"text-orange-200":"text-red-200"}`,children:[s<30&&"🌙 Minimal space weather activity. Normal operations expected. All systems functioning optimally.",s>=30&&s<60&&"☀️ Moderate solar activity. Some minor disruptions possible. Monitor sensitive equipment.",s>=60&&s<80&&"🔥 Strong solar storm conditions. Significant impacts likely. Prepare backup systems.",s>=80&&"⚡ SEVERE GEOMAGNETIC STORM! Critical systems at high risk. Emergency protocols activated!"]}),C.jsxs("div",{className:"mt-3 flex items-center justify-center space-x-4",children:[C.jsxs("div",{className:"flex items-center space-x-2",children:[C.jsx("div",{className:`w-3 h-3 rounded-full transition-all duration-300 ${s<30?"bg-green-400":s<60?"bg-yellow-400":s<80?"bg-orange-400":"bg-red-400 animate-pulse"}`}),C.jsxs("span",{className:"text-xs text-gray-300",children:["Risk Level: ",s<30?"LOW":s<60?"MODERATE":s<80?"HIGH":"CRITICAL"]})]}),C.jsxs("div",{className:"flex items-center space-x-2",children:[C.jsx("div",{className:`w-3 h-3 rounded-full transition-all duration-300 ${s<30?"bg-green-400":s<60?"bg-yellow-400 animate-pulse":s<80?"bg-red-400 animate-pulse":"bg-red-600 animate-bounce"}`}),C.jsxs("span",{className:"text-xs text-gray-300",children:["Alert Status: ",s<30?"NORMAL":s<60?"WATCH":s<80?"WARNING":"EMERGENCY"]})]})]})]})})]})]})]}),C.jsx("div",{className:"grid md:grid-cols-1 lg:grid-cols-1 gap-6 max-w-md mx-auto",children:T.filter(q=>k?q.id===k.id:!0).map((q,ae)=>{const ge=J(q),se=ge,Fe=100-ge,qe=L(q);return C.jsxs("div",{className:"bg-black bg-opacity-40 backdrop-blur-sm rounded-2xl p-6 animate-slide-up border border-white border-opacity-20",style:{animationDelay:`${ae*.1}s`},children:[C.jsxs("div",{className:"text-center mb-4 relative",children:[qe.particles&&C.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[C.jsx("div",{className:"absolute top-2 left-4 w-2 h-2 bg-red-500 rounded-full animate-ping"}),C.jsx("div",{className:"absolute top-8 right-6 w-1 h-1 bg-orange-500 rounded-full animate-pulse"}),C.jsx("div",{className:"absolute bottom-4 left-8 w-1.5 h-1.5 bg-yellow-500 rounded-full animate-bounce"}),C.jsx("div",{className:"absolute top-6 right-2 w-1 h-1 bg-red-400 rounded-full animate-ping",style:{animationDelay:"0.5s"}})]}),C.jsx("div",{className:`text-6xl mb-3 transition-all duration-500 ${qe.shake}`,style:{opacity:qe.opacity,filter:`${qe.filter} ${qe.glow}`,transform:Fe>80?"scale(0.95)":"scale(1)"},children:q.emoji}),Fe>60&&C.jsx("div",{className:`absolute -top-2 -right-2 ${qe.warningColor} animate-pulse`,children:C.jsx(Jl,{className:"w-6 h-6"})}),C.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:q.name}),C.jsx("div",{className:`bg-gradient-to-r ${q.color} rounded-full w-12 h-12 flex items-center justify-center mx-auto text-white transition-all duration-500`,style:{opacity:qe.opacity,filter:qe.glow},children:q.icon})]}),C.jsxs("div",{className:"space-y-4",children:[C.jsxs("div",{children:[C.jsxs("div",{className:"flex items-center justify-between mb-2",children:[C.jsx("span",{className:"text-sm text-blue-200",children:"Operational Status"}),C.jsxs("span",{className:`text-sm font-bold ${se>70?"text-green-400":se>40?"text-yellow-400":se>20?"text-orange-400":"text-red-400"}`,children:[se.toFixed(0),"%"]})]}),C.jsx("div",{className:"w-full h-3 bg-gray-700 rounded-full overflow-hidden",children:C.jsx("div",{className:`h-full transition-all duration-500 ${se>70?"bg-gradient-to-r from-green-400 to-green-600":se>40?"bg-gradient-to-r from-yellow-400 to-yellow-600":se>20?"bg-gradient-to-r from-orange-400 to-orange-600":"bg-gradient-to-r from-red-400 to-red-600"}`,style:{width:`${se}%`}})})]}),C.jsxs("div",{children:[C.jsxs("div",{className:"flex items-center justify-between mb-2",children:[C.jsx("span",{className:"text-sm text-blue-200",children:"Risk Level"}),C.jsxs("span",{className:"text-sm font-bold text-red-400",children:[Fe.toFixed(0),"%"]})]}),C.jsx("div",{className:"w-full h-3 bg-gray-700 rounded-full overflow-hidden",children:C.jsx("div",{className:"h-full bg-gradient-to-r from-red-600 to-red-400 transition-all duration-500",style:{width:`${Fe}%`}})})]}),C.jsx("div",{className:`bg-white bg-opacity-5 rounded-lg p-3 mt-4 transition-all duration-500 ${Fe>80?"bg-red-900 bg-opacity-20 border border-red-500 border-opacity-30":""}`,children:C.jsxs("p",{className:`text-xs text-center font-medium ${se>70?"text-green-300":se>40?"text-yellow-300":se>20?"text-orange-300":"text-red-300"}`,children:[se>70&&"✅ Systems functioning normally",se>40&&se<=70&&"⚠️ Minor disruptions occurring",se>20&&se<=40&&"🔥 Significant impact detected",se<=20&&"🚨 CRITICAL SITUATION!"]})}),C.jsxs("div",{className:"text-center text-xs text-gray-400 mt-2",children:["Vulnerability: ",(q.vulnerability*100).toFixed(0),"%"]}),k&&C.jsxs("div",{className:"text-center mt-4 space-y-2",children:[C.jsx("button",{onClick:V,className:"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-purple-600 hover:to-blue-500 text-white font-bold py-2 px-6 rounded-full text-sm transition-all duration-300 transform hover:scale-105 w-full",children:"Learn More About Impact"}),C.jsx("button",{onClick:j,className:"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-emerald-600 hover:to-green-500 text-white font-bold py-2 px-6 rounded-full text-sm transition-all duration-300 transform hover:scale-105 w-full",children:"🛡️ Show Solutions"})]})]})]},q.id)})}),C.jsxs("div",{className:"mt-12 bg-black bg-opacity-40 backdrop-blur-sm rounded-2xl p-8 animate-fade-in",children:[C.jsx("h3",{className:"text-2xl font-bold text-stellar-gold mb-4 text-center",children:"Understanding the Impact"}),C.jsxs("div",{className:"grid md:grid-cols-2 gap-6 text-blue-200",children:[C.jsxs("div",{children:[C.jsx("h4",{className:"font-bold text-white mb-2",children:"Why Different Impacts?"}),C.jsx("p",{className:"text-sm leading-relaxed",children:"Each profession has different vulnerability levels based on their reliance on technology affected by solar weather. Astronauts face the highest risk due to direct exposure, while farmers have lower vulnerability through indirect GPS effects."})]}),C.jsxs("div",{children:[C.jsx("h4",{className:"font-bold text-white mb-2",children:"Real-World Consequences"}),C.jsx("p",{className:"text-sm leading-relaxed",children:"Solar storms can disrupt GPS navigation, damage satellites, cause power grid failures, and expose astronauts to radiation. Understanding these risks helps us prepare and protect critical infrastructure."})]})]}),!k&&e&&C.jsxs("div",{className:"text-center mt-8",children:[C.jsx("p",{className:"text-blue-200 mb-4",children:"Want to explore how space weather affects specific professions?"}),C.jsx("button",{onClick:W,className:"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-purple-600 hover:to-blue-500 text-white font-bold py-3 px-8 rounded-full text-lg transition-all duration-300 transform hover:scale-105 mr-4",children:"Choose a Character"}),C.jsx("button",{onClick:e,className:"bg-gradient-to-r from-stellar-gold to-orange-500 hover:from-orange-500 hover:to-stellar-gold text-black font-bold py-3 px-8 rounded-full text-lg transition-all duration-300 transform hover:scale-105",children:"Continue Journey →"})]})]})]})})},VK=({onNext:n,onBack:e})=>{const[t,i]=ee.useState(null),[s,r]=ee.useState(!1),[o,a]=ee.useState(0);ee.useEffect(()=>{r(!0)},[]);const l=[{category:"Satellite Systems",icon:C.jsx(TO,{className:"w-8 h-8"}),severity:"Critical",description:"Solar storms can damage satellite electronics, disrupt communications, and cause orbital decay.",examples:["GPS navigation failures","Communication satellite outages","Weather monitoring disruptions","Internet service interruptions"],color:"from-red-500 to-red-700",percentage:85},{category:"Power Infrastructure",icon:C.jsx(Kx,{className:"w-8 h-8"}),severity:"High",description:"Geomagnetic storms induce currents in power lines, potentially causing blackouts.",examples:["Transformer damage","Grid instability","Widespread blackouts","Industrial shutdowns"],color:"from-orange-500 to-red-600",percentage:75},{category:"Aviation Safety",icon:C.jsx(Nv,{className:"w-8 h-8"}),severity:"High",description:"Solar radiation affects high-altitude flights and polar routes.",examples:["Flight route diversions","Communication blackouts","Navigation system errors","Increased radiation exposure"],color:"from-yellow-500 to-orange-600",percentage:70},{category:"Radio Communications",icon:C.jsx(z8,{className:"w-8 h-8"}),severity:"Medium",description:"Solar flares can cause radio blackouts affecting emergency services.",examples:["Emergency service disruptions","Maritime communication loss","Amateur radio interference","Military communication issues"],color:"from-blue-500 to-purple-600",percentage:60},{category:"Technology Systems",icon:C.jsx(IO,{className:"w-8 h-8"}),severity:"Medium",description:"Various technological systems can be affected by space weather events.",examples:["Internet infrastructure issues","Banking system disruptions","Transportation delays","Smart grid malfunctions"],color:"from-green-500 to-blue-600",percentage:55}],c=[{title:"Economic Impact",value:"$15B+",trend:"up",description:"Annual global economic losses from space weather events",icon:C.jsx(i2,{className:"w-6 h-6"})},{title:"Affected Systems",value:"50M+",trend:"up",description:"Number of systems potentially vulnerable to solar storms",icon:C.jsx(N8,{className:"w-6 h-6"})},{title:"Recovery Time",value:"2-7 days",trend:"stable",description:"Average time to restore critical systems after major events",icon:C.jsx(Nv,{className:"w-6 h-6"})},{title:"Protection Level",value:"65%",trend:"up",description:"Current infrastructure protection against space weather",icon:C.jsx(af,{className:"w-6 h-6"})}],u=h=>{switch(h){case"Critical":return"text-red-400 bg-red-900/30";case"High":return"text-orange-400 bg-orange-900/30";case"Medium":return"text-yellow-400 bg-yellow-900/30";case"Low":return"text-green-400 bg-green-900/30";default:return"text-gray-400 bg-gray-900/30"}};return C.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-space-dark via-cosmic-purple to-stellar-blue relative overflow-hidden",children:[C.jsxs("div",{className:"absolute inset-0 opacity-20",children:[C.jsx("div",{className:"absolute top-20 left-10 w-2 h-2 bg-white rounded-full animate-pulse"}),C.jsx("div",{className:"absolute top-40 right-20 w-1 h-1 bg-stellar-gold rounded-full animate-pulse delay-1000"}),C.jsx("div",{className:"absolute bottom-32 left-1/4 w-1.5 h-1.5 bg-cosmic-purple rounded-full animate-pulse delay-2000"}),C.jsx("div",{className:"absolute bottom-20 right-1/3 w-1 h-1 bg-white rounded-full animate-pulse delay-3000"})]}),C.jsxs("div",{className:"relative z-10 container mx-auto px-6 py-12",children:[C.jsxs("div",{className:`text-center mb-16 transition-all duration-1000 ${s?"animate-slideInDown opacity-100":"opacity-0 -translate-y-8"}`,children:[C.jsxs("div",{className:"flex items-center justify-center mb-6",children:[C.jsx(BO,{className:"w-16 h-16 text-stellar-gold mr-4 animate-spin-slow"}),C.jsx(Jl,{className:"w-12 h-12 text-red-400 animate-pulse"})]}),C.jsx("h1",{className:"text-5xl font-bold gradient-text mb-6",children:"Solar Weather Impact Analysis"}),C.jsx("p",{className:"text-xl text-blue-200 max-w-4xl mx-auto leading-relaxed",children:"Comprehensive analysis of how solar weather events affect critical infrastructure and technology systems on Earth"})]}),C.jsx("div",{className:`grid md:grid-cols-2 lg:grid-cols-4 gap-6 mb-16 transition-all duration-1000 delay-300 ${s?"animate-slideInUp opacity-100":"opacity-0 translate-y-8"}`,children:c.map((h,p)=>C.jsxs("div",{className:`bg-black bg-opacity-40 backdrop-blur-sm rounded-2xl p-6 border border-white border-opacity-10 hover:border-stellar-gold hover:border-opacity-50 transition-all duration-300 cursor-pointer transform hover:scale-105 ${o===p?"ring-2 ring-stellar-gold":""}`,onClick:()=>a(p),children:[C.jsxs("div",{className:"flex items-center justify-between mb-4",children:[C.jsx("div",{className:"text-stellar-gold",children:h.icon}),C.jsxs("div",{className:`flex items-center text-sm ${h.trend==="up"?"text-green-400":h.trend==="down"?"text-red-400":"text-gray-400"}`,children:[C.jsx(i2,{className:`w-4 h-4 mr-1 ${h.trend==="down"?"rotate-180":""}`}),h.trend]})]}),C.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:h.value}),C.jsx("h4",{className:"text-stellar-gold font-semibold mb-2",children:h.title}),C.jsx("p",{className:"text-blue-200 text-sm",children:h.description})]},h.title))}),C.jsxs("div",{className:`mb-16 transition-all duration-1000 delay-500 ${s?"animate-slideInLeft opacity-100":"opacity-0 -translate-x-8"}`,children:[C.jsx("h2",{className:"text-3xl font-bold text-stellar-gold mb-8 text-center",children:"Impact Categories"}),C.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map((h,p)=>C.jsxs("div",{className:`bg-black bg-opacity-40 backdrop-blur-sm rounded-2xl p-6 border border-white border-opacity-10 cursor-pointer transition-all duration-300 transform hover:scale-105 ${t===h.category?"ring-2 ring-stellar-gold border-stellar-gold border-opacity-50":"hover:border-stellar-gold hover:border-opacity-30"}`,onClick:()=>i(t===h.category?null:h.category),children:[C.jsxs("div",{className:"flex items-center justify-between mb-4",children:[C.jsx("div",{className:`bg-gradient-to-r ${h.color} p-3 rounded-xl text-white`,children:h.icon}),C.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-semibold ${u(h.severity)}`,children:h.severity})]}),C.jsx("h3",{className:"text-xl font-bold text-white mb-3",children:h.category}),C.jsx("p",{className:"text-blue-200 text-sm mb-4",children:h.description}),C.jsxs("div",{className:"mb-4",children:[C.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[C.jsx("span",{className:"text-gray-300",children:"Impact Level"}),C.jsxs("span",{className:"text-stellar-gold font-semibold",children:[h.percentage,"%"]})]}),C.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:C.jsx("div",{className:`bg-gradient-to-r ${h.color} h-2 rounded-full transition-all duration-1000`,style:{width:`${h.percentage}%`}})})]}),t===h.category&&C.jsxs("div",{className:"mt-4 pt-4 border-t border-white border-opacity-10 animate-slideInDown",children:[C.jsx("h4",{className:"text-stellar-gold font-semibold mb-3",children:"Specific Examples:"}),C.jsx("ul",{className:"space-y-2",children:h.examples.map((m,g)=>C.jsxs("li",{className:"flex items-center text-blue-200 text-sm",children:[C.jsx("div",{className:"w-1.5 h-1.5 bg-stellar-gold rounded-full mr-3"}),m]},g))})]})]},h.category))})]}),C.jsxs("div",{className:`bg-black bg-opacity-40 backdrop-blur-sm rounded-2xl p-8 border border-white border-opacity-10 mb-16 transition-all duration-1000 delay-700 ${s?"animate-slideInRight opacity-100":"opacity-0 translate-x-8"}`,children:[C.jsx("h2",{className:"text-3xl font-bold text-stellar-gold mb-6 text-center",children:"Key Findings"}),C.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[C.jsxs("div",{children:[C.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[C.jsx(Jl,{className:"w-6 h-6 text-red-400 mr-2"}),"Critical Vulnerabilities"]}),C.jsxs("ul",{className:"space-y-3 text-blue-200",children:[C.jsxs("li",{className:"flex items-start",children:[C.jsx("div",{className:"w-2 h-2 bg-red-400 rounded-full mt-2 mr-3 flex-shrink-0"}),C.jsx("span",{children:"Satellite systems face the highest risk with potential for complete service disruption"})]}),C.jsxs("li",{className:"flex items-start",children:[C.jsx("div",{className:"w-2 h-2 bg-orange-400 rounded-full mt-2 mr-3 flex-shrink-0"}),C.jsx("span",{children:"Power grid infrastructure vulnerable to transformer damage and cascading failures"})]}),C.jsxs("li",{className:"flex items-start",children:[C.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full mt-2 mr-3 flex-shrink-0"}),C.jsx("span",{children:"Aviation industry faces safety risks from radiation exposure and navigation failures"})]})]})]}),C.jsxs("div",{children:[C.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[C.jsx(af,{className:"w-6 h-6 text-green-400 mr-2"}),"Mitigation Strategies"]}),C.jsxs("ul",{className:"space-y-3 text-blue-200",children:[C.jsxs("li",{className:"flex items-start",children:[C.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full mt-2 mr-3 flex-shrink-0"}),C.jsx("span",{children:"Enhanced space weather monitoring and early warning systems"})]}),C.jsxs("li",{className:"flex items-start",children:[C.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full mt-2 mr-3 flex-shrink-0"}),C.jsx("span",{children:"Hardened infrastructure design and backup system implementation"})]}),C.jsxs("li",{className:"flex items-start",children:[C.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full mt-2 mr-3 flex-shrink-0"}),C.jsx("span",{children:"International cooperation for coordinated response protocols"})]})]})]})]})]}),C.jsxs("div",{className:"flex justify-between items-center",children:[e&&C.jsxs("button",{onClick:e,className:"flex items-center px-6 py-3 bg-gradient-to-r from-cosmic-purple to-stellar-blue rounded-full text-white font-semibold hover:from-stellar-blue hover:to-cosmic-purple transition-all duration-300 transform hover:scale-105",children:[C.jsx(oI,{className:"w-5 h-5 mr-2"}),"Back"]}),C.jsx("div",{className:"flex-1 text-center",children:C.jsx("p",{className:"text-blue-200 text-sm",children:"Understanding solar weather impacts helps us prepare for and mitigate potential disruptions"})}),n&&C.jsxs("button",{onClick:n,className:"flex items-center px-6 py-3 bg-gradient-to-r from-stellar-gold to-orange-500 rounded-full text-white font-semibold hover:from-orange-500 hover:to-stellar-gold transition-all duration-300 transform hover:scale-105",children:["Continue to Aurora Painter",C.jsx(_g,{className:"w-5 h-5 ml-2"})]})]})]})]})},jK=({onNext:n})=>{const[e,t]=ee.useState(50),[i,s]=ee.useState(!0),r=a=>{t(parseInt(a.target.value))},o=()=>{s(!i)};return C.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-purple-900 to-black relative overflow-hidden",children:[C.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 z-10"}),C.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat transition-all duration-300",style:{backgroundImage:"url(/auroraslider.jpg)",opacity:e/100,filter:`brightness(${.5+e/100*1.5}) contrast(${1+e/200}) saturate(${1+e/100})`,transform:i?`scale(${1+e/1e3})`:"scale(1)"}}),C.jsxs("div",{className:"absolute bottom-10 left-1/2 transform -translate-x-1/2 bg-black/50 backdrop-blur-md rounded-2xl p-8 border border-white/20 z-40",children:[C.jsx("h1",{className:"text-4xl font-bold text-white text-center mb-8 bg-gradient-to-r from-green-400 to-blue-500 bg-clip-text text-transparent",children:"Aurora Painter"}),C.jsxs("div",{className:"mb-6",children:[C.jsxs("label",{className:"block text-white text-lg font-semibold mb-4 text-center",children:["Aurora Intensity: ",e,"%"]}),C.jsxs("div",{className:"relative",children:[C.jsx("input",{type:"range",min:"0",max:"100",value:e,onChange:r,className:"w-80 h-3 bg-gray-700 rounded-lg appearance-none cursor-pointer slider",style:{background:`linear-gradient(to right, #1f2937 0%, #10b981 ${e}%, #1f2937 ${e}%, #1f2937 100%)`}}),C.jsxs("div",{className:"flex justify-between text-sm text-gray-400 mt-2",children:[C.jsx("span",{children:"Dim"}),C.jsx("span",{children:"Moderate"}),C.jsx("span",{children:"Brilliant"})]})]})]}),C.jsx("div",{className:"text-center",children:C.jsx("button",{onClick:o,className:`px-6 py-3 rounded-lg font-semibold transition-all duration-300 ${i?"bg-green-500 hover:bg-green-600 text-white":"bg-gray-600 hover:bg-gray-700 text-gray-200"}`,children:i?"Pause Animation":"Start Animation"})}),C.jsx("div",{className:"mt-4 text-center",children:C.jsxs("p",{className:"text-gray-300 text-sm",children:[e<25&&"Faint aurora glow - barely visible",e>=25&&e<50&&"Moderate aurora activity - gentle waves",e>=50&&e<75&&"Strong aurora display - vibrant colors",e>=75&&"Intense aurora storm - spectacular light show"]})}),n&&C.jsx("div",{className:"mt-6 text-center",children:C.jsx("button",{onClick:n,className:"bg-gradient-to-r from-stellar-gold to-orange-500 hover:from-orange-500 hover:to-stellar-gold text-black font-bold py-3 px-8 rounded-full text-lg transition-all duration-300 transform hover:scale-105",children:"Continue Journey →"})})]}),C.jsx("style",{children:`
        .slider::-webkit-slider-thumb {
          appearance: none;
          width: 24px;
          height: 24px;
          border-radius: 50%;
          background: linear-gradient(45deg, #10b981, #3b82f6);
          cursor: pointer;
          border: 2px solid white;
          box-shadow: 0 0 10px rgba(16, 185, 129, 0.5);
        }
        
        .slider::-moz-range-thumb {
          width: 24px;
          height: 24px;
          border-radius: 50%;
          background: linear-gradient(45deg, #10b981, #3b82f6);
          cursor: pointer;
          border: 2px solid white;
          box-shadow: 0 0 10px rgba(16, 185, 129, 0.5);
        }
      `})]})},WK=({onBack:n,onNext:e,selectedCharacter:t})=>{const i=[{id:"farmer",name:"Farmer",emoji:"🌾",icon:C.jsx(Nv,{className:"w-8 h-8"}),baseHealth:100,vulnerability:.6,color:"from-green-500 to-emerald-600",description:"Growing crops and feeding communities",impact:"Solar storms can disrupt GPS systems used for precision farming, affecting crop monitoring, automated tractors, and irrigation systems. This can lead to reduced crop yields and food security issues.",detailedImpact:"Modern agriculture heavily relies on GPS technology for precision farming techniques. During geomagnetic storms, GPS signals can become unreliable or completely unavailable, causing automated tractors to lose their way, irrigation systems to malfunction, and crop monitoring systems to provide inaccurate data. This disruption can result in significant economic losses, reduced crop yields, and potential food security issues for entire communities.",riskLevel:"Moderate",affectedSystems:["GPS-guided tractors","Automated irrigation systems","Crop monitoring drones","Precision planting equipment"],solutions:["Use backup navigation systems during solar storm warnings","Monitor space weather forecasts before critical farming operations","Implement manual override systems for automated equipment","Diversify farming techniques to reduce GPS dependency"]},{id:"fisherman",name:"Fisherman",emoji:"🎣",icon:C.jsx(af,{className:"w-8 h-8"}),baseHealth:100,vulnerability:.8,color:"from-blue-500 to-cyan-600",description:"Navigating the vast oceans to catch fish",impact:"GPS navigation failures during geomagnetic storms can leave fishermen lost at sea, unable to find their way back to shore or locate fishing grounds. This puts lives at risk and affects livelihoods.",detailedImpact:"Fishermen depend on GPS navigation systems to safely navigate vast ocean waters, locate productive fishing grounds, and return to shore. When geomagnetic storms disrupt these systems, fishermen can become lost at sea, unable to find their way back to safety. This creates life-threatening situations and can result in search and rescue operations. Additionally, the inability to locate known fishing spots can severely impact their livelihood and the local seafood supply chain.",riskLevel:"High",affectedSystems:["GPS navigation","Fish finder systems","Emergency beacons","Communication systems"],solutions:["Carry traditional compass and paper charts as backup","Learn celestial navigation techniques","Stay informed about space weather conditions","Use multiple navigation systems for redundancy"]},{id:"grid-operator",name:"Grid Operator",emoji:"⚡",icon:C.jsx(Kx,{className:"w-8 h-8"}),baseHealth:100,vulnerability:.9,color:"from-yellow-500 to-orange-600",description:"Managing electrical power systems",impact:"Geomagnetic storms can induce currents in power lines, causing transformer damage, blackouts, and cascading failures across the electrical grid, affecting millions of people.",detailedImpact:"Geomagnetic storms generate powerful electromagnetic fields that can induce dangerous currents in power transmission lines and transformers. These geomagnetically induced currents (GICs) can cause transformers to overheat and fail, leading to widespread blackouts that can affect millions of people. The cascading effect of grid failures can shut down hospitals, schools, businesses, and critical infrastructure, potentially lasting for days or weeks while damaged equipment is repaired or replaced.",riskLevel:"Critical",affectedSystems:["High-voltage transformers","Power transmission lines","Grid control systems","Protective relays"],solutions:["Monitor space weather alerts and forecasts","Implement protective relay systems","Have backup power generation ready","Coordinate with other grid operators during storms"]},{id:"astronaut",name:"Astronaut",emoji:"🚀",icon:C.jsx(Jl,{className:"w-8 h-8"}),baseHealth:100,vulnerability:1,color:"from-purple-500 to-pink-600",description:"Exploring space and conducting research",impact:"Direct exposure to solar radiation and particles during space missions can cause serious health issues, equipment failures, and mission abort scenarios.",detailedImpact:"Astronauts in space are directly exposed to the harsh radiation environment during solar storms. High-energy particles can penetrate spacecraft shielding and spacesuits, causing acute radiation sickness, increased cancer risk, and potential death. Solar storms can also damage critical spacecraft systems, including life support, navigation, and communication equipment, potentially stranding astronauts or forcing mission abort. The radiation can also affect electronic systems and computers essential for mission operations.",riskLevel:"Extreme",affectedSystems:["Life support systems","Navigation computers","Communication equipment","Spacecraft electronics"],solutions:["Monitor space weather forecasts before EVAs","Use radiation shielding in spacecraft","Have emergency protocols for solar storms","Coordinate with ground control for safety updates"]}],s=o=>{switch(o){case"High":return"text-red-400 bg-red-900";case"Moderate":return"text-yellow-400 bg-yellow-900";case"Low":return"text-green-400 bg-green-900";case"Extreme":return"text-purple-400 bg-purple-900";default:return"text-gray-400 bg-gray-900"}},r=t?i.filter(o=>o.id===t.id):i;return C.jsx("div",{className:"min-h-screen py-16 px-4 relative z-10",children:C.jsxs("div",{className:"max-w-7xl mx-auto",children:[C.jsxs("div",{className:"text-center mb-12 animate-fade-in",children:[n&&C.jsx("div",{className:"mb-6",children:C.jsxs("button",{onClick:n,className:"bg-gradient-to-r from-blue-600 to-purple-700 hover:from-purple-700 hover:to-blue-600 text-white font-bold py-3 px-6 rounded-full text-lg transition-all duration-300 transform hover:scale-105 flex items-center space-x-2 mx-auto",children:[C.jsx(rI,{className:"w-5 h-5"}),C.jsx("span",{children:"Back"})]})}),C.jsx("h1",{className:"text-5xl font-bold gradient-text mb-6",children:t?`${t.name} - Solar Weather Impact`:"Solar Weather Impact Analysis"}),C.jsx("p",{className:"text-xl text-blue-200 max-w-4xl mx-auto mb-8",children:t?`Detailed analysis of how space weather affects ${t.name.toLowerCase()}s and their critical systems`:"Comprehensive overview of how space weather affects different professions and critical infrastructure systems"})]}),C.jsx("div",{className:"grid gap-8 md:gap-12",children:r.map((o,a)=>C.jsxs("div",{className:"bg-black bg-opacity-40 backdrop-blur-sm rounded-3xl p-8 animate-slide-up border border-white border-opacity-10 hover:border-opacity-20 transition-all duration-300",style:{animationDelay:`${a*.2}s`},children:[C.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-start gap-6 mb-8",children:[C.jsx("div",{className:`bg-gradient-to-r ${o.color} rounded-full w-24 h-24 flex items-center justify-center animate-float`,children:C.jsx("span",{className:"text-4xl",children:o.emoji})}),C.jsxs("div",{className:"flex-1 text-center md:text-left",children:[C.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:o.name}),C.jsx("p",{className:"text-lg text-blue-200 mb-4",children:o.description}),C.jsxs("div",{className:"flex flex-wrap gap-3 justify-center md:justify-start",children:[C.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${s(o.riskLevel)} bg-opacity-20`,children:["Risk Level: ",o.riskLevel]}),C.jsxs("span",{className:"px-3 py-1 rounded-full text-sm font-medium text-blue-300 bg-blue-900 bg-opacity-20",children:["Vulnerability: ",Math.round(o.vulnerability*100),"%"]})]})]})]}),C.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[C.jsxs("div",{children:[C.jsxs("h3",{className:"text-xl font-bold text-stellar-gold mb-4 flex items-center",children:[C.jsx(Jl,{className:"w-6 h-6 text-red-400 mr-2"}),"Impact of Space Weather"]}),C.jsx("p",{className:"text-blue-200 leading-relaxed mb-6",children:o.detailedImpact}),C.jsx("h4",{className:"text-lg font-bold text-white mb-3",children:"Affected Systems:"}),C.jsx("div",{className:"space-y-2",children:o.affectedSystems.map((l,c)=>C.jsxs("div",{className:"flex items-center space-x-2",children:[C.jsx("div",{className:"w-2 h-2 bg-red-400 rounded-full"}),C.jsx("span",{className:"text-red-200 text-sm",children:l})]},c))})]}),C.jsxs("div",{children:[C.jsxs("h3",{className:"text-xl font-bold text-stellar-gold mb-4 flex items-center",children:[C.jsx(af,{className:"w-6 h-6 text-green-400 mr-2"}),"Protection Strategies"]}),C.jsx("div",{className:"space-y-3",children:o.solutions.map((l,c)=>C.jsxs("div",{className:"flex items-start space-x-3 bg-green-900 bg-opacity-20 rounded-lg p-4 border border-green-500 border-opacity-30 hover:border-opacity-50 transition-all duration-300",children:[C.jsx(MO,{className:"w-5 h-5 text-green-400 mt-0.5 flex-shrink-0"}),C.jsx("p",{className:"text-green-100 text-sm font-medium",children:l})]},c))})]})]}),C.jsxs("div",{className:"mt-8 bg-blue-900 bg-opacity-30 rounded-lg p-6 border border-blue-500 border-opacity-30",children:[C.jsxs("h4",{className:"text-lg font-bold text-blue-300 mb-3 flex items-center",children:[C.jsx(Jl,{className:"w-5 h-5 text-yellow-400 mr-2"}),"Emergency Action Plan for ",o.name]}),C.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-blue-200 text-sm",children:[C.jsxs("div",{children:[C.jsx("p",{className:"font-medium mb-1",children:"Before Space Weather Events:"}),C.jsx("p",{children:"• Monitor space weather forecasts daily"}),C.jsx("p",{children:"• Test backup systems and equipment"})]}),C.jsxs("div",{children:[C.jsx("p",{className:"font-medium mb-1",children:"During Space Weather Events:"}),C.jsx("p",{children:"• Activate emergency protocols immediately"}),C.jsx("p",{children:"• Switch to backup systems when needed"})]})]})]})]},o.id))}),C.jsx("div",{className:"mt-16 text-center",children:C.jsxs("div",{className:"bg-black bg-opacity-40 backdrop-blur-sm rounded-2xl p-8 border border-white border-opacity-10",children:[C.jsx("h3",{className:"text-2xl font-bold text-stellar-gold mb-4",children:"Understanding Space Weather"}),C.jsx("p",{className:"text-blue-200 leading-relaxed max-w-4xl mx-auto mb-8",children:"Space weather refers to the environmental conditions in space as influenced by solar activity. Solar flares, coronal mass ejections, and geomagnetic storms can significantly impact Earth's technological systems and human activities. By understanding these impacts and preparing appropriate mitigation strategies, we can better protect our infrastructure and ensure the safety of people in various professions."}),e&&C.jsx("div",{className:"mt-8",children:C.jsxs("button",{onClick:e,className:"bg-gradient-to-r from-stellar-gold to-orange-500 hover:from-orange-500 hover:to-stellar-gold text-black font-bold py-4 px-8 rounded-full text-lg transition-all duration-300 transform hover:scale-105 flex items-center space-x-2 mx-auto",children:[C.jsx("span",{children:"Continue Journey"}),C.jsx(_g,{className:"w-5 h-5"})]})})]})})]})})},qK=({onBack:n})=>{const[e,t]=ee.useState(0),[i,s]=ee.useState(null),[r,o]=ee.useState(!1),a=[{id:"aurora-borealis",title:"Aurora Borealis (Northern Lights)",description:"Beautiful dancing lights in the polar skies caused by solar particles interacting with Earth's atmosphere.",detailedDescription:"Auroras occur when charged particles from the solar wind collide with gases in Earth's upper atmosphere. The different colors depend on which gas is hit and at what altitude - oxygen produces green and red light, while nitrogen creates blue and purple hues. These spectacular light shows are most commonly visible near the magnetic poles.",imageUrl:"/Img/auroraslider.jpg",category:"aurora",facts:["Auroras occur at altitudes of 80-500 kilometers above Earth","Green auroras are the most common, caused by oxygen at 100-300 km altitude","Red auroras are rarer and occur at higher altitudes (300-400 km)","The aurora oval expands during geomagnetic storms","Auroras also occur on other planets like Jupiter and Saturn"]},{id:"solar-flare",title:"Solar Flare Eruption",description:"Massive explosions on the Sun's surface that release enormous amounts of energy into space.",detailedDescription:"Solar flares are sudden releases of electromagnetic energy from the Sun's surface, often associated with sunspots and magnetic field lines reconnecting. These events can release energy equivalent to billions of hydrogen bombs and can significantly impact Earth's technology and communications.",imageUrl:"/Img/img-1.png",category:"solar-flare",facts:["Solar flares are classified from A, B, C, M, to X class (strongest)","X-class flares can cause radio blackouts on the sunlit side of Earth","Flares travel at the speed of light, reaching Earth in 8 minutes","The largest recorded flare was the Carrington Event in 1859","Flares often occur in groups during solar maximum periods"]},{id:"coronal-mass-ejection",title:"Coronal Mass Ejection (CME)",description:"Giant bubbles of gas and magnetic field lines ejected from the Sun's corona over several hours.",detailedDescription:"CMEs are massive expulsions of plasma and magnetic field from the Sun's corona. Unlike solar flares, CMEs involve actual matter being hurled into space at speeds of 400-3000 km/s. When Earth-directed, they can cause severe geomagnetic storms that disrupt satellites, power grids, and navigation systems.",imageUrl:"/Img/img-2.png",category:"cme",facts:["CMEs can contain billions of tons of plasma","They travel at speeds ranging from 400 to 3000 km/s","Earth-directed CMEs take 1-5 days to reach our planet","CMEs are the primary cause of severe geomagnetic storms","The Sun ejects about 3.5 billion tons of matter per second through solar wind"]},{id:"solar-wind-interaction",title:"Solar Wind and Magnetosphere",description:"The continuous stream of particles from the Sun interacting with Earth's protective magnetic field.",detailedDescription:"The solar wind is a stream of charged particles continuously flowing from the Sun. Earth's magnetosphere acts as a protective shield, deflecting most of these particles. However, some particles can penetrate through the polar regions, creating auroras and potentially affecting our technology.",imageUrl:"/Img/img-3.png",category:"solar-wind",facts:["Solar wind speed varies from 300-800 km/s","Earth's magnetosphere extends about 65,000 km on the sunward side","The magnetotail can stretch over 6 million kilometers","Solar wind pressure can compress the magnetosphere","Magnetic reconnection allows solar wind particles to enter the magnetosphere"]},{id:"magnetic-field-lines",title:"Earth's Magnetic Field Protection",description:"Our planet's invisible shield that protects us from harmful solar radiation and particles.",detailedDescription:"Earth's magnetic field is generated by the motion of molten iron in the planet's outer core. This magnetic field creates a protective bubble around Earth called the magnetosphere, which deflects most of the solar wind and cosmic radiation that would otherwise strip away our atmosphere.",imageUrl:"/Img/img-4.png",category:"magnetic-field",facts:["Earth's magnetic field strength is about 25-65 microteslas","The magnetic poles are not aligned with the geographic poles","The magnetic field has reversed many times in Earth's history","Without the magnetic field, Earth would lose its atmosphere like Mars","The field is weakening at a rate of 5% per century"]}],l=()=>{t(m=>m===0?a.length-1:m-1)},c=()=>{t(m=>m===a.length-1?0:m+1)},u=m=>{s(m),o(!0)},h=()=>{o(!1),s(null)},p=a[e];return C.jsxs("div",{className:"min-h-screen py-16 px-4 relative z-10",children:[C.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[C.jsx("div",{className:"absolute top-20 left-10 w-2 h-2 bg-stellar-gold rounded-full animate-pulse opacity-60"}),C.jsx("div",{className:"absolute top-40 right-20 w-3 h-3 bg-blue-400 rounded-full animate-bounce opacity-40"}),C.jsx("div",{className:"absolute bottom-32 left-1/4 w-2 h-2 bg-purple-400 rounded-full animate-ping opacity-50"}),C.jsx("div",{className:"absolute bottom-20 right-1/3 w-4 h-4 bg-cyan-400 rounded-full animate-pulse opacity-30"})]}),C.jsxs("div",{className:"max-w-6xl mx-auto",children:[C.jsxs("div",{className:"text-center mb-12 animate-fadeInUp",children:[C.jsxs("button",{onClick:n,className:"inline-flex items-center space-x-2 mb-8 px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-purple-600 hover:to-blue-600 text-white rounded-full transition-all duration-300 transform hover:scale-105",children:[C.jsx(rI,{className:"w-5 h-5"}),C.jsx("span",{children:"Back to Journey"})]}),C.jsx("h1",{className:"text-5xl lg:text-6xl font-bold gradient-text mb-6 animate-glow",children:"Space Weather Gallery"}),C.jsx("p",{className:"text-xl text-blue-200 max-w-3xl mx-auto",children:"Explore stunning visuals and learn about the fascinating phenomena that occur in space and affect our planet"})]}),C.jsx("div",{className:"bg-black bg-opacity-40 backdrop-blur-sm rounded-3xl p-8 mb-8 animate-slideInUp",children:C.jsxs("div",{className:"grid lg:grid-cols-2 gap-8 items-center",children:[C.jsxs("div",{className:"relative group",children:[C.jsxs("div",{className:"relative overflow-hidden rounded-2xl shadow-2xl",children:[C.jsx("img",{src:p.imageUrl,alt:p.title,className:"w-full h-80 object-cover transition-transform duration-500 group-hover:scale-110"}),C.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent opacity-60"}),C.jsx("button",{onClick:()=>u(p),className:"absolute top-4 right-4 bg-black bg-opacity-50 backdrop-blur-sm text-white p-2 rounded-full hover:bg-opacity-70 transition-all duration-300",children:C.jsx(G8,{className:"w-5 h-5"})})]}),C.jsx("div",{className:"absolute top-4 left-4 bg-stellar-gold text-black px-3 py-1 rounded-full text-sm font-bold",children:p.category.replace("-"," ").toUpperCase()})]}),C.jsxs("div",{className:"space-y-6",children:[C.jsx("h2",{className:"text-3xl font-bold text-white animate-slideInRight",children:p.title}),C.jsx("p",{className:"text-blue-200 leading-relaxed text-lg animate-slideInRight",children:p.description}),C.jsxs("div",{className:"bg-gradient-to-r from-blue-900 to-purple-900 bg-opacity-50 rounded-xl p-4 animate-slideInRight",children:[C.jsxs("h3",{className:"text-stellar-gold font-bold mb-3 flex items-center",children:[C.jsx(oo,{className:"w-5 h-5 mr-2"}),"Quick Facts"]}),C.jsx("ul",{className:"space-y-2 text-blue-200",children:p.facts.slice(0,3).map((m,g)=>C.jsxs("li",{className:"flex items-start",children:[C.jsx("span",{className:"text-stellar-gold mr-2",children:"•"}),C.jsx("span",{className:"text-sm",children:m})]},g))})]}),C.jsx("button",{onClick:()=>u(p),className:"bg-gradient-to-r from-stellar-gold to-orange-500 hover:from-orange-500 hover:to-stellar-gold text-black font-bold py-3 px-6 rounded-full transition-all duration-300 transform hover:scale-105 animate-slideInRight",children:"Learn More Details"})]})]})}),C.jsxs("div",{className:"flex justify-between items-center mb-8",children:[C.jsxs("button",{onClick:l,className:"flex items-center space-x-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-purple-600 hover:to-blue-600 text-white rounded-full transition-all duration-300 transform hover:scale-105",children:[C.jsx(oI,{className:"w-5 h-5"}),C.jsx("span",{children:"Previous"})]}),C.jsx("div",{className:"text-center",children:C.jsxs("span",{className:"text-stellar-gold font-bold text-lg",children:[e+1," of ",a.length]})}),C.jsxs("button",{onClick:c,className:"flex items-center space-x-2 px-6 py-3 bg-gradient-to-r from-stellar-gold to-orange-500 hover:from-orange-500 hover:to-stellar-gold text-black font-bold rounded-full transition-all duration-300 transform hover:scale-105",children:[C.jsx("span",{children:"Next"}),C.jsx(_g,{className:"w-5 h-5"})]})]}),C.jsx("div",{className:"flex justify-center space-x-4 overflow-x-auto pb-4",children:a.map((m,g)=>C.jsx("button",{onClick:()=>t(g),className:`flex-shrink-0 w-20 h-20 rounded-lg overflow-hidden border-2 transition-all duration-300 ${g===e?"border-stellar-gold scale-110 shadow-lg shadow-stellar-gold/50":"border-white border-opacity-30 hover:border-opacity-60"}`,children:C.jsx("img",{src:m.imageUrl,alt:m.title,className:"w-full h-full object-cover"})},m.id))})]}),r&&i&&C.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-80 backdrop-blur-sm animate-fadeIn",children:C.jsx("div",{className:"bg-gradient-to-br from-gray-900 to-black rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto animate-scaleIn",children:C.jsxs("div",{className:"relative",children:[C.jsx("button",{onClick:h,className:"absolute top-4 right-4 z-10 bg-black bg-opacity-50 backdrop-blur-sm text-white p-2 rounded-full hover:bg-opacity-70 transition-all duration-300",children:C.jsx(V8,{className:"w-6 h-6"})}),C.jsx("img",{src:i.imageUrl,alt:i.title,className:"w-full h-64 object-cover rounded-t-2xl"}),C.jsxs("div",{className:"p-8",children:[C.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:i.title}),C.jsx("p",{className:"text-blue-200 leading-relaxed mb-6 text-lg",children:i.detailedDescription}),C.jsxs("div",{className:"bg-gradient-to-r from-blue-900 to-purple-900 bg-opacity-50 rounded-xl p-6",children:[C.jsxs("h3",{className:"text-stellar-gold font-bold text-xl mb-4 flex items-center",children:[C.jsx(oo,{className:"w-6 h-6 mr-2"}),"Fascinating Facts"]}),C.jsx("ul",{className:"space-y-3 text-blue-200",children:i.facts.map((m,g)=>C.jsxs("li",{className:"flex items-start",children:[C.jsx("span",{className:"text-stellar-gold mr-3 mt-1",children:"•"}),C.jsx("span",{children:m})]},g))})]})]})]})})})]})};function VG(n,[e,t]){return Math.min(t,Math.max(e,n))}function Md(n,e,{checkForDefaultPrevented:t=!0}={}){return function(s){if(n==null||n(s),t===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function cP(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function jG(...n){return e=>{let t=!1;const i=n.map(s=>{const r=cP(s,e);return!t&&typeof r=="function"&&(t=!0),r});if(t)return()=>{for(let s=0;s<i.length;s++){const r=i[s];typeof r=="function"?r():cP(n[s],null)}}}}function sc(...n){return ee.useCallback(jG(...n),n)}function WG(n,e=[]){let t=[];function i(r,o){const a=ee.createContext(o),l=t.length;t=[...t,o];const c=h=>{var A;const{scope:p,children:m,...g}=h,v=((A=p==null?void 0:p[n])==null?void 0:A[l])||a,y=ee.useMemo(()=>g,Object.values(g));return C.jsx(v.Provider,{value:y,children:m})};c.displayName=r+"Provider";function u(h,p){var v;const m=((v=p==null?void 0:p[n])==null?void 0:v[l])||a,g=ee.useContext(m);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${r}\``)}return[c,u]}const s=()=>{const r=t.map(o=>ee.createContext(o));return function(a){const l=(a==null?void 0:a[n])||r;return ee.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return s.scopeName=n,[i,JK(s,...e)]}function JK(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const i=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(r){const o=i.reduce((a,{useScope:l,scopeName:c})=>{const h=l(r)[`__scope${c}`];return{...a,...h}},{});return ee.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}var qG=globalThis!=null&&globalThis.document?ee.useLayoutEffect:()=>{},XK=wH[" useInsertionEffect ".trim().toString()]||qG;function KK({prop:n,defaultProp:e,onChange:t=()=>{},caller:i}){const[s,r,o]=$K({defaultProp:e,onChange:t}),a=n!==void 0,l=a?n:s;{const u=ee.useRef(n!==void 0);ee.useEffect(()=>{const h=u.current;h!==a&&console.warn(`${i} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,i])}const c=ee.useCallback(u=>{var h;if(a){const p=YK(u)?u(n):u;p!==n&&((h=o.current)==null||h.call(o,p))}else r(u)},[a,n,r,o]);return[l,c]}function $K({defaultProp:n,onChange:e}){const[t,i]=ee.useState(n),s=ee.useRef(t),r=ee.useRef(e);return XK(()=>{r.current=e},[e]),ee.useEffect(()=>{var o;s.current!==t&&((o=r.current)==null||o.call(r,t),s.current=t)},[t,s]),[t,i,r]}function YK(n){return typeof n=="function"}var ZK=ee.createContext(void 0);function e$(n){const e=ee.useContext(ZK);return n||e||"ltr"}function t$(n){const e=ee.useRef({value:n,previous:n});return ee.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}function n$(n){const[e,t]=ee.useState(void 0);return qG(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const i=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const r=s[0];let o,a;if("borderBoxSize"in r){const l=r.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=n.offsetWidth,a=n.offsetHeight;t({width:o,height:a})});return i.observe(n,{box:"border-box"}),()=>i.unobserve(n)}else t(void 0)},[n]),e}function R1(n){const e=i$(n),t=ee.forwardRef((i,s)=>{const{children:r,...o}=i,a=ee.Children.toArray(r),l=a.find(r$);if(l){const c=l.props.children,u=a.map(h=>h===l?ee.Children.count(c)>1?ee.Children.only(null):ee.isValidElement(c)?c.props.children:null:h);return C.jsx(e,{...o,ref:s,children:ee.isValidElement(c)?ee.cloneElement(c,void 0,u):null})}return C.jsx(e,{...o,ref:s,children:r})});return t.displayName=`${n}.Slot`,t}function i$(n){const e=ee.forwardRef((t,i)=>{const{children:s,...r}=t;if(ee.isValidElement(s)){const o=a$(s),a=o$(r,s.props);return s.type!==ee.Fragment&&(a.ref=i?jG(i,o):o),ee.cloneElement(s,a)}return ee.Children.count(s)>1?ee.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var s$=Symbol("radix.slottable");function r$(n){return ee.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===s$}function o$(n,e){const t={...e};for(const i in e){const s=n[i],r=e[i];/^on[A-Z]/.test(i)?s&&r?t[i]=(...a)=>{const l=r(...a);return s(...a),l}:s&&(t[i]=s):i==="style"?t[i]={...s,...r}:i==="className"&&(t[i]=[s,r].filter(Boolean).join(" "))}return{...n,...t}}function a$(n){var i,s;let e=(i=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var l$=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Hg=l$.reduce((n,e)=>{const t=R1(`Primitive.${e}`),i=ee.forwardRef((s,r)=>{const{asChild:o,...a}=s,l=o?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),C.jsx(l,{...a,ref:r})});return i.displayName=`Primitive.${e}`,{...n,[e]:i}},{});function c$(n){const e=n+"CollectionProvider",[t,i]=WG(e),[s,r]=t(e,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:y,children:A}=v,b=ba.useRef(null),w=ba.useRef(new Map).current;return C.jsx(s,{scope:y,itemMap:w,collectionRef:b,children:A})};o.displayName=e;const a=n+"CollectionSlot",l=R1(a),c=ba.forwardRef((v,y)=>{const{scope:A,children:b}=v,w=r(a,A),E=sc(y,w.collectionRef);return C.jsx(l,{ref:E,children:b})});c.displayName=a;const u=n+"CollectionItemSlot",h="data-radix-collection-item",p=R1(u),m=ba.forwardRef((v,y)=>{const{scope:A,children:b,...w}=v,E=ba.useRef(null),M=sc(y,E),I=r(u,A);return ba.useEffect(()=>(I.itemMap.set(E,{ref:E,...w}),()=>void I.itemMap.delete(E))),C.jsx(p,{[h]:"",ref:M,children:b})});m.displayName=u;function g(v){const y=r(n+"CollectionConsumer",v);return ba.useCallback(()=>{const b=y.collectionRef.current;if(!b)return[];const w=Array.from(b.querySelectorAll(`[${h}]`));return Array.from(y.itemMap.values()).sort((I,D)=>w.indexOf(I.ref.current)-w.indexOf(D.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:o,Slot:c,ItemSlot:m},g,i]}var JG=["PageUp","PageDown"],XG=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],KG={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Nf="Slider",[D1,u$,h$]=c$(Nf),[$G,zue]=WG(Nf,[h$]),[d$,kb]=$G(Nf),YG=ee.forwardRef((n,e)=>{const{name:t,min:i=0,max:s=100,step:r=1,orientation:o="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[i],value:u,onValueChange:h=()=>{},onValueCommit:p=()=>{},inverted:m=!1,form:g,...v}=n,y=ee.useRef(new Set),A=ee.useRef(0),w=o==="horizontal"?f$:p$,[E=[],M]=KK({prop:u,defaultProp:c,onChange:k=>{var Q;(Q=[...y.current][A.current])==null||Q.focus(),h(k)}}),I=ee.useRef(E);function D(k){const H=v$(E,k);T(k,H)}function B(k){T(k,A.current)}function R(){const k=I.current[A.current];E[A.current]!==k&&p(E)}function T(k,H,{commit:Q}={commit:!1}){const W=E$(r),X=_$(Math.round((k-i)/r)*r+i,W),J=VG(X,[i,s]);M((K=[])=>{const L=A$(K,J,H);if(w$(L,l*r)){A.current=L.indexOf(J);const V=String(L)!==String(K);return V&&Q&&p(L),V?L:K}else return K})}return C.jsx(d$,{scope:n.__scopeSlider,name:t,disabled:a,min:i,max:s,valueIndexToChangeRef:A,thumbs:y.current,values:E,orientation:o,form:g,children:C.jsx(D1.Provider,{scope:n.__scopeSlider,children:C.jsx(D1.Slot,{scope:n.__scopeSlider,children:C.jsx(w,{"aria-disabled":a,"data-disabled":a?"":void 0,...v,ref:e,onPointerDown:Md(v.onPointerDown,()=>{a||(I.current=E)}),min:i,max:s,inverted:m,onSlideStart:a?void 0:D,onSlideMove:a?void 0:B,onSlideEnd:a?void 0:R,onHomeKeyDown:()=>!a&&T(i,0,{commit:!0}),onEndKeyDown:()=>!a&&T(s,E.length-1,{commit:!0}),onStepKeyDown:({event:k,direction:H})=>{if(!a){const X=JG.includes(k.key)||k.shiftKey&&XG.includes(k.key)?10:1,J=A.current,K=E[J],L=r*X*H;T(K+L,J,{commit:!0})}}})})})})});YG.displayName=Nf;var[ZG,e4]=$G(Nf,{startEdge:"left",endEdge:"right",size:"width",direction:1}),f$=ee.forwardRef((n,e)=>{const{min:t,max:i,dir:s,inverted:r,onSlideStart:o,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c,...u}=n,[h,p]=ee.useState(null),m=sc(e,w=>p(w)),g=ee.useRef(void 0),v=e$(s),y=v==="ltr",A=y&&!r||!y&&r;function b(w){const E=g.current||h.getBoundingClientRect(),M=[0,E.width],D=KI(M,A?[t,i]:[i,t]);return g.current=E,D(w-E.left)}return C.jsx(ZG,{scope:n.__scopeSlider,startEdge:A?"left":"right",endEdge:A?"right":"left",direction:A?1:-1,size:"width",children:C.jsx(t4,{dir:v,"data-orientation":"horizontal",...u,ref:m,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:w=>{const E=b(w.clientX);o==null||o(E)},onSlideMove:w=>{const E=b(w.clientX);a==null||a(E)},onSlideEnd:()=>{g.current=void 0,l==null||l()},onStepKeyDown:w=>{const M=KG[A?"from-left":"from-right"].includes(w.key);c==null||c({event:w,direction:M?-1:1})}})})}),p$=ee.forwardRef((n,e)=>{const{min:t,max:i,inverted:s,onSlideStart:r,onSlideMove:o,onSlideEnd:a,onStepKeyDown:l,...c}=n,u=ee.useRef(null),h=sc(e,u),p=ee.useRef(void 0),m=!s;function g(v){const y=p.current||u.current.getBoundingClientRect(),A=[0,y.height],w=KI(A,m?[i,t]:[t,i]);return p.current=y,w(v-y.top)}return C.jsx(ZG,{scope:n.__scopeSlider,startEdge:m?"bottom":"top",endEdge:m?"top":"bottom",size:"height",direction:m?1:-1,children:C.jsx(t4,{"data-orientation":"vertical",...c,ref:h,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:v=>{const y=g(v.clientY);r==null||r(y)},onSlideMove:v=>{const y=g(v.clientY);o==null||o(y)},onSlideEnd:()=>{p.current=void 0,a==null||a()},onStepKeyDown:v=>{const A=KG[m?"from-bottom":"from-top"].includes(v.key);l==null||l({event:v,direction:A?-1:1})}})})}),t4=ee.forwardRef((n,e)=>{const{__scopeSlider:t,onSlideStart:i,onSlideMove:s,onSlideEnd:r,onHomeKeyDown:o,onEndKeyDown:a,onStepKeyDown:l,...c}=n,u=kb(Nf,t);return C.jsx(Hg.span,{...c,ref:e,onKeyDown:Md(n.onKeyDown,h=>{h.key==="Home"?(o(h),h.preventDefault()):h.key==="End"?(a(h),h.preventDefault()):JG.concat(XG).includes(h.key)&&(l(h),h.preventDefault())}),onPointerDown:Md(n.onPointerDown,h=>{const p=h.target;p.setPointerCapture(h.pointerId),h.preventDefault(),u.thumbs.has(p)?p.focus():i(h)}),onPointerMove:Md(n.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&s(h)}),onPointerUp:Md(n.onPointerUp,h=>{const p=h.target;p.hasPointerCapture(h.pointerId)&&(p.releasePointerCapture(h.pointerId),r(h))})})}),n4="SliderTrack",i4=ee.forwardRef((n,e)=>{const{__scopeSlider:t,...i}=n,s=kb(n4,t);return C.jsx(Hg.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...i,ref:e})});i4.displayName=n4;var P1="SliderRange",s4=ee.forwardRef((n,e)=>{const{__scopeSlider:t,...i}=n,s=kb(P1,t),r=e4(P1,t),o=ee.useRef(null),a=sc(e,o),l=s.values.length,c=s.values.map(p=>a4(p,s.min,s.max)),u=l>1?Math.min(...c):0,h=100-Math.max(...c);return C.jsx(Hg.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...i,ref:a,style:{...n.style,[r.startEdge]:u+"%",[r.endEdge]:h+"%"}})});s4.displayName=P1;var L1="SliderThumb",r4=ee.forwardRef((n,e)=>{const t=u$(n.__scopeSlider),[i,s]=ee.useState(null),r=sc(e,a=>s(a)),o=ee.useMemo(()=>i?t().findIndex(a=>a.ref.current===i):-1,[t,i]);return C.jsx(m$,{...n,ref:r,index:o})}),m$=ee.forwardRef((n,e)=>{const{__scopeSlider:t,index:i,name:s,...r}=n,o=kb(L1,t),a=e4(L1,t),[l,c]=ee.useState(null),u=sc(e,b=>c(b)),h=l?o.form||!!l.closest("form"):!0,p=n$(l),m=o.values[i],g=m===void 0?0:a4(m,o.min,o.max),v=y$(i,o.values.length),y=p==null?void 0:p[a.size],A=y?x$(y,g,a.direction):0;return ee.useEffect(()=>{if(l)return o.thumbs.add(l),()=>{o.thumbs.delete(l)}},[l,o.thumbs]),C.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[a.startEdge]:`calc(${g}% + ${A}px)`},children:[C.jsx(D1.ItemSlot,{scope:n.__scopeSlider,children:C.jsx(Hg.span,{role:"slider","aria-label":n["aria-label"]||v,"aria-valuemin":o.min,"aria-valuenow":m,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...r,ref:u,style:m===void 0?{display:"none"}:n.style,onFocus:Md(n.onFocus,()=>{o.valueIndexToChangeRef.current=i})})}),h&&C.jsx(o4,{name:s??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:m},i)]})});r4.displayName=L1;var g$="RadioBubbleInput",o4=ee.forwardRef(({__scopeSlider:n,value:e,...t},i)=>{const s=ee.useRef(null),r=sc(s,i),o=t$(e);return ee.useEffect(()=>{const a=s.current;if(!a)return;const l=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&u){const h=new Event("input",{bubbles:!0});u.call(a,e),a.dispatchEvent(h)}},[o,e]),C.jsx(Hg.input,{style:{display:"none"},...t,ref:r,defaultValue:e})});o4.displayName=g$;function A$(n=[],e,t){const i=[...n];return i[t]=e,i.sort((s,r)=>s-r)}function a4(n,e,t){const r=100/(t-e)*(n-e);return VG(r,[0,100])}function y$(n,e){return e>2?`Value ${n+1} of ${e}`:e===2?["Minimum","Maximum"][n]:void 0}function v$(n,e){if(n.length===1)return 0;const t=n.map(s=>Math.abs(s-e)),i=Math.min(...t);return t.indexOf(i)}function x$(n,e,t){const i=n/2,r=KI([0,50],[0,i]);return(i-r(e)*t)*t}function b$(n){return n.slice(0,-1).map((e,t)=>n[t+1]-e)}function w$(n,e){if(e>0){const t=b$(n);return Math.min(...t)>=e}return!0}function KI(n,e){return t=>{if(n[0]===n[1]||e[0]===e[1])return e[0];const i=(e[1]-e[0])/(n[1]-n[0]);return e[0]+i*(t-n[0])}}function E$(n){return(String(n).split(".")[1]||"").length}function _$(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}var C$=YG,S$=i4,M$=s4,I$=r4;function l4(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=l4(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function T$(){for(var n,e,t=0,i="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=l4(n))&&(i&&(i+=" "),i+=e);return i}const $I="-",B$=n=>{const e=D$(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:i}=n;return{getClassGroupId:o=>{const a=o.split($I);return a[0]===""&&a.length!==1&&a.shift(),c4(a,e)||R$(o)},getConflictingClassGroupIds:(o,a)=>{const l=t[o]||[];return a&&i[o]?[...l,...i[o]]:l}}},c4=(n,e)=>{var o;if(n.length===0)return e.classGroupId;const t=n[0],i=e.nextPart.get(t),s=i?c4(n.slice(1),i):void 0;if(s)return s;if(e.validators.length===0)return;const r=n.join($I);return(o=e.validators.find(({validator:a})=>a(r)))==null?void 0:o.classGroupId},uP=/^\[(.+)\]$/,R$=n=>{if(uP.test(n)){const e=uP.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},D$=n=>{const{theme:e,classGroups:t}=n,i={nextPart:new Map,validators:[]};for(const s in t)k1(t[s],i,s,e);return i},k1=(n,e,t,i)=>{n.forEach(s=>{if(typeof s=="string"){const r=s===""?e:hP(e,s);r.classGroupId=t;return}if(typeof s=="function"){if(P$(s)){k1(s(i),e,t,i);return}e.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(([r,o])=>{k1(o,hP(e,r),t,i)})})},hP=(n,e)=>{let t=n;return e.split($I).forEach(i=>{t.nextPart.has(i)||t.nextPart.set(i,{nextPart:new Map,validators:[]}),t=t.nextPart.get(i)}),t},P$=n=>n.isThemeGetter,L$=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,i=new Map;const s=(r,o)=>{t.set(r,o),e++,e>n&&(e=0,i=t,t=new Map)};return{get(r){let o=t.get(r);if(o!==void 0)return o;if((o=i.get(r))!==void 0)return s(r,o),o},set(r,o){t.has(r)?t.set(r,o):s(r,o)}}},F1="!",N1=":",k$=N1.length,F$=n=>{const{prefix:e,experimentalParseClassName:t}=n;let i=s=>{const r=[];let o=0,a=0,l=0,c;for(let g=0;g<s.length;g++){let v=s[g];if(o===0&&a===0){if(v===N1){r.push(s.slice(l,g)),l=g+k$;continue}if(v==="/"){c=g;continue}}v==="["?o++:v==="]"?o--:v==="("?a++:v===")"&&a--}const u=r.length===0?s:s.substring(l),h=N$(u),p=h!==u,m=c&&c>l?c-l:void 0;return{modifiers:r,hasImportantModifier:p,baseClassName:h,maybePostfixModifierPosition:m}};if(e){const s=e+N1,r=i;i=o=>o.startsWith(s)?r(o.substring(s.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:o,maybePostfixModifierPosition:void 0}}if(t){const s=i;i=r=>t({className:r,parseClassName:s})}return i},N$=n=>n.endsWith(F1)?n.substring(0,n.length-1):n.startsWith(F1)?n.substring(1):n,O$=n=>{const e=Object.fromEntries(n.orderSensitiveModifiers.map(i=>[i,!0]));return i=>{if(i.length<=1)return i;const s=[];let r=[];return i.forEach(o=>{o[0]==="["||e[o]?(s.push(...r.sort(),o),r=[]):r.push(o)}),s.push(...r.sort()),s}},U$=n=>({cache:L$(n.cacheSize),parseClassName:F$(n),sortModifiers:O$(n),...B$(n)}),G$=/\s+/,z$=(n,e)=>{const{parseClassName:t,getClassGroupId:i,getConflictingClassGroupIds:s,sortModifiers:r}=e,o=[],a=n.trim().split(G$);let l="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{isExternal:h,modifiers:p,hasImportantModifier:m,baseClassName:g,maybePostfixModifierPosition:v}=t(u);if(h){l=u+(l.length>0?" "+l:l);continue}let y=!!v,A=i(y?g.substring(0,v):g);if(!A){if(!y){l=u+(l.length>0?" "+l:l);continue}if(A=i(g),!A){l=u+(l.length>0?" "+l:l);continue}y=!1}const b=r(p).join(":"),w=m?b+F1:b,E=w+A;if(o.includes(E))continue;o.push(E);const M=s(A,y);for(let I=0;I<M.length;++I){const D=M[I];o.push(w+D)}l=u+(l.length>0?" "+l:l)}return l};function Q$(){let n=0,e,t,i="";for(;n<arguments.length;)(e=arguments[n++])&&(t=u4(e))&&(i&&(i+=" "),i+=t);return i}const u4=n=>{if(typeof n=="string")return n;let e,t="";for(let i=0;i<n.length;i++)n[i]&&(e=u4(n[i]))&&(t&&(t+=" "),t+=e);return t};function H$(n,...e){let t,i,s,r=o;function o(l){const c=e.reduce((u,h)=>h(u),n());return t=U$(c),i=t.cache.get,s=t.cache.set,r=a,a(l)}function a(l){const c=i(l);if(c)return c;const u=z$(l,t);return s(l,u),u}return function(){return r(Q$.apply(null,arguments))}}const mi=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},h4=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,d4=/^\((?:(\w[\w-]*):)?(.+)\)$/i,V$=/^\d+\/\d+$/,j$=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,W$=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,q$=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,J$=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,X$=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Gh=n=>V$.test(n),Nt=n=>!!n&&!Number.isNaN(Number(n)),Al=n=>!!n&&Number.isInteger(Number(n)),I_=n=>n.endsWith("%")&&Nt(n.slice(0,-1)),da=n=>j$.test(n),K$=()=>!0,$$=n=>W$.test(n)&&!q$.test(n),f4=()=>!1,Y$=n=>J$.test(n),Z$=n=>X$.test(n),eY=n=>!Ze(n)&&!et(n),tY=n=>Of(n,g4,f4),Ze=n=>h4.test(n),Uc=n=>Of(n,A4,$$),T_=n=>Of(n,oY,Nt),dP=n=>Of(n,p4,f4),nY=n=>Of(n,m4,Z$),iy=n=>Of(n,y4,Y$),et=n=>d4.test(n),Tp=n=>Uf(n,A4),iY=n=>Uf(n,aY),fP=n=>Uf(n,p4),sY=n=>Uf(n,g4),rY=n=>Uf(n,m4),sy=n=>Uf(n,y4,!0),Of=(n,e,t)=>{const i=h4.exec(n);return i?i[1]?e(i[1]):t(i[2]):!1},Uf=(n,e,t=!1)=>{const i=d4.exec(n);return i?i[1]?e(i[1]):t:!1},p4=n=>n==="position"||n==="percentage",m4=n=>n==="image"||n==="url",g4=n=>n==="length"||n==="size"||n==="bg-size",A4=n=>n==="length",oY=n=>n==="number",aY=n=>n==="family-name",y4=n=>n==="shadow",lY=()=>{const n=mi("color"),e=mi("font"),t=mi("text"),i=mi("font-weight"),s=mi("tracking"),r=mi("leading"),o=mi("breakpoint"),a=mi("container"),l=mi("spacing"),c=mi("radius"),u=mi("shadow"),h=mi("inset-shadow"),p=mi("text-shadow"),m=mi("drop-shadow"),g=mi("blur"),v=mi("perspective"),y=mi("aspect"),A=mi("ease"),b=mi("animate"),w=()=>["auto","avoid","all","avoid-page","page","left","right","column"],E=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],M=()=>[...E(),et,Ze],I=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto","contain","none"],B=()=>[et,Ze,l],R=()=>[Gh,"full","auto",...B()],T=()=>[Al,"none","subgrid",et,Ze],k=()=>["auto",{span:["full",Al,et,Ze]},Al,et,Ze],H=()=>[Al,"auto",et,Ze],Q=()=>["auto","min","max","fr",et,Ze],W=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],X=()=>["start","end","center","stretch","center-safe","end-safe"],J=()=>["auto",...B()],K=()=>[Gh,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...B()],L=()=>[n,et,Ze],V=()=>[...E(),fP,dP,{position:[et,Ze]}],j=()=>["no-repeat",{repeat:["","x","y","space","round"]}],$=()=>["auto","cover","contain",sY,tY,{size:[et,Ze]}],le=()=>[I_,Tp,Uc],ve=()=>["","none","full",c,et,Ze],q=()=>["",Nt,Tp,Uc],ae=()=>["solid","dashed","dotted","double"],ge=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],se=()=>[Nt,I_,fP,dP],Fe=()=>["","none",g,et,Ze],qe=()=>["none",Nt,et,Ze],st=()=>["none",Nt,et,Ze],dt=()=>[Nt,et,Ze],Ae=()=>[Gh,"full",...B()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[da],breakpoint:[da],color:[K$],container:[da],"drop-shadow":[da],ease:["in","out","in-out"],font:[eY],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[da],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[da],shadow:[da],spacing:["px",Nt],text:[da],"text-shadow":[da],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Gh,Ze,et,y]}],container:["container"],columns:[{columns:[Nt,Ze,et,a]}],"break-after":[{"break-after":w()}],"break-before":[{"break-before":w()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:M()}],overflow:[{overflow:I()}],"overflow-x":[{"overflow-x":I()}],"overflow-y":[{"overflow-y":I()}],overscroll:[{overscroll:D()}],"overscroll-x":[{"overscroll-x":D()}],"overscroll-y":[{"overscroll-y":D()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:R()}],"inset-x":[{"inset-x":R()}],"inset-y":[{"inset-y":R()}],start:[{start:R()}],end:[{end:R()}],top:[{top:R()}],right:[{right:R()}],bottom:[{bottom:R()}],left:[{left:R()}],visibility:["visible","invisible","collapse"],z:[{z:[Al,"auto",et,Ze]}],basis:[{basis:[Gh,"full","auto",a,...B()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Nt,Gh,"auto","initial","none",Ze]}],grow:[{grow:["",Nt,et,Ze]}],shrink:[{shrink:["",Nt,et,Ze]}],order:[{order:[Al,"first","last","none",et,Ze]}],"grid-cols":[{"grid-cols":T()}],"col-start-end":[{col:k()}],"col-start":[{"col-start":H()}],"col-end":[{"col-end":H()}],"grid-rows":[{"grid-rows":T()}],"row-start-end":[{row:k()}],"row-start":[{"row-start":H()}],"row-end":[{"row-end":H()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Q()}],"auto-rows":[{"auto-rows":Q()}],gap:[{gap:B()}],"gap-x":[{"gap-x":B()}],"gap-y":[{"gap-y":B()}],"justify-content":[{justify:[...W(),"normal"]}],"justify-items":[{"justify-items":[...X(),"normal"]}],"justify-self":[{"justify-self":["auto",...X()]}],"align-content":[{content:["normal",...W()]}],"align-items":[{items:[...X(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...X(),{baseline:["","last"]}]}],"place-content":[{"place-content":W()}],"place-items":[{"place-items":[...X(),"baseline"]}],"place-self":[{"place-self":["auto",...X()]}],p:[{p:B()}],px:[{px:B()}],py:[{py:B()}],ps:[{ps:B()}],pe:[{pe:B()}],pt:[{pt:B()}],pr:[{pr:B()}],pb:[{pb:B()}],pl:[{pl:B()}],m:[{m:J()}],mx:[{mx:J()}],my:[{my:J()}],ms:[{ms:J()}],me:[{me:J()}],mt:[{mt:J()}],mr:[{mr:J()}],mb:[{mb:J()}],ml:[{ml:J()}],"space-x":[{"space-x":B()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":B()}],"space-y-reverse":["space-y-reverse"],size:[{size:K()}],w:[{w:[a,"screen",...K()]}],"min-w":[{"min-w":[a,"screen","none",...K()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[o]},...K()]}],h:[{h:["screen","lh",...K()]}],"min-h":[{"min-h":["screen","lh","none",...K()]}],"max-h":[{"max-h":["screen","lh",...K()]}],"font-size":[{text:["base",t,Tp,Uc]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[i,et,T_]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",I_,Ze]}],"font-family":[{font:[iY,Ze,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,et,Ze]}],"line-clamp":[{"line-clamp":[Nt,"none",et,T_]}],leading:[{leading:[r,...B()]}],"list-image":[{"list-image":["none",et,Ze]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",et,Ze]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:L()}],"text-color":[{text:L()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ae(),"wavy"]}],"text-decoration-thickness":[{decoration:[Nt,"from-font","auto",et,Uc]}],"text-decoration-color":[{decoration:L()}],"underline-offset":[{"underline-offset":[Nt,"auto",et,Ze]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:B()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",et,Ze]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",et,Ze]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:V()}],"bg-repeat":[{bg:j()}],"bg-size":[{bg:$()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Al,et,Ze],radial:["",et,Ze],conic:[Al,et,Ze]},rY,nY]}],"bg-color":[{bg:L()}],"gradient-from-pos":[{from:le()}],"gradient-via-pos":[{via:le()}],"gradient-to-pos":[{to:le()}],"gradient-from":[{from:L()}],"gradient-via":[{via:L()}],"gradient-to":[{to:L()}],rounded:[{rounded:ve()}],"rounded-s":[{"rounded-s":ve()}],"rounded-e":[{"rounded-e":ve()}],"rounded-t":[{"rounded-t":ve()}],"rounded-r":[{"rounded-r":ve()}],"rounded-b":[{"rounded-b":ve()}],"rounded-l":[{"rounded-l":ve()}],"rounded-ss":[{"rounded-ss":ve()}],"rounded-se":[{"rounded-se":ve()}],"rounded-ee":[{"rounded-ee":ve()}],"rounded-es":[{"rounded-es":ve()}],"rounded-tl":[{"rounded-tl":ve()}],"rounded-tr":[{"rounded-tr":ve()}],"rounded-br":[{"rounded-br":ve()}],"rounded-bl":[{"rounded-bl":ve()}],"border-w":[{border:q()}],"border-w-x":[{"border-x":q()}],"border-w-y":[{"border-y":q()}],"border-w-s":[{"border-s":q()}],"border-w-e":[{"border-e":q()}],"border-w-t":[{"border-t":q()}],"border-w-r":[{"border-r":q()}],"border-w-b":[{"border-b":q()}],"border-w-l":[{"border-l":q()}],"divide-x":[{"divide-x":q()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":q()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ae(),"hidden","none"]}],"divide-style":[{divide:[...ae(),"hidden","none"]}],"border-color":[{border:L()}],"border-color-x":[{"border-x":L()}],"border-color-y":[{"border-y":L()}],"border-color-s":[{"border-s":L()}],"border-color-e":[{"border-e":L()}],"border-color-t":[{"border-t":L()}],"border-color-r":[{"border-r":L()}],"border-color-b":[{"border-b":L()}],"border-color-l":[{"border-l":L()}],"divide-color":[{divide:L()}],"outline-style":[{outline:[...ae(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Nt,et,Ze]}],"outline-w":[{outline:["",Nt,Tp,Uc]}],"outline-color":[{outline:L()}],shadow:[{shadow:["","none",u,sy,iy]}],"shadow-color":[{shadow:L()}],"inset-shadow":[{"inset-shadow":["none",h,sy,iy]}],"inset-shadow-color":[{"inset-shadow":L()}],"ring-w":[{ring:q()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:L()}],"ring-offset-w":[{"ring-offset":[Nt,Uc]}],"ring-offset-color":[{"ring-offset":L()}],"inset-ring-w":[{"inset-ring":q()}],"inset-ring-color":[{"inset-ring":L()}],"text-shadow":[{"text-shadow":["none",p,sy,iy]}],"text-shadow-color":[{"text-shadow":L()}],opacity:[{opacity:[Nt,et,Ze]}],"mix-blend":[{"mix-blend":[...ge(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ge()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Nt]}],"mask-image-linear-from-pos":[{"mask-linear-from":se()}],"mask-image-linear-to-pos":[{"mask-linear-to":se()}],"mask-image-linear-from-color":[{"mask-linear-from":L()}],"mask-image-linear-to-color":[{"mask-linear-to":L()}],"mask-image-t-from-pos":[{"mask-t-from":se()}],"mask-image-t-to-pos":[{"mask-t-to":se()}],"mask-image-t-from-color":[{"mask-t-from":L()}],"mask-image-t-to-color":[{"mask-t-to":L()}],"mask-image-r-from-pos":[{"mask-r-from":se()}],"mask-image-r-to-pos":[{"mask-r-to":se()}],"mask-image-r-from-color":[{"mask-r-from":L()}],"mask-image-r-to-color":[{"mask-r-to":L()}],"mask-image-b-from-pos":[{"mask-b-from":se()}],"mask-image-b-to-pos":[{"mask-b-to":se()}],"mask-image-b-from-color":[{"mask-b-from":L()}],"mask-image-b-to-color":[{"mask-b-to":L()}],"mask-image-l-from-pos":[{"mask-l-from":se()}],"mask-image-l-to-pos":[{"mask-l-to":se()}],"mask-image-l-from-color":[{"mask-l-from":L()}],"mask-image-l-to-color":[{"mask-l-to":L()}],"mask-image-x-from-pos":[{"mask-x-from":se()}],"mask-image-x-to-pos":[{"mask-x-to":se()}],"mask-image-x-from-color":[{"mask-x-from":L()}],"mask-image-x-to-color":[{"mask-x-to":L()}],"mask-image-y-from-pos":[{"mask-y-from":se()}],"mask-image-y-to-pos":[{"mask-y-to":se()}],"mask-image-y-from-color":[{"mask-y-from":L()}],"mask-image-y-to-color":[{"mask-y-to":L()}],"mask-image-radial":[{"mask-radial":[et,Ze]}],"mask-image-radial-from-pos":[{"mask-radial-from":se()}],"mask-image-radial-to-pos":[{"mask-radial-to":se()}],"mask-image-radial-from-color":[{"mask-radial-from":L()}],"mask-image-radial-to-color":[{"mask-radial-to":L()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":E()}],"mask-image-conic-pos":[{"mask-conic":[Nt]}],"mask-image-conic-from-pos":[{"mask-conic-from":se()}],"mask-image-conic-to-pos":[{"mask-conic-to":se()}],"mask-image-conic-from-color":[{"mask-conic-from":L()}],"mask-image-conic-to-color":[{"mask-conic-to":L()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:V()}],"mask-repeat":[{mask:j()}],"mask-size":[{mask:$()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",et,Ze]}],filter:[{filter:["","none",et,Ze]}],blur:[{blur:Fe()}],brightness:[{brightness:[Nt,et,Ze]}],contrast:[{contrast:[Nt,et,Ze]}],"drop-shadow":[{"drop-shadow":["","none",m,sy,iy]}],"drop-shadow-color":[{"drop-shadow":L()}],grayscale:[{grayscale:["",Nt,et,Ze]}],"hue-rotate":[{"hue-rotate":[Nt,et,Ze]}],invert:[{invert:["",Nt,et,Ze]}],saturate:[{saturate:[Nt,et,Ze]}],sepia:[{sepia:["",Nt,et,Ze]}],"backdrop-filter":[{"backdrop-filter":["","none",et,Ze]}],"backdrop-blur":[{"backdrop-blur":Fe()}],"backdrop-brightness":[{"backdrop-brightness":[Nt,et,Ze]}],"backdrop-contrast":[{"backdrop-contrast":[Nt,et,Ze]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Nt,et,Ze]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Nt,et,Ze]}],"backdrop-invert":[{"backdrop-invert":["",Nt,et,Ze]}],"backdrop-opacity":[{"backdrop-opacity":[Nt,et,Ze]}],"backdrop-saturate":[{"backdrop-saturate":[Nt,et,Ze]}],"backdrop-sepia":[{"backdrop-sepia":["",Nt,et,Ze]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":B()}],"border-spacing-x":[{"border-spacing-x":B()}],"border-spacing-y":[{"border-spacing-y":B()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",et,Ze]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Nt,"initial",et,Ze]}],ease:[{ease:["linear","initial",A,et,Ze]}],delay:[{delay:[Nt,et,Ze]}],animate:[{animate:["none",b,et,Ze]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[v,et,Ze]}],"perspective-origin":[{"perspective-origin":M()}],rotate:[{rotate:qe()}],"rotate-x":[{"rotate-x":qe()}],"rotate-y":[{"rotate-y":qe()}],"rotate-z":[{"rotate-z":qe()}],scale:[{scale:st()}],"scale-x":[{"scale-x":st()}],"scale-y":[{"scale-y":st()}],"scale-z":[{"scale-z":st()}],"scale-3d":["scale-3d"],skew:[{skew:dt()}],"skew-x":[{"skew-x":dt()}],"skew-y":[{"skew-y":dt()}],transform:[{transform:[et,Ze,"","none","gpu","cpu"]}],"transform-origin":[{origin:M()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Ae()}],"translate-x":[{"translate-x":Ae()}],"translate-y":[{"translate-y":Ae()}],"translate-z":[{"translate-z":Ae()}],"translate-none":["translate-none"],accent:[{accent:L()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:L()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",et,Ze]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":B()}],"scroll-mx":[{"scroll-mx":B()}],"scroll-my":[{"scroll-my":B()}],"scroll-ms":[{"scroll-ms":B()}],"scroll-me":[{"scroll-me":B()}],"scroll-mt":[{"scroll-mt":B()}],"scroll-mr":[{"scroll-mr":B()}],"scroll-mb":[{"scroll-mb":B()}],"scroll-ml":[{"scroll-ml":B()}],"scroll-p":[{"scroll-p":B()}],"scroll-px":[{"scroll-px":B()}],"scroll-py":[{"scroll-py":B()}],"scroll-ps":[{"scroll-ps":B()}],"scroll-pe":[{"scroll-pe":B()}],"scroll-pt":[{"scroll-pt":B()}],"scroll-pr":[{"scroll-pr":B()}],"scroll-pb":[{"scroll-pb":B()}],"scroll-pl":[{"scroll-pl":B()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",et,Ze]}],fill:[{fill:["none",...L()]}],"stroke-w":[{stroke:[Nt,Tp,Uc,T_]}],stroke:[{stroke:["none",...L()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},cY=H$(lY);function B_(...n){return cY(T$(n))}function uY({className:n,defaultValue:e,value:t,min:i=0,max:s=100,...r}){const o=ee.useMemo(()=>Array.isArray(t)?t:Array.isArray(e)?e:[i,s],[t,e,i,s]);return C.jsxs(C$,{"data-slot":"slider",defaultValue:e,value:t,min:i,max:s,className:B_("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",n),...r,children:[C.jsx(S$,{"data-slot":"slider-track",className:B_("relative grow overflow-hidden rounded-full bg-gradient-to-r from-yellow-400 to-red-500 data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:C.jsx(M$,{"data-slot":"slider-range",className:B_("absolute bg-yellow-500 data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:o.length},(a,l)=>C.jsx(I$,{"data-slot":"slider-thumb",className:"border-primary ring-ring/50 block size-4 shrink-0 rounded-full border bg-yellow-400 shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},l))]})}const yu="generated",hY="pointerdown",dY="pointerup",O1="pointerleave",fY="pointerout",Vu="pointermove",pY="touchstart",pP="touchend",mY="touchmove",gY="touchcancel",AY="resize",yY="visibilitychange",zr="tsParticles - Error",Nl=100,Ai=.5,is=1e3,es={x:0,y:0,z:0},ry={a:1,b:0,c:0,d:1},yf="random",nv="mid",ss=2,vY=Math.PI*ss,R_=60,v4="true",mP="false",D_="canvas",gP=0,Ma=2,AP=4,xY=1,yP=1,vP=1,bY=4,x4=1,iv=255,vu=360,U1=100,G1=100,xP=0,z1=0,wY=60,EY=0,Ax=.25,bP=Ai+Ax,wP=0,_Y=1,CY=0,SY=0,MY=1,YI=1,IY=1,EP=1,yx=0,b4=1,TY=0,BY=120,RY=0,DY=0,PY=1e4,LY=0,kY=1,vx=0,w4=1,FY=1,NY=0,_P=1,OY=0,UY=0,CP=-Ax,SP=1.5,MP=0,GY=1,zY=0,Q1=0,E4=1,QY=1,xx=1,HY=500,IP=50,VY=0,H1=1,_4=0,TP=1,jY=0,Gc=255,P_=3,L_=6,WY=1,qY=1,JY=0,XY=0,KY=0,$Y=0;var Mi;(function(n){n.bottom="bottom",n.bottomLeft="bottom-left",n.bottomRight="bottom-right",n.left="left",n.none="none",n.right="right",n.top="top",n.topLeft="top-left",n.topRight="top-right",n.outside="outside",n.inside="inside"})(Mi||(Mi={}));function C4(n){return typeof n=="boolean"}function rc(n){return typeof n=="string"}function oc(n){return typeof n=="number"}function Id(n){return typeof n=="object"&&n!==null}function $o(n){return Array.isArray(n)}function Re(n){return n==null}class er{constructor(e,t,i){if(this._updateFromAngle=(s,r)=>{this.x=Math.cos(s)*r,this.y=Math.sin(s)*r},!oc(e)&&e){this.x=e.x,this.y=e.y;const s=e;this.z=s.z?s.z:es.z}else if(e!==void 0&&t!==void 0)this.x=e,this.y=t,this.z=i??es.z;else throw new Error(`${zr} Vector3d not initialized correctly`)}static get origin(){return er.create(es.x,es.y,es.z)}get angle(){return Math.atan2(this.y,this.x)}set angle(e){this._updateFromAngle(e,this.length)}get length(){return Math.sqrt(this.getLengthSq())}set length(e){this._updateFromAngle(this.angle,e)}static clone(e){return er.create(e.x,e.y,e.z)}static create(e,t,i){return new er(e,t,i)}add(e){return er.create(this.x+e.x,this.y+e.y,this.z+e.z)}addTo(e){this.x+=e.x,this.y+=e.y,this.z+=e.z}copy(){return er.clone(this)}distanceTo(e){return this.sub(e).length}distanceToSq(e){return this.sub(e).getLengthSq()}div(e){return er.create(this.x/e,this.y/e,this.z/e)}divTo(e){this.x/=e,this.y/=e,this.z/=e}getLengthSq(){return this.x**Ma+this.y**Ma}mult(e){return er.create(this.x*e,this.y*e,this.z*e)}multTo(e){this.x*=e,this.y*=e,this.z*=e}normalize(){const e=this.length;e!=vx&&this.multTo(x4/e)}rotate(e){return er.create(this.x*Math.cos(e)-this.y*Math.sin(e),this.x*Math.sin(e)+this.y*Math.cos(e),es.z)}setTo(e){this.x=e.x,this.y=e.y;const t=e;this.z=t.z?t.z:es.z}sub(e){return er.create(this.x-e.x,this.y-e.y,this.z-e.z)}subFrom(e){this.x-=e.x,this.y-=e.y,this.z-=e.z}}class Li extends er{constructor(e,t){super(e,t,es.z)}static get origin(){return Li.create(es.x,es.y)}static clone(e){return Li.create(e.x,e.y)}static create(e,t){return new Li(e,t)}}let YY=Math.random;const S4={nextFrame:n=>requestAnimationFrame(n),cancel:n=>cancelAnimationFrame(n)};function gn(){return Qr(YY(),0,1-Number.EPSILON)}function ZY(n){return S4.nextFrame(n)}function eZ(n){S4.cancel(n)}function Qr(n,e,t){return Math.min(Math.max(n,e),t)}function k_(n,e,t,i){return Math.floor((n*t+e*i)/(t+i))}function rr(n){const e=Uo(n),t=0;let i=Fb(n);return e===i&&(i=t),gn()*(e-i)+i}function ut(n){return oc(n)?n:rr(n)}function Fb(n){return oc(n)?n:n.min}function Uo(n){return oc(n)?n:n.max}function on(n,e){if(n===e||e===void 0&&oc(n))return n;const t=Fb(n),i=Uo(n);return e!==void 0?{min:Math.min(t,e),max:Math.max(i,e)}:on(t,i)}function _s(n,e){const t=n.x-e.x,i=n.y-e.y,s=2;return{dx:t,dy:i,distance:Math.sqrt(t**s+i**s)}}function hr(n,e){return _s(n,e).distance}function Xl(n){return n*Math.PI/180}function tZ(n,e,t){if(oc(n))return Xl(n);switch(n){case Mi.top:return-Math.PI*Ai;case Mi.topRight:return-Math.PI*Ax;case Mi.right:return EY;case Mi.bottomRight:return Math.PI*Ax;case Mi.bottom:return Math.PI*Ai;case Mi.bottomLeft:return Math.PI*bP;case Mi.left:return Math.PI;case Mi.topLeft:return-Math.PI*bP;case Mi.inside:return Math.atan2(t.y-e.y,t.x-e.x);case Mi.outside:return Math.atan2(e.y-t.y,e.x-t.x);default:return gn()*vY}}function nZ(n){const e=Li.origin;return e.length=1,e.angle=n,e}function BP(n,e,t,i){return Li.create(n.x*(t-i)/(t+i)+e.x*ss*i/(t+i),n.y)}function iZ(n){var e,t;return{x:((e=n.position)==null?void 0:e.x)??gn()*n.size.width,y:((t=n.position)==null?void 0:t.y)??gn()*n.size.height}}function M4(n){return n?n.endsWith("%")?parseFloat(n)/Nl:parseFloat(n):1}var xu;(function(n){n.auto="auto",n.increase="increase",n.decrease="decrease",n.random="random"})(xu||(xu={}));var ai;(function(n){n.increasing="increasing",n.decreasing="decreasing"})(ai||(ai={}));var ju;(function(n){n.none="none",n.max="max",n.min="min"})(ju||(ju={}));var Kt;(function(n){n.bottom="bottom",n.left="left",n.right="right",n.top="top"})(Kt||(Kt={}));var vf;(function(n){n.precise="precise",n.percent="percent"})(vf||(vf={}));var jd;(function(n){n.max="max",n.min="min",n.random="random"})(jd||(jd={}));const sZ={debug:console.debug,error:console.error,info:console.info,log:console.log,verbose:console.log,warning:console.warn};function Wu(){return sZ}function rZ(n){const e=new Map;return(...t)=>{const i=JSON.stringify(t);if(e.has(i))return e.get(i);const s=n(...t);return e.set(i,s),s}}function RP(n){const e={bounced:!1},{pSide:t,pOtherSide:i,rectSide:s,rectOtherSide:r,velocity:o,factor:a}=n;return i.min<r.min||i.min>r.max||i.max<r.min||i.max>r.max||(t.max>=s.min&&t.max<=(s.max+s.min)*Ai&&o>wP||t.min<=s.max&&t.min>(s.max+s.min)*Ai&&o<wP)&&(e.velocity=o*-a,e.bounced=!0),e}function oZ(n,e){const t=gr(e,i=>n.matches(i));return $o(t)?t.some(i=>i):t}function qu(){return typeof window>"u"||!window||typeof window.document>"u"||!window.document}function aZ(){return!qu()&&typeof matchMedia<"u"}function I4(n){if(aZ())return matchMedia(n)}function lZ(n){if(!(qu()||typeof IntersectionObserver>"u"))return new IntersectionObserver(n)}function cZ(n){if(!(qu()||typeof MutationObserver>"u"))return new MutationObserver(n)}function ei(n,e){return n===e||$o(e)&&e.indexOf(n)>-1}async function DP(n,e){try{await document.fonts.load(`${e??"400"} 36px '${n??"Verdana"}'`)}catch{}}function uZ(n){return Math.floor(gn()*n.length)}function Nb(n,e,t=!0){return n[e!==void 0&&t?e%n.length:uZ(n)]}function ZI(n,e,t,i,s){return hZ(Vg(n,i??0),e,t,s)}function hZ(n,e,t,i){let s=!0;return(!i||i===Kt.bottom)&&(s=n.top<e.height+t.x),s&&(!i||i===Kt.left)&&(s=n.right>t.x),s&&(!i||i===Kt.right)&&(s=n.left<e.width+t.y),s&&(!i||i===Kt.top)&&(s=n.bottom>t.y),s}function Vg(n,e){return{bottom:n.y+e,left:n.x-e,right:n.x+e,top:n.y-e}}function us(n,...e){for(const t of e){if(t==null)continue;if(!Id(t)){n=t;continue}const i=Array.isArray(t);i&&(Id(n)||!n||!Array.isArray(n))?n=[]:!i&&(Id(n)||!n||Array.isArray(n))&&(n={});for(const s in t){if(s==="__proto__")continue;const r=t,o=r[s],a=n;a[s]=Id(o)&&Array.isArray(o)?o.map(l=>us(a[s],l)):us(a[s],o)}}return n}function eT(n,e){return!!R4(e,t=>t.enable&&ei(n,t.mode))}function tT(n,e,t){gr(e,i=>{const s=i.mode;i.enable&&ei(n,s)&&dZ(i,t)})}function dZ(n,e){const t=n.selectors;gr(t,i=>{e(i,n)})}function T4(n,e){if(!(!e||!n))return R4(n,t=>oZ(e,t.selectors))}function V1(n){return{position:n.getPosition(),radius:n.getRadius(),mass:n.getMass(),velocity:n.velocity,factor:Li.create(ut(n.options.bounce.horizontal.value),ut(n.options.bounce.vertical.value))}}function B4(n,e){const{x:t,y:i}=n.velocity.sub(e.velocity),[s,r]=[n.position,e.position],{dx:o,dy:a}=_s(r,s),l=0;if(t*o+i*a<l)return;const c=-Math.atan2(a,o),u=n.mass,h=e.mass,p=n.velocity.rotate(c),m=e.velocity.rotate(c),g=BP(p,m,u,h),v=BP(m,p,u,h),y=g.rotate(-c),A=v.rotate(-c);n.velocity.x=y.x*n.factor.x,n.velocity.y=y.y*n.factor.y,e.velocity.x=A.x*e.factor.x,e.velocity.y=A.y*e.factor.y}function fZ(n,e){const t=n.getPosition(),i=n.getRadius(),s=Vg(t,i),r=n.options.bounce,o=RP({pSide:{min:s.left,max:s.right},pOtherSide:{min:s.top,max:s.bottom},rectSide:{min:e.left,max:e.right},rectOtherSide:{min:e.top,max:e.bottom},velocity:n.velocity.x,factor:ut(r.horizontal.value)});o.bounced&&(o.velocity!==void 0&&(n.velocity.x=o.velocity),o.position!==void 0&&(n.position.x=o.position));const a=RP({pSide:{min:s.top,max:s.bottom},pOtherSide:{min:s.left,max:s.right},rectSide:{min:e.top,max:e.bottom},rectOtherSide:{min:e.left,max:e.right},velocity:n.velocity.y,factor:ut(r.vertical.value)});a.bounced&&(a.velocity!==void 0&&(n.velocity.y=a.velocity),a.position!==void 0&&(n.position.y=a.position))}function gr(n,e){return $o(n)?n.map((i,s)=>e(i,s)):e(n,0)}function Lr(n,e,t){return $o(n)?Nb(n,e,t):n}function R4(n,e){return $o(n)?n.find((i,s)=>e(i,s)):e(n,0)?n:void 0}function D4(n,e){const t=n.value,i=n.animation,s={delayTime:ut(i.delay)*is,enable:i.enable,value:ut(n.value)*e,max:Uo(t)*e,min:Fb(t)*e,loops:0,maxLoops:ut(i.count),time:0},r=1;if(i.enable){switch(s.decay=r-ut(i.decay),i.mode){case xu.increase:s.status=ai.increasing;break;case xu.decrease:s.status=ai.decreasing;break;case xu.random:s.status=gn()>=Ai?ai.increasing:ai.decreasing;break}const o=i.mode===xu.auto;switch(i.startValue){case jd.min:s.value=s.min,o&&(s.status=ai.increasing);break;case jd.max:s.value=s.max,o&&(s.status=ai.decreasing);break;case jd.random:default:s.value=rr(s),o&&(s.status=gn()>=Ai?ai.increasing:ai.decreasing);break}}return s.initialValue=s.value,s}function pZ(n,e){if(!(n.mode===vf.percent)){const{mode:s,...r}=n;return r}return"x"in n?{x:n.x/Nl*e.width,y:n.y/Nl*e.height}:{width:n.width/Nl*e.width,height:n.height/Nl*e.height}}function P4(n,e){return pZ(n,e)}function mZ(n,e,t,i,s){switch(e){case ju.max:t>=s&&n.destroy();break;case ju.min:t<=i&&n.destroy();break}}function nT(n,e,t,i,s){if(n.destroyed||!e||!e.enable||(e.maxLoops??0)>0&&(e.loops??0)>(e.maxLoops??0))return;const u=(e.velocity??0)*s.factor,h=e.min,p=e.max,m=e.decay??1;if(e.time||(e.time=0),(e.delayTime??0)>0&&e.time<(e.delayTime??0)&&(e.time+=s.value),!((e.delayTime??0)>0&&e.time<(e.delayTime??0))){switch(e.status){case ai.increasing:e.value>=p?(t?e.status=ai.decreasing:e.value-=p,e.loops||(e.loops=0),e.loops++):e.value+=u;break;case ai.decreasing:e.value<=h?(t?e.status=ai.increasing:e.value+=p,e.loops||(e.loops=0),e.loops++):e.value-=u}e.velocity&&m!==1&&(e.velocity*=m),mZ(n,i,e.value,h,p),n.destroyed||(e.value=Qr(e.value,h,p))}}function gZ(n){var t,i,s,r;const e=document.createElement("div").style;if(!n)return e;for(const o in n){const a=n[o];if(!Object.prototype.hasOwnProperty.call(n,o)||Re(a))continue;const l=(t=n.getPropertyValue)==null?void 0:t.call(n,a);if(!l)continue;const c=(i=n.getPropertyPriority)==null?void 0:i.call(n,a);c?(r=e.setProperty)==null||r.call(e,a,l,c):(s=e.setProperty)==null||s.call(e,a,l)}return e}function AZ(n){const e=document.createElement("div").style,t=10,i={width:"100%",height:"100%",margin:"0",padding:"0",borderWidth:"0",position:"fixed",zIndex:n.toString(t),"z-index":n.toString(t),top:"0",left:"0"};for(const s in i){const r=i[s];e.setProperty(s,r)}return e}const yZ=rZ(AZ);var j1;(function(n){n.darken="darken",n.enlighten="enlighten"})(j1||(j1={}));function vZ(n,e){if(e){for(const t of n.colorManagers.values())if(e.startsWith(t.stringPrefix))return t.parseString(e)}}function mo(n,e,t,i=!0){if(!e)return;const s=rc(e)?{value:e}:e;if(rc(s.value))return L4(n,s.value,t,i);if($o(s.value))return mo(n,{value:Nb(s.value,t,i)});for(const r of n.colorManagers.values()){const o=r.handleRangeColor(s);if(o)return o}}function L4(n,e,t,i=!0){if(!e)return;const s=rc(e)?{value:e}:e;if(rc(s.value))return s.value===yf?F4():xZ(n,s.value);if($o(s.value))return L4(n,{value:Nb(s.value,t,i)});for(const r of n.colorManagers.values()){const o=r.handleColor(s);if(o)return o}}function hg(n,e,t,i=!0){const s=mo(n,e,t,i);return s?k4(s):void 0}function k4(n){const e=n.r/iv,t=n.g/iv,i=n.b/iv,s=Math.max(e,t,i),r=Math.min(e,t,i),o={h:xP,l:(s+r)*Ai,s:z1};return s!==r&&(o.s=o.l<Ai?(s-r)/(s+r):(s-r)/(ss-s-r),o.h=e===s?(t-i)/(s-r):o.h=t===s?ss+(i-e)/(s-r):ss*ss+(e-t)/(s-r)),o.l*=G1,o.s*=U1,o.h*=wY,o.h<xP&&(o.h+=vu),o.h>=vu&&(o.h-=vu),o}function xZ(n,e){return vZ(n,e)}function xf(n){const e=(n.h%vu+vu)%vu,t=Math.max(z1,Math.min(U1,n.s)),i=Math.max(jY,Math.min(G1,n.l)),s=e/vu,r=t/U1,o=i/G1;if(t===z1){const g=Math.round(o*Gc);return{r:g,g,b:g}}const a=(g,v,y)=>{if(y<0&&y++,y>1&&y--,y*L_<1)return g+(v-g)*L_*y;if(y*ss<1)return v;if(y*P_<1*ss){const w=ss/P_;return g+(v-g)*(w-y)*L_}return g},l=o<Ai?o*(WY+r):o+r-o*r,c=ss*o-l,u=qY/P_,h=Math.min(Gc,Gc*a(c,l,s+u)),p=Math.min(Gc,Gc*a(c,l,s)),m=Math.min(Gc,Gc*a(c,l,s-u));return{r:Math.round(h),g:Math.round(p),b:Math.round(m)}}function bZ(n){const e=xf(n);return{a:n.a,b:e.b,g:e.g,r:e.r}}function F4(n){const e=n??JY,t=iv+H1;return{b:Math.floor(rr(on(e,t))),g:Math.floor(rr(on(e,t))),r:Math.floor(rr(on(e,t)))}}function Oa(n,e){return`rgba(${n.r}, ${n.g}, ${n.b}, ${e??YI})`}function dg(n,e){return`hsla(${n.h}, ${n.s}%, ${n.l}%, ${e??YI})`}function iT(n,e,t,i){let s=n,r=e;return s.r===void 0&&(s=xf(n)),r.r===void 0&&(r=xf(e)),{b:k_(s.b,r.b,t,i),g:k_(s.g,r.g,t,i),r:k_(s.r,r.r,t,i)}}function W1(n,e,t){if(t===yf)return F4();if(t===nv){const i=n.getFillColor()??n.getStrokeColor(),s=(e==null?void 0:e.getFillColor())??(e==null?void 0:e.getStrokeColor());if(i&&s&&e)return iT(i,s,n.getRadius(),e.getRadius());{const r=i??s;if(r)return xf(r)}}else return t}function N4(n,e,t,i){const s=rc(e)?e:e.value;return s===yf?i?mo(n,{value:s}):t?yf:nv:s===nv?nv:mo(n,{value:s})}function PP(n){return n!==void 0?{h:n.h.value,s:n.s.value,l:n.l.value}:void 0}function O4(n,e,t){const i={h:{enable:!1,value:n.h},s:{enable:!1,value:n.s},l:{enable:!1,value:n.l}};return e&&(F_(i.h,e.h,t),F_(i.s,e.s,t),F_(i.l,e.l,t)),i}function F_(n,e,t){n.enable=e.enable,n.enable?(n.velocity=ut(e.speed)/Nl*t,n.decay=w4-ut(e.decay),n.status=ai.increasing,n.loops=KY,n.maxLoops=ut(e.count),n.time=$Y,n.delayTime=ut(e.delay)*is,e.sync||(n.velocity*=gn(),n.value*=gn()),n.initialValue=n.value,n.offset=on(e.offset)):n.velocity=XY}function N_(n,e,t,i){if(!n||!n.enable||(n.maxLoops??0)>0&&(n.loops??0)>(n.maxLoops??0)||(n.time||(n.time=0),(n.delayTime??0)>0&&n.time<(n.delayTime??0)&&(n.time+=i.value),(n.delayTime??0)>0&&n.time<(n.delayTime??0)))return;const u=n.offset?rr(n.offset):0,h=(n.velocity??0)*i.factor+u*3.6,p=n.decay??1,m=Uo(e),g=Fb(e);if(!t||n.status===ai.increasing)n.value+=h,n.value>m&&(n.loops||(n.loops=0),n.loops++,t?n.status=ai.decreasing:n.value-=m);else{n.value-=h;const v=0;n.value<v&&(n.loops||(n.loops=0),n.loops++,n.status=ai.increasing)}n.velocity&&p!==1&&(n.velocity*=p),n.value=Qr(n.value,g,m)}function U4(n,e){if(!n)return;const{h:t,s:i,l:s}=n,r={h:{min:0,max:360},s:{min:0,max:100},l:{min:0,max:100}};t&&N_(t,r.h,!1,e),i&&N_(i,r.s,!0,e),s&&N_(s,r.l,!0,e)}function Sm(n,e,t){n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.closePath()}function wZ(n,e,t){n.fillStyle=t??"rgba(0,0,0,0)",n.fillRect(es.x,es.y,e.width,e.height)}function EZ(n,e,t,i){t&&(n.globalAlpha=i,n.drawImage(t,es.x,es.y,e.width,e.height),n.globalAlpha=1)}function O_(n,e){n.clearRect(es.x,es.y,e.width,e.height)}function _Z(n){const{container:e,context:t,particle:i,delta:s,colorStyles:r,backgroundMask:o,composite:a,radius:l,opacity:c,shadow:u,transform:h}=n,p=i.getPosition(),m=i.rotation+(i.pathRotation?i.velocity.angle:VY),g={sin:Math.sin(m),cos:Math.cos(m)},v=!!m,y={a:g.cos*(h.a??ry.a),b:v?g.sin*(h.b??H1):h.b??ry.b,c:v?-g.sin*(h.c??H1):h.c??ry.c,d:g.cos*(h.d??ry.d)};t.setTransform(y.a,y.b,y.c,y.d,p.x,p.y),o&&(t.globalCompositeOperation=a);const A=i.shadowColor;u.enable&&A&&(t.shadowBlur=u.blur,t.shadowColor=Oa(A),t.shadowOffsetX=u.offset.x,t.shadowOffsetY=u.offset.y),r.fill&&(t.fillStyle=r.fill);const b=i.strokeWidth??_4;t.lineWidth=b,r.stroke&&(t.strokeStyle=r.stroke);const w={container:e,context:t,particle:i,radius:l,opacity:c,delta:s,transformData:y,strokeWidth:b};SZ(w),MZ(w),CZ(w),t.globalCompositeOperation="source-over",t.resetTransform()}function CZ(n){const{container:e,context:t,particle:i,radius:s,opacity:r,delta:o,transformData:a}=n;if(!i.effect)return;const l=e.effectDrawers.get(i.effect);l&&l.draw({context:t,particle:i,radius:s,opacity:r,delta:o,pixelRatio:e.retina.pixelRatio,transformData:{...a}})}function SZ(n){const{container:e,context:t,particle:i,radius:s,opacity:r,delta:o,strokeWidth:a,transformData:l}=n;if(!i.shape)return;const c=e.shapeDrawers.get(i.shape);c&&(t.beginPath(),c.draw({context:t,particle:i,radius:s,opacity:r,delta:o,pixelRatio:e.retina.pixelRatio,transformData:{...l}}),i.shapeClose&&t.closePath(),a>_4&&t.stroke(),i.shapeFill&&t.fill())}function MZ(n){const{container:e,context:t,particle:i,radius:s,opacity:r,delta:o,transformData:a}=n;if(!i.shape)return;const l=e.shapeDrawers.get(i.shape);l!=null&&l.afterDraw&&l.afterDraw({context:t,particle:i,radius:s,opacity:r,delta:o,pixelRatio:e.retina.pixelRatio,transformData:{...a}})}function IZ(n,e,t){e.draw&&e.draw(n,t)}function TZ(n,e,t,i){e.drawParticle&&e.drawParticle(n,t,i)}function BZ(n,e,t){return{h:n.h,s:n.s,l:n.l+(e===j1.darken?-TP:TP)*t}}function RZ(n,e,t){const i=e[t];i!==void 0&&(n[t]=(n[t]??_Y)*i)}function LP(n,e,t=!1){if(!e)return;const i=n;if(!i)return;const s=i.style;if(!s)return;const r=new Set;for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&r.add(s[o]);for(const o in e)Object.prototype.hasOwnProperty.call(e,o)&&r.add(e[o]);for(const o of r){const a=e.getPropertyValue(o);a?s.setProperty(o,a,t?"important":""):s.removeProperty(o)}}class DZ{constructor(e,t){this.container=e,this._applyPostDrawUpdaters=r=>{var o;for(const a of this._postDrawUpdaters)(o=a.afterDraw)==null||o.call(a,r)},this._applyPreDrawUpdaters=(r,o,a,l,c,u)=>{var h;for(const p of this._preDrawUpdaters){if(p.getColorStyles){const{fill:m,stroke:g}=p.getColorStyles(o,r,a,l);m&&(c.fill=m),g&&(c.stroke=g)}if(p.getTransformValues){const m=p.getTransformValues(o);for(const g in m)RZ(u,m,g)}(h=p.beforeDraw)==null||h.call(p,o)}},this._applyResizePlugins=()=>{var r;for(const o of this._resizePlugins)(r=o.resize)==null||r.call(o)},this._getPluginParticleColors=r=>{let o,a;for(const l of this._colorPlugins)if(!o&&l.particleFillColor&&(o=hg(this._engine,l.particleFillColor(r))),!a&&l.particleStrokeColor&&(a=hg(this._engine,l.particleStrokeColor(r))),o&&a)break;return[o,a]},this._initCover=async()=>{const r=this.container.actualOptions,o=r.backgroundMask.cover,a=o.color;if(a){const l=mo(this._engine,a);if(l){const c={...l,a:o.opacity};this._coverColorStyle=Oa(c,c.a)}}else await new Promise((l,c)=>{if(!o.image)return;const u=document.createElement("img");u.addEventListener("load",()=>{this._coverImage={image:u,opacity:o.opacity},l()}),u.addEventListener("error",h=>{c(h.error)}),u.src=o.image})},this._initStyle=()=>{const r=this.element,o=this.container.actualOptions;if(r){this._fullScreen?this._setFullScreenStyle():this._resetOriginalStyle();for(const a in o.style){if(!a||!o.style||!Object.prototype.hasOwnProperty.call(o.style,a))continue;const l=o.style[a];l&&r.style.setProperty(a,l,"important")}}},this._initTrail=async()=>{const r=this.container.actualOptions,o=r.particles.move.trail,a=o.fill;if(!o.enable)return;const l=x4/o.length;if(a.color){const c=mo(this._engine,a.color);if(!c)return;this._trailFill={color:{...c},opacity:l}}else await new Promise((c,u)=>{if(!a.image)return;const h=document.createElement("img");h.addEventListener("load",()=>{this._trailFill={image:h,opacity:l},c()}),h.addEventListener("error",p=>{u(p.error)}),h.src=a.image})},this._paintBase=r=>{this.draw(o=>wZ(o,this.size,r))},this._paintImage=(r,o)=>{this.draw(a=>EZ(a,this.size,r,o))},this._repairStyle=()=>{const r=this.element;if(!r)return;this._safeMutationObserver(a=>a.disconnect()),this._initStyle(),this.initBackground();const o=this._pointerEvents;r.style.pointerEvents=o,r.setAttribute("pointer-events",o),this._safeMutationObserver(a=>{!r||!(r instanceof Node)||a.observe(r,{attributes:!0})})},this._resetOriginalStyle=()=>{const r=this.element,o=this._originalStyle;!r||!o||LP(r,o,!0)},this._safeMutationObserver=r=>{this._mutationObserver&&r(this._mutationObserver)},this._setFullScreenStyle=()=>{const r=this.element;r&&LP(r,yZ(this.container.actualOptions.fullScreen.zIndex),!0)},this._engine=t,this._standardSize={height:0,width:0};const i=e.retina.pixelRatio,s=this._standardSize;this.size={height:s.height*i,width:s.width*i},this._context=null,this._generated=!1,this._preDrawUpdaters=[],this._postDrawUpdaters=[],this._resizePlugins=[],this._colorPlugins=[],this._pointerEvents="none"}get _fullScreen(){return this.container.actualOptions.fullScreen.enable}clear(){const e=this.container.actualOptions,t=e.particles.move.trail,i=this._trailFill;e.backgroundMask.enable?this.paint():t.enable&&t.length>SY&&i?i.color?this._paintBase(Oa(i.color,i.opacity)):i.image&&this._paintImage(i.image,i.opacity):e.clear&&this.draw(s=>{O_(s,this.size)})}destroy(){if(this.stop(),this._generated){const e=this.element;e==null||e.remove(),this.element=void 0}else this._resetOriginalStyle();this._preDrawUpdaters=[],this._postDrawUpdaters=[],this._resizePlugins=[],this._colorPlugins=[]}draw(e){const t=this._context;if(t)return e(t)}drawAsync(e){const t=this._context;if(t)return e(t)}drawParticle(e,t){if(e.spawning||e.destroyed)return;const i=e.getRadius();if(i<=CY)return;const s=e.getFillColor(),r=e.getStrokeColor()??s;let[o,a]=this._getPluginParticleColors(e);o||(o=s),a||(a=r),!(!o&&!a)&&this.draw(l=>{var E;const c=this.container,u=c.actualOptions,h=e.options.zIndex,p=MY-e.zIndexFactor,m=p**h.opacityRate,g=e.bubble.opacity??((E=e.opacity)==null?void 0:E.value)??YI,v=e.strokeOpacity??g,y=g*m,A=v*m,b={},w={fill:o?dg(o,y):void 0};w.stroke=a?dg(a,A):w.fill,this._applyPreDrawUpdaters(l,e,i,y,w,b),_Z({container:c,context:l,particle:e,delta:t,colorStyles:w,backgroundMask:u.backgroundMask.enable,composite:u.backgroundMask.composite,radius:i*p**h.sizeRate,opacity:y,shadow:e.options.shadow,transform:b}),this._applyPostDrawUpdaters(e)})}drawParticlePlugin(e,t,i){this.draw(s=>TZ(s,e,t,i))}drawPlugin(e,t){this.draw(i=>IZ(i,e,t))}async init(){this._safeMutationObserver(e=>e.disconnect()),this._mutationObserver=cZ(e=>{for(const t of e)t.type==="attributes"&&t.attributeName==="style"&&this._repairStyle()}),this.resize(),this._initStyle(),await this._initCover();try{await this._initTrail()}catch(e){Wu().error(e)}this.initBackground(),this._safeMutationObserver(e=>{!this.element||!(this.element instanceof Node)||e.observe(this.element,{attributes:!0})}),this.initUpdaters(),this.initPlugins(),this.paint()}initBackground(){const e=this.container.actualOptions,t=e.background,i=this.element;if(!i)return;const s=i.style;if(s){if(t.color){const r=mo(this._engine,t.color);s.backgroundColor=r?Oa(r,t.opacity):""}else s.backgroundColor="";s.backgroundImage=t.image||"",s.backgroundPosition=t.position||"",s.backgroundRepeat=t.repeat||"",s.backgroundSize=t.size||""}}initPlugins(){this._resizePlugins=[];for(const e of this.container.plugins.values())e.resize&&this._resizePlugins.push(e),(e.particleFillColor??e.particleStrokeColor)&&this._colorPlugins.push(e)}initUpdaters(){this._preDrawUpdaters=[],this._postDrawUpdaters=[];for(const e of this.container.particles.updaters)e.afterDraw&&this._postDrawUpdaters.push(e),(e.getColorStyles??e.getTransformValues??e.beforeDraw)&&this._preDrawUpdaters.push(e)}loadCanvas(e){this._generated&&this.element&&this.element.remove(),this._generated=e.dataset&&yu in e.dataset?e.dataset[yu]==="true":this._generated,this.element=e,this.element.ariaHidden="true",this._originalStyle=gZ(this.element.style);const t=this._standardSize;t.height=e.offsetHeight,t.width=e.offsetWidth;const i=this.container.retina.pixelRatio,s=this.size;e.height=s.height=t.height*i,e.width=s.width=t.width*i,this._context=this.element.getContext("2d"),this._safeMutationObserver(r=>r.disconnect()),this.container.retina.init(),this.initBackground(),this._safeMutationObserver(r=>{!this.element||!(this.element instanceof Node)||r.observe(this.element,{attributes:!0})})}paint(){const e=this.container.actualOptions;this.draw(t=>{e.backgroundMask.enable&&e.backgroundMask.cover?(O_(t,this.size),this._coverImage?this._paintImage(this._coverImage.image,this._coverImage.opacity):this._coverColorStyle?this._paintBase(this._coverColorStyle):this._paintBase()):this._paintBase()})}resize(){if(!this.element)return!1;const e=this.container,t=e.canvas._standardSize,i={width:this.element.offsetWidth,height:this.element.offsetHeight},s=e.retina.pixelRatio,r={width:i.width*s,height:i.height*s};if(i.height===t.height&&i.width===t.width&&r.height===this.element.height&&r.width===this.element.width)return!1;const o={...t};t.height=i.height,t.width=i.width;const a=this.size;return this.element.width=a.width=r.width,this.element.height=a.height=r.height,this.container.started&&e.particles.setResizeFactor({width:t.width/o.width,height:t.height/o.height}),!0}setPointerEvents(e){this.element&&(this._pointerEvents=e,this._repairStyle())}stop(){this._safeMutationObserver(e=>e.disconnect()),this._mutationObserver=void 0,this.draw(e=>O_(e,this.size))}async windowResize(){if(!this.element||!this.resize())return;const e=this.container,t=e.updateActualOptions();e.particles.setDensity(),this._applyResizePlugins(),t&&await e.refresh()}}var Wd;(function(n){n.canvas="canvas",n.parent="parent",n.window="window"})(Wd||(Wd={}));function Sr(n,e,t,i,s){if(i){let r={passive:!0};C4(s)?r.capture=s:s!==void 0&&(r=s),n.addEventListener(e,t,r)}else{const r=s;n.removeEventListener(e,t,r)}}class PZ{constructor(e){this.container=e,this._doMouseTouchClick=t=>{const i=this.container,s=i.actualOptions;if(this._canPush){const r=i.interactivity.mouse,o=r.position;if(!o)return;r.clickPosition={...o},r.clickTime=new Date().getTime();const a=s.interactivity.events.onClick;gr(a.mode,l=>this.container.handleClickMode(l))}t.type==="touchend"&&setTimeout(()=>this._mouseTouchFinish(),HY)},this._handleThemeChange=t=>{const i=t,s=this.container,r=s.options,o=r.defaultThemes,a=i.matches?o.dark:o.light,l=r.themes.find(c=>c.name===a);l!=null&&l.default.auto&&s.loadTheme(a)},this._handleVisibilityChange=()=>{const t=this.container,i=t.actualOptions;this._mouseTouchFinish(),i.pauseOnBlur&&(document!=null&&document.hidden?(t.pageHidden=!0,t.pause()):(t.pageHidden=!1,t.animationStatus?t.play(!0):t.draw(!0)))},this._handleWindowResize=()=>{this._resizeTimeout&&(clearTimeout(this._resizeTimeout),delete this._resizeTimeout);const t=async()=>{const i=this.container.canvas;await(i==null?void 0:i.windowResize())};this._resizeTimeout=setTimeout(()=>void t(),this.container.actualOptions.interactivity.events.resize.delay*is)},this._manageInteractivityListeners=(t,i)=>{const s=this._handlers,r=this.container,o=r.actualOptions,a=r.interactivity.element;if(!a)return;const l=a,c=r.canvas;c.setPointerEvents(l===c.element?"initial":"none"),(o.interactivity.events.onHover.enable||o.interactivity.events.onClick.enable)&&(Sr(a,Vu,s.mouseMove,i),Sr(a,pY,s.touchStart,i),Sr(a,mY,s.touchMove,i),o.interactivity.events.onClick.enable?(Sr(a,pP,s.touchEndClick,i),Sr(a,dY,s.mouseUp,i),Sr(a,hY,s.mouseDown,i)):Sr(a,pP,s.touchEnd,i),Sr(a,t,s.mouseLeave,i),Sr(a,gY,s.touchCancel,i))},this._manageListeners=t=>{const i=this._handlers,s=this.container,r=s.actualOptions,o=r.interactivity.detectsOn,a=s.canvas.element;let l=O1;o===Wd.window?(s.interactivity.element=window,l=fY):o===Wd.parent&&a?s.interactivity.element=a.parentElement??a.parentNode:s.interactivity.element=a,this._manageMediaMatch(t),this._manageResize(t),this._manageInteractivityListeners(l,t),document&&Sr(document,yY,i.visibilityChange,t,!1)},this._manageMediaMatch=t=>{const i=this._handlers,s=I4("(prefers-color-scheme: dark)");if(s){if(s.addEventListener!==void 0){Sr(s,"change",i.themeChange,t);return}s.addListener!==void 0&&(t?s.addListener(i.oldThemeChange):s.removeListener(i.oldThemeChange))}},this._manageResize=t=>{const i=this._handlers,s=this.container;if(!s.actualOptions.interactivity.events.resize)return;if(typeof ResizeObserver>"u"){Sr(window,AY,i.resize,t);return}const o=s.canvas.element;this._resizeObserver&&!t?(o&&this._resizeObserver.unobserve(o),this._resizeObserver.disconnect(),delete this._resizeObserver):!this._resizeObserver&&t&&o&&(this._resizeObserver=new ResizeObserver(a=>{a.find(c=>c.target===o)&&this._handleWindowResize()}),this._resizeObserver.observe(o))},this._mouseDown=()=>{const{interactivity:t}=this.container;if(!t)return;const{mouse:i}=t;i.clicking=!0,i.downPosition=i.position},this._mouseTouchClick=t=>{const i=this.container,s=i.actualOptions,{mouse:r}=i.interactivity;r.inside=!0;let o=!1;const a=r.position;if(!(!a||!s.interactivity.events.onClick.enable)){for(const l of i.plugins.values())if(l.clickPositionValid&&(o=l.clickPositionValid(a),o))break;o||this._doMouseTouchClick(t),r.clicking=!1}},this._mouseTouchFinish=()=>{const t=this.container.interactivity;if(!t)return;const i=t.mouse;delete i.position,delete i.clickPosition,delete i.downPosition,t.status=O1,i.inside=!1,i.clicking=!1},this._mouseTouchMove=t=>{const i=this.container,s=i.actualOptions,r=i.interactivity,o=i.canvas.element;if(!(r!=null&&r.element))return;r.mouse.inside=!0;let a;if(t.type.startsWith("pointer")){this._canPush=!0;const c=t;if(r.element===window){if(o){const u=o.getBoundingClientRect();a={x:c.clientX-u.left,y:c.clientY-u.top}}}else if(s.interactivity.detectsOn===Wd.parent){const u=c.target,h=c.currentTarget;if(u&&h&&o){const p=u.getBoundingClientRect(),m=h.getBoundingClientRect(),g=o.getBoundingClientRect();a={x:c.offsetX+ss*p.left-(m.left+g.left),y:c.offsetY+ss*p.top-(m.top+g.top)}}else a={x:c.offsetX??c.clientX,y:c.offsetY??c.clientY}}else c.target===o&&(a={x:c.offsetX??c.clientX,y:c.offsetY??c.clientY})}else if(this._canPush=t.type!=="touchmove",o){const c=t,u=c.touches[c.touches.length-E4],h=o.getBoundingClientRect();a={x:u.clientX-(h.left??yx),y:u.clientY-(h.top??yx)}}const l=i.retina.pixelRatio;a&&(a.x*=l,a.y*=l),r.mouse.position=a,r.status=Vu},this._touchEnd=t=>{const i=t,s=Array.from(i.changedTouches);for(const r of s)this._touches.delete(r.identifier);this._mouseTouchFinish()},this._touchEndClick=t=>{const i=t,s=Array.from(i.changedTouches);for(const r of s)this._touches.delete(r.identifier);this._mouseTouchClick(t)},this._touchStart=t=>{const i=t,s=Array.from(i.changedTouches);for(const r of s)this._touches.set(r.identifier,performance.now());this._mouseTouchMove(t)},this._canPush=!0,this._touches=new Map,this._handlers={mouseDown:()=>this._mouseDown(),mouseLeave:()=>this._mouseTouchFinish(),mouseMove:t=>this._mouseTouchMove(t),mouseUp:t=>this._mouseTouchClick(t),touchStart:t=>this._touchStart(t),touchMove:t=>this._mouseTouchMove(t),touchEnd:t=>this._touchEnd(t),touchCancel:t=>this._touchEnd(t),touchEndClick:t=>this._touchEndClick(t),visibilityChange:()=>this._handleVisibilityChange(),themeChange:t=>this._handleThemeChange(t),oldThemeChange:t=>this._handleThemeChange(t),resize:()=>{this._handleWindowResize()}}}addListeners(){this._manageListeners(!0)}removeListeners(){this._manageListeners(!1)}}var xs;(function(n){n.configAdded="configAdded",n.containerInit="containerInit",n.particlesSetup="particlesSetup",n.containerStarted="containerStarted",n.containerStopped="containerStopped",n.containerDestroyed="containerDestroyed",n.containerPaused="containerPaused",n.containerPlay="containerPlay",n.containerBuilt="containerBuilt",n.particleAdded="particleAdded",n.particleDestroyed="particleDestroyed",n.particleRemoved="particleRemoved"})(xs||(xs={}));class hs{constructor(){this.value=""}static create(e,t){const i=new hs;return i.load(e),t!==void 0&&(rc(t)||$o(t)?i.load({value:t}):i.load(t)),i}load(e){Re(e)||Re(e.value)||(this.value=e.value)}}class LZ{constructor(){this.color=new hs,this.color.value="",this.image="",this.position="",this.repeat="",this.size="",this.opacity=1}load(e){Re(e)||(e.color!==void 0&&(this.color=hs.create(this.color,e.color)),e.image!==void 0&&(this.image=e.image),e.position!==void 0&&(this.position=e.position),e.repeat!==void 0&&(this.repeat=e.repeat),e.size!==void 0&&(this.size=e.size),e.opacity!==void 0&&(this.opacity=e.opacity))}}class kZ{constructor(){this.opacity=1}load(e){Re(e)||(e.color!==void 0&&(this.color=hs.create(this.color,e.color)),e.image!==void 0&&(this.image=e.image),e.opacity!==void 0&&(this.opacity=e.opacity))}}class FZ{constructor(){this.composite="destination-out",this.cover=new kZ,this.enable=!1}load(e){if(!Re(e)){if(e.composite!==void 0&&(this.composite=e.composite),e.cover!==void 0){const t=e.cover,i=rc(e.cover)?{color:e.cover}:e.cover;this.cover.load(t.color!==void 0||t.image!==void 0?t:{color:i})}e.enable!==void 0&&(this.enable=e.enable)}}}class NZ{constructor(){this.enable=!0,this.zIndex=0}load(e){Re(e)||(e.enable!==void 0&&(this.enable=e.enable),e.zIndex!==void 0&&(this.zIndex=e.zIndex))}}class OZ{constructor(){this.enable=!1,this.mode=[]}load(e){Re(e)||(e.enable!==void 0&&(this.enable=e.enable),e.mode!==void 0&&(this.mode=e.mode))}}var bf;(function(n){n.circle="circle",n.rectangle="rectangle"})(bf||(bf={}));class kP{constructor(){this.selectors=[],this.enable=!1,this.mode=[],this.type=bf.circle}load(e){Re(e)||(e.selectors!==void 0&&(this.selectors=e.selectors),e.enable!==void 0&&(this.enable=e.enable),e.mode!==void 0&&(this.mode=e.mode),e.type!==void 0&&(this.type=e.type))}}class UZ{constructor(){this.enable=!1,this.force=2,this.smooth=10}load(e){Re(e)||(e.enable!==void 0&&(this.enable=e.enable),e.force!==void 0&&(this.force=e.force),e.smooth!==void 0&&(this.smooth=e.smooth))}}class GZ{constructor(){this.enable=!1,this.mode=[],this.parallax=new UZ}load(e){Re(e)||(e.enable!==void 0&&(this.enable=e.enable),e.mode!==void 0&&(this.mode=e.mode),this.parallax.load(e.parallax))}}class zZ{constructor(){this.delay=.5,this.enable=!0}load(e){Re(e)||(e.delay!==void 0&&(this.delay=e.delay),e.enable!==void 0&&(this.enable=e.enable))}}class QZ{constructor(){this.onClick=new OZ,this.onDiv=new kP,this.onHover=new GZ,this.resize=new zZ}load(e){if(Re(e))return;this.onClick.load(e.onClick);const t=e.onDiv;t!==void 0&&(this.onDiv=gr(t,i=>{const s=new kP;return s.load(i),s})),this.onHover.load(e.onHover),this.resize.load(e.resize)}}class HZ{constructor(e,t){this._engine=e,this._container=t}load(e){if(Re(e)||!this._container)return;const t=this._engine.interactors.get(this._container);if(t)for(const i of t)i.loadModeOptions&&i.loadModeOptions(this,e)}}class G4{constructor(e,t){this.detectsOn=Wd.window,this.events=new QZ,this.modes=new HZ(e,t)}load(e){if(Re(e))return;const t=e.detectsOn;t!==void 0&&(this.detectsOn=t),this.events.load(e.events),this.modes.load(e.modes)}}class VZ{load(e){Re(e)||(e.position&&(this.position={x:e.position.x??IP,y:e.position.y??IP,mode:e.position.mode??vf.percent}),e.options&&(this.options=us({},e.options)))}}var bu;(function(n){n.screen="screen",n.canvas="canvas"})(bu||(bu={}));class jZ{constructor(){this.maxWidth=1/0,this.options={},this.mode=bu.canvas}load(e){Re(e)||(Re(e.maxWidth)||(this.maxWidth=e.maxWidth),Re(e.mode)||(e.mode===bu.screen?this.mode=bu.screen:this.mode=bu.canvas),Re(e.options)||(this.options=us({},e.options)))}}var Tl;(function(n){n.any="any",n.dark="dark",n.light="light"})(Tl||(Tl={}));class WZ{constructor(){this.auto=!1,this.mode=Tl.any,this.value=!1}load(e){Re(e)||(e.auto!==void 0&&(this.auto=e.auto),e.mode!==void 0&&(this.mode=e.mode),e.value!==void 0&&(this.value=e.value))}}class qZ{constructor(){this.name="",this.default=new WZ}load(e){Re(e)||(e.name!==void 0&&(this.name=e.name),this.default.load(e.default),e.options!==void 0&&(this.options=us({},e.options)))}}class sT{constructor(){this.count=0,this.enable=!1,this.speed=1,this.decay=0,this.delay=0,this.sync=!1}load(e){Re(e)||(e.count!==void 0&&(this.count=on(e.count)),e.enable!==void 0&&(this.enable=e.enable),e.speed!==void 0&&(this.speed=on(e.speed)),e.decay!==void 0&&(this.decay=on(e.decay)),e.delay!==void 0&&(this.delay=on(e.delay)),e.sync!==void 0&&(this.sync=e.sync))}}class rT extends sT{constructor(){super(),this.mode=xu.auto,this.startValue=jd.random}load(e){super.load(e),!Re(e)&&(e.mode!==void 0&&(this.mode=e.mode),e.startValue!==void 0&&(this.startValue=e.startValue))}}class U_ extends sT{constructor(){super(),this.offset=0,this.sync=!0}load(e){super.load(e),!Re(e)&&e.offset!==void 0&&(this.offset=on(e.offset))}}class JZ{constructor(){this.h=new U_,this.s=new U_,this.l=new U_}load(e){Re(e)||(this.h.load(e.h),this.s.load(e.s),this.l.load(e.l))}}class fg extends hs{constructor(){super(),this.animation=new JZ}static create(e,t){const i=new fg;return i.load(e),t!==void 0&&(rc(t)||$o(t)?i.load({value:t}):i.load(t)),i}load(e){if(super.load(e),Re(e))return;const t=e.animation;t!==void 0&&(t.enable!==void 0?this.animation.h.load(t):this.animation.load(e.animation))}}var qd;(function(n){n.absorb="absorb",n.bounce="bounce",n.destroy="destroy"})(qd||(qd={}));class XZ{constructor(){this.speed=2}load(e){Re(e)||e.speed!==void 0&&(this.speed=e.speed)}}class KZ{constructor(){this.enable=!0,this.retries=0}load(e){Re(e)||(e.enable!==void 0&&(this.enable=e.enable),e.retries!==void 0&&(this.retries=e.retries))}}class sh{constructor(){this.value=0}load(e){Re(e)||Re(e.value)||(this.value=on(e.value))}}class $Z extends sh{constructor(){super(),this.animation=new sT}load(e){if(super.load(e),Re(e))return;const t=e.animation;t!==void 0&&this.animation.load(t)}}class z4 extends $Z{constructor(){super(),this.animation=new rT}load(e){super.load(e)}}class FP extends sh{constructor(){super(),this.value=1}}class Q4{constructor(){this.horizontal=new FP,this.vertical=new FP}load(e){Re(e)||(this.horizontal.load(e.horizontal),this.vertical.load(e.vertical))}}class YZ{constructor(){this.absorb=new XZ,this.bounce=new Q4,this.enable=!1,this.maxSpeed=50,this.mode=qd.bounce,this.overlap=new KZ}load(e){Re(e)||(this.absorb.load(e.absorb),this.bounce.load(e.bounce),e.enable!==void 0&&(this.enable=e.enable),e.maxSpeed!==void 0&&(this.maxSpeed=on(e.maxSpeed)),e.mode!==void 0&&(this.mode=e.mode),this.overlap.load(e.overlap))}}class ZZ{constructor(){this.close=!0,this.fill=!0,this.options={},this.type=[]}load(e){if(Re(e))return;const t=e.options;if(t!==void 0)for(const i in t){const s=t[i];s&&(this.options[i]=us(this.options[i]??{},s))}e.close!==void 0&&(this.close=e.close),e.fill!==void 0&&(this.fill=e.fill),e.type!==void 0&&(this.type=e.type)}}class eee{constructor(){this.offset=0,this.value=90}load(e){Re(e)||(e.offset!==void 0&&(this.offset=on(e.offset)),e.value!==void 0&&(this.value=on(e.value)))}}class tee{constructor(){this.distance=200,this.enable=!1,this.rotate={x:3e3,y:3e3}}load(e){if(!Re(e)&&(e.distance!==void 0&&(this.distance=on(e.distance)),e.enable!==void 0&&(this.enable=e.enable),e.rotate)){const t=e.rotate.x;t!==void 0&&(this.rotate.x=t);const i=e.rotate.y;i!==void 0&&(this.rotate.y=i)}}}class nee{constructor(){this.x=50,this.y=50,this.mode=vf.percent,this.radius=0}load(e){Re(e)||(e.x!==void 0&&(this.x=e.x),e.y!==void 0&&(this.y=e.y),e.mode!==void 0&&(this.mode=e.mode),e.radius!==void 0&&(this.radius=e.radius))}}class iee{constructor(){this.acceleration=9.81,this.enable=!1,this.inverse=!1,this.maxSpeed=50}load(e){Re(e)||(e.acceleration!==void 0&&(this.acceleration=on(e.acceleration)),e.enable!==void 0&&(this.enable=e.enable),e.inverse!==void 0&&(this.inverse=e.inverse),e.maxSpeed!==void 0&&(this.maxSpeed=on(e.maxSpeed)))}}class see{constructor(){this.clamp=!0,this.delay=new sh,this.enable=!1,this.options={}}load(e){Re(e)||(e.clamp!==void 0&&(this.clamp=e.clamp),this.delay.load(e.delay),e.enable!==void 0&&(this.enable=e.enable),this.generator=e.generator,e.options&&(this.options=us(this.options,e.options)))}}class ree{load(e){Re(e)||(e.color!==void 0&&(this.color=hs.create(this.color,e.color)),e.image!==void 0&&(this.image=e.image))}}class oee{constructor(){this.enable=!1,this.length=10,this.fill=new ree}load(e){Re(e)||(e.enable!==void 0&&(this.enable=e.enable),e.fill!==void 0&&this.fill.load(e.fill),e.length!==void 0&&(this.length=e.length))}}var ti;(function(n){n.bounce="bounce",n.none="none",n.out="out",n.destroy="destroy",n.split="split"})(ti||(ti={}));class aee{constructor(){this.default=ti.out}load(e){Re(e)||(e.default!==void 0&&(this.default=e.default),this.bottom=e.bottom??e.default,this.left=e.left??e.default,this.right=e.right??e.default,this.top=e.top??e.default)}}class lee{constructor(){this.acceleration=0,this.enable=!1}load(e){Re(e)||(e.acceleration!==void 0&&(this.acceleration=on(e.acceleration)),e.enable!==void 0&&(this.enable=e.enable),e.position&&(this.position=us({},e.position)))}}class cee{constructor(){this.angle=new eee,this.attract=new tee,this.center=new nee,this.decay=0,this.distance={},this.direction=Mi.none,this.drift=0,this.enable=!1,this.gravity=new iee,this.path=new see,this.outModes=new aee,this.random=!1,this.size=!1,this.speed=2,this.spin=new lee,this.straight=!1,this.trail=new oee,this.vibrate=!1,this.warp=!1}load(e){if(Re(e))return;this.angle.load(oc(e.angle)?{value:e.angle}:e.angle),this.attract.load(e.attract),this.center.load(e.center),e.decay!==void 0&&(this.decay=on(e.decay)),e.direction!==void 0&&(this.direction=e.direction),e.distance!==void 0&&(this.distance=oc(e.distance)?{horizontal:e.distance,vertical:e.distance}:{...e.distance}),e.drift!==void 0&&(this.drift=on(e.drift)),e.enable!==void 0&&(this.enable=e.enable),this.gravity.load(e.gravity);const t=e.outModes;t!==void 0&&(Id(t)?this.outModes.load(t):this.outModes.load({default:t})),this.path.load(e.path),e.random!==void 0&&(this.random=e.random),e.size!==void 0&&(this.size=e.size),e.speed!==void 0&&(this.speed=on(e.speed)),this.spin.load(e.spin),e.straight!==void 0&&(this.straight=e.straight),this.trail.load(e.trail),e.vibrate!==void 0&&(this.vibrate=e.vibrate),e.warp!==void 0&&(this.warp=e.warp)}}class uee extends rT{constructor(){super(),this.destroy=ju.none,this.speed=2}load(e){super.load(e),!Re(e)&&e.destroy!==void 0&&(this.destroy=e.destroy)}}class hee extends z4{constructor(){super(),this.animation=new uee,this.value=1}load(e){if(Re(e))return;super.load(e);const t=e.animation;t!==void 0&&this.animation.load(t)}}class dee{constructor(){this.enable=!1,this.width=1920,this.height=1080}load(e){if(Re(e))return;e.enable!==void 0&&(this.enable=e.enable);const t=e.width;t!==void 0&&(this.width=t);const i=e.height;i!==void 0&&(this.height=i)}}var pg;(function(n){n.delete="delete",n.wait="wait"})(pg||(pg={}));class fee{constructor(){this.mode=pg.delete,this.value=0}load(e){Re(e)||(e.mode!==void 0&&(this.mode=e.mode),e.value!==void 0&&(this.value=e.value))}}class pee{constructor(){this.density=new dee,this.limit=new fee,this.value=0}load(e){Re(e)||(this.density.load(e.density),this.limit.load(e.limit),e.value!==void 0&&(this.value=e.value))}}let mee=class{constructor(){this.blur=0,this.color=new hs,this.enable=!1,this.offset={x:0,y:0},this.color.value="#000"}load(e){Re(e)||(e.blur!==void 0&&(this.blur=e.blur),this.color=hs.create(this.color,e.color),e.enable!==void 0&&(this.enable=e.enable),e.offset!==void 0&&(e.offset.x!==void 0&&(this.offset.x=e.offset.x),e.offset.y!==void 0&&(this.offset.y=e.offset.y)))}};class gee{constructor(){this.close=!0,this.fill=!0,this.options={},this.type="circle"}load(e){if(Re(e))return;const t=e.options;if(t!==void 0)for(const i in t){const s=t[i];s&&(this.options[i]=us(this.options[i]??{},s))}e.close!==void 0&&(this.close=e.close),e.fill!==void 0&&(this.fill=e.fill),e.type!==void 0&&(this.type=e.type)}}class Aee extends rT{constructor(){super(),this.destroy=ju.none,this.speed=5}load(e){super.load(e),!Re(e)&&e.destroy!==void 0&&(this.destroy=e.destroy)}}class yee extends z4{constructor(){super(),this.animation=new Aee,this.value=3}load(e){if(super.load(e),Re(e))return;const t=e.animation;t!==void 0&&this.animation.load(t)}}class NP{constructor(){this.width=0}load(e){Re(e)||(e.color!==void 0&&(this.color=fg.create(this.color,e.color)),e.width!==void 0&&(this.width=on(e.width)),e.opacity!==void 0&&(this.opacity=on(e.opacity)))}}class vee extends sh{constructor(){super(),this.opacityRate=1,this.sizeRate=1,this.velocityRate=1}load(e){super.load(e),!Re(e)&&(e.opacityRate!==void 0&&(this.opacityRate=e.opacityRate),e.sizeRate!==void 0&&(this.sizeRate=e.sizeRate),e.velocityRate!==void 0&&(this.velocityRate=e.velocityRate))}}class xee{constructor(e,t){this._engine=e,this._container=t,this.bounce=new Q4,this.collisions=new YZ,this.color=new fg,this.color.value="#fff",this.effect=new ZZ,this.groups={},this.move=new cee,this.number=new pee,this.opacity=new hee,this.reduceDuplicates=!1,this.shadow=new mee,this.shape=new gee,this.size=new yee,this.stroke=new NP,this.zIndex=new vee}load(e){if(Re(e))return;if(e.groups!==void 0)for(const i of Object.keys(e.groups)){if(!Object.hasOwn(e.groups,i))continue;const s=e.groups[i];s!==void 0&&(this.groups[i]=us(this.groups[i]??{},s))}e.reduceDuplicates!==void 0&&(this.reduceDuplicates=e.reduceDuplicates),this.bounce.load(e.bounce),this.color.load(fg.create(this.color,e.color)),this.effect.load(e.effect),this.move.load(e.move),this.number.load(e.number),this.opacity.load(e.opacity),this.shape.load(e.shape),this.size.load(e.size),this.shadow.load(e.shadow),this.zIndex.load(e.zIndex),this.collisions.load(e.collisions),e.interactivity!==void 0&&(this.interactivity=us({},e.interactivity));const t=e.stroke;if(t&&(this.stroke=gr(t,i=>{const s=new NP;return s.load(i),s})),this._container){const i=this._engine.updaters.get(this._container);if(i)for(const r of i)r.loadOptions&&r.loadOptions(this,e);const s=this._engine.interactors.get(this._container);if(s)for(const r of s)r.loadParticlesOptions&&r.loadParticlesOptions(this,e)}}}function H4(n,...e){for(const t of e)n.load(t)}function V4(n,e,...t){const i=new xee(n,e);return H4(i,...t),i}class bee{constructor(e,t){this._findDefaultTheme=i=>this.themes.find(s=>s.default.value&&s.default.mode===i)??this.themes.find(s=>s.default.value&&s.default.mode===Tl.any),this._importPreset=i=>{this.load(this._engine.getPreset(i))},this._engine=e,this._container=t,this.autoPlay=!0,this.background=new LZ,this.backgroundMask=new FZ,this.clear=!0,this.defaultThemes={},this.delay=0,this.fullScreen=new NZ,this.detectRetina=!0,this.duration=0,this.fpsLimit=120,this.interactivity=new G4(e,t),this.manualParticles=[],this.particles=V4(this._engine,this._container),this.pauseOnBlur=!0,this.pauseOnOutsideViewport=!0,this.responsive=[],this.smooth=!1,this.style={},this.themes=[],this.zLayers=100}load(e){var o,a;if(Re(e))return;e.preset!==void 0&&gr(e.preset,l=>this._importPreset(l)),e.autoPlay!==void 0&&(this.autoPlay=e.autoPlay),e.clear!==void 0&&(this.clear=e.clear),e.key!==void 0&&(this.key=e.key),e.name!==void 0&&(this.name=e.name),e.delay!==void 0&&(this.delay=on(e.delay));const t=e.detectRetina;t!==void 0&&(this.detectRetina=t),e.duration!==void 0&&(this.duration=on(e.duration));const i=e.fpsLimit;i!==void 0&&(this.fpsLimit=i),e.pauseOnBlur!==void 0&&(this.pauseOnBlur=e.pauseOnBlur),e.pauseOnOutsideViewport!==void 0&&(this.pauseOnOutsideViewport=e.pauseOnOutsideViewport),e.zLayers!==void 0&&(this.zLayers=e.zLayers),this.background.load(e.background);const s=e.fullScreen;C4(s)?this.fullScreen.enable=s:this.fullScreen.load(s),this.backgroundMask.load(e.backgroundMask),this.interactivity.load(e.interactivity),e.manualParticles&&(this.manualParticles=e.manualParticles.map(l=>{const c=new VZ;return c.load(l),c})),this.particles.load(e.particles),this.style=us(this.style,e.style),this._engine.loadOptions(this,e),e.smooth!==void 0&&(this.smooth=e.smooth);const r=this._engine.interactors.get(this._container);if(r)for(const l of r)l.loadOptions&&l.loadOptions(this,e);if(e.responsive!==void 0)for(const l of e.responsive){const c=new jZ;c.load(l),this.responsive.push(c)}if(this.responsive.sort((l,c)=>l.maxWidth-c.maxWidth),e.themes!==void 0)for(const l of e.themes){const c=this.themes.find(u=>u.name===l.name);if(c)c.load(l);else{const u=new qZ;u.load(l),this.themes.push(u)}}this.defaultThemes.dark=(o=this._findDefaultTheme(Tl.dark))==null?void 0:o.name,this.defaultThemes.light=(a=this._findDefaultTheme(Tl.light))==null?void 0:a.name}setResponsive(e,t,i){this.load(i);const s=this.responsive.find(r=>r.mode===bu.screen&&screen?r.maxWidth>screen.availWidth:r.maxWidth*t>e);return this.load(s==null?void 0:s.options),s==null?void 0:s.maxWidth}setTheme(e){if(e){const t=this.themes.find(i=>i.name===e);t&&this.load(t.options)}else{const t=I4("(prefers-color-scheme: dark)"),i=t==null?void 0:t.matches,s=this._findDefaultTheme(i?Tl.dark:Tl.light);s&&this.load(s.options)}}}var wf;(function(n){n.external="external",n.particles="particles"})(wf||(wf={}));class wee{constructor(e,t){this.container=t,this._engine=e,this._interactors=[],this._externalInteractors=[],this._particleInteractors=[]}externalInteract(e){for(const t of this._externalInteractors)t.isEnabled()&&t.interact(e)}handleClickMode(e){var t;for(const i of this._externalInteractors)(t=i.handleClickMode)==null||t.call(i,e)}async init(){this._interactors=await this._engine.getInteractors(this.container,!0),this._externalInteractors=[],this._particleInteractors=[];for(const e of this._interactors){switch(e.type){case wf.external:this._externalInteractors.push(e);break;case wf.particles:this._particleInteractors.push(e);break}e.init()}}particlesInteract(e,t){for(const i of this._externalInteractors)i.clear(e,t);for(const i of this._particleInteractors)i.isEnabled(e)&&i.interact(e,t)}reset(e){for(const t of this._externalInteractors)t.isEnabled()&&t.reset(e);for(const t of this._particleInteractors)t.isEnabled(e)&&t.reset(e)}}var go;(function(n){n.normal="normal",n.inside="inside",n.outside="outside"})(go||(go={}));function Eee(n,e,t,i){const s=e.options[n];if(s)return us({close:e.close,fill:e.fill},Lr(s,t,i))}function _ee(n,e,t,i){const s=e.options[n];if(s)return us({close:e.close,fill:e.fill},Lr(s,t,i))}function OP(n){if(!ei(n.outMode,n.checkModes))return;const e=n.radius*ss;n.coord>n.maxCoord-e?n.setCb(-n.radius):n.coord<e&&n.setCb(n.radius)}class Cee{constructor(e,t){this.container=t,this._calcPosition=(i,s,r,o=gP)=>{for(const g of i.plugins.values()){const v=g.particlePosition!==void 0?g.particlePosition(s,this):void 0;if(v)return er.create(v.x,v.y,r)}const a=i.canvas.size,l=iZ({size:a,position:s}),c=er.create(l.x,l.y,r),u=this.getRadius(),h=this.options.move.outModes,p=g=>{OP({outMode:g,checkModes:[ti.bounce],coord:c.x,maxCoord:i.canvas.size.width,setCb:v=>c.x+=v,radius:u})},m=g=>{OP({outMode:g,checkModes:[ti.bounce],coord:c.y,maxCoord:i.canvas.size.height,setCb:v=>c.y+=v,radius:u})};return p(h.left??h.default),p(h.right??h.default),m(h.top??h.default),m(h.bottom??h.default),this._checkOverlap(c,o)?this._calcPosition(i,void 0,r,o+FY):c},this._calculateVelocity=()=>{const i=nZ(this.direction),s=i.copy(),r=this.options.move;if(r.direction===Mi.inside||r.direction===Mi.outside)return s;const o=Xl(ut(r.angle.value)),a=Xl(ut(r.angle.offset)),l={left:a-o*Ai,right:a+o*Ai};return r.straight||(s.angle+=rr(on(l.left,l.right))),r.random&&typeof r.speed=="number"&&(s.length*=gn()),s},this._checkOverlap=(i,s=gP)=>{const r=this.options.collisions,o=this.getRadius();if(!r.enable)return!1;const a=r.overlap;if(a.enable)return!1;const l=a.retries;if(l>=NY&&s>l)throw new Error(`${zr} particle is overlapping and can't be placed`);return!!this.container.particles.find(c=>hr(i,c.position)<o+c.getRadius())},this._getRollColor=i=>{if(!i||!this.roll||!this.backColor&&!this.roll.alter)return i;const s=this.roll.horizontal&&this.roll.vertical?ss*_P:_P,r=this.roll.horizontal?Math.PI*Ai:vx;return Math.floor(((this.roll.angle??vx)+r)/(Math.PI/s))%ss?this.backColor?this.backColor:this.roll.alter?BZ(i,this.roll.alter.type,this.roll.alter.value):i:i},this._initPosition=i=>{const s=this.container,r=ut(this.options.zIndex.value);this.position=this._calcPosition(s,i,Qr(r,OY,s.zLayers)),this.initialPosition=this.position.copy();const o=s.canvas.size;switch(this.moveCenter={...P4(this.options.move.center,o),radius:this.options.move.center.radius??UY,mode:this.options.move.center.mode??vf.percent},this.direction=tZ(this.options.move.direction,this.position,this.moveCenter),this.options.move.direction){case Mi.inside:this.outType=go.inside;break;case Mi.outside:this.outType=go.outside;break}this.offset=Li.origin},this._engine=e}destroy(e){var r,o,a;if(this.unbreakable||this.destroyed)return;this.destroyed=!0,this.bubble.inRange=!1,this.slow.inRange=!1;const t=this.container,i=this.pathGenerator,s=t.shapeDrawers.get(this.shape);(r=s==null?void 0:s.particleDestroy)==null||r.call(s,this);for(const l of t.plugins.values())(o=l.particleDestroyed)==null||o.call(l,this,e);for(const l of t.particles.updaters)(a=l.particleDestroyed)==null||a.call(l,this,e);i==null||i.reset(this),this._engine.dispatchEvent(xs.particleDestroyed,{container:this.container,data:{particle:this}})}draw(e){const t=this.container,i=t.canvas;for(const s of t.plugins.values())i.drawParticlePlugin(s,this,e);i.drawParticle(this,e)}getFillColor(){return this._getRollColor(this.bubble.color??PP(this.color))}getMass(){return this.getRadius()**Ma*Math.PI*Ai}getPosition(){return{x:this.position.x+this.offset.x,y:this.position.y+this.offset.y,z:this.position.z}}getRadius(){return this.bubble.radius??this.size.value}getStrokeColor(){return this._getRollColor(this.bubble.color??PP(this.strokeColor))}init(e,t,i,s){var D,B,R,T,k,H;const r=this.container,o=this._engine;this.id=e,this.group=s,this.effectClose=!0,this.effectFill=!0,this.shapeClose=!0,this.shapeFill=!0,this.pathRotation=!1,this.lastPathTime=0,this.destroyed=!1,this.unbreakable=!1,this.isRotating=!1,this.rotation=0,this.misplaced=!1,this.retina={maxDistance:{}},this.outType=go.normal,this.ignoresResizeRatio=!0;const a=r.retina.pixelRatio,l=r.actualOptions,c=V4(this._engine,r,l.particles),{reduceDuplicates:u}=c,h=c.effect.type,p=c.shape.type;this.effect=Lr(h,this.id,u),this.shape=Lr(p,this.id,u);const m=c.effect,g=c.shape;if(i){if((D=i.effect)!=null&&D.type){const Q=i.effect.type,W=Lr(Q,this.id,u);W&&(this.effect=W,m.load(i.effect))}if((B=i.shape)!=null&&B.type){const Q=i.shape.type,W=Lr(Q,this.id,u);W&&(this.shape=W,g.load(i.shape))}}if(this.effect===yf){const Q=[...this.container.effectDrawers.keys()];this.effect=Q[Math.floor(gn()*Q.length)]}if(this.shape===yf){const Q=[...this.container.shapeDrawers.keys()];this.shape=Q[Math.floor(gn()*Q.length)]}this.effectData=Eee(this.effect,m,this.id,u),this.shapeData=_ee(this.shape,g,this.id,u),c.load(i);const v=this.effectData;v&&c.load(v.particles);const y=this.shapeData;y&&c.load(y.particles);const A=new G4(o,r);A.load(r.actualOptions.interactivity),A.load(c.interactivity),this.interactivity=A,this.effectFill=(v==null?void 0:v.fill)??c.effect.fill,this.effectClose=(v==null?void 0:v.close)??c.effect.close,this.shapeFill=(y==null?void 0:y.fill)??c.shape.fill,this.shapeClose=(y==null?void 0:y.close)??c.shape.close,this.options=c;const b=this.options.move.path;this.pathDelay=ut(b.delay.value)*is,b.generator&&(this.pathGenerator=this._engine.getPathGenerator(b.generator),this.pathGenerator&&r.addPath(b.generator,this.pathGenerator)&&this.pathGenerator.init(r)),r.retina.initParticle(this),this.size=D4(this.options.size,a),this.bubble={inRange:!1},this.slow={inRange:!1,factor:1},this._initPosition(t),this.initialVelocity=this._calculateVelocity(),this.velocity=this.initialVelocity.copy(),this.moveDecay=w4-ut(this.options.move.decay);const w=r.particles;w.setLastZIndex(this.position.z),this.zIndexFactor=this.position.z/r.zLayers,this.sides=24;let E=r.effectDrawers.get(this.effect);E||(E=this._engine.getEffectDrawer(this.effect),E&&r.effectDrawers.set(this.effect,E)),E!=null&&E.loadEffect&&E.loadEffect(this);let M=r.shapeDrawers.get(this.shape);M||(M=this._engine.getShapeDrawer(this.shape),M&&r.shapeDrawers.set(this.shape,M)),M!=null&&M.loadShape&&M.loadShape(this);const I=M==null?void 0:M.getSidesCount;I&&(this.sides=I(this)),this.spawning=!1,this.shadowColor=mo(this._engine,this.options.shadow.color);for(const Q of w.updaters)Q.init(this);for(const Q of w.movers)(R=Q.init)==null||R.call(Q,this);(T=E==null?void 0:E.particleInit)==null||T.call(E,r,this),(k=M==null?void 0:M.particleInit)==null||k.call(M,r,this);for(const Q of r.plugins.values())(H=Q.particleCreated)==null||H.call(Q,this)}isInsideCanvas(){const e=this.getRadius(),t=this.container.canvas.size,i=this.position;return i.x>=-e&&i.y>=-e&&i.y<=t.height+e&&i.x<=t.width+e}isVisible(){return!this.destroyed&&!this.spawning&&this.isInsideCanvas()}reset(){var e;for(const t of this.container.particles.updaters)(e=t.reset)==null||e.call(t,this)}}class See{constructor(e,t){this.position=e,this.particle=t}}var Jd;(function(n){n.circle="circle",n.rectangle="rectangle"})(Jd||(Jd={}));class j4{constructor(e,t,i){this.position={x:e,y:t},this.type=i}}class rs extends j4{constructor(e,t,i){super(e,t,Jd.circle),this.radius=i}contains(e){return hr(e,this.position)<=this.radius}intersects(e){const t=this.position,i=e.position,s={x:Math.abs(i.x-t.x),y:Math.abs(i.y-t.y)},r=this.radius;if(e instanceof rs||e.type===Jd.circle){const o=e,a=r+o.radius,l=Math.sqrt(s.x**Ma+s.y**Ma);return a>l}else if(e instanceof yo||e.type===Jd.rectangle){const o=e,{width:a,height:l}=o.size;return Math.pow(s.x-a,Ma)+Math.pow(s.y-l,Ma)<=r**Ma||s.x<=r+a&&s.y<=r+l||s.x<=a||s.y<=l}return!1}}class yo extends j4{constructor(e,t,i,s){super(e,t,Jd.rectangle),this.size={height:s,width:i}}contains(e){const t=this.size.width,i=this.size.height,s=this.position;return e.x>=s.x&&e.x<=s.x+t&&e.y>=s.y&&e.y<=s.y+i}intersects(e){if(e instanceof rs)return e.intersects(this);const t=this.size.width,i=this.size.height,s=this.position,r=e.position,o=e instanceof yo?e.size:{width:0,height:0},a=o.width,l=o.height;return r.x<s.x+t&&r.x+a>s.x&&r.y<s.y+i&&r.y+l>s.y}}class bx{constructor(e,t){this.rectangle=e,this.capacity=t,this._subdivide=()=>{const{x:i,y:s}=this.rectangle.position,{width:r,height:o}=this.rectangle.size,{capacity:a}=this;for(let l=0;l<bY;l++){const c=l%ss;this._subs.push(new bx(new yo(i+r*Ai*c,s+o*Ai*(Math.round(l*Ai)-c),r*Ai,o*Ai),a))}this._divided=!0},this._points=[],this._divided=!1,this._subs=[]}insert(e){return this.rectangle.contains(e.position)?this._points.length<this.capacity?(this._points.push(e),!0):(this._divided||this._subdivide(),this._subs.some(t=>t.insert(e))):!1}query(e,t){const i=[];if(!e.intersects(this.rectangle))return[];for(const s of this._points)!e.contains(s.position)&&hr(e.position,s.position)>s.particle.getRadius()&&(!t||t(s.particle))||i.push(s.particle);if(this._divided)for(const s of this._subs)i.push(...s.query(e,t));return i}queryCircle(e,t,i){return this.query(new rs(e.x,e.y,t),i)}queryRectangle(e,t,i){return this.query(new yo(e.x,e.y,t.width,t.height),i)}}const UP=n=>{const{height:e,width:t}=n;return new yo(CP*t,CP*e,SP*t,SP*e)};class Mee{constructor(e,t){this._addToPool=(...s)=>{this._pool.push(...s)},this._applyDensity=(s,r,o,a)=>{var g,v,y;const l=s.number;if(!((g=s.number.density)!=null&&g.enable)){o===void 0?this._limit=l.limit.value:(((v=a==null?void 0:a.number.limit)==null?void 0:v.value)??l.limit.value)&&this._groupLimits.set(o,((y=a==null?void 0:a.number.limit)==null?void 0:y.value)??l.limit.value);return}const c=this._initDensityFactor(l.density),u=l.value,h=l.limit.value>MP?l.limit.value:u,p=Math.min(u,h)*c+r,m=Math.min(this.count,this.filter(A=>A.group===o).length);o===void 0?this._limit=l.limit.value*c:this._groupLimits.set(o,l.limit.value*c),m<p?this.push(Math.abs(p-m),void 0,s,o):m>p&&this.removeQuantity(m-p,o)},this._initDensityFactor=s=>{const r=this._container;if(!r.canvas.element||!s.enable)return QY;const o=r.canvas.element,a=r.retina.pixelRatio;return o.width*o.height/(s.height*s.width*a**Ma)},this._pushParticle=(s,r,o,a)=>{try{let l=this._pool.pop();l||(l=new Cee(this._engine,this._container)),l.init(this._nextId,s,r,o);let c=!0;return a&&(c=a(l)),c?(this._array.push(l),this._zArray.push(l),this._nextId++,this._engine.dispatchEvent(xs.particleAdded,{container:this._container,data:{particle:l}}),l):void 0}catch(l){Wu().warning(`${zr} adding particle: ${l}`)}},this._removeParticle=(s,r,o)=>{const a=this._array[s];if(!a||a.group!==r)return!1;const l=this._zArray.indexOf(a);return this._array.splice(s,xx),this._zArray.splice(l,xx),a.destroy(o),this._engine.dispatchEvent(xs.particleRemoved,{container:this._container,data:{particle:a}}),this._addToPool(a),!0},this._engine=e,this._container=t,this._nextId=0,this._array=[],this._zArray=[],this._pool=[],this._limit=0,this._groupLimits=new Map,this._needsSort=!1,this._lastZIndex=0,this._interactionManager=new wee(e,t),this._pluginsInitialized=!1;const i=t.canvas.size;this.quadTree=new bx(UP(i),AP),this.movers=[],this.updaters=[]}get count(){return this._array.length}addManualParticles(){const e=this._container;e.actualOptions.manualParticles.forEach(i=>this.addParticle(i.position?P4(i.position,e.canvas.size):void 0,i.options))}addParticle(e,t,i,s){const r=this._container.actualOptions.particles.number.limit.mode,o=i===void 0?this._limit:this._groupLimits.get(i)??this._limit,a=this.count;if(o>MP)switch(r){case pg.delete:{const l=a+GY-o;l>zY&&this.removeQuantity(l);break}case pg.wait:if(a>=o)return;break}return this._pushParticle(e,t,i,s)}clear(){this._array=[],this._zArray=[],this._pluginsInitialized=!1}destroy(){this._array=[],this._zArray=[],this.movers=[],this.updaters=[]}draw(e){const t=this._container,i=t.canvas;i.clear(),this.update(e);for(const s of t.plugins.values())i.drawPlugin(s,e);for(const s of this._zArray)s.draw(e)}filter(e){return this._array.filter(e)}find(e){return this._array.find(e)}get(e){return this._array[e]}handleClickMode(e){this._interactionManager.handleClickMode(e)}async init(){var s,r;const e=this._container,t=e.actualOptions;this._lastZIndex=0,this._needsSort=!1,await this.initPlugins();let i=!1;for(const o of e.plugins.values())if(i=((s=o.particlesInitialization)==null?void 0:s.call(o))??i,i)break;if(this.addManualParticles(),!i){const o=t.particles,a=o.groups;for(const l in a){const c=a[l];for(let u=this.count,h=0;h<((r=c.number)==null?void 0:r.value)&&u<o.number.value;u++,h++)this.addParticle(void 0,c,l)}for(let l=this.count;l<o.number.value;l++)this.addParticle()}}async initPlugins(){if(this._pluginsInitialized)return;const e=this._container;this.movers=await this._engine.getMovers(e,!0),this.updaters=await this._engine.getUpdaters(e,!0),await this._interactionManager.init();for(const t of e.pathGenerators.values())t.init(e)}push(e,t,i,s){for(let r=0;r<e;r++)this.addParticle(t==null?void 0:t.position,i,s)}async redraw(){this.clear(),await this.init(),this.draw({value:0,factor:0})}remove(e,t,i){this.removeAt(this._array.indexOf(e),void 0,t,i)}removeAt(e,t=xY,i,s){if(e<Q1||e>this.count)return;let r=0;for(let o=e;r<t&&o<this.count;o++)this._removeParticle(o,i,s)&&(o--,r++)}removeQuantity(e,t){this.removeAt(Q1,e,t)}setDensity(){const e=this._container.actualOptions,t=e.particles.groups,i=e.manualParticles.length;for(const s in t)this._applyDensity(t[s],i,s);this._applyDensity(e.particles,i)}setLastZIndex(e){this._lastZIndex=e,this._needsSort=this._needsSort||this._lastZIndex<e}setResizeFactor(e){this._resizeFactor=e}update(e){var r,o;const t=this._container,i=new Set;this.quadTree=new bx(UP(t.canvas.size),AP);for(const a of t.pathGenerators.values())a.update();for(const a of t.plugins.values())(r=a.update)==null||r.call(a,e);const s=this._resizeFactor;for(const a of this._array){s&&!a.ignoresResizeRatio&&(a.position.x*=s.width,a.position.y*=s.height,a.initialPosition.x*=s.width,a.initialPosition.y*=s.height),a.ignoresResizeRatio=!1,this._interactionManager.reset(a);for(const l of this._container.plugins.values()){if(a.destroyed)break;(o=l.particleUpdate)==null||o.call(l,a,e)}for(const l of this.movers)l.isEnabled(a)&&l.move(a,e);if(a.destroyed){i.add(a);continue}this.quadTree.insert(new See(a.getPosition(),a))}if(i.size){const a=l=>!i.has(l);this._array=this.filter(a),this._zArray=this._zArray.filter(a);for(const l of i)this._engine.dispatchEvent(xs.particleRemoved,{container:this._container,data:{particle:l}});this._addToPool(...i)}this._interactionManager.externalInteract(e);for(const a of this._array){for(const l of this.updaters)l.update(a,e);!a.destroyed&&!a.spawning&&this._interactionManager.particlesInteract(a,e)}if(delete this._resizeFactor,this._needsSort){const a=this._zArray;a.sort((l,c)=>c.position.z-l.position.z||l.id-c.id),this._lastZIndex=a[a.length-E4].position.z,this._needsSort=!1}}}class Iee{constructor(e){this.container=e,this.pixelRatio=yP,this.reduceFactor=vP}init(){const e=this.container,t=e.actualOptions;this.pixelRatio=!t.detectRetina||qu()?yP:devicePixelRatio,this.reduceFactor=vP;const i=this.pixelRatio,s=e.canvas;if(s.element){const a=s.element;s.size.width=a.offsetWidth*i,s.size.height=a.offsetHeight*i}const r=t.particles,o=r.move;this.maxSpeed=ut(o.gravity.maxSpeed)*i,this.sizeAnimationSpeed=ut(r.size.animation.speed)*i}initParticle(e){const t=e.options,i=this.pixelRatio,s=t.move,r=s.distance,o=e.retina;o.moveDrift=ut(s.drift)*i,o.moveSpeed=ut(s.speed)*i,o.sizeAnimationSpeed=ut(t.size.animation.speed)*i;const a=o.maxDistance;a.horizontal=r.horizontal!==void 0?r.horizontal*i:void 0,a.vertical=r.vertical!==void 0?r.vertical*i:void 0,o.maxSpeed=ut(s.gravity.maxSpeed)*i}}function jn(n){return n&&!n.destroyed}function Tee(n,e=R_,t=!1){return{value:n,factor:t?R_/e:R_*n/is}}function zh(n,e,...t){const i=new bee(n,e);return H4(i,...t),i}class Bee{constructor(e,t,i){this._intersectionManager=s=>{if(!(!jn(this)||!this.actualOptions.pauseOnOutsideViewport))for(const r of s)r.target===this.interactivity.element&&(r.isIntersecting?this.play():this.pause())},this._nextFrame=s=>{try{if(!this._smooth&&this._lastFrameTime!==void 0&&s<this._lastFrameTime+is/this.fpsLimit){this.draw(!1);return}this._lastFrameTime??(this._lastFrameTime=s);const r=Tee(s-this._lastFrameTime,this.fpsLimit,this._smooth);if(this.addLifeTime(r.value),this._lastFrameTime=s,r.value>is){this.draw(!1);return}if(this.particles.draw(r),!this.alive()){this.destroy();return}this.animationStatus&&this.draw(!1)}catch(r){Wu().error(`${zr} in animation loop`,r)}},this._engine=e,this.id=Symbol(t),this.fpsLimit=120,this._smooth=!1,this._delay=0,this._duration=0,this._lifeTime=0,this._firstStart=!0,this.started=!1,this.destroyed=!1,this._paused=!0,this._lastFrameTime=0,this.zLayers=100,this.pageHidden=!1,this._clickHandlers=new Map,this._sourceOptions=i,this._initialSourceOptions=i,this.retina=new Iee(this),this.canvas=new DZ(this,this._engine),this.particles=new Mee(this._engine,this),this.pathGenerators=new Map,this.interactivity={mouse:{clicking:!1,inside:!1}},this.plugins=new Map,this.effectDrawers=new Map,this.shapeDrawers=new Map,this._options=zh(this._engine,this),this.actualOptions=zh(this._engine,this),this._eventListeners=new PZ(this),this._intersectionObserver=lZ(s=>this._intersectionManager(s)),this._engine.dispatchEvent(xs.containerBuilt,{container:this})}get animationStatus(){return!this._paused&&!this.pageHidden&&jn(this)}get options(){return this._options}get sourceOptions(){return this._sourceOptions}addClickHandler(e){if(!jn(this))return;const t=this.interactivity.element;if(!t)return;const i=(h,p,m)=>{if(!jn(this))return;const g=this.retina.pixelRatio,v={x:p.x*g,y:p.y*g},y=this.particles.quadTree.queryCircle(v,m*g);e(h,y)},s=h=>{if(!jn(this))return;const p=h,m={x:p.offsetX||p.clientX,y:p.offsetY||p.clientY};i(h,m,IY)},r=()=>{jn(this)&&(c=!0,u=!1)},o=()=>{jn(this)&&(u=!0)},a=h=>{if(jn(this)){if(c&&!u){const p=h;let m=p.touches[p.touches.length-EP];if(!m&&(m=p.changedTouches[p.changedTouches.length-EP],!m))return;const g=this.canvas.element,v=g?g.getBoundingClientRect():void 0,y={x:m.clientX-(v?v.left:yx),y:m.clientY-(v?v.top:yx)};i(h,y,Math.max(m.radiusX,m.radiusY))}c=!1,u=!1}},l=()=>{jn(this)&&(c=!1,u=!1)};let c=!1,u=!1;this._clickHandlers.set("click",s),this._clickHandlers.set("touchstart",r),this._clickHandlers.set("touchmove",o),this._clickHandlers.set("touchend",a),this._clickHandlers.set("touchcancel",l);for(const[h,p]of this._clickHandlers)t.addEventListener(h,p)}addLifeTime(e){this._lifeTime+=e}addPath(e,t,i=!1){return!jn(this)||!i&&this.pathGenerators.has(e)?!1:(this.pathGenerators.set(e,t),!0)}alive(){return!this._duration||this._lifeTime<=this._duration}clearClickHandlers(){var e;if(jn(this)){for(const[t,i]of this._clickHandlers)(e=this.interactivity.element)==null||e.removeEventListener(t,i);this._clickHandlers.clear()}}destroy(e=!0){var t,i;if(jn(this)){this.stop(),this.clearClickHandlers(),this.particles.destroy(),this.canvas.destroy();for(const s of this.effectDrawers.values())(t=s.destroy)==null||t.call(s,this);for(const s of this.shapeDrawers.values())(i=s.destroy)==null||i.call(s,this);for(const s of this.effectDrawers.keys())this.effectDrawers.delete(s);for(const s of this.shapeDrawers.keys())this.shapeDrawers.delete(s);if(this._engine.clearPlugins(this),this.destroyed=!0,e){const s=this._engine.items,r=s.findIndex(o=>o===this);r>=TY&&s.splice(r,b4)}this._engine.dispatchEvent(xs.containerDestroyed,{container:this})}}draw(e){if(!jn(this))return;let t=e;const i=s=>{t&&(this._lastFrameTime=void 0,t=!1),this._nextFrame(s)};this._drawAnimationFrame=ZY(s=>i(s))}async export(e,t={}){for(const i of this.plugins.values()){if(!i.export)continue;const s=await i.export(e,t);if(s.supported)return s.blob}Wu().error(`${zr} - Export plugin with type ${e} not found`)}handleClickMode(e){var t;if(jn(this)){this.particles.handleClickMode(e);for(const i of this.plugins.values())(t=i.handleClickMode)==null||t.call(i,e)}}async init(){var c,u,h,p;if(!jn(this))return;const e=this._engine.getSupportedEffects();for(const m of e){const g=this._engine.getEffectDrawer(m);g&&this.effectDrawers.set(m,g)}const t=this._engine.getSupportedShapes();for(const m of t){const g=this._engine.getShapeDrawer(m);g&&this.shapeDrawers.set(m,g)}await this.particles.initPlugins(),this._options=zh(this._engine,this,this._initialSourceOptions,this.sourceOptions),this.actualOptions=zh(this._engine,this,this._options);const i=await this._engine.getAvailablePlugins(this);for(const[m,g]of i)this.plugins.set(m,g);this.retina.init(),await this.canvas.init(),this.updateActualOptions(),this.canvas.initBackground(),this.canvas.resize();const{zLayers:s,duration:r,delay:o,fpsLimit:a,smooth:l}=this.actualOptions;this.zLayers=s,this._duration=ut(r)*is,this._delay=ut(o)*is,this._lifeTime=0,this.fpsLimit=a>RY?a:BY,this._smooth=l;for(const m of this.effectDrawers.values())await((c=m.init)==null?void 0:c.call(m,this));for(const m of this.shapeDrawers.values())await((u=m.init)==null?void 0:u.call(m,this));for(const m of this.plugins.values())await((h=m.init)==null?void 0:h.call(m));this._engine.dispatchEvent(xs.containerInit,{container:this}),await this.particles.init(),this.particles.setDensity();for(const m of this.plugins.values())(p=m.particlesSetup)==null||p.call(m);this._engine.dispatchEvent(xs.particlesSetup,{container:this})}async loadTheme(e){jn(this)&&(this._currentTheme=e,await this.refresh())}pause(){var e;if(jn(this)&&(this._drawAnimationFrame!==void 0&&(eZ(this._drawAnimationFrame),delete this._drawAnimationFrame),!this._paused)){for(const t of this.plugins.values())(e=t.pause)==null||e.call(t);this.pageHidden||(this._paused=!0),this._engine.dispatchEvent(xs.containerPaused,{container:this})}}play(e){if(!jn(this))return;const t=this._paused||e;if(this._firstStart&&!this.actualOptions.autoPlay){this._firstStart=!1;return}if(this._paused&&(this._paused=!1),t)for(const i of this.plugins.values())i.play&&i.play();this._engine.dispatchEvent(xs.containerPlay,{container:this}),this.draw(t??!1)}async refresh(){if(jn(this))return this.stop(),this.start()}async reset(e){if(jn(this))return this._initialSourceOptions=e,this._sourceOptions=e,this._options=zh(this._engine,this,this._initialSourceOptions,this.sourceOptions),this.actualOptions=zh(this._engine,this,this._options),this.refresh()}async start(){!jn(this)||this.started||(await this.init(),this.started=!0,await new Promise(e=>{const t=async()=>{var i;this._eventListeners.addListeners(),this.interactivity.element instanceof HTMLElement&&this._intersectionObserver&&this._intersectionObserver.observe(this.interactivity.element);for(const s of this.plugins.values())await((i=s.start)==null?void 0:i.call(s));this._engine.dispatchEvent(xs.containerStarted,{container:this}),this.play(),e()};this._delayTimeout=setTimeout(()=>void t(),this._delay)}))}stop(){var e;if(!(!jn(this)||!this.started)){this._delayTimeout&&(clearTimeout(this._delayTimeout),delete this._delayTimeout),this._firstStart=!0,this.started=!1,this._eventListeners.removeListeners(),this.pause(),this.particles.clear(),this.canvas.stop(),this.interactivity.element instanceof HTMLElement&&this._intersectionObserver&&this._intersectionObserver.unobserve(this.interactivity.element);for(const t of this.plugins.values())(e=t.stop)==null||e.call(t);for(const t of this.plugins.keys())this.plugins.delete(t);this._sourceOptions=this._options,this._engine.dispatchEvent(xs.containerStopped,{container:this})}}updateActualOptions(){this.actualOptions.responsive=[];const e=this.actualOptions.setResponsive(this.canvas.size.width,this.retina.pixelRatio,this._options);return this.actualOptions.setTheme(this._currentTheme),this._responsiveMaxWidth===e?!1:(this._responsiveMaxWidth=e,!0)}}class Ree{constructor(){this._listeners=new Map}addEventListener(e,t){this.removeEventListener(e,t);let i=this._listeners.get(e);i||(i=[],this._listeners.set(e,i)),i.push(t)}dispatchEvent(e,t){const i=this._listeners.get(e);i==null||i.forEach(s=>s(t))}hasEventListener(e){return!!this._listeners.get(e)}removeAllEventListeners(e){e?this._listeners.delete(e):this._listeners=new Map}removeEventListener(e,t){const i=this._listeners.get(e);if(!i)return;const s=i.length,r=i.indexOf(t);r<Q1||(s===xx?this._listeners.delete(e):i.splice(r,xx))}}async function G_(n,e,t,i=!1){let s=e.get(n);return(!s||i)&&(s=await Promise.all([...t.values()].map(r=>r(n))),e.set(n,s)),s}async function Dee(n){const e=Lr(n.url,n.index);if(!e)return n.fallback;const t=await fetch(e);return t.ok?await t.json():(Wu().error(`${zr} ${t.status} while retrieving config file`),n.fallback)}const Pee=n=>{let e;if(n instanceof HTMLCanvasElement||n.tagName.toLowerCase()===D_)e=n,e.dataset[yu]||(e.dataset[yu]=mP);else{const i=n.getElementsByTagName(D_);i.length?(e=i[DY],e.dataset[yu]=mP):(e=document.createElement(D_),e.dataset[yu]=v4,n.appendChild(e))}const t="100%";return e.style.width||(e.style.width=t),e.style.height||(e.style.height=t),e},Lee=(n,e)=>{let t=e??document.getElementById(n);return t||(t=document.createElement("div"),t.id=n,t.dataset[yu]=v4,document.body.append(t),t)};class kee{constructor(){this._configs=new Map,this._domArray=[],this._eventDispatcher=new Ree,this._initialized=!1,this.plugins=[],this.colorManagers=new Map,this.easingFunctions=new Map,this._initializers={interactors:new Map,movers:new Map,updaters:new Map},this.interactors=new Map,this.movers=new Map,this.updaters=new Map,this.presets=new Map,this.effectDrawers=new Map,this.shapeDrawers=new Map,this.pathGenerators=new Map}get configs(){const e={};for(const[t,i]of this._configs)e[t]=i;return e}get items(){return this._domArray}get version(){return"3.9.1"}async addColorManager(e,t=!0){this.colorManagers.set(e.key,e),await this.refresh(t)}addConfig(e){const t=e.key??e.name??"default";this._configs.set(t,e),this._eventDispatcher.dispatchEvent(xs.configAdded,{data:{name:t,config:e}})}async addEasing(e,t,i=!0){this.getEasing(e)||(this.easingFunctions.set(e,t),await this.refresh(i))}async addEffect(e,t,i=!0){gr(e,s=>{this.getEffectDrawer(s)||this.effectDrawers.set(s,t)}),await this.refresh(i)}addEventListener(e,t){this._eventDispatcher.addEventListener(e,t)}async addInteractor(e,t,i=!0){this._initializers.interactors.set(e,t),await this.refresh(i)}async addMover(e,t,i=!0){this._initializers.movers.set(e,t),await this.refresh(i)}async addParticleUpdater(e,t,i=!0){this._initializers.updaters.set(e,t),await this.refresh(i)}async addPathGenerator(e,t,i=!0){this.getPathGenerator(e)||this.pathGenerators.set(e,t),await this.refresh(i)}async addPlugin(e,t=!0){this.getPlugin(e.id)||this.plugins.push(e),await this.refresh(t)}async addPreset(e,t,i=!1,s=!0){(i||!this.getPreset(e))&&this.presets.set(e,t),await this.refresh(s)}async addShape(e,t=!0){for(const i of e.validTypes)this.getShapeDrawer(i)||this.shapeDrawers.set(i,e);await this.refresh(t)}checkVersion(e){if(this.version!==e)throw new Error(`The tsParticles version is different from the loaded plugins version. Engine version: ${this.version}. Plugin version: ${e}`)}clearPlugins(e){this.updaters.delete(e),this.movers.delete(e),this.interactors.delete(e)}dispatchEvent(e,t){this._eventDispatcher.dispatchEvent(e,t)}dom(){return this.items}domItem(e){return this.item(e)}async getAvailablePlugins(e){const t=new Map;for(const i of this.plugins)i.needsPlugin(e.actualOptions)&&t.set(i.id,await i.getPlugin(e));return t}getEasing(e){return this.easingFunctions.get(e)??(t=>t)}getEffectDrawer(e){return this.effectDrawers.get(e)}async getInteractors(e,t=!1){return G_(e,this.interactors,this._initializers.interactors,t)}async getMovers(e,t=!1){return G_(e,this.movers,this._initializers.movers,t)}getPathGenerator(e){return this.pathGenerators.get(e)}getPlugin(e){return this.plugins.find(t=>t.id===e)}getPreset(e){return this.presets.get(e)}getShapeDrawer(e){return this.shapeDrawers.get(e)}getSupportedEffects(){return this.effectDrawers.keys()}getSupportedShapes(){return this.shapeDrawers.keys()}async getUpdaters(e,t=!1){return G_(e,this.updaters,this._initializers.updaters,t)}init(){this._initialized||(this._initialized=!0)}item(e){const{items:t}=this,i=t[e];if(!i||i.destroyed){t.splice(e,b4);return}return i}async load(e){var p;const t=e.id??((p=e.element)==null?void 0:p.id)??`tsparticles${Math.floor(gn()*PY)}`,{index:i,url:s}=e,r=s?await Dee({fallback:e.options,url:s,index:i}):e.options,o=Lr(r,i),{items:a}=this,l=a.findIndex(m=>m.id.description===t),c=new Bee(this,t,o);if(l>=LY){const m=this.item(l),g=m?kY:vx;m&&!m.destroyed&&m.destroy(!1),a.splice(l,g,c)}else a.push(c);const u=Lee(t,e.element),h=Pee(u);return c.canvas.loadCanvas(h),await c.start(),c}loadOptions(e,t){this.plugins.forEach(i=>{var s;return(s=i.loadOptions)==null?void 0:s.call(i,e,t)})}loadParticlesOptions(e,t,...i){const s=this.updaters.get(e);s&&s.forEach(r=>{var o;return(o=r.loadOptions)==null?void 0:o.call(r,t,...i)})}async refresh(e=!0){e&&await Promise.all(this.items.map(t=>t.refresh()))}removeEventListener(e,t){this._eventDispatcher.removeEventListener(e,t)}setOnClickHandler(e){const{items:t}=this;if(!t.length)throw new Error(`${zr} can only set click handlers after calling tsParticles.load()`);t.forEach(i=>i.addClickHandler(e))}}function Fee(){const n=new kee;return n.init(),n}class Yo{constructor(e){this.type=wf.external,this.container=e}}class oT{constructor(e){this.type=wf.particles,this.container=e}}var so;(function(n){n.clockwise="clockwise",n.counterClockwise="counter-clockwise",n.random="random"})(so||(so={}));var GP;(function(n){n.linear="linear",n.radial="radial",n.random="random"})(GP||(GP={}));var Ru;(function(n){n.easeInBack="ease-in-back",n.easeInCirc="ease-in-circ",n.easeInCubic="ease-in-cubic",n.easeInLinear="ease-in-linear",n.easeInQuad="ease-in-quad",n.easeInQuart="ease-in-quart",n.easeInQuint="ease-in-quint",n.easeInExpo="ease-in-expo",n.easeInSine="ease-in-sine",n.easeOutBack="ease-out-back",n.easeOutCirc="ease-out-circ",n.easeOutCubic="ease-out-cubic",n.easeOutLinear="ease-out-linear",n.easeOutQuad="ease-out-quad",n.easeOutQuart="ease-out-quart",n.easeOutQuint="ease-out-quint",n.easeOutExpo="ease-out-expo",n.easeOutSine="ease-out-sine",n.easeInOutBack="ease-in-out-back",n.easeInOutCirc="ease-in-out-circ",n.easeInOutCubic="ease-in-out-cubic",n.easeInOutLinear="ease-in-out-linear",n.easeInOutQuad="ease-in-out-quad",n.easeInOutQuart="ease-in-out-quart",n.easeInOutQuint="ease-in-out-quint",n.easeInOutExpo="ease-in-out-expo",n.easeInOutSine="ease-in-out-sine"})(Ru||(Ru={}));const aT=Fee();qu()||(window.tsParticles=aT);const Nee=n=>{const e=n.id??"tsparticles";return ee.useEffect(()=>{let t;return aT.load({id:e,url:n.url,options:n.options}).then(i=>{var s;t=i,(s=n.particlesLoaded)==null||s.call(n,i)}),()=>{t==null||t.destroy()}},[e,n,n.url,n.options]),C.jsx("div",{id:e,className:n.className})};async function Oee(n){await n(aT)}const q1=.5,Uee=2,Ol=0,co=1,zP=60,QP=0,Gee=.01,zee=Math.PI*Uee;function Qee(n){const e=n.initialPosition,{dx:t,dy:i}=_s(e,n.position),s=Math.abs(t),r=Math.abs(i),{maxDistance:o}=n.retina,a=o.horizontal,l=o.vertical;if(!a&&!l)return;const c=(a&&s>=a)??!1,u=(l&&r>=l)??!1;if((c||u)&&!n.misplaced)n.misplaced=!!a&&s>a||!!l&&r>l,a&&(n.velocity.x=n.velocity.y*q1-n.velocity.x),l&&(n.velocity.y=n.velocity.x*q1-n.velocity.y);else if((!a||s<a)&&(!l||r<l)&&n.misplaced)n.misplaced=!1;else if(n.misplaced){const h=n.position,p=n.velocity;a&&(h.x<e.x&&p.x<Ol||h.x>e.x&&p.x>Ol)&&(p.x*=-gn()),l&&(h.y<e.y&&p.y<Ol||h.y>e.y&&p.y>Ol)&&(p.y*=-gn())}}function Hee(n,e,t,i,s,r,o){jee(n,o);const a=n.gravity,l=a!=null&&a.enable&&a.inverse?-co:co;s&&t&&(n.velocity.x+=s*o.factor/(zP*t)),a!=null&&a.enable&&t&&(n.velocity.y+=l*(a.acceleration*o.factor)/(zP*t));const c=n.moveDecay;n.velocity.multTo(c);const u=n.velocity.mult(t);a!=null&&a.enable&&i>Ol&&(!a.inverse&&u.y>=Ol&&u.y>=i||a.inverse&&u.y<=Ol&&u.y<=-i)&&(u.y=l*i,t&&(n.velocity.y=u.y/t));const h=n.options.zIndex,p=(co-n.zIndexFactor)**h.velocityRate;u.multTo(p),u.multTo(r);const{position:m}=n;m.addTo(u),e.vibrate&&(m.x+=Math.sin(m.x*Math.cos(m.y))*r,m.y+=Math.cos(m.y*Math.sin(m.x))*r)}function Vee(n,e,t){const i=n.container;if(!n.spin)return;const s=n.spin.direction===so.clockwise,r={x:s?Math.cos:Math.sin,y:s?Math.sin:Math.cos};n.position.x=n.spin.center.x+n.spin.radius*r.x(n.spin.angle)*t,n.position.y=n.spin.center.y+n.spin.radius*r.y(n.spin.angle)*t,n.spin.radius+=n.spin.acceleration*t;const o=Math.max(i.canvas.size.width,i.canvas.size.height),a=o*q1;n.spin.radius>a?(n.spin.radius=a,n.spin.acceleration*=-co):n.spin.radius<QP&&(n.spin.radius=QP,n.spin.acceleration*=-co),n.spin.angle+=e*Gee*(co-n.spin.radius/o)}function jee(n,e){var o;const t=n.options,i=t.move.path;if(!i.enable)return;if(n.lastPathTime<=n.pathDelay){n.lastPathTime+=e.value;return}const r=(o=n.pathGenerator)==null?void 0:o.generate(n,e);r&&n.velocity.addTo(r),i.clamp&&(n.velocity.x=Qr(n.velocity.x,-co,co),n.velocity.y=Qr(n.velocity.y,-co,co)),n.lastPathTime-=n.pathDelay}function Wee(n){return n.slow.inRange?n.slow.factor:co}function qee(n){const e=n.container,t=n.options,i=t.move.spin;if(!i.enable)return;const s=i.position??{x:50,y:50},r=.01,o={x:s.x*r*e.canvas.size.width,y:s.y*r*e.canvas.size.height},a=n.getPosition(),l=hr(a,o),c=ut(i.acceleration);n.retina.spinAcceleration=c*e.retina.pixelRatio,n.spin={center:o,direction:n.velocity.x>=Ol?so.clockwise:so.counterClockwise,angle:gn()*zee,radius:l,acceleration:n.retina.spinAcceleration}}const Jee=2,Xee=1,Kee=1;class $ee{init(e){const t=e.options,i=t.move.gravity;e.gravity={enable:i.enable,acceleration:ut(i.acceleration),inverse:i.inverse},qee(e)}isEnabled(e){return!e.destroyed&&e.options.move.enable}move(e,t){var y,A;const i=e.options,s=i.move;if(!s.enable)return;const r=e.container,o=r.retina.pixelRatio;(y=e.retina).moveSpeed??(y.moveSpeed=ut(s.speed)*o),(A=e.retina).moveDrift??(A.moveDrift=ut(e.options.move.drift)*o);const a=Wee(e),l=r.retina.reduceFactor,c=e.retina.moveSpeed,u=e.retina.moveDrift,h=Uo(i.size.value)*o,p=s.size?e.getRadius()/h:Xee,m=t.factor||Kee,g=c*p*a*m/Jee,v=e.retina.maxSpeed??r.retina.maxSpeed;s.spin.enable?Vee(e,g,l):Hee(e,s,g,v,u,l,t),Qee(e)}}async function Yee(n,e=!0){n.checkVersion("3.9.1"),await n.addMover("base",()=>Promise.resolve(new $ee),e)}const Zee=2,ete=Math.PI*Zee,tte=0,HP={x:0,y:0};function nte(n){const{context:e,particle:t,radius:i}=n;t.circleRange||(t.circleRange={min:tte,max:ete});const s=t.circleRange;e.arc(HP.x,HP.y,i,s.min,s.max,!1)}const ite=12,ste=360,VP=0;class rte{constructor(){this.validTypes=["circle"]}draw(e){nte(e)}getSidesCount(){return ite}particleInit(e,t){const i=t.shapeData,s=(i==null?void 0:i.angle)??{max:ste,min:VP};t.circleRange=Id(s)?{min:Xl(s.min),max:Xl(s.max)}:{min:VP,max:Xl(s)}}}async function ote(n,e=!0){n.checkVersion("3.9.1"),await n.addShape(new rte,e)}class ate{constructor(e,t){this._container=e,this._engine=t}init(e){const t=hg(this._engine,e.options.color,e.id,e.options.reduceDuplicates);t&&(e.color=O4(t,e.options.color.animation,this._container.retina.reduceFactor))}isEnabled(e){const{h:t,s:i,l:s}=e.options.color.animation,{color:r}=e;return!e.destroyed&&!e.spawning&&((r==null?void 0:r.h.value)!==void 0&&t.enable||(r==null?void 0:r.s.value)!==void 0&&i.enable||(r==null?void 0:r.l.value)!==void 0&&s.enable)}update(e,t){U4(e.color,t)}}async function lte(n,e=!0){n.checkVersion("3.9.1"),await n.addParticleUpdater("color",t=>Promise.resolve(new ate(t,n)),e)}var lu;(function(n){n[n.r=1]="r",n[n.g=2]="g",n[n.b=3]="b",n[n.a=4]="a"})(lu||(lu={}));const cte=/^#?([a-f\d])([a-f\d])([a-f\d])([a-f\d])?$/i,ute=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i,oy=16,hte=1,dte=255;class fte{constructor(){this.key="hex",this.stringPrefix="#"}handleColor(e){return this._parseString(e.value)}handleRangeColor(e){return this._parseString(e.value)}parseString(e){return this._parseString(e)}_parseString(e){if(typeof e!="string"||!(e!=null&&e.startsWith(this.stringPrefix)))return;const t=e.replace(cte,(s,r,o,a,l)=>r+r+o+o+a+a+(l!==void 0?l+l:"")),i=ute.exec(t);return i?{a:i[lu.a]!==void 0?parseInt(i[lu.a],oy)/dte:hte,b:parseInt(i[lu.b],oy),g:parseInt(i[lu.g],oy),r:parseInt(i[lu.r],oy)}:void 0}}async function pte(n,e=!0){n.checkVersion("3.9.1"),await n.addColorManager(new fte,e)}var Td;(function(n){n[n.h=1]="h",n[n.s=2]="s",n[n.l=3]="l",n[n.a=5]="a"})(Td||(Td={}));class mte{constructor(){this.key="hsl",this.stringPrefix="hsl"}handleColor(e){const t=e.value,i=t.hsl??e.value;if(i.h!==void 0&&i.s!==void 0&&i.l!==void 0)return xf(i)}handleRangeColor(e){const t=e.value,i=t.hsl??e.value;if(i.h!==void 0&&i.l!==void 0)return xf({h:ut(i.h),l:ut(i.l),s:ut(i.s)})}parseString(e){if(!e.startsWith("hsl"))return;const t=/hsla?\(\s*(\d+)\s*[\s,]\s*(\d+)%\s*[\s,]\s*(\d+)%\s*([\s,]\s*(0|1|0?\.\d+|(\d{1,3})%)\s*)?\)/i,i=t.exec(e),s=4,r=1,o=10;return i?bZ({a:i.length>s?M4(i[Td.a]):r,h:parseInt(i[Td.h],o),l:parseInt(i[Td.l],o),s:parseInt(i[Td.s],o)}):void 0}}async function gte(n,e=!0){n.checkVersion("3.9.1"),await n.addColorManager(new mte,e)}class Ate{constructor(e){this.container=e}init(e){const t=e.options.opacity,i=1;e.opacity=D4(t,i);const s=t.animation;s.enable&&(e.opacity.velocity=ut(s.speed)/Nl*this.container.retina.reduceFactor,s.sync||(e.opacity.velocity*=gn()))}isEnabled(e){return!e.destroyed&&!e.spawning&&!!e.opacity&&e.opacity.enable&&((e.opacity.maxLoops??0)<=0||(e.opacity.maxLoops??0)>0&&(e.opacity.loops??0)<(e.opacity.maxLoops??0))}reset(e){e.opacity&&(e.opacity.time=0,e.opacity.loops=0)}update(e,t){!this.isEnabled(e)||!e.opacity||nT(e,e.opacity,!0,e.options.opacity.animation.destroy,t)}}async function yte(n,e=!0){n.checkVersion("3.9.1"),await n.addParticleUpdater("opacity",t=>Promise.resolve(new Ate(t)),e)}const wx=0,Xd=0;function vte(n){if(n.outMode!==ti.bounce&&n.outMode!==ti.split||n.direction!==Kt.left&&n.direction!==Kt.right)return;n.bounds.right<Xd&&n.direction===Kt.left?n.particle.position.x=n.size+n.offset.x:n.bounds.left>n.canvasSize.width&&n.direction===Kt.right&&(n.particle.position.x=n.canvasSize.width-n.size-n.offset.x);const e=n.particle.velocity.x;let t=!1;if(n.direction===Kt.right&&n.bounds.right>=n.canvasSize.width&&e>wx||n.direction===Kt.left&&n.bounds.left<=Xd&&e<wx){const s=ut(n.particle.options.bounce.horizontal.value);n.particle.velocity.x*=-s,t=!0}if(!t)return;const i=n.offset.x+n.size;n.bounds.right>=n.canvasSize.width&&n.direction===Kt.right?n.particle.position.x=n.canvasSize.width-i:n.bounds.left<=Xd&&n.direction===Kt.left&&(n.particle.position.x=i),n.outMode===ti.split&&n.particle.destroy()}function xte(n){if(n.outMode!==ti.bounce&&n.outMode!==ti.split||n.direction!==Kt.bottom&&n.direction!==Kt.top)return;n.bounds.bottom<Xd&&n.direction===Kt.top?n.particle.position.y=n.size+n.offset.y:n.bounds.top>n.canvasSize.height&&n.direction===Kt.bottom&&(n.particle.position.y=n.canvasSize.height-n.size-n.offset.y);const e=n.particle.velocity.y;let t=!1;if(n.direction===Kt.bottom&&n.bounds.bottom>=n.canvasSize.height&&e>wx||n.direction===Kt.top&&n.bounds.top<=Xd&&e<wx){const s=ut(n.particle.options.bounce.vertical.value);n.particle.velocity.y*=-s,t=!0}if(!t)return;const i=n.offset.y+n.size;n.bounds.bottom>=n.canvasSize.height&&n.direction===Kt.bottom?n.particle.position.y=n.canvasSize.height-i:n.bounds.top<=Xd&&n.direction===Kt.top&&(n.particle.position.y=i),n.outMode===ti.split&&n.particle.destroy()}class bte{constructor(e){this.container=e,this.modes=[ti.bounce,ti.split]}update(e,t,i,s){if(!this.modes.includes(s))return;const r=this.container;let o=!1;for(const p of r.plugins.values())if(p.particleBounce!==void 0&&(o=p.particleBounce(e,i,t)),o)break;if(o)return;const a=e.getPosition(),l=e.offset,c=e.getRadius(),u=Vg(a,c),h=r.canvas.size;vte({particle:e,outMode:s,direction:t,bounds:u,canvasSize:h,offset:l,size:c}),xte({particle:e,outMode:s,direction:t,bounds:u,canvasSize:h,offset:l,size:c})}}const ay=0;class wte{constructor(e){this.container=e,this.modes=[ti.destroy]}update(e,t,i,s){if(!this.modes.includes(s))return;const r=this.container;switch(e.outType){case go.normal:case go.outside:if(ZI(e.position,r.canvas.size,Li.origin,e.getRadius(),t))return;break;case go.inside:{const{dx:o,dy:a}=_s(e.position,e.moveCenter),{x:l,y:c}=e.velocity;if(l<ay&&o>e.moveCenter.radius||c<ay&&a>e.moveCenter.radius||l>=ay&&o<-e.moveCenter.radius||c>=ay&&a<-e.moveCenter.radius)return;break}}r.particles.remove(e,e.group,!0)}}const ly=0;class Ete{constructor(e){this.container=e,this.modes=[ti.none]}update(e,t,i,s){if(!this.modes.includes(s)||((e.options.move.distance.horizontal&&(t===Kt.left||t===Kt.right))??(e.options.move.distance.vertical&&(t===Kt.top||t===Kt.bottom))))return;const r=e.options.move.gravity,o=this.container,a=o.canvas.size,l=e.getRadius();if(r.enable){const c=e.position;(!r.inverse&&c.y>a.height+l&&t===Kt.bottom||r.inverse&&c.y<-l&&t===Kt.top)&&o.particles.remove(e)}else{if(e.velocity.y>ly&&e.position.y<=a.height+l||e.velocity.y<ly&&e.position.y>=-l||e.velocity.x>ly&&e.position.x<=a.width+l||e.velocity.x<ly&&e.position.x>=-l)return;ZI(e.position,o.canvas.size,Li.origin,l,t)||o.particles.remove(e)}}}const cy=0,uy=0;class _te{constructor(e){this.container=e,this.modes=[ti.out]}update(e,t,i,s){if(!this.modes.includes(s))return;const r=this.container;switch(e.outType){case go.inside:{const{x:o,y:a}=e.velocity,l=Li.origin;l.length=e.moveCenter.radius,l.angle=e.velocity.angle+Math.PI,l.addTo(Li.create(e.moveCenter));const{dx:c,dy:u}=_s(e.position,l);if(o<=cy&&c>=uy||a<=cy&&u>=uy||o>=cy&&c<=uy||a>=cy&&u<=uy)return;e.position.x=Math.floor(rr({min:0,max:r.canvas.size.width})),e.position.y=Math.floor(rr({min:0,max:r.canvas.size.height}));const{dx:h,dy:p}=_s(e.position,e.moveCenter);e.direction=Math.atan2(-p,-h),e.velocity.angle=e.direction;break}default:{if(ZI(e.position,r.canvas.size,Li.origin,e.getRadius(),t))return;switch(e.outType){case go.outside:{e.position.x=Math.floor(rr({min:-e.moveCenter.radius,max:e.moveCenter.radius}))+e.moveCenter.x,e.position.y=Math.floor(rr({min:-e.moveCenter.radius,max:e.moveCenter.radius}))+e.moveCenter.y;const{dx:o,dy:a}=_s(e.position,e.moveCenter);e.moveCenter.radius&&(e.direction=Math.atan2(a,o),e.velocity.angle=e.direction);break}case go.normal:{const o=e.options.move.warp,a=r.canvas.size,l={bottom:a.height+e.getRadius()+e.offset.y,left:-e.getRadius()-e.offset.x,right:a.width+e.getRadius()+e.offset.x,top:-e.getRadius()-e.offset.y},c=e.getRadius(),u=Vg(e.position,c);t===Kt.right&&u.left>a.width+e.offset.x?(e.position.x=l.left,e.initialPosition.x=e.position.x,o||(e.position.y=gn()*a.height,e.initialPosition.y=e.position.y)):t===Kt.left&&u.right<-e.offset.x&&(e.position.x=l.right,e.initialPosition.x=e.position.x,o||(e.position.y=gn()*a.height,e.initialPosition.y=e.position.y)),t===Kt.bottom&&u.top>a.height+e.offset.y?(o||(e.position.x=gn()*a.width,e.initialPosition.x=e.position.x),e.position.y=l.top,e.initialPosition.y=e.position.y):t===Kt.top&&u.bottom<-e.offset.y&&(o||(e.position.x=gn()*a.width,e.initialPosition.x=e.position.x),e.position.y=l.bottom,e.initialPosition.y=e.position.y);break}}break}}}}const Cte=(n,e)=>n.default===e||n.bottom===e||n.left===e||n.right===e||n.top===e;class Ste{constructor(e){this._addUpdaterIfMissing=(t,i,s)=>{const r=t.options.move.outModes;!this.updaters.has(i)&&Cte(r,i)&&this.updaters.set(i,s(this.container))},this._updateOutMode=(t,i,s,r)=>{for(const o of this.updaters.values())o.update(t,r,i,s)},this.container=e,this.updaters=new Map}init(e){this._addUpdaterIfMissing(e,ti.bounce,t=>new bte(t)),this._addUpdaterIfMissing(e,ti.out,t=>new _te(t)),this._addUpdaterIfMissing(e,ti.destroy,t=>new wte(t)),this._addUpdaterIfMissing(e,ti.none,t=>new Ete(t))}isEnabled(e){return!e.destroyed&&!e.spawning}update(e,t){const i=e.options.move.outModes;this._updateOutMode(e,t,i.bottom??i.default,Kt.bottom),this._updateOutMode(e,t,i.left??i.default,Kt.left),this._updateOutMode(e,t,i.right??i.default,Kt.right),this._updateOutMode(e,t,i.top??i.default,Kt.top)}}async function Mte(n,e=!0){n.checkVersion("3.9.1"),await n.addParticleUpdater("outModes",t=>Promise.resolve(new Ste(t)),e)}var Bd;(function(n){n[n.r=1]="r",n[n.g=2]="g",n[n.b=3]="b",n[n.a=5]="a"})(Bd||(Bd={}));class Ite{constructor(){this.key="rgb",this.stringPrefix="rgb"}handleColor(e){const t=e.value,i=t.rgb??e.value;if(i.r!==void 0)return i}handleRangeColor(e){const t=e.value,i=t.rgb??e.value;if(i.r!==void 0)return{r:ut(i.r),g:ut(i.g),b:ut(i.b)}}parseString(e){if(!e.startsWith(this.stringPrefix))return;const t=/rgba?\(\s*(\d{1,3})\s*[\s,]\s*(\d{1,3})\s*[\s,]\s*(\d{1,3})\s*([\s,]\s*(0|1|0?\.\d+|(\d{1,3})%)\s*)?\)/i,i=t.exec(e),s=10,r=4,o=1;return i?{a:i.length>r?M4(i[Bd.a]):o,b:parseInt(i[Bd.b],s),g:parseInt(i[Bd.g],s),r:parseInt(i[Bd.r],s)}:void 0}}async function Tte(n,e=!0){n.checkVersion("3.9.1"),await n.addColorManager(new Ite,e)}const zc=0;class Bte{init(e){const t=e.container,i=e.options.size,s=i.animation;s.enable&&(e.size.velocity=(e.retina.sizeAnimationSpeed??t.retina.sizeAnimationSpeed)/Nl*t.retina.reduceFactor,s.sync||(e.size.velocity*=gn()))}isEnabled(e){return!e.destroyed&&!e.spawning&&e.size.enable&&((e.size.maxLoops??zc)<=zc||(e.size.maxLoops??zc)>zc&&(e.size.loops??zc)<(e.size.maxLoops??zc))}reset(e){e.size.loops=zc}update(e,t){this.isEnabled(e)&&nT(e,e.size,!0,e.options.size.animation.destroy,t)}}async function Rte(n,e=!0){n.checkVersion("3.9.1"),await n.addParticleUpdater("size",()=>Promise.resolve(new Bte),e)}async function Dte(n,e=!0){n.checkVersion("3.9.1"),await pte(n,!1),await gte(n,!1),await Tte(n,!1),await Yee(n,!1),await ote(n,!1),await lte(n,!1),await yte(n,!1),await Mte(n,!1),await Rte(n,!1),await n.refresh(e)}async function Pte(n,e=!0){n.checkVersion("3.9.1"),await n.addEasing(Ru.easeInQuad,t=>t**2,!1),await n.addEasing(Ru.easeOutQuad,t=>1-(1-t)**2,!1),await n.addEasing(Ru.easeInOutQuad,t=>t<.5?2*t**2:1-(-2*t+2)**2/2,!1),await n.refresh(e)}function Lte(n,e){const{context:t,opacity:i}=n,s=.5,r=t.globalAlpha;if(!e)return;const o=e.width,a=o*s;t.globalAlpha=i,t.drawImage(e,-a,-a,o,o),t.globalAlpha=r}const z_='"Twemoji Mozilla", Apple Color Emoji, "Segoe UI Emoji", "Noto Color Emoji", "EmojiOne Color"',jP=0;class kte{constructor(){this.validTypes=["emoji"],this._emojiShapeDict=new Map}destroy(){for(const[e,t]of this._emojiShapeDict)t instanceof ImageBitmap&&(t==null||t.close()),this._emojiShapeDict.delete(e)}draw(e){const t=e.particle.emojiDataKey;if(!t)return;const i=this._emojiShapeDict.get(t);i&&Lte(e,i)}async init(e){const t=e.actualOptions,{validTypes:i}=this;if(!i.find(o=>ei(o,t.particles.shape.type)))return;const s=[DP(z_)],r=i.map(o=>t.particles.shape.options[o]).find(o=>!!o);r&&gr(r,o=>{o.font&&s.push(DP(o.font))}),await Promise.all(s)}particleDestroy(e){e.emojiDataKey=void 0}particleInit(e,t){const s=t.shapeData;if(!(s!=null&&s.value))return;const r=Lr(s.value,t.randomIndexData);if(!r)return;const o=typeof r=="string"?{font:s.font??z_,padding:s.padding??jP,value:r}:{font:z_,padding:jP,...s,...r},a=o.font,l=o.value,c=`${l}_${a}`;if(this._emojiShapeDict.has(c)){t.emojiDataKey=c;return}const u=o.padding*2,h=Uo(t.size.value),p=h+u,m=p*2;let g;if(typeof OffscreenCanvas<"u"){const v=new OffscreenCanvas(m,m),y=v.getContext("2d");if(!y)return;y.font=`400 ${h*2}px ${a}`,y.textBaseline="middle",y.textAlign="center",y.fillText(l,p,p),g=v.transferToImageBitmap()}else{const v=document.createElement("canvas");v.width=m,v.height=m;const y=v.getContext("2d");if(!y)return;y.font=`400 ${h*2}px ${a}`,y.textBaseline="middle",y.textAlign="center",y.fillText(l,p,p),g=v}this._emojiShapeDict.set(c,g),t.emojiDataKey=c}}async function Fte(n,e=!0){n.checkVersion("3.9.1"),await n.addShape(new kte,e)}const Nte=1,Ote=1,W4=0;function q4(n,e,t,i,s,r){const o=e.actualOptions.interactivity.modes.attract;if(!o)return;const a=e.particles.quadTree.query(s,r);for(const l of a){const{dx:c,dy:u,distance:h}=_s(l.position,t),p=o.speed*o.factor,m=Qr(n.getEasing(o.easing)(Ote-h/i)*p,Nte,o.maxSpeed),g=Li.create(h?c/h*m:p,h?u/h*m:p);l.position.subFrom(g)}}function Ute(n,e,t){e.attract||(e.attract={particles:[]});const{attract:i}=e;if(i.finish||(i.count||(i.count=0),i.count++,i.count===e.particles.count&&(i.finish=!0)),i.clicking){const s=e.interactivity.mouse.clickPosition,r=e.retina.attractModeDistance;if(!r||r<W4||!s)return;q4(n,e,s,r,new rs(s.x,s.y,r),o=>t(o))}else i.clicking===!1&&(i.particles=[])}function Gte(n,e,t){const i=e.interactivity.mouse.position,s=e.retina.attractModeDistance;!s||s<W4||!i||q4(n,e,i,s,new rs(i.x,i.y,s),r=>t(r))}class zte{constructor(){this.distance=200,this.duration=.4,this.easing=Ru.easeOutQuad,this.factor=1,this.maxSpeed=50,this.speed=1}load(e){Re(e)||(e.distance!==void 0&&(this.distance=e.distance),e.duration!==void 0&&(this.duration=e.duration),e.easing!==void 0&&(this.easing=e.easing),e.factor!==void 0&&(this.factor=e.factor),e.maxSpeed!==void 0&&(this.maxSpeed=e.maxSpeed),e.speed!==void 0&&(this.speed=e.speed))}}const Bp="attract";let Qte=class extends Yo{constructor(e,t){super(t),this._engine=e,t.attract||(t.attract={particles:[]}),this.handleClickMode=i=>{const s=this.container.actualOptions,r=s.interactivity.modes.attract;if(!(!r||i!==Bp)){t.attract||(t.attract={particles:[]}),t.attract.clicking=!0,t.attract.count=0;for(const o of t.attract.particles)this.isEnabled(o)&&o.velocity.setTo(o.initialVelocity);t.attract.particles=[],t.attract.finish=!1,setTimeout(()=>{t.destroyed||(t.attract||(t.attract={particles:[]}),t.attract.clicking=!1)},r.duration*is)}}}clear(){}init(){const e=this.container,t=e.actualOptions.interactivity.modes.attract;t&&(e.retina.attractModeDistance=t.distance*e.retina.pixelRatio)}interact(){const e=this.container,t=e.actualOptions,i=e.interactivity.status===Vu,s=t.interactivity.events,{enable:r,mode:o}=s.onHover,{enable:a,mode:l}=s.onClick;i&&r&&ei(Bp,o)?Gte(this._engine,this.container,c=>this.isEnabled(c)):a&&ei(Bp,l)&&Ute(this._engine,this.container,c=>this.isEnabled(c))}isEnabled(e){const t=this.container,i=t.actualOptions,s=t.interactivity.mouse,r=((e==null?void 0:e.interactivity)??i.interactivity).events;if((!s.position||!r.onHover.enable)&&(!s.clickPosition||!r.onClick.enable))return!1;const o=r.onHover.mode,a=r.onClick.mode;return ei(Bp,o)||ei(Bp,a)}loadModeOptions(e,...t){e.attract||(e.attract=new zte);for(const i of t)e.attract.load(i==null?void 0:i.attract)}reset(){}};async function Hte(n,e=!0){n.checkVersion("3.9.1"),await n.addInteractor("externalAttract",t=>Promise.resolve(new Qte(n,t)),e)}const Vte=2,sv=.5,jte=Math.PI*sv,WP=2,J4=10,Wte=0;function X4(n,e,t,i,s){const r=n.particles.quadTree.query(i,s);for(const o of r)i instanceof rs?B4(V1(o),{position:e,radius:t,mass:t**Vte*jte,velocity:Li.origin,factor:Li.origin}):i instanceof yo&&fZ(o,Vg(e,t))}function qte(n,e,t,i){const s=document.querySelectorAll(e);s.length&&s.forEach(r=>{const o=r,a=n.retina.pixelRatio,l={x:(o.offsetLeft+o.offsetWidth*sv)*a,y:(o.offsetTop+o.offsetHeight*sv)*a},c=o.offsetWidth*sv*a,u=J4*a,h=t.type===bf.circle?new rs(l.x,l.y,c+u):new yo(o.offsetLeft*a-u,o.offsetTop*a-u,o.offsetWidth*a+u*WP,o.offsetHeight*a+u*WP);i(l,c,h)})}function Jte(n,e,t,i){tT(t,e,(s,r)=>qte(n,s,r,(o,a,l)=>X4(n,o,a,l,i)))}function Xte(n,e){const t=n.retina.pixelRatio,i=J4*t,s=n.interactivity.mouse.position,r=n.retina.bounceModeDistance;!r||r<Wte||!s||X4(n,s,r,new rs(s.x,s.y,r+i),e)}class Kte{constructor(){this.distance=200}load(e){Re(e)||e.distance!==void 0&&(this.distance=e.distance)}}const hy="bounce";class $te extends Yo{constructor(e){super(e)}clear(){}init(){const e=this.container,t=e.actualOptions.interactivity.modes.bounce;t&&(e.retina.bounceModeDistance=t.distance*e.retina.pixelRatio)}interact(){const e=this.container,t=e.actualOptions,i=t.interactivity.events,s=e.interactivity.status===Vu,r=i.onHover.enable,o=i.onHover.mode,a=i.onDiv;s&&r&&ei(hy,o)?Xte(this.container,l=>this.isEnabled(l)):Jte(this.container,a,hy,l=>this.isEnabled(l))}isEnabled(e){const t=this.container,i=t.actualOptions,s=t.interactivity.mouse,r=((e==null?void 0:e.interactivity)??i.interactivity).events,o=r.onDiv;return!!s.position&&r.onHover.enable&&ei(hy,r.onHover.mode)||eT(hy,o)}loadModeOptions(e,...t){e.bounce||(e.bounce=new Kte);for(const i of t)e.bounce.load(i==null?void 0:i.bounce)}reset(){}}async function Yte(n,e=!0){n.checkVersion("3.9.1"),await n.addInteractor("externalBounce",t=>Promise.resolve(new $te(t)),e)}class K4{constructor(){this.distance=200,this.duration=.4,this.mix=!1}load(e){if(!Re(e)){if(e.distance!==void 0&&(this.distance=e.distance),e.duration!==void 0&&(this.duration=e.duration),e.mix!==void 0&&(this.mix=e.mix),e.opacity!==void 0&&(this.opacity=e.opacity),e.color!==void 0){const t=$o(this.color)?void 0:this.color;this.color=gr(e.color,i=>hs.create(t,i))}e.size!==void 0&&(this.size=e.size)}}}class Zte extends K4{constructor(){super(),this.selectors=[]}load(e){super.load(e),!Re(e)&&e.selectors!==void 0&&(this.selectors=e.selectors)}}class ene extends K4{load(e){super.load(e),!Re(e)&&(this.divs=gr(e.divs,t=>{const i=new Zte;return i.load(t),i}))}}var Lo;(function(n){n.color="color",n.opacity="opacity",n.size="size"})(Lo||(Lo={}));function qP(n,e,t,i){if(e>=t){const s=n+(e-t)*i;return Qr(s,n,e)}else if(e<t){const s=n-(t-e)*i;return Qr(s,e,n)}}const Qc="bubble",Q_=0,tne=0,nne=2,JP=1,XP=1,ine=0,sne=0,H_=.5,V_=1;class rne extends Yo{constructor(e,t){super(e),this._clickBubble=()=>{var u;const i=this.container,s=i.actualOptions,r=i.interactivity.mouse.clickPosition,o=s.interactivity.modes.bubble;if(!o||!r)return;i.bubble||(i.bubble={});const a=i.retina.bubbleModeDistance;if(!a||a<Q_)return;const l=i.particles.quadTree.queryCircle(r,a,h=>this.isEnabled(h)),{bubble:c}=i;for(const h of l){if(!c.clicking)continue;h.bubble.inRange=!c.durationEnd;const p=h.getPosition(),m=hr(p,r),g=(new Date().getTime()-(i.interactivity.mouse.clickTime??tne))/is;g>o.duration&&(c.durationEnd=!0),g>o.duration*nne&&(c.clicking=!1,c.durationEnd=!1);const v={bubbleObj:{optValue:i.retina.bubbleModeSize,value:h.bubble.radius},particlesObj:{optValue:Uo(h.options.size.value)*i.retina.pixelRatio,value:h.size.value},type:Lo.size};this._process(h,m,g,v);const y={bubbleObj:{optValue:o.opacity,value:h.bubble.opacity},particlesObj:{optValue:Uo(h.options.opacity.value),value:((u=h.opacity)==null?void 0:u.value)??JP},type:Lo.opacity};this._process(h,m,g,y),!c.durationEnd&&m<=a?this._hoverBubbleColor(h,m):delete h.bubble.color}},this._hoverBubble=()=>{const i=this.container,s=i.interactivity.mouse.position,r=i.retina.bubbleModeDistance;if(!r||r<Q_||!s)return;const o=i.particles.quadTree.queryCircle(s,r,a=>this.isEnabled(a));for(const a of o){a.bubble.inRange=!0;const l=a.getPosition(),c=hr(l,s),u=XP-c/r;c<=r?u>=sne&&i.interactivity.status===Vu&&(this._hoverBubbleSize(a,u),this._hoverBubbleOpacity(a,u),this._hoverBubbleColor(a,u)):this.reset(a),i.interactivity.status===O1&&this.reset(a)}},this._hoverBubbleColor=(i,s,r)=>{const o=this.container.actualOptions,a=r??o.interactivity.modes.bubble;if(a){if(!i.bubble.finalColor){const l=a.color;if(!l)return;const c=Lr(l);i.bubble.finalColor=hg(this._engine,c)}if(i.bubble.finalColor)if(a.mix){i.bubble.color=void 0;const l=i.getFillColor();i.bubble.color=l?k4(iT(l,i.bubble.finalColor,XP-s,s)):i.bubble.finalColor}else i.bubble.color=i.bubble.finalColor}},this._hoverBubbleOpacity=(i,s,r)=>{var p,m;const o=this.container,a=o.actualOptions,l=(r==null?void 0:r.opacity)??((p=a.interactivity.modes.bubble)==null?void 0:p.opacity);if(!l)return;const c=i.options.opacity.value,u=((m=i.opacity)==null?void 0:m.value)??JP,h=qP(u,l,Uo(c),s);h!==void 0&&(i.bubble.opacity=h)},this._hoverBubbleSize=(i,s,r)=>{const o=this.container,a=r!=null&&r.size?r.size*o.retina.pixelRatio:o.retina.bubbleModeSize;if(a===void 0)return;const l=Uo(i.options.size.value)*o.retina.pixelRatio,c=i.size.value,u=qP(c,a,l,s);u!==void 0&&(i.bubble.radius=u)},this._process=(i,s,r,o)=>{const a=this.container,l=o.bubbleObj.optValue,c=a.actualOptions,u=c.interactivity.modes.bubble;if(!u||l===void 0)return;const h=u.duration,p=a.retina.bubbleModeDistance,m=o.particlesObj.optValue,g=o.bubbleObj.value,v=o.particlesObj.value??ine,y=o.type;if(!(!p||p<Q_||l===m))if(a.bubble||(a.bubble={}),a.bubble.durationEnd)g&&(y===Lo.size&&delete i.bubble.radius,y===Lo.opacity&&delete i.bubble.opacity);else if(s<=p){if((g??v)!==l){const b=v-r*(v-l)/h;y===Lo.size&&(i.bubble.radius=b),y===Lo.opacity&&(i.bubble.opacity=b)}}else y===Lo.size&&delete i.bubble.radius,y===Lo.opacity&&delete i.bubble.opacity},this._singleSelectorHover=(i,s,r)=>{const o=this.container,a=document.querySelectorAll(s),l=o.actualOptions.interactivity.modes.bubble;!l||!a.length||a.forEach(c=>{const u=c,h=o.retina.pixelRatio,p={x:(u.offsetLeft+u.offsetWidth*H_)*h,y:(u.offsetTop+u.offsetHeight*H_)*h},m=u.offsetWidth*H_*h,g=r.type===bf.circle?new rs(p.x,p.y,m):new yo(u.offsetLeft*h,u.offsetTop*h,u.offsetWidth*h,u.offsetHeight*h),v=o.particles.quadTree.query(g,y=>this.isEnabled(y));for(const y of v){if(!g.contains(y.getPosition()))continue;y.bubble.inRange=!0;const A=l.divs,b=T4(A,u);(!y.bubble.div||y.bubble.div!==u)&&(this.clear(y,i,!0),y.bubble.div=u),this._hoverBubbleSize(y,V_,b),this._hoverBubbleOpacity(y,V_,b),this._hoverBubbleColor(y,V_,b)}})},this._engine=t,e.bubble||(e.bubble={}),this.handleClickMode=i=>{i===Qc&&(e.bubble||(e.bubble={}),e.bubble.clicking=!0)}}clear(e,t,i){e.bubble.inRange&&!i||(delete e.bubble.div,delete e.bubble.opacity,delete e.bubble.radius,delete e.bubble.color)}init(){const e=this.container,t=e.actualOptions.interactivity.modes.bubble;t&&(e.retina.bubbleModeDistance=t.distance*e.retina.pixelRatio,t.size!==void 0&&(e.retina.bubbleModeSize=t.size*e.retina.pixelRatio))}interact(e){const t=this.container.actualOptions,i=t.interactivity.events,s=i.onHover,r=i.onClick,o=s.enable,a=s.mode,l=r.enable,c=r.mode,u=i.onDiv;o&&ei(Qc,a)?this._hoverBubble():l&&ei(Qc,c)?this._clickBubble():tT(Qc,u,(h,p)=>this._singleSelectorHover(e,h,p))}isEnabled(e){const t=this.container,i=t.actualOptions,s=t.interactivity.mouse,r=((e==null?void 0:e.interactivity)??i.interactivity).events,{onClick:o,onDiv:a,onHover:l}=r,c=eT(Qc,a);return c||l.enable&&s.position||o.enable&&s.clickPosition?ei(Qc,l.mode)||ei(Qc,o.mode)||c:!1}loadModeOptions(e,...t){e.bubble||(e.bubble=new ene);for(const i of t)e.bubble.load(i==null?void 0:i.bubble)}reset(e){e.bubble.inRange=!1}}async function one(n,e=!0){n.checkVersion("3.9.1"),await n.addInteractor("externalBubble",t=>Promise.resolve(new rne(t,n)),e)}class ane{constructor(){this.opacity=.5}load(e){Re(e)||e.opacity!==void 0&&(this.opacity=e.opacity)}}class lne{constructor(){this.distance=80,this.links=new ane,this.radius=60}load(e){Re(e)||(e.distance!==void 0&&(this.distance=e.distance),this.links.load(e.links),e.radius!==void 0&&(this.radius=e.radius))}}const KP=0,$P=1,cne=0;function une(n,e,t,i){const s=Math.floor(t.getRadius()/e.getRadius()),r=e.getFillColor(),o=t.getFillColor();if(!r||!o)return;const a=e.getPosition(),l=t.getPosition(),c=iT(r,o,e.getRadius(),t.getRadius()),u=n.createLinearGradient(a.x,a.y,l.x,l.y);return u.addColorStop(KP,dg(r,i)),u.addColorStop(Qr(s,KP,$P),Oa(c,i)),u.addColorStop($P,dg(o,i)),u}function hne(n,e,t,i,s){Sm(n,i,s),n.lineWidth=e,n.strokeStyle=t,n.stroke()}function dne(n,e,t,i){const s=n.actualOptions,r=s.interactivity.modes.connect;if(r)return une(e,t,i,r.links.opacity)}function fne(n,e,t){n.canvas.draw(i=>{const s=dne(n,i,e,t);if(!s)return;const r=e.getPosition(),o=t.getPosition();hne(i,e.retina.linksWidth??cne,s,r,o)})}const pne="connect",YP=0;class mne extends Yo{constructor(e){super(e)}clear(){}init(){const e=this.container,t=e.actualOptions.interactivity.modes.connect;t&&(e.retina.connectModeDistance=t.distance*e.retina.pixelRatio,e.retina.connectModeRadius=t.radius*e.retina.pixelRatio)}interact(){const e=this.container;if(e.actualOptions.interactivity.events.onHover.enable&&e.interactivity.status==="pointermove"){const i=e.interactivity.mouse.position,{connectModeDistance:s,connectModeRadius:r}=e.retina;if(!s||s<YP||!r||r<YP||!i)return;const o=Math.abs(r),a=e.particles.quadTree.queryCircle(i,o,l=>this.isEnabled(l));a.forEach((l,c)=>{const u=l.getPosition(),h=1;for(const p of a.slice(c+h)){const m=p.getPosition(),g=Math.abs(s),v=Math.abs(u.x-m.x),y=Math.abs(u.y-m.y);v<g&&y<g&&fne(e,l,p)}})}}isEnabled(e){const t=this.container,i=t.interactivity.mouse,s=((e==null?void 0:e.interactivity)??t.actualOptions.interactivity).events;return s.onHover.enable&&i.position?ei(pne,s.onHover.mode):!1}loadModeOptions(e,...t){e.connect||(e.connect=new lne);for(const i of t)e.connect.load(i==null?void 0:i.connect)}reset(){}}async function gne(n,e=!0){n.checkVersion("3.9.1"),await n.addInteractor("externalConnect",t=>Promise.resolve(new mne(t)),e)}class Ane{constructor(){this.blink=!1,this.consent=!1,this.opacity=1}load(e){Re(e)||(e.blink!==void 0&&(this.blink=e.blink),e.color!==void 0&&(this.color=hs.create(this.color,e.color)),e.consent!==void 0&&(this.consent=e.consent),e.opacity!==void 0&&(this.opacity=e.opacity))}}class yne{constructor(){this.distance=100,this.links=new Ane}load(e){Re(e)||(e.distance!==void 0&&(this.distance=e.distance),this.links.load(e.links))}}const vne=0;function xne(n,e,t,i,s,r){Sm(n,t,i),n.strokeStyle=Oa(s,r),n.lineWidth=e,n.stroke()}function bne(n,e,t,i,s){n.canvas.draw(r=>{const o=e.getPosition();xne(r,e.retina.linksWidth??vne,o,s,t,i)})}const wne="grab",Ene=0,_ne=0;class Cne extends Yo{constructor(e,t){super(e),this._engine=t}clear(){}init(){const e=this.container,t=e.actualOptions.interactivity.modes.grab;t&&(e.retina.grabModeDistance=t.distance*e.retina.pixelRatio)}interact(){var a;const e=this.container,t=e.actualOptions,i=t.interactivity;if(!i.modes.grab||!i.events.onHover.enable||e.interactivity.status!==Vu)return;const s=e.interactivity.mouse.position;if(!s)return;const r=e.retina.grabModeDistance;if(!r||r<Ene)return;const o=e.particles.quadTree.queryCircle(s,r,l=>this.isEnabled(l));for(const l of o){const c=l.getPosition(),u=hr(c,s);if(u>r)continue;const h=i.modes.grab.links,p=h.opacity,m=p-u*p/r;if(m<=_ne)continue;const g=h.color??((a=l.options.links)==null?void 0:a.color);if(!e.particles.grabLineColor&&g){const y=i.modes.grab.links;e.particles.grabLineColor=N4(this._engine,g,y.blink,y.consent)}const v=W1(l,void 0,e.particles.grabLineColor);v&&bne(e,l,v,m,s)}}isEnabled(e){const t=this.container,i=t.interactivity.mouse,s=((e==null?void 0:e.interactivity)??t.actualOptions.interactivity).events;return s.onHover.enable&&!!i.position&&ei(wne,s.onHover.mode)}loadModeOptions(e,...t){e.grab||(e.grab=new yne);for(const i of t)e.grab.load(i==null?void 0:i.grab)}reset(){}}async function Sne(n,e=!0){n.checkVersion("3.9.1"),await n.addInteractor("externalGrab",t=>Promise.resolve(new Cne(t,n)),e)}const Mne="pause";class Ine extends Yo{constructor(e){super(e),this.handleClickMode=t=>{if(t!==Mne)return;const i=this.container;i.animationStatus?i.pause():i.play()}}clear(){}init(){}interact(){}isEnabled(){return!0}reset(){}}async function Tne(n,e=!0){n.checkVersion("3.9.1"),await n.addInteractor("externalPause",t=>Promise.resolve(new Ine(t)),e)}class Bne{constructor(){this.default=!0,this.groups=[],this.quantity=4}load(e){if(Re(e))return;e.default!==void 0&&(this.default=e.default),e.groups!==void 0&&(this.groups=e.groups.map(i=>i)),this.groups.length||(this.default=!0);const t=e.quantity;t!==void 0&&(this.quantity=on(t)),this.particles=gr(e.particles,i=>us({},i))}}const Rne="push",Dne=0;class Pne extends Yo{constructor(e){super(e),this.handleClickMode=t=>{if(t!==Rne)return;const i=this.container,s=i.actualOptions,r=s.interactivity.modes.push;if(!r)return;const o=ut(r.quantity);if(o<=Dne)return;const a=Nb([void 0,...r.groups]),l=a!==void 0?i.actualOptions.particles.groups[a]:void 0,c=Lr(r.particles),u=us(l,c);i.particles.push(o,i.interactivity.mouse,u,a)}}clear(){}init(){}interact(){}isEnabled(){return!0}loadModeOptions(e,...t){e.push||(e.push=new Bne);for(const i of t)e.push.load(i==null?void 0:i.push)}reset(){}}async function Lne(n,e=!0){n.checkVersion("3.9.1"),await n.addInteractor("externalPush",t=>Promise.resolve(new Pne(t)),e)}class kne{constructor(){this.quantity=2}load(e){if(Re(e))return;const t=e.quantity;t!==void 0&&(this.quantity=on(t))}}const Fne="remove";class Nne extends Yo{constructor(e){super(e),this.handleClickMode=t=>{const i=this.container,s=i.actualOptions;if(!s.interactivity.modes.remove||t!==Fne)return;const r=ut(s.interactivity.modes.remove.quantity);i.particles.removeQuantity(r)}}clear(){}init(){}interact(){}isEnabled(){return!0}loadModeOptions(e,...t){e.remove||(e.remove=new kne);for(const i of t)e.remove.load(i==null?void 0:i.remove)}reset(){}}async function One(n,e=!0){n.checkVersion("3.9.1"),await n.addInteractor("externalRemove",t=>Promise.resolve(new Nne(t)),e)}class $4{constructor(){this.distance=200,this.duration=.4,this.factor=100,this.speed=1,this.maxSpeed=50,this.easing=Ru.easeOutQuad}load(e){Re(e)||(e.distance!==void 0&&(this.distance=e.distance),e.duration!==void 0&&(this.duration=e.duration),e.easing!==void 0&&(this.easing=e.easing),e.factor!==void 0&&(this.factor=e.factor),e.speed!==void 0&&(this.speed=e.speed),e.maxSpeed!==void 0&&(this.maxSpeed=e.maxSpeed))}}class Une extends $4{constructor(){super(),this.selectors=[]}load(e){super.load(e),!Re(e)&&e.selectors!==void 0&&(this.selectors=e.selectors)}}class Gne extends $4{load(e){super.load(e),!Re(e)&&(this.divs=gr(e.divs,t=>{const i=new Une;return i.load(t),i}))}}const Hc="repulse",zne=0,Qne=6,Hne=3,Vne=2,jne=0,Wne=0,qne=1,j_=.5;class Jne extends Yo{constructor(e,t){super(t),this._clickRepulse=()=>{const i=this.container,s=i.actualOptions.interactivity.modes.repulse;if(!s)return;const r=i.repulse??{particles:[]};if(r.finish||(r.count||(r.count=0),r.count++,r.count===i.particles.count&&(r.finish=!0)),r.clicking){const o=i.retina.repulseModeDistance;if(!o||o<zne)return;const a=Math.pow(o/Qne,Hne),l=i.interactivity.mouse.clickPosition;if(l===void 0)return;const c=new rs(l.x,l.y,a),u=i.particles.quadTree.query(c,h=>this.isEnabled(h));for(const h of u){const{dx:p,dy:m,distance:g}=_s(l,h.position),v=g**Vne,y=s.speed,A=-a*y/v;if(v<=a){r.particles.push(h);const b=Li.create(p,m);b.length=A,h.velocity.setTo(b)}}}else if(r.clicking===!1){for(const o of r.particles)o.velocity.setTo(o.initialVelocity);r.particles=[]}},this._hoverRepulse=()=>{const i=this.container,s=i.interactivity.mouse.position,r=i.retina.repulseModeDistance;!r||r<jne||!s||this._processRepulse(s,r,new rs(s.x,s.y,r))},this._processRepulse=(i,s,r,o)=>{const a=this.container,l=a.particles.quadTree.query(r,y=>this.isEnabled(y)),c=a.actualOptions.interactivity.modes.repulse;if(!c)return;const{easing:u,speed:h,factor:p,maxSpeed:m}=c,g=this._engine.getEasing(u),v=((o==null?void 0:o.speed)??h)*p;for(const y of l){const{dx:A,dy:b,distance:w}=_s(y.position,i),E=Qr(g(qne-w/s)*v,Wne,m),M=Li.create(w?A/w*E:v,w?b/w*E:v);y.position.addTo(M)}},this._singleSelectorRepulse=(i,s)=>{const r=this.container,o=r.actualOptions.interactivity.modes.repulse;if(!o)return;const a=document.querySelectorAll(i);a.length&&a.forEach(l=>{const c=l,u=r.retina.pixelRatio,h={x:(c.offsetLeft+c.offsetWidth*j_)*u,y:(c.offsetTop+c.offsetHeight*j_)*u},p=c.offsetWidth*j_*u,m=s.type===bf.circle?new rs(h.x,h.y,p):new yo(c.offsetLeft*u,c.offsetTop*u,c.offsetWidth*u,c.offsetHeight*u),g=o.divs,v=T4(g,c);this._processRepulse(h,p,m,v)})},this._engine=e,t.repulse||(t.repulse={particles:[]}),this.handleClickMode=i=>{const s=this.container.actualOptions,r=s.interactivity.modes.repulse;if(!r||i!==Hc)return;t.repulse||(t.repulse={particles:[]});const o=t.repulse;o.clicking=!0,o.count=0;for(const a of t.repulse.particles)this.isEnabled(a)&&a.velocity.setTo(a.initialVelocity);o.particles=[],o.finish=!1,setTimeout(()=>{t.destroyed||(o.clicking=!1)},r.duration*is)}}clear(){}init(){const e=this.container,t=e.actualOptions.interactivity.modes.repulse;t&&(e.retina.repulseModeDistance=t.distance*e.retina.pixelRatio)}interact(){const e=this.container,t=e.actualOptions,i=e.interactivity.status===Vu,s=t.interactivity.events,r=s.onHover,o=r.enable,a=r.mode,l=s.onClick,c=l.enable,u=l.mode,h=s.onDiv;i&&o&&ei(Hc,a)?this._hoverRepulse():c&&ei(Hc,u)?this._clickRepulse():tT(Hc,h,(p,m)=>this._singleSelectorRepulse(p,m))}isEnabled(e){const t=this.container,i=t.actualOptions,s=t.interactivity.mouse,r=((e==null?void 0:e.interactivity)??i.interactivity).events,o=r.onDiv,a=r.onHover,l=r.onClick,c=eT(Hc,o);if(!(c||a.enable&&s.position||l.enable&&s.clickPosition))return!1;const u=a.mode,h=l.mode;return ei(Hc,u)||ei(Hc,h)||c}loadModeOptions(e,...t){e.repulse||(e.repulse=new Gne);for(const i of t)e.repulse.load(i==null?void 0:i.repulse)}reset(){}}async function Xne(n,e=!0){n.checkVersion("3.9.1"),await n.addInteractor("externalRepulse",t=>Promise.resolve(new Jne(n,t)),e)}class Kne{constructor(){this.factor=3,this.radius=200}load(e){Re(e)||(e.factor!==void 0&&(this.factor=e.factor),e.radius!==void 0&&(this.radius=e.radius))}}const $ne="slow",Yne=0;class Zne extends Yo{constructor(e){super(e)}clear(e,t,i){e.slow.inRange&&!i||(e.slow.factor=1)}init(){const e=this.container,t=e.actualOptions.interactivity.modes.slow;t&&(e.retina.slowModeRadius=t.radius*e.retina.pixelRatio)}interact(){}isEnabled(e){const t=this.container,i=t.interactivity.mouse,s=((e==null?void 0:e.interactivity)??t.actualOptions.interactivity).events;return s.onHover.enable&&!!i.position&&ei($ne,s.onHover.mode)}loadModeOptions(e,...t){e.slow||(e.slow=new Kne);for(const i of t)e.slow.load(i==null?void 0:i.slow)}reset(e){e.slow.inRange=!1;const t=this.container,i=t.actualOptions,s=t.interactivity.mouse.position,r=t.retina.slowModeRadius,o=i.interactivity.modes.slow;if(!o||!r||r<Yne||!s)return;const a=e.getPosition(),l=hr(s,a),c=l/r,u=o.factor,{slow:h}=e;l>r||(h.inRange=!0,h.factor=c/u)}}async function eie(n,e=!0){n.checkVersion("3.9.1"),await n.addInteractor("externalSlow",t=>Promise.resolve(new Zne(t)),e)}const tie=0,nie=1,iie=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d.]+%?\))|currentcolor/gi;function sie(n,e,t){const{svgData:i}=n;if(!i)return"";const s=dg(e,t);if(i.includes("fill"))return i.replace(iie,()=>s);const r=i.indexOf(">");return`${i.substring(tie,r)} fill="${s}"${i.substring(r)}`}async function Ob(n){return new Promise(e=>{n.loading=!0;const t=new Image;n.element=t,t.addEventListener("load",()=>{n.loading=!1,e()}),t.addEventListener("error",()=>{n.element=void 0,n.error=!0,n.loading=!1,Wu().error(`${zr} loading image: ${n.source}`),e()}),t.src=n.source})}async function rie(n){if(n.type!=="svg"){await Ob(n);return}n.loading=!0;const e=await fetch(n.source);e.ok?n.svgData=await e.text():(Wu().error(`${zr} Image not found`),n.error=!0),n.loading=!1}function oie(n,e,t,i){var o;const s=sie(n,t,((o=i.opacity)==null?void 0:o.value)??nie),r={color:t,gif:e.gif,data:{...n,svgData:s},loaded:!1,ratio:e.width/e.height,replaceColor:e.replaceColor,source:e.src};return new Promise(a=>{const l=new Blob([s],{type:"image/svg+xml"}),c=URL||window.URL||window.webkitURL||window,u=c.createObjectURL(l),h=new Image;h.addEventListener("load",()=>{r.loaded=!0,r.element=h,a(r),c.revokeObjectURL(u)});const p=async()=>{c.revokeObjectURL(u);const m={...n,error:!1,loading:!0};await Ob(m),r.loaded=!0,r.element=m.element,a(r)};h.addEventListener("error",()=>void p()),h.src=u})}const W_=[0,4,2,1],ZP=[8,8,4,2];class aie{constructor(e){this.pos=0,this.data=new Uint8ClampedArray(e)}getString(e){const t=this.data.slice(this.pos,this.pos+e);return this.pos+=t.length,t.reduce((i,s)=>i+String.fromCharCode(s),"")}nextByte(){return this.data[this.pos++]}nextTwoBytes(){return this.pos+=2,this.data[this.pos-2]+(this.data[this.pos-1]<<8)}readSubBlocks(){let e="",t=0;const i=0,s=0;do{t=this.data[this.pos++];for(let r=t;--r>=i;e+=String.fromCharCode(this.data[this.pos++]));}while(t!==s);return e}readSubBlocksBin(){let e=this.data[this.pos],t=0;const i=0,s=1;for(let o=0;e!==i;o+=e+s,e=this.data[this.pos+o])t+=e;const r=new Uint8Array(t);e=this.data[this.pos++];for(let o=0;e!==i;e=this.data[this.pos++])for(let a=e;--a>=i;r[o++]=this.data[this.pos++]);return r}skipSubBlocks(){for(const e=1,t=0;this.data[this.pos]!==t;this.pos+=this.data[this.pos]+e);this.pos++}}var eo;(function(n){n[n.Replace=0]="Replace",n[n.Combine=1]="Combine",n[n.RestoreBackground=2]="RestoreBackground",n[n.RestorePrevious=3]="RestorePrevious",n[n.UndefinedA=4]="UndefinedA",n[n.UndefinedB=5]="UndefinedB",n[n.UndefinedC=6]="UndefinedC",n[n.UndefinedD=7]="UndefinedD"})(eo||(eo={}));var Da;(function(n){n[n.Extension=33]="Extension",n[n.ApplicationExtension=255]="ApplicationExtension",n[n.GraphicsControlExtension=249]="GraphicsControlExtension",n[n.PlainTextExtension=1]="PlainTextExtension",n[n.CommentExtension=254]="CommentExtension",n[n.Image=44]="Image",n[n.EndOfFile=59]="EndOfFile"})(Da||(Da={}));const Ns={x:0,y:0},lie=0,eL=.5,cie=0,tL=0,J1=0;function Y4(n,e){const t=[];for(let i=0;i<e;i++)t.push({r:n.data[n.pos],g:n.data[n.pos+1],b:n.data[n.pos+2]}),n.pos+=3;return t}function uie(n,e,t,i){switch(n.nextByte()){case Da.GraphicsControlExtension:{const s=e.frames[t(!1)];n.pos++;const r=n.nextByte();s.GCreserved=(r&224)>>>5,s.disposalMethod=(r&28)>>>2,s.userInputDelayFlag=(r&2)===2;const o=(r&1)===1;s.delayTime=n.nextTwoBytes()*10;const a=n.nextByte();o&&i(a),n.pos++;break}case Da.ApplicationExtension:{n.pos++;const s={identifier:n.getString(8),authenticationCode:n.getString(3),data:n.readSubBlocksBin()};e.applicationExtensions.push(s);break}case Da.CommentExtension:{e.comments.push([t(!1),n.readSubBlocks()]);break}case Da.PlainTextExtension:{if(e.globalColorTable.length===0)throw new EvalError("plain text extension without global color table");n.pos++,e.frames[t(!1)].plainTextData={left:n.nextTwoBytes(),top:n.nextTwoBytes(),width:n.nextTwoBytes(),height:n.nextTwoBytes(),charSize:{width:n.nextTwoBytes(),height:n.nextTwoBytes()},foregroundColor:n.nextByte(),backgroundColor:n.nextByte(),text:n.readSubBlocks()};break}default:n.skipSubBlocks();break}}async function hie(n,e,t,i,s,r){const o=e.frames[i(!0)];o.left=n.nextTwoBytes(),o.top=n.nextTwoBytes(),o.width=n.nextTwoBytes(),o.height=n.nextTwoBytes();const a=n.nextByte(),l=(a&128)===128,c=(a&64)===64;o.sortFlag=(a&32)===32,o.reserved=(a&24)>>>3;const u=1<<(a&7)+1;l&&(o.localColorTable=Y4(n,u));const h=A=>{const{r:b,g:w,b:E}=(l?o.localColorTable:e.globalColorTable)[A];return A!==s(null)?{r:b,g:w,b:E,a:255}:{r:b,g:w,b:E,a:t?~~((b+w+E)/3):0}},p=(()=>{try{return new ImageData(o.width,o.height,{colorSpace:"srgb"})}catch(A){if(A instanceof DOMException&&A.name==="IndexSizeError")return null;throw A}})();if(p==null)throw new EvalError("GIF frame size is to large");const m=n.nextByte(),g=n.readSubBlocksBin(),v=1<<m,y=(A,b)=>{const w=A>>>3,E=A&7;return(g[w]+(g[w+1]<<8)+(g[w+2]<<16)&(1<<b)-1<<E)>>>E};if(c){for(let A=0,b=m+1,w=0,E=[[0]],M=0;M<4;M++){if(W_[M]<o.height){let I=0,D=0,B=!1;for(;!B;){const R=A;if(A=y(w,b),w+=b+1,A===v){b=m+1,E.length=v+2;for(let T=0;T<E.length;T++)E[T]=T<v?[T]:[]}else{A>=E.length?E.push(E[R].concat(E[R][0])):R!==v&&E.push(E[R].concat(E[A][0]));for(const T of E[A]){const{r:k,g:H,b:Q,a:W}=h(T);p.data.set([k,H,Q,W],W_[M]*o.width+ZP[M]*D+I%(o.width*4)),I+=4}E.length===1<<b&&b<12&&b++}I===o.width*4*(D+1)&&(D++,W_[M]+ZP[M]*D>=o.height&&(B=!0))}}r==null||r(n.pos/(n.data.length-1),i(!1)+1,p,{x:o.left,y:o.top},{width:e.width,height:e.height})}o.image=p,o.bitmap=await createImageBitmap(p)}else{let A=0,b=m+1,w=0,E=-4,M=!1;const I=[[0]];for(;!M;){const D=A;if(A=y(w,b),w+=b,A===v){b=m+1,I.length=v+2;for(let B=0;B<I.length;B++)I[B]=B<v?[B]:[]}else{if(A===v+1){M=!0;break}A>=I.length?I.push(I[D].concat(I[D][0])):D!==v&&I.push(I[D].concat(I[A][0]));for(const B of I[A]){const{r:R,g:T,b:k,a:H}=h(B);p.data.set([R,T,k,H],E+=4)}I.length>=1<<b&&b<12&&b++}}o.image=p,o.bitmap=await createImageBitmap(p),r==null||r((n.pos+1)/n.data.length,i(!1)+1,o.image,{x:o.left,y:o.top},{width:e.width,height:e.height})}}async function die(n,e,t,i,s,r){switch(n.nextByte()){case Da.EndOfFile:return!0;case Da.Image:await hie(n,e,t,i,s,r);break;case Da.Extension:uie(n,e,i,s);break;default:throw new EvalError("undefined block found")}return!1}function fie(n){for(const e of n.applicationExtensions)if(e.identifier+e.authenticationCode==="NETSCAPE2.0")return e.data[1]+(e.data[2]<<8);return NaN}async function pie(n,e,t){t||(t=!1);const i=await fetch(n);if(!i.ok&&i.status===404)throw new EvalError("file not found");const s=await i.arrayBuffer(),r={width:0,height:0,totalTime:0,colorRes:0,pixelAspectRatio:0,frames:[],sortFlag:!1,globalColorTable:[],backgroundImage:new ImageData(1,1,{colorSpace:"srgb"}),comments:[],applicationExtensions:[]},o=new aie(new Uint8ClampedArray(s));if(o.getString(6)!=="GIF89a")throw new Error("not a supported GIF file");r.width=o.nextTwoBytes(),r.height=o.nextTwoBytes();const a=o.nextByte(),l=(a&128)===128;r.colorRes=(a&112)>>>4,r.sortFlag=(a&8)===8;const c=1<<(a&7)+1,u=o.nextByte();r.pixelAspectRatio=o.nextByte(),r.pixelAspectRatio!==0&&(r.pixelAspectRatio=(r.pixelAspectRatio+15)/64),l&&(r.globalColorTable=Y4(o,c));const h=(()=>{try{return new ImageData(r.width,r.height,{colorSpace:"srgb"})}catch(E){if(E instanceof DOMException&&E.name==="IndexSizeError")return null;throw E}})();if(h==null)throw new Error("GIF frame size is to large");const{r:p,g:m,b:g}=r.globalColorTable[u];h.data.set(l?[p,m,g,255]:[0,0,0,0]);for(let E=4;E<h.data.length;E*=2)h.data.copyWithin(E,0,E);r.backgroundImage=h;let v=-1,y=!0,A=-1;const b=E=>(E&&(y=!0),v),w=E=>(E!=null&&(A=E),A);try{do y&&(r.frames.push({left:0,top:0,width:0,height:0,disposalMethod:eo.Replace,image:new ImageData(1,1,{colorSpace:"srgb"}),plainTextData:null,userInputDelayFlag:!1,delayTime:0,sortFlag:!1,localColorTable:[],reserved:0,GCreserved:0}),v++,A=-1,y=!1);while(!await die(o,r,t,b,w,e));r.frames.length--;for(const E of r.frames){if(E.userInputDelayFlag&&E.delayTime===0){r.totalTime=1/0;break}r.totalTime+=E.delayTime}return r}catch(E){throw E instanceof EvalError?new Error(`error while parsing frame ${v} "${E.message}"`):E}}function mie(n){const{context:e,radius:t,particle:i,delta:s}=n,r=i.image;if(!(r!=null&&r.gifData)||!r.gif)return;const o=new OffscreenCanvas(r.gifData.width,r.gifData.height),a=o.getContext("2d");if(!a)throw new Error("could not create offscreen canvas context");a.imageSmoothingQuality="low",a.imageSmoothingEnabled=!1,a.clearRect(Ns.x,Ns.y,o.width,o.height),i.gifLoopCount===void 0&&(i.gifLoopCount=r.gifLoopCount??J1);let l=i.gifFrame??lie;const c={x:-r.gifData.width*eL,y:-r.gifData.height*eL},u=r.gifData.frames[l];if(i.gifTime===void 0&&(i.gifTime=cie),!!u.bitmap){switch(e.scale(t/r.gifData.width,t/r.gifData.height),u.disposalMethod){case eo.UndefinedA:case eo.UndefinedB:case eo.UndefinedC:case eo.UndefinedD:case eo.Replace:a.drawImage(u.bitmap,u.left,u.top),e.drawImage(o,c.x,c.y),a.clearRect(Ns.x,Ns.y,o.width,o.height);break;case eo.Combine:a.drawImage(u.bitmap,u.left,u.top),e.drawImage(o,c.x,c.y);break;case eo.RestoreBackground:a.drawImage(u.bitmap,u.left,u.top),e.drawImage(o,c.x,c.y),a.clearRect(Ns.x,Ns.y,o.width,o.height),r.gifData.globalColorTable.length?a.putImageData(r.gifData.backgroundImage,c.x,c.y):a.putImageData(r.gifData.frames[tL].image,c.x+u.left,c.y+u.top);break;case eo.RestorePrevious:{const h=a.getImageData(Ns.x,Ns.y,o.width,o.height);a.drawImage(u.bitmap,u.left,u.top),e.drawImage(o,c.x,c.y),a.clearRect(Ns.x,Ns.y,o.width,o.height),a.putImageData(h,Ns.x,Ns.y)}break}if(i.gifTime+=s.value,i.gifTime>u.delayTime){if(i.gifTime-=u.delayTime,++l>=r.gifData.frames.length){if(--i.gifLoopCount<=J1)return;l=tL,a.clearRect(Ns.x,Ns.y,o.width,o.height)}i.gifFrame=l}e.scale(r.gifData.width/t,r.gifData.height/t)}}async function gie(n){if(n.type!=="gif"){await Ob(n);return}n.loading=!0;try{n.gifData=await pie(n.source),n.gifLoopCount=fie(n.gifData)??J1,n.gifLoopCount||(n.gifLoopCount=1/0)}catch{n.error=!0}n.loading=!1}const Aie=2,yie=1,vie=12,xie=1;class bie{constructor(e){this.validTypes=["image","images"],this.loadImageShape=async t=>{if(!this._engine.loadImage)throw new Error(`${zr} image shape not initialized`);await this._engine.loadImage({gif:t.gif,name:t.name,replaceColor:t.replaceColor??!1,src:t.src})},this._engine=e}addImage(e){this._engine.images||(this._engine.images=[]),this._engine.images.push(e)}draw(e){const{context:t,radius:i,particle:s,opacity:r}=e,o=s.image,a=o==null?void 0:o.element;if(o){if(t.globalAlpha=r,o.gif&&o.gifData)mie(e);else if(a){const l=o.ratio,c={x:-i,y:-i},u=i*Aie;t.drawImage(a,c.x,c.y,u,u/l)}t.globalAlpha=yie}}getSidesCount(){return vie}async init(e){const t=e.actualOptions;if(!(!t.preload||!this._engine.loadImage))for(const i of t.preload)await this._engine.loadImage(i)}loadShape(e){if(e.shape!=="image"&&e.shape!=="images")return;this._engine.images||(this._engine.images=[]);const t=e.shapeData;if(!t)return;this._engine.images.find(s=>s.name===t.name||s.source===t.src)||this.loadImageShape(t).then(()=>{this.loadShape(e)})}particleInit(e,t){if(t.shape!=="image"&&t.shape!=="images")return;this._engine.images||(this._engine.images=[]);const i=this._engine.images,s=t.shapeData;if(!s)return;const r=t.getFillColor(),o=i.find(l=>l.name===s.name||l.source===s.src);if(!o)return;const a=s.replaceColor??o.replaceColor;if(o.loading){setTimeout(()=>{this.particleInit(e,t)});return}(async()=>{let l;o.svgData&&r?l=await oie(o,s,r,t):l={color:r,data:o,element:o.element,gif:o.gif,gifData:o.gifData,gifLoopCount:o.gifLoopCount,loaded:!0,ratio:s.width&&s.height?s.width/s.height:o.ratio??xie,replaceColor:a,source:s.src},l.ratio||(l.ratio=1);const c=s.fill??t.shapeFill,u=s.close??t.shapeClose,h={image:l,fill:c,close:u};t.image=h.image,t.shapeFill=h.fill,t.shapeClose=h.close})()}}class wie{constructor(){this.src="",this.gif=!1}load(e){Re(e)||(e.gif!==void 0&&(this.gif=e.gif),e.height!==void 0&&(this.height=e.height),e.name!==void 0&&(this.name=e.name),e.replaceColor!==void 0&&(this.replaceColor=e.replaceColor),e.src!==void 0&&(this.src=e.src),e.width!==void 0&&(this.width=e.width))}}class Eie{constructor(e){this.id="imagePreloader",this._engine=e}async getPlugin(){return await Promise.resolve(),{}}loadOptions(e,t){if(!(t!=null&&t.preload))return;e.preload||(e.preload=[]);const i=e.preload;for(const s of t.preload){const r=i.find(o=>o.name===s.name||o.src===s.src);if(r)r.load(s);else{const o=new wie;o.load(s),i.push(o)}}}needsPlugin(){return!0}}const _ie=3;function Cie(n){n.loadImage||(n.loadImage=async e=>{if(!e.name&&!e.src)throw new Error(`${zr} no image source provided`);if(n.images||(n.images=[]),!n.images.find(t=>t.name===e.name||t.source===e.src))try{const t={gif:e.gif??!1,name:e.name??e.src,source:e.src,type:e.src.substring(e.src.length-_ie),error:!1,loading:!0,replaceColor:e.replaceColor,ratio:e.width&&e.height?e.width/e.height:void 0};n.images.push(t);let i;e.gif?i=gie:i=e.replaceColor?rie:Ob,await i(t)}catch{throw new Error(`${zr} ${e.name??e.src} not found`)}})}async function Sie(n,e=!0){n.checkVersion("3.9.1"),Cie(n);const t=new Eie(n);await n.addPlugin(t,e),await n.addShape(new bie(n),e)}class Mie extends sh{constructor(){super(),this.sync=!1}load(e){Re(e)||(super.load(e),e.sync!==void 0&&(this.sync=e.sync))}}class Iie extends sh{constructor(){super(),this.sync=!1}load(e){Re(e)||(super.load(e),e.sync!==void 0&&(this.sync=e.sync))}}class Tie{constructor(){this.count=0,this.delay=new Mie,this.duration=new Iie}load(e){Re(e)||(e.count!==void 0&&(this.count=e.count),this.delay.load(e.delay),this.duration.load(e.duration))}}const Qh=0,Bie=-1,nL=0,iL=0;function Rie(n,e,t){if(!n.life)return;const i=n.life;let s=!1;if(n.spawning)if(i.delayTime+=e.value,i.delayTime>=n.life.delay)s=!0,n.spawning=!1,i.delayTime=Qh,i.time=Qh;else return;if(i.duration===Bie||n.spawning||(s?i.time=Qh:i.time+=e.value,i.time<i.duration))return;if(i.time=Qh,n.life.count>nL&&n.life.count--,n.life.count===nL){n.destroy();return}const r=on(iL,t.width),o=on(iL,t.width);n.position.x=rr(r),n.position.y=rr(o),n.spawning=!0,i.delayTime=Qh,i.time=Qh,n.reset();const a=n.options.life;a&&(i.delay=ut(a.delay.value)*is,i.duration=ut(a.duration.value)*is)}const Vc=0,sL=1,rL=-1;class Die{constructor(e){this.container=e}init(e){const t=this.container,i=e.options,s=i.life;s&&(e.life={delay:t.retina.reduceFactor?ut(s.delay.value)*(s.delay.sync?sL:gn())/t.retina.reduceFactor*is:Vc,delayTime:Vc,duration:t.retina.reduceFactor?ut(s.duration.value)*(s.duration.sync?sL:gn())/t.retina.reduceFactor*is:Vc,time:Vc,count:s.count},e.life.duration<=Vc&&(e.life.duration=rL),e.life.count<=Vc&&(e.life.count=rL),e.life&&(e.spawning=e.life.delay>Vc))}isEnabled(e){return!e.destroyed}loadOptions(e,...t){e.life||(e.life=new Tie);for(const i of t)e.life.load(i==null?void 0:i.life)}update(e,t){!this.isEnabled(e)||!e.life||Rie(e,t,this.container.canvas.size)}}async function Pie(n,e=!0){n.checkVersion("3.9.1"),await n.addParticleUpdater("life",async t=>Promise.resolve(new Die(t)),e)}function Lie(n){const{context:e,particle:t,radius:i}=n,s=t.shapeData,r=0;e.moveTo(-i,r),e.lineTo(i,r),e.lineCap=(s==null?void 0:s.cap)??"butt"}const kie=1;class Fie{constructor(){this.validTypes=["line"]}draw(e){Lie(e)}getSidesCount(){return kie}}async function Nie(n,e=!0){n.checkVersion("3.9.1"),await n.addShape(new Fie,e)}const oL=.5;class Oie{init(){}isEnabled(e){return!qu()&&!e.destroyed&&e.container.actualOptions.interactivity.events.onHover.parallax.enable}move(e){const t=e.container,i=t.actualOptions,s=i.interactivity.events.onHover.parallax;if(qu()||!s.enable)return;const r=s.force,o=t.interactivity.mouse.position;if(!o)return;const a=t.canvas.size,l={x:a.width*oL,y:a.height*oL},c=s.smooth,u=e.getRadius()/r,h={x:(o.x-l.x)*u,y:(o.y-l.y)*u},{offset:p}=e;p.x+=(h.x-p.x)/c,p.y+=(h.y-p.y)/c}}async function Uie(n,e=!0){n.checkVersion("3.9.1"),await n.addMover("parallax",()=>Promise.resolve(new Oie),e)}const aL=1e3,Gie=1;class zie extends oT{constructor(e){super(e)}clear(){}init(){}interact(e){const t=this.container;e.attractDistance===void 0&&(e.attractDistance=ut(e.options.move.attract.distance)*t.retina.pixelRatio);const i=e.attractDistance,s=e.getPosition(),r=t.particles.quadTree.queryCircle(s,i);for(const o of r){if(e===o||!o.options.move.attract.enable||o.destroyed||o.spawning)continue;const a=o.getPosition(),{dx:l,dy:c}=_s(s,a),u=e.options.move.attract.rotate,h=l/(u.x*aL),p=c/(u.y*aL),m=o.size.value/e.size.value,g=Gie/m;e.velocity.x-=h*m,e.velocity.y-=p*m,o.velocity.x+=h*g,o.velocity.y+=p*g}}isEnabled(e){return e.options.move.attract.enable}reset(){}}async function Qie(n,e=!0){n.checkVersion("3.9.1"),await n.addInteractor("particlesAttract",t=>Promise.resolve(new zie(t)),e)}const Hie=.5,Vie=10,jie=0;function lL(n,e,t,i,s,r){const o=Qr(n.options.collisions.absorb.speed*s.factor/Vie,jie,i);n.size.value+=o*Hie,t.size.value-=o,i<=r&&(t.size.value=0,t.destroy())}function Wie(n,e,t,i){const s=n.getRadius(),r=e.getRadius();s===void 0&&r!==void 0?n.destroy():s!==void 0&&r===void 0?e.destroy():s!==void 0&&r!==void 0&&(s>=r?lL(n,s,e,r,t,i):lL(e,r,n,s,t,i))}const cL=n=>{n.collisionMaxSpeed===void 0&&(n.collisionMaxSpeed=ut(n.options.collisions.maxSpeed)),n.velocity.length>n.collisionMaxSpeed&&(n.velocity.length=n.collisionMaxSpeed)};function Z4(n,e){B4(V1(n),V1(e)),cL(n),cL(e)}function qie(n,e){!n.unbreakable&&!e.unbreakable&&Z4(n,e),n.getRadius()===void 0&&e.getRadius()!==void 0?n.destroy():n.getRadius()!==void 0&&e.getRadius()===void 0?e.destroy():n.getRadius()!==void 0&&e.getRadius()!==void 0&&(n.getRadius()>=e.getRadius()?e:n).destroy()}function Jie(n,e,t,i){switch(n.options.collisions.mode){case qd.absorb:{Wie(n,e,t,i);break}case qd.bounce:{Z4(n,e);break}case qd.destroy:{qie(n,e);break}}}const Xie=2;class Kie extends oT{constructor(e){super(e)}clear(){}init(){}interact(e,t){if(e.destroyed||e.spawning)return;const i=this.container,s=e.getPosition(),r=e.getRadius(),o=i.particles.quadTree.queryCircle(s,r*Xie);for(const a of o){if(e===a||!a.options.collisions.enable||e.options.collisions.mode!==a.options.collisions.mode||a.destroyed||a.spawning)continue;const l=a.getPosition(),c=a.getRadius();if(Math.abs(Math.round(s.z)-Math.round(l.z))>r+c)continue;const u=hr(s,l),h=r+c;u>h||Jie(e,a,t,i.retina.pixelRatio)}}isEnabled(e){return e.options.collisions.enable}reset(){}}async function $ie(n,e=!0){n.checkVersion("3.9.1"),await n.addInteractor("particlesCollisions",t=>Promise.resolve(new Kie(t)),e)}const q_=2;class Yie extends rs{constructor(e,t,i,s){super(e,t,i),this.canvasSize=s,this.canvasSize={...s}}contains(e){const{width:t,height:i}=this.canvasSize,{x:s,y:r}=e;return super.contains(e)||super.contains({x:s-t,y:r})||super.contains({x:s-t,y:r-i})||super.contains({x:s,y:r-i})}intersects(e){if(super.intersects(e))return!0;const t=e,i=e,s={x:e.position.x-this.canvasSize.width,y:e.position.y-this.canvasSize.height};if(i.radius!==void 0){const r=new rs(s.x,s.y,i.radius*q_);return super.intersects(r)}else if(t.size!==void 0){const r=new yo(s.x,s.y,t.size.width*q_,t.size.height*q_);return super.intersects(r)}return!1}}class Zie{constructor(){this.blur=5,this.color=new hs,this.color.value="#000",this.enable=!1}load(e){Re(e)||(e.blur!==void 0&&(this.blur=e.blur),this.color=hs.create(this.color,e.color),e.enable!==void 0&&(this.enable=e.enable))}}class ese{constructor(){this.enable=!1,this.frequency=1}load(e){Re(e)||(e.color!==void 0&&(this.color=hs.create(this.color,e.color)),e.enable!==void 0&&(this.enable=e.enable),e.frequency!==void 0&&(this.frequency=e.frequency),e.opacity!==void 0&&(this.opacity=e.opacity))}}class tse{constructor(){this.blink=!1,this.color=new hs,this.color.value="#fff",this.consent=!1,this.distance=100,this.enable=!1,this.frequency=1,this.opacity=1,this.shadow=new Zie,this.triangles=new ese,this.width=1,this.warp=!1}load(e){Re(e)||(e.id!==void 0&&(this.id=e.id),e.blink!==void 0&&(this.blink=e.blink),this.color=hs.create(this.color,e.color),e.consent!==void 0&&(this.consent=e.consent),e.distance!==void 0&&(this.distance=e.distance),e.enable!==void 0&&(this.enable=e.enable),e.frequency!==void 0&&(this.frequency=e.frequency),e.opacity!==void 0&&(this.opacity=e.opacity),this.shadow.load(e.shadow),this.triangles.load(e.triangles),e.width!==void 0&&(this.width=e.width),e.warp!==void 0&&(this.warp=e.warp))}}const uL=2,nse=1,dy={x:0,y:0},ise=0;function sse(n,e,t,i,s){const{dx:r,dy:o,distance:a}=_s(n,e);if(!s||a<=t)return a;const l={x:Math.abs(r),y:Math.abs(o)},c={x:Math.min(l.x,i.width-l.x),y:Math.min(l.y,i.height-l.y)};return Math.sqrt(c.x**uL+c.y**uL)}class rse extends oT{constructor(e,t){super(e),this._setColor=i=>{if(!i.options.links)return;const s=this._linkContainer,r=i.options.links;let o=r.id===void 0?s.particles.linksColor:s.particles.linksColors.get(r.id);if(o)return;const a=r.color;o=N4(this._engine,a,r.blink,r.consent),r.id===void 0?s.particles.linksColor=o:s.particles.linksColors.set(r.id,o)},this._linkContainer=e,this._engine=t}clear(){}init(){this._linkContainer.particles.linksColor=void 0,this._linkContainer.particles.linksColors=new Map}interact(e){if(!e.options.links)return;e.links=[];const t=e.getPosition(),i=this.container,s=i.canvas.size;if(t.x<dy.x||t.y<dy.y||t.x>s.width||t.y>s.height)return;const r=e.options.links,o=r.opacity,a=e.retina.linksDistance??ise,l=r.warp;let c;l?c=new Yie(t.x,t.y,a,s):c=new rs(t.x,t.y,a);const u=i.particles.quadTree.query(c);for(const h of u){const p=h.options.links;if(e===h||!(p!=null&&p.enable)||r.id!==p.id||h.spawning||h.destroyed||!h.links||e.links.some(y=>y.destination===h)||h.links.some(y=>y.destination===e))continue;const m=h.getPosition();if(m.x<dy.x||m.y<dy.y||m.x>s.width||m.y>s.height)continue;const g=sse(t,m,a,s,l&&p.warp);if(g>a)continue;const v=(nse-g/a)*o;this._setColor(e),e.links.push({destination:h,opacity:v})}}isEnabled(e){var t;return!!((t=e.options.links)!=null&&t.enable)}loadParticlesOptions(e,...t){e.links||(e.links=new tse);for(const i of t)e.links.load(i==null?void 0:i.links)}reset(){}}async function ose(n,e=!0){await n.addInteractor("particlesLinks",async t=>Promise.resolve(new rse(t,n)),e)}function ase(n,e,t,i){n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.lineTo(i.x,i.y),n.closePath()}function lse(n){let e=!1;const{begin:t,end:i,engine:s,maxDistance:r,context:o,canvasSize:a,width:l,backgroundMask:c,colorLine:u,opacity:h,links:p}=n;if(hr(t,i)<=r)Sm(o,t,i),e=!0;else if(p.warp){let g,v;const y={x:i.x-a.width,y:i.y},A=_s(t,y);if(A.distance<=r){const b=t.y-A.dy/A.dx*t.x;g={x:0,y:b},v={x:a.width,y:b}}else{const b={x:i.x,y:i.y-a.height},w=_s(t,b);if(w.distance<=r){const M=-(t.y-w.dy/w.dx*t.x)/(w.dy/w.dx);g={x:M,y:0},v={x:M,y:a.height}}else{const E={x:i.x-a.width,y:i.y-a.height},M=_s(t,E);if(M.distance<=r){const I=t.y-M.dy/M.dx*t.x;g={x:-I/(M.dy/M.dx),y:I},v={x:g.x+a.width,y:g.y+a.height}}}}g&&v&&(Sm(o,t,g),Sm(o,i,v),e=!0)}if(!e)return;o.lineWidth=l,c.enable&&(o.globalCompositeOperation=c.composite),o.strokeStyle=Oa(u,h);const{shadow:m}=p;if(m.enable){const g=mo(s,m.color);g&&(o.shadowBlur=m.blur,o.shadowColor=Oa(g))}o.stroke()}function cse(n){const{context:e,pos1:t,pos2:i,pos3:s,backgroundMask:r,colorTriangle:o,opacityTriangle:a}=n;ase(e,t,i,s),r.enable&&(e.globalCompositeOperation=r.composite),e.fillStyle=Oa(o,a),e.fill()}function use(n){return n.sort((e,t)=>e-t),n.join("_")}function hL(n,e){const t=use(n.map(s=>s.id));let i=e.get(t);return i===void 0&&(i=gn(),e.set(t,i)),i}const dL=0,J_=0,fL=0,hse=.5,dse=1;class fse{constructor(e,t){this._drawLinkLine=(i,s)=>{const r=i.options.links;if(!(r!=null&&r.enable))return;const o=this._container,a=o.actualOptions,l=s.destination,c=i.getPosition(),u=l.getPosition();let h=s.opacity;o.canvas.draw(p=>{var b;let m;const g=(b=i.options.twinkle)==null?void 0:b.lines;if(g!=null&&g.enable){const w=g.frequency,E=mo(this._engine,g.color);gn()<w&&E&&(m=E,h=ut(g.opacity))}if(!m){const w=r.id!==void 0?o.particles.linksColors.get(r.id):o.particles.linksColor;m=W1(i,l,w)}if(!m)return;const v=i.retina.linksWidth??J_,y=i.retina.linksDistance??fL,{backgroundMask:A}=a;lse({context:p,width:v,begin:c,end:u,engine:this._engine,maxDistance:y,canvasSize:o.canvas.size,links:r,backgroundMask:A,colorLine:m,opacity:h})})},this._drawLinkTriangle=(i,s,r)=>{const o=i.options.links;if(!(o!=null&&o.enable))return;const a=o.triangles;if(!a.enable)return;const l=this._container,c=l.actualOptions,u=s.destination,h=r.destination,p=a.opacity??(s.opacity+r.opacity)*hse;p<=dL||l.canvas.draw(m=>{const g=i.getPosition(),v=u.getPosition(),y=h.getPosition(),A=i.retina.linksDistance??fL;if(hr(g,v)>A||hr(y,v)>A||hr(y,g)>A)return;let b=mo(this._engine,a.color);if(!b){const w=o.id!==void 0?l.particles.linksColors.get(o.id):l.particles.linksColor;b=W1(i,u,w)}b&&cse({context:m,pos1:g,pos2:v,pos3:y,backgroundMask:c.backgroundMask,colorTriangle:b,opacityTriangle:p})})},this._drawTriangles=(i,s,r,o)=>{var c,u,h;const a=r.destination;if(!((c=i.links)!=null&&c.triangles.enable&&((u=a.options.links)!=null&&u.triangles.enable)))return;const l=(h=a.links)==null?void 0:h.filter(p=>{const m=this._getLinkFrequency(a,p.destination),g=0;return a.options.links&&m<=a.options.links.frequency&&o.findIndex(v=>v.destination===p.destination)>=g});if(l!=null&&l.length)for(const p of l){const m=p.destination;this._getTriangleFrequency(s,a,m)>i.links.triangles.frequency||this._drawLinkTriangle(s,r,p)}},this._getLinkFrequency=(i,s)=>hL([i,s],this._freqs.links),this._getTriangleFrequency=(i,s,r)=>hL([i,s,r],this._freqs.triangles),this._container=e,this._engine=t,this._freqs={links:new Map,triangles:new Map}}drawParticle(e,t){const{links:i,options:s}=t;if(!(i!=null&&i.length))return;const r=i.filter(o=>s.links&&(s.links.frequency>=dse||this._getLinkFrequency(t,o.destination)<=s.links.frequency));for(const o of r)this._drawTriangles(s,t,o,r),o.opacity>dL&&(t.retina.linksWidth??J_)>J_&&this._drawLinkLine(t,o)}async init(){this._freqs.links=new Map,this._freqs.triangles=new Map,await Promise.resolve()}particleCreated(e){if(e.links=[],!e.options.links)return;const t=this._container.retina.pixelRatio,{retina:i}=e,{distance:s,width:r}=e.options.links;i.linksDistance=s*t,i.linksWidth=r*t}particleDestroyed(e){e.links=[]}}class pse{constructor(e){this.id="links",this._engine=e}getPlugin(e){return Promise.resolve(new fse(e,this._engine))}loadOptions(){}needsPlugin(){return!0}}async function mse(n,e=!0){const t=new pse(n);await n.addPlugin(t,e)}async function gse(n,e=!0){n.checkVersion("3.9.1"),await ose(n,e),await mse(n,e)}const Ase=180,fy={x:0,y:0},yse=2;function vse(n,e,t){const{context:i}=n,s=t.count.numerator*t.count.denominator,r=t.count.numerator/t.count.denominator,o=Ase*(r-yse)/r,a=Math.PI-Xl(o);if(i){i.beginPath(),i.translate(e.x,e.y),i.moveTo(fy.x,fy.y);for(let l=0;l<s;l++)i.lineTo(t.length,fy.y),i.translate(t.length,fy.y),i.rotate(a)}}const xse=5;class ez{draw(e){const{particle:t,radius:i}=e,s=this.getCenter(t,i),r=this.getSidesData(t,i);vse(e,s,r)}getSidesCount(e){const t=e.shapeData;return Math.round(ut((t==null?void 0:t.sides)??xse))}}const pL=3.5,mL=2.66,bse=3;class wse extends ez{constructor(){super(...arguments),this.validTypes=["polygon"]}getCenter(e,t){return{x:-t/(e.sides/pL),y:-t/(mL/pL)}}getSidesData(e,t){const i=e.sides;return{count:{denominator:1,numerator:i},length:t*mL/(i/bse)}}}const Ese=1.66,_se=3,Cse=2;class Sse extends ez{constructor(){super(...arguments),this.validTypes=["triangle"]}getCenter(e,t){return{x:-t,y:t/Ese}}getSidesCount(){return _se}getSidesData(e,t){const i=t*Cse;return{count:{denominator:2,numerator:3},length:i}}}async function Mse(n,e=!0){n.checkVersion("3.9.1"),await n.addShape(new wse,e)}async function Ise(n,e=!0){n.checkVersion("3.9.1"),await n.addShape(new Sse,e)}async function Tse(n,e=!0){n.checkVersion("3.9.1"),await Mse(n,e),await Ise(n,e)}class Bse{constructor(){this.enable=!1,this.speed=0,this.decay=0,this.sync=!1}load(e){Re(e)||(e.enable!==void 0&&(this.enable=e.enable),e.speed!==void 0&&(this.speed=on(e.speed)),e.decay!==void 0&&(this.decay=on(e.decay)),e.sync!==void 0&&(this.sync=e.sync))}}class Rse extends sh{constructor(){super(),this.animation=new Bse,this.direction=so.clockwise,this.path=!1,this.value=0}load(e){Re(e)||(super.load(e),e.direction!==void 0&&(this.direction=e.direction),this.animation.load(e.animation),e.path!==void 0&&(this.path=e.path))}}const tz=2,Dse=Math.PI*tz,Pse=1,Lse=360;class kse{constructor(e){this.container=e}init(e){const t=e.options.rotate;if(!t)return;e.rotate={enable:t.animation.enable,value:Xl(ut(t.value)),min:0,max:Dse},e.pathRotation=t.path;let i=t.direction;switch(i===so.random&&(i=Math.floor(gn()*tz)>0?so.counterClockwise:so.clockwise),i){case so.counterClockwise:case"counterClockwise":e.rotate.status=ai.decreasing;break;case so.clockwise:e.rotate.status=ai.increasing;break}const s=t.animation;s.enable&&(e.rotate.decay=Pse-ut(s.decay),e.rotate.velocity=ut(s.speed)/Lse*this.container.retina.reduceFactor,s.sync||(e.rotate.velocity*=gn())),e.rotation=e.rotate.value}isEnabled(e){const t=e.options.rotate;return t?!e.destroyed&&!e.spawning&&(!!t.value||t.animation.enable||t.path):!1}loadOptions(e,...t){e.rotate||(e.rotate=new Rse);for(const i of t)e.rotate.load(i==null?void 0:i.rotate)}update(e,t){this.isEnabled(e)&&(e.isRotating=!!e.rotate,e.rotate&&(nT(e,e.rotate,!1,ju.none,t),e.rotation=e.rotate.value))}}async function Fse(n,e=!0){n.checkVersion("3.9.1"),await n.addParticleUpdater("rotate",t=>Promise.resolve(new kse(t)),e)}const Nse=2,Ose=Math.sqrt(Nse),Use=2;function Gse(n){const{context:e,radius:t}=n,i=t/Ose,s=i*Use;e.rect(-i,-i,s,s)}const zse=4;class Qse{constructor(){this.validTypes=["edge","square"]}draw(e){Gse(e)}getSidesCount(){return zse}}async function Hse(n,e=!0){n.checkVersion("3.9.1"),await n.addShape(new Qse,e)}const Vse=2,Hh={x:0,y:0};function jse(n){const{context:e,particle:t,radius:i}=n,s=t.sides,r=t.starInset??Vse;e.moveTo(Hh.x,Hh.y-i);for(let o=0;o<s;o++)e.rotate(Math.PI/s),e.lineTo(Hh.x,Hh.y-i*r),e.rotate(Math.PI/s),e.lineTo(Hh.x,Hh.y-i)}const Wse=2,qse=5;class Jse{constructor(){this.validTypes=["star"]}draw(e){jse(e)}getSidesCount(e){const t=e.shapeData;return Math.round(ut((t==null?void 0:t.sides)??qse))}particleInit(e,t){const i=t.shapeData;t.starInset=ut((i==null?void 0:i.inset)??Wse)}}async function Xse(n,e=!0){n.checkVersion("3.9.1"),await n.addShape(new Jse,e)}const Kse=1;class $se{constructor(e,t){this._container=e,this._engine=t}init(e){var o;const t=this._container,i=e.options,s=Lr(i.stroke,e.id,i.reduceDuplicates);e.strokeWidth=ut(s.width)*t.retina.pixelRatio,e.strokeOpacity=ut(s.opacity??Kse),e.strokeAnimation=(o=s.color)==null?void 0:o.animation;const r=hg(this._engine,s.color)??e.getFillColor();r&&(e.strokeColor=O4(r,e.strokeAnimation,t.retina.reduceFactor))}isEnabled(e){const t=e.strokeAnimation,{strokeColor:i}=e;return!e.destroyed&&!e.spawning&&!!t&&((i==null?void 0:i.h.value)!==void 0&&i.h.enable||(i==null?void 0:i.s.value)!==void 0&&i.s.enable||(i==null?void 0:i.l.value)!==void 0&&i.l.enable)}update(e,t){this.isEnabled(e)&&U4(e.strokeColor,t)}}async function Yse(n,e=!0){n.checkVersion("3.9.1"),await n.addParticleUpdater("strokeColor",t=>Promise.resolve(new $se(t,n)),e)}async function Zse(n,e=!0){n.checkVersion("3.9.1"),await Uie(n,!1),await Hte(n,!1),await Yte(n,!1),await one(n,!1),await gne(n,!1),await Sne(n,!1),await Tne(n,!1),await Lne(n,!1),await One(n,!1),await Xne(n,!1),await eie(n,!1),await Qie(n,!1),await $ie(n,!1),await gse(n,!1),await Pte(n,!1),await Fte(n,!1),await Sie(n,!1),await Nie(n,!1),await Tse(n,!1),await Hse(n,!1),await Xse(n,!1),await Pie(n,!1),await Fse(n,!1),await Yse(n,!1),await Dte(n,e)}const ere=()=>{const[n,e]=ee.useState(!1);ee.useEffect(()=>{Oee(async s=>{await Zse(s)}).then(()=>{e(!0)})},[]);const t=ee.useCallback(async s=>{},[]),i=ee.useMemo(()=>({background:{color:{value:"#0d0929"}},fpsLimit:120,interactivity:{events:{onClick:{enable:!0,mode:"push"},onHover:{enable:!1}},modes:{push:{quantity:4}}},particles:{color:{value:["#ffffff","#fffacd","#f0f8ff","#ffd700","#e6e6fa"]},links:{enable:!1},move:{direction:Mi.none,enable:!0,outModes:{default:ti.out},random:!0,speed:.5,straight:!1},number:{density:{enable:!0,area:800},value:250},position:{x:{value:50},y:{value:50}},spawn:{area:{x:80,y:80}},opacity:{value:{min:.1,max:1},animation:{enable:!0,speed:2,minimumValue:.1,sync:!1}},shape:{type:"circle"},size:{value:{min:.5,max:2.5},animation:{enable:!0,speed:3,minimumValue:.5,sync:!1}}},detectRetina:!0}),[]);return n?C.jsx(Nee,{id:"tsparticles",particlesLoaded:t,options:i}):C.jsx(C.Fragment,{})},tre="/assets/aviation-9d180bf2.png",nre="/assets/satellite-5ffafb51.png",ire="/assets/gps-5111520a.png",sre="/assets/powergrid-3d3d5642.png",rre="/assets/radio-035477db.png",ore="/assets/earth-c90ada74.png",are="/assets/earth-with-magnetic-fields-d62a80c8.png",lre=({title:n,value:e,onChange:t,min:i=0,max:s=100,step:r=1,unit:o="",description:a})=>C.jsxs("div",{className:"mb-6",children:[C.jsxs("div",{className:"flex justify-between items-center mb-2",children:[C.jsx("h3",{className:"text-lg font-semibold text-white",children:n}),C.jsxs("span",{className:"text-orange-400 font-bold",children:[e,o]})]}),a&&C.jsx("p",{className:"text-gray-300 text-sm mb-3",children:a}),C.jsx(uY,{value:[e],onValueChange:l=>t(l[0]),min:i,max:s,step:r,className:"w-full"})]}),cre=({imgPath:n,caption:e,affected:t,angle:i})=>{const r=Math.cos(i*Math.PI/180)*200,o=Math.sin(i*Math.PI/180)*200;return C.jsxs("div",{className:`absolute flex flex-col items-center transition-all duration-500 ${t?"opacity-100 scale-110":"opacity-60 scale-100"}`,style:{transform:`translate(${r}px, ${o}px)`,left:"50%",top:"50%",marginLeft:"-30px",marginTop:"-30px"},children:[C.jsx("img",{src:n,alt:e,className:`w-12 h-12 mb-2 transition-all duration-300 ${t?"filter-none":"grayscale"}`}),C.jsx("span",{className:`text-xs text-center font-medium transition-colors duration-300 ${t?"text-red-400":"text-gray-400"}`,children:e})]})},X_=({title:n,value:e,onChange:t,min:i=0,max:s=100,step:r=1,unit:o="",description:a})=>C.jsx("div",{className:"bg-gray-800/50 backdrop-blur-sm rounded-xl p-6 border border-gray-700/50",children:C.jsx(lre,{title:n,value:e,onChange:t,min:i,max:s,step:r,unit:o,description:a})}),ure=()=>{const[n,e]=ee.useState(0),[t,i]=ee.useState(0),[s,r]=ee.useState(0),a=(()=>{let l=!1,c=!1,u=!1,h=!1,p=!1;return n>40&&(p=!0,l=!0),n>80&&(u=!0),t>40&&(c=!0,u=!0),t>80&&(h=!0),[{imgPath:tre,caption:"Aviation",affected:l,angle:-90},{imgPath:nre,caption:"Satellite",affected:c,angle:-45},{imgPath:ire,caption:"GPS Tracker",affected:u,angle:0},{imgPath:sre,caption:"Power Grid",affected:h,angle:45},{imgPath:rre,caption:"Radio Communications",affected:p,angle:90}]})();return C.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-purple-900 via-blue-900 to-black text-white relative overflow-hidden",children:[C.jsx(ere,{}),C.jsx("div",{className:"relative z-10 container mx-auto px-4 py-8",children:C.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-center",children:[C.jsxs("div",{className:"space-y-6",children:[C.jsx(X_,{title:"Solar Flare Intensity",value:n,onChange:e,unit:"%",description:"Use this slider to increase or decrease the intensity of solar flare"}),C.jsx(X_,{title:"CME Intensity",value:t,onChange:i,unit:"%",description:"Use this slider to increase or decrease the intensity of CME"}),C.jsx(X_,{title:"Solar Wind Intensity",value:s,onChange:r,unit:"%",description:"Use this slider to increase or decrease the intensity of solar wind"})]}),C.jsxs("div",{className:"relative flex justify-center items-center min-h-[600px]",children:[C.jsxs("div",{className:"relative",children:[C.jsx("img",{src:ore,alt:"Earth",className:"w-64 h-64 rounded-full shadow-2xl"}),(n>20||t>20)&&C.jsx("img",{src:are,alt:"Magnetic Field",className:"absolute inset-0 w-64 h-64 rounded-full opacity-70 animate-pulse"})]}),a.map((l,c)=>C.jsx(cre,{imgPath:l.imgPath,caption:l.caption,affected:l.affected,angle:l.angle},c))]})]})})]})};function hre(){const[n,e]=ee.useState(0),[t,i]=ee.useState(!0),[s,r]=ee.useState(!1),[o,a]=ee.useState(!1),[l,c]=ee.useState(!1),[u,h]=ee.useState(null);ee.useEffect(()=>{const b=setTimeout(()=>{i(!1)},2e3);return()=>clearTimeout(b)},[]);const p=b=>{b!==n&&(r(!0),setTimeout(()=>{e(b),setTimeout(()=>{r(!1)},100)},300))},m=()=>{p(3)},g=b=>{h(b),p(9)},v=()=>{a(!0)},y=()=>{c(!0)},A=()=>{switch(n){case 0:return C.jsx(lP,{onExplore:()=>p(1)});case 1:return C.jsx(UK,{onNext:()=>p(2),onSkipToElements:()=>p(2)});case 2:return C.jsx(GK,{onNext:()=>p(3),onLearnMore:m});case 3:return C.jsx(qK,{onBack:()=>p(2)});case 4:return C.jsx(HK,{selectedCharacter:null,onNext:()=>p(5),onBack:()=>p(3),onLearnMore:g});case 5:return C.jsx(VK,{onNext:()=>p(6),onBack:()=>p(4)});case 6:return C.jsx(jK,{onNext:()=>p(7)});case 7:return C.jsx(ure,{onNext:()=>p(8),onBack:()=>p(6)});case 8:return C.jsx(zK,{onBack:()=>p(0)});case 9:return C.jsx(WK,{onBack:()=>p(4),onNext:()=>p(6),selectedCharacter:u});default:return C.jsx(lP,{onExplore:()=>p(1)})}};return C.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[C.jsx("video",{className:"fixed inset-0 w-full h-full object-cover z-0",autoPlay:!0,muted:!0,loop:!0,playsInline:!0,onLoadedData:v,onError:y,style:{display:l?"none":"block",opacity:.6},children:C.jsx("source",{src:"/Video/225937.mp4",type:"video/mp4"})}),C.jsx("div",{className:"fixed inset-0 z-0",style:{display:l||!o?"block":"none",background:`
            radial-gradient(ellipse at 20% 50%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
            radial-gradient(ellipse at 80% 20%, rgba(255, 119, 198, 0.3) 0%, transparent 50%),
            radial-gradient(ellipse at 40% 80%, rgba(120, 219, 226, 0.2) 0%, transparent 50%),
            linear-gradient(135deg, 
              #0f0f23 0%, 
              #1a1a2e 25%, 
              #16213e 50%, 
              #0f3460 75%, 
              #533483 100%
            )
          `,animation:"backgroundShift 20s ease-in-out infinite"}}),C.jsx("div",{className:"fixed inset-0 z-0 opacity-60",style:{background:`
            radial-gradient(2px 2px at 20px 30px, #eee, transparent),
            radial-gradient(2px 2px at 40px 70px, rgba(255,255,255,0.8), transparent),
            radial-gradient(1px 1px at 90px 40px, #fff, transparent),
            radial-gradient(1px 1px at 130px 80px, rgba(255,255,255,0.6), transparent),
            radial-gradient(2px 2px at 160px 30px, #ddd, transparent)
          `,backgroundRepeat:"repeat",backgroundSize:"200px 100px",animation:"twinkle 4s ease-in-out infinite alternate"}}),C.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-10"}),C.jsx("div",{className:"fixed inset-0 z-10",style:{background:`
          linear-gradient(180deg, rgba(0,0,0,0.3) 0%, rgba(0,0,0,0.1) 50%, rgba(0,0,0,0.4) 100%),
          radial-gradient(ellipse at center, rgba(0,0,0,0.1) 0%, rgba(0,0,0,0.3) 100%)
        `}}),C.jsx(QK,{}),t&&C.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col items-center justify-center bg-gradient-to-br from-space-blue via-purple-900 to-indigo-900 bg-opacity-95",children:[C.jsxs("div",{className:"relative",children:[C.jsx("div",{className:"animate-spin rounded-full h-24 w-24 border-t-4 border-b-4 border-stellar-gold opacity-80"}),C.jsx("div",{className:"absolute inset-0 animate-pulse rounded-full h-24 w-24 border-4 border-blue-400 opacity-40"}),C.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:C.jsx("div",{className:"w-4 h-4 bg-stellar-gold rounded-full animate-pulse"})})]}),C.jsx("div",{className:"mt-8 text-stellar-gold text-xl font-semibold animate-pulse",children:"Loading Stellar X..."}),C.jsx("div",{className:"mt-2 text-white text-sm opacity-70 animate-fadeInUp",children:"Preparing your space journey"})]}),s&&C.jsx("div",{className:"fixed inset-0 z-40 bg-gradient-to-r from-purple-900 via-blue-900 to-indigo-900 opacity-90 animate-fadeIn"}),C.jsx("div",{className:`relative z-20 transition-all duration-700 ease-in-out ${t?"opacity-0 transform scale-95":"opacity-100 transform scale-100"} ${s?"opacity-0 transform translate-y-8":"opacity-100 transform translate-y-0"}`,children:C.jsx("div",{className:"animate-slideInUp",children:A()})}),C.jsx("div",{className:"fixed bottom-8 left-1/2 transform -translate-x-1/2 z-30 flex space-x-3 animate-slideInUp",children:[0,1,2,3,4,5,6,7,8,9].map(b=>C.jsx("button",{onClick:()=>p(b),className:`relative w-3 h-3 rounded-full transition-all duration-500 transform hover:scale-150 ${n===b?"bg-stellar-gold scale-125 shadow-lg shadow-stellar-gold/50":"bg-white bg-opacity-50 hover:bg-opacity-75"}`,children:n===b&&C.jsx("div",{className:"absolute inset-0 rounded-full bg-stellar-gold animate-ping opacity-75"})},b))})]})}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const rv=globalThis,lT=rv.ShadowRoot&&(rv.ShadyCSS===void 0||rv.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,nz=Symbol(),gL=new WeakMap;let dre=class{constructor(e,t,i){if(this._$cssResult$=!0,i!==nz)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(lT&&e===void 0){const i=t!==void 0&&t.length===1;i&&(e=gL.get(t)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),i&&gL.set(t,e))}return e}toString(){return this.cssText}};const fre=n=>new dre(typeof n=="string"?n:n+"",void 0,nz),pre=(n,e)=>{if(lT)n.adoptedStyleSheets=e.map(t=>t instanceof CSSStyleSheet?t:t.styleSheet);else for(const t of e){const i=document.createElement("style"),s=rv.litNonce;s!==void 0&&i.setAttribute("nonce",s),i.textContent=t.cssText,n.appendChild(i)}},AL=lT?n=>n:n=>n instanceof CSSStyleSheet?(e=>{let t="";for(const i of e.cssRules)t+=i.cssText;return fre(t)})(n):n;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:mre,defineProperty:gre,getOwnPropertyDescriptor:Are,getOwnPropertyNames:yre,getOwnPropertySymbols:vre,getPrototypeOf:xre}=Object,Kl=globalThis,yL=Kl.trustedTypes,bre=yL?yL.emptyScript:"",K_=Kl.reactiveElementPolyfillSupport,Mm=(n,e)=>n,Ex={toAttribute(n,e){switch(e){case Boolean:n=n?bre:null;break;case Object:case Array:n=n==null?n:JSON.stringify(n)}return n},fromAttribute(n,e){let t=n;switch(e){case Boolean:t=n!==null;break;case Number:t=n===null?null:Number(n);break;case Object:case Array:try{t=JSON.parse(n)}catch{t=null}}return t}},cT=(n,e)=>!mre(n,e),vL={attribute:!0,type:String,converter:Ex,reflect:!1,useDefault:!1,hasChanged:cT};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),Kl.litPropertyMetadata??(Kl.litPropertyMetadata=new WeakMap);let cu=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,t=vL){if(t.state&&(t.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((t=Object.create(t)).wrapped=!0),this.elementProperties.set(e,t),!t.noAccessor){const i=Symbol(),s=this.getPropertyDescriptor(e,i,t);s!==void 0&&gre(this.prototype,e,s)}}static getPropertyDescriptor(e,t,i){const{get:s,set:r}=Are(this.prototype,e)??{get(){return this[t]},set(o){this[t]=o}};return{get:s,set(o){const a=s==null?void 0:s.call(this);r==null||r.call(this,o),this.requestUpdate(e,a,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??vL}static _$Ei(){if(this.hasOwnProperty(Mm("elementProperties")))return;const e=xre(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(Mm("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(Mm("properties"))){const t=this.properties,i=[...yre(t),...vre(t)];for(const s of i)this.createProperty(s,t[s])}const e=this[Symbol.metadata];if(e!==null){const t=litPropertyMetadata.get(e);if(t!==void 0)for(const[i,s]of t)this.elementProperties.set(i,s)}this._$Eh=new Map;for(const[t,i]of this.elementProperties){const s=this._$Eu(t,i);s!==void 0&&this._$Eh.set(s,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const i=new Set(e.flat(1/0).reverse());for(const s of i)t.unshift(AL(s))}else e!==void 0&&t.push(AL(e));return t}static _$Eu(e,t){const i=t.attribute;return i===!1?void 0:typeof i=="string"?i:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(t=>this.enableUpdating=t),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(t=>t(this))}addController(e){var t;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((t=e.hostConnected)==null||t.call(e))}removeController(e){var t;(t=this._$EO)==null||t.delete(e)}_$E_(){const e=new Map,t=this.constructor.elementProperties;for(const i of t.keys())this.hasOwnProperty(i)&&(e.set(i,this[i]),delete this[i]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return pre(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(t=>{var i;return(i=t.hostConnected)==null?void 0:i.call(t)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(t=>{var i;return(i=t.hostDisconnected)==null?void 0:i.call(t)})}attributeChangedCallback(e,t,i){this._$AK(e,i)}_$ET(e,t){var r;const i=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,i);if(s!==void 0&&i.reflect===!0){const o=(((r=i.converter)==null?void 0:r.toAttribute)!==void 0?i.converter:Ex).toAttribute(t,i.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,t){var r,o;const i=this.constructor,s=i._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const a=i.getPropertyOptions(s),l=typeof a.converter=="function"?{fromAttribute:a.converter}:((r=a.converter)==null?void 0:r.fromAttribute)!==void 0?a.converter:Ex;this._$Em=s;const c=l.fromAttribute(t,a.type);this[s]=c??((o=this._$Ej)==null?void 0:o.get(s))??c,this._$Em=null}}requestUpdate(e,t,i){var s;if(e!==void 0){const r=this.constructor,o=this[e];if(i??(i=r.getPropertyOptions(e)),!((i.hasChanged??cT)(o,t)||i.useDefault&&i.reflect&&o===((s=this._$Ej)==null?void 0:s.get(e))&&!this.hasAttribute(r._$Eu(e,i))))return;this.C(e,t,i)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,t,{useDefault:i,reflect:s,wrapped:r},o){i&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??t??this[e]),r!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||i||(t=void 0),this._$AL.set(e,t)),s===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var i;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[r,o]of this._$Ep)this[r]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[r,o]of s){const{wrapped:a}=o,l=this[r];a!==!0||this._$AL.has(r)||l===void 0||this.C(r,void 0,o,l)}}let e=!1;const t=this._$AL;try{e=this.shouldUpdate(t),e?(this.willUpdate(t),(i=this._$EO)==null||i.forEach(s=>{var r;return(r=s.hostUpdate)==null?void 0:r.call(s)}),this.update(t)):this._$EM()}catch(s){throw e=!1,this._$EM(),s}e&&this._$AE(t)}willUpdate(e){}_$AE(e){var t;(t=this._$EO)==null||t.forEach(i=>{var s;return(s=i.hostUpdated)==null?void 0:s.call(i)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(t=>this._$ET(t,this[t]))),this._$EM()}updated(e){}firstUpdated(e){}};cu.elementStyles=[],cu.shadowRootOptions={mode:"open"},cu[Mm("elementProperties")]=new Map,cu[Mm("finalized")]=new Map,K_==null||K_({ReactiveElement:cu}),(Kl.reactiveElementVersions??(Kl.reactiveElementVersions=[])).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const wre={attribute:!0,type:String,converter:Ex,reflect:!1,hasChanged:cT},Ere=(n=wre,e,t)=>{const{kind:i,metadata:s}=t;let r=globalThis.litPropertyMetadata.get(s);if(r===void 0&&globalThis.litPropertyMetadata.set(s,r=new Map),i==="setter"&&((n=Object.create(n)).wrapped=!0),r.set(t.name,n),i==="accessor"){const{name:o}=t;return{set(a){const l=e.get.call(this);e.set.call(this,a),this.requestUpdate(o,l,n)},init(a){return a!==void 0&&this.C(o,void 0,n,a),a}}}if(i==="setter"){const{name:o}=t;return function(a){const l=this[o];e.call(this,a),this.requestUpdate(o,l,n)}}throw Error("Unsupported decorator location: "+i)};function At(n){return(e,t)=>typeof t=="object"?Ere(n,e,t):((i,s,r)=>{const o=s.hasOwnProperty(r);return s.constructor.createProperty(r,i),o?Object.getOwnPropertyDescriptor(s,r):void 0})(n,e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Im=globalThis,_x=Im.trustedTypes,xL=_x?_x.createPolicy("lit-html",{createHTML:n=>n}):void 0,iz="$lit$",Bl=`lit$${Math.random().toFixed(9).slice(2)}$`,sz="?"+Bl,_re=`<${sz}>`,Ju=document,mg=()=>Ju.createComment(""),gg=n=>n===null||typeof n!="object"&&typeof n!="function",uT=Array.isArray,Cre=n=>uT(n)||typeof(n==null?void 0:n[Symbol.iterator])=="function",$_=`[ 	
\f\r]`,Rp=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,bL=/-->/g,wL=/>/g,jc=RegExp(`>|${$_}(?:([^\\s"'>=/]+)(${$_}*=${$_}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),EL=/'/g,_L=/"/g,rz=/^(?:script|style|textarea|title)$/i,Sre=n=>(e,...t)=>({_$litType$:n,strings:e,values:t}),Ub=Sre(1),Ef=Symbol.for("lit-noChange"),Ti=Symbol.for("lit-nothing"),CL=new WeakMap,wu=Ju.createTreeWalker(Ju,129);function oz(n,e){if(!uT(n)||!n.hasOwnProperty("raw"))throw Error("invalid template strings array");return xL!==void 0?xL.createHTML(e):e}const Mre=(n,e)=>{const t=n.length-1,i=[];let s,r=e===2?"<svg>":e===3?"<math>":"",o=Rp;for(let a=0;a<t;a++){const l=n[a];let c,u,h=-1,p=0;for(;p<l.length&&(o.lastIndex=p,u=o.exec(l),u!==null);)p=o.lastIndex,o===Rp?u[1]==="!--"?o=bL:u[1]!==void 0?o=wL:u[2]!==void 0?(rz.test(u[2])&&(s=RegExp("</"+u[2],"g")),o=jc):u[3]!==void 0&&(o=jc):o===jc?u[0]===">"?(o=s??Rp,h=-1):u[1]===void 0?h=-2:(h=o.lastIndex-u[2].length,c=u[1],o=u[3]===void 0?jc:u[3]==='"'?_L:EL):o===_L||o===EL?o=jc:o===bL||o===wL?o=Rp:(o=jc,s=void 0);const m=o===jc&&n[a+1].startsWith("/>")?" ":"";r+=o===Rp?l+_re:h>=0?(i.push(c),l.slice(0,h)+iz+l.slice(h)+Bl+m):l+Bl+(h===-2?a:m)}return[oz(n,r+(n[t]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),i]};class Ag{constructor({strings:e,_$litType$:t},i){let s;this.parts=[];let r=0,o=0;const a=e.length-1,l=this.parts,[c,u]=Mre(e,t);if(this.el=Ag.createElement(c,i),wu.currentNode=this.el.content,t===2||t===3){const h=this.el.content.firstChild;h.replaceWith(...h.childNodes)}for(;(s=wu.nextNode())!==null&&l.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const h of s.getAttributeNames())if(h.endsWith(iz)){const p=u[o++],m=s.getAttribute(h).split(Bl),g=/([.?@])?(.*)/.exec(p);l.push({type:1,index:r,name:g[2],strings:m,ctor:g[1]==="."?Tre:g[1]==="?"?Bre:g[1]==="@"?Rre:Gb}),s.removeAttribute(h)}else h.startsWith(Bl)&&(l.push({type:6,index:r}),s.removeAttribute(h));if(rz.test(s.tagName)){const h=s.textContent.split(Bl),p=h.length-1;if(p>0){s.textContent=_x?_x.emptyScript:"";for(let m=0;m<p;m++)s.append(h[m],mg()),wu.nextNode(),l.push({type:2,index:++r});s.append(h[p],mg())}}}else if(s.nodeType===8)if(s.data===sz)l.push({type:2,index:r});else{let h=-1;for(;(h=s.data.indexOf(Bl,h+1))!==-1;)l.push({type:7,index:r}),h+=Bl.length-1}r++}}static createElement(e,t){const i=Ju.createElement("template");return i.innerHTML=e,i}}function _f(n,e,t=n,i){var o,a;if(e===Ef)return e;let s=i!==void 0?(o=t._$Co)==null?void 0:o[i]:t._$Cl;const r=gg(e)?void 0:e._$litDirective$;return(s==null?void 0:s.constructor)!==r&&((a=s==null?void 0:s._$AO)==null||a.call(s,!1),r===void 0?s=void 0:(s=new r(n),s._$AT(n,t,i)),i!==void 0?(t._$Co??(t._$Co=[]))[i]=s:t._$Cl=s),s!==void 0&&(e=_f(n,s._$AS(n,e.values),s,i)),e}class Ire{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:t},parts:i}=this._$AD,s=((e==null?void 0:e.creationScope)??Ju).importNode(t,!0);wu.currentNode=s;let r=wu.nextNode(),o=0,a=0,l=i[0];for(;l!==void 0;){if(o===l.index){let c;l.type===2?c=new hT(r,r.nextSibling,this,e):l.type===1?c=new l.ctor(r,l.name,l.strings,this,e):l.type===6&&(c=new Dre(r,this,e)),this._$AV.push(c),l=i[++a]}o!==(l==null?void 0:l.index)&&(r=wu.nextNode(),o++)}return wu.currentNode=Ju,s}p(e){let t=0;for(const i of this._$AV)i!==void 0&&(i.strings!==void 0?(i._$AI(e,i,t),t+=i.strings.length-2):i._$AI(e[t])),t++}}let hT=class az{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,t,i,s){this.type=2,this._$AH=Ti,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=i,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return t!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=_f(this,e,t),gg(e)?e===Ti||e==null||e===""?(this._$AH!==Ti&&this._$AR(),this._$AH=Ti):e!==this._$AH&&e!==Ef&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):Cre(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==Ti&&gg(this._$AH)?this._$AA.nextSibling.data=e:this.T(Ju.createTextNode(e)),this._$AH=e}$(e){var r;const{values:t,_$litType$:i}=e,s=typeof i=="number"?this._$AC(e):(i.el===void 0&&(i.el=Ag.createElement(oz(i.h,i.h[0]),this.options)),i);if(((r=this._$AH)==null?void 0:r._$AD)===s)this._$AH.p(t);else{const o=new Ire(s,this),a=o.u(this.options);o.p(t),this.T(a),this._$AH=o}}_$AC(e){let t=CL.get(e.strings);return t===void 0&&CL.set(e.strings,t=new Ag(e)),t}k(e){uT(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let i,s=0;for(const r of e)s===t.length?t.push(i=new az(this.O(mg()),this.O(mg()),this,this.options)):i=t[s],i._$AI(r),s++;s<t.length&&(this._$AR(i&&i._$AB.nextSibling,s),t.length=s)}_$AR(e=this._$AA.nextSibling,t){var i;for((i=this._$AP)==null?void 0:i.call(this,!1,!0,t);e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var t;this._$AM===void 0&&(this._$Cv=e,(t=this._$AP)==null||t.call(this,e))}};class Gb{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,i,s,r){this.type=1,this._$AH=Ti,this._$AN=void 0,this.element=e,this.name=t,this._$AM=s,this.options=r,i.length>2||i[0]!==""||i[1]!==""?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=Ti}_$AI(e,t=this,i,s){const r=this.strings;let o=!1;if(r===void 0)e=_f(this,e,t,0),o=!gg(e)||e!==this._$AH&&e!==Ef,o&&(this._$AH=e);else{const a=e;let l,c;for(e=r[0],l=0;l<r.length-1;l++)c=_f(this,a[i+l],t,l),c===Ef&&(c=this._$AH[l]),o||(o=!gg(c)||c!==this._$AH[l]),c===Ti?e=Ti:e!==Ti&&(e+=(c??"")+r[l+1]),this._$AH[l]=c}o&&!s&&this.j(e)}j(e){e===Ti?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class Tre extends Gb{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Ti?void 0:e}}let Bre=class extends Gb{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==Ti)}};class Rre extends Gb{constructor(e,t,i,s,r){super(e,t,i,s,r),this.type=5}_$AI(e,t=this){if((e=_f(this,e,t,0)??Ti)===Ef)return;const i=this._$AH,s=e===Ti&&i!==Ti||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,r=e!==Ti&&(i===Ti||s);s&&this.element.removeEventListener(this.name,this,i),r&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t;typeof this._$AH=="function"?this._$AH.call(((t=this.options)==null?void 0:t.host)??this.element,e):this._$AH.handleEvent(e)}}class Dre{constructor(e,t,i){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(e){_f(this,e)}}const Y_=Im.litHtmlPolyfillSupport;Y_==null||Y_(Ag,hT),(Im.litHtmlVersions??(Im.litHtmlVersions=[])).push("3.3.1");const lz=(n,e,t)=>{const i=(t==null?void 0:t.renderBefore)??e;let s=i._$litPart$;if(s===void 0){const r=(t==null?void 0:t.renderBefore)??null;i._$litPart$=s=new hT(e.insertBefore(mg(),r),r,void 0,t??{})}return s._$AI(n),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Du=globalThis;let ov=class extends cu{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var t;const e=super.createRenderRoot();return(t=this.renderOptions).renderBefore??(t.renderBefore=e.firstChild),e}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=lz(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return Ef}};var fN;ov._$litElement$=!0,ov.finalized=!0,(fN=Du.litElementHydrateSupport)==null||fN.call(Du,{LitElement:ov});const Z_=Du.litElementPolyfillSupport;Z_==null||Z_({LitElement:ov});(Du.litElementVersions??(Du.litElementVersions=[])).push("4.2.1");/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cz=navigator.xr!=null&&self.XRSession!=null&&navigator.xr.isSessionSupported!=null,uz=cz&&self.XRSession.prototype.requestHitTestSource!=null,eC=self.ResizeObserver!=null,tC=self.IntersectionObserver!=null,hz=uz;(()=>{const n=navigator.userAgent||navigator.vendor||self.opera;let e=!1;return(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(n)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(n.substr(0,4)))&&(e=!0),e})();const Pre=/android/i.test(navigator.userAgent),Lre=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!self.MSStream||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,kre=/firefox/i.test(navigator.userAgent),Fre=/OculusBrowser/.test(navigator.userAgent),Nre=Pre&&!kre&&!Fre,Ore=!!(window.webkit&&window.webkit.messageHandlers),SL=(()=>{if(Lre){if(Ore)return!!/CriOS\/|EdgiOS\/|FxiOS\/|GSA\/|DuckDuckGo\//.test(navigator.userAgent);{const n=document.createElement("a");return!!(n.relList&&n.relList.supports&&n.relList.supports("ar"))}}else return!1})();/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dz=n=>n&&n!=="null"?Ure(n):null,ML=()=>{if(hz)return;const n=[];throw cz||n.push("WebXR Device API"),uz||n.push("WebXR Hit Test API"),new Error(`The following APIs are required for AR, but are missing in this browser: ${n.join(", ")}`)},Ure=n=>new URL(n,window.location.toString()).toString(),Gre=(n,e)=>{let t=null;const i=(...s)=>{t==null&&(n(...s),t=self.setTimeout(()=>t=null,e))};return i.flush=()=>{t!=null&&(self.clearTimeout(t),t=null)},i},IL=(n,e)=>{let t=null;return(...i)=>{t!=null&&self.clearTimeout(t),t=self.setTimeout(()=>{t=null,n(...i)},e)}},Oo=(n,e,t)=>Math.max(e,Math.min(t,n)),TL=(()=>{const n="model-viewer-debug-mode",e=new RegExp(`[?&]${n}(&|$)`);return()=>self.ModelViewerElement&&self.ModelViewerElement.debugMode||self.location&&self.location.search&&self.location.search.match(e)})(),zre=(n=0)=>new Promise(e=>setTimeout(e,n)),Qre=(n,e,t=null)=>new Promise(i=>{function s(r){(!t||t(r))&&(i(r),n.removeEventListener(e,s))}n.addEventListener(e,s)});/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wc=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const Hre=.5,Vre=0,jre=1,Wre=1,im=Symbol("currentEnvironmentMap"),sm=Symbol("currentBackground"),Cx=Symbol("updateEnvironment"),py=Symbol("cancelEnvironmentUpdate"),qre=n=>{var e,t,i;class s extends n{constructor(){super(...arguments),this.environmentImage=null,this.skyboxImage=null,this.shadowIntensity=Vre,this.shadowSoftness=jre,this.exposure=Wre,this.toneMapping="auto",this.skyboxHeight="0",this[e]=null,this[t]=null,this[i]=null}updated(o){super.updated(o),o.has("shadowIntensity")&&(this[Ee].setShadowIntensity(this.shadowIntensity*Hre),this[Ri]()),o.has("shadowSoftness")&&(this[Ee].setShadowSoftness(this.shadowSoftness),this[Ri]()),o.has("exposure")&&(this[Ee].exposure=this.exposure,this[Ri]()),o.has("toneMapping")&&(this[Ee].toneMapping=this.toneMapping==="aces"?Yx:this.toneMapping==="agx"?uI:this.toneMapping==="reinhard"?lI:this.toneMapping==="cineon"?cI:this.toneMapping==="linear"?aI:this.toneMapping==="none"?Fr:lf,this[Ri]()),(o.has("environmentImage")||o.has("skyboxImage"))&&this[Cf]()&&this[Cx](),o.has("skyboxHeight")&&(this[Ee].setGroundedSkybox(),this[Ri]())}hasBakedShadow(){return this[Ee].bakedShadows.size>0}async[(e=im,t=sm,i=py,Cx)](){const{skyboxImage:o,environmentImage:a}=this;this[py]!=null&&(this[py](),this[py]=null);const{textureUtils:l}=this[hn];if(l==null)return;const c=this[Xu].beginActivity("environment-update");try{const{environmentMap:u,skybox:h}=await l.generateEnvironmentMapAndSkybox(dz(o),a,p=>c(Oo(p,0,1)),this.withCredentials);this[im]!==u&&(this[im]=u,this.dispatchEvent(new CustomEvent("environment-change"))),h!=null?this[sm]=h.name===u.name?u:h:this[sm]=null,this[Ee].setEnvironmentAndSkybox(this[im],this[sm])}catch(u){if(u instanceof Error)throw this[Ee].setEnvironmentAndSkybox(null,null),u}finally{c(1)}}}return Wc([At({type:String,attribute:"environment-image"})],s.prototype,"environmentImage",void 0),Wc([At({type:String,attribute:"skybox-image"})],s.prototype,"skyboxImage",void 0),Wc([At({type:Number,attribute:"shadow-intensity"})],s.prototype,"shadowIntensity",void 0),Wc([At({type:Number,attribute:"shadow-softness"})],s.prototype,"shadowSoftness",void 0),Wc([At({type:Number})],s.prototype,"exposure",void 0),Wc([At({type:String,attribute:"tone-mapping"})],s.prototype,"toneMapping",void 0),Wc([At({type:String,attribute:"skybox-height"})],s.prototype,"skyboxHeight",void 0),s};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jre=Ub`
<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" fill="#000000">
    <!-- NOTE(cdata): This SVG filter is a stop-gap until we can implement
         support for dynamic re-coloring of UI components -->
    <defs>
      <filter id="drop-shadow" x="-100%" y="-100%" width="300%" height="300%">
        <feGaussianBlur in="SourceAlpha" stdDeviation="1"/>
        <feOffset dx="0" dy="0" result="offsetblur"/>
        <feFlood flood-color="#000000"/>
        <feComposite in2="offsetblur" operator="in"/>
        <feMerge>
          <feMergeNode/>
          <feMergeNode in="SourceGraphic"/>
        </feMerge>
      </filter>
    </defs>
    <path filter="url(#drop-shadow)" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
    <path d="M0 0h24v24H0z" fill="none"/>
</svg>`;/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xre=Ub`
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="25" height="36">
    <defs>
        <path id="A" d="M.001.232h24.997V36H.001z" />
    </defs>
    <g transform="translate(-11 -4)" fill="none" fill-rule="evenodd">
        <path fill-opacity="0" fill="#fff" d="M0 0h44v44H0z" />
        <g transform="translate(11 3)">
            <path d="M8.733 11.165c.04-1.108.766-2.027 1.743-2.307a2.54 2.54 0 0 1 .628-.089c.16 0 .314.017.463.044 1.088.2 1.9 1.092 1.9 2.16v8.88h1.26c2.943-1.39 5-4.45 5-8.025a9.01 9.01 0 0 0-1.9-5.56l-.43-.5c-.765-.838-1.683-1.522-2.712-2-1.057-.49-2.226-.77-3.46-.77s-2.4.278-3.46.77c-1.03.478-1.947 1.162-2.71 2l-.43.5a9.01 9.01 0 0 0-1.9 5.56 9.04 9.04 0 0 0 .094 1.305c.03.21.088.41.13.617l.136.624c.083.286.196.56.305.832l.124.333a8.78 8.78 0 0 0 .509.953l.065.122a8.69 8.69 0 0 0 3.521 3.191l1.11.537v-9.178z" fill-opacity=".5" fill="#e4e4e4" />
            <path d="M22.94 26.218l-2.76 7.74c-.172.485-.676.8-1.253.8H12.24c-1.606 0-3.092-.68-3.98-1.82-1.592-2.048-3.647-3.822-6.11-5.27-.095-.055-.15-.137-.152-.23-.004-.1.046-.196.193-.297.56-.393 1.234-.6 1.926-.6a3.43 3.43 0 0 1 .691.069l4.922.994V10.972c0-.663.615-1.203 1.37-1.203s1.373.54 1.373 1.203v9.882h2.953c.273 0 .533.073.757.21l6.257 3.874c.027.017.045.042.07.06.41.296.586.77.426 1.22M4.1 16.614c-.024-.04-.042-.083-.065-.122a8.69 8.69 0 0 1-.509-.953c-.048-.107-.08-.223-.124-.333l-.305-.832c-.058-.202-.09-.416-.136-.624l-.13-.617a9.03 9.03 0 0 1-.094-1.305c0-2.107.714-4.04 1.9-5.56l.43-.5c.764-.84 1.682-1.523 2.71-2 1.058-.49 2.226-.77 3.46-.77s2.402.28 3.46.77c1.03.477 1.947 1.16 2.712 2l.428.5a9 9 0 0 1 1.901 5.559c0 3.577-2.056 6.636-5 8.026h-1.26v-8.882c0-1.067-.822-1.96-1.9-2.16-.15-.028-.304-.044-.463-.044-.22 0-.427.037-.628.09-.977.28-1.703 1.198-1.743 2.306v9.178l-1.11-.537C6.18 19.098 4.96 18 4.1 16.614M22.97 24.09l-6.256-3.874c-.102-.063-.218-.098-.33-.144 2.683-1.8 4.354-4.855 4.354-8.243 0-.486-.037-.964-.104-1.43a9.97 9.97 0 0 0-1.57-4.128l-.295-.408-.066-.092a10.05 10.05 0 0 0-.949-1.078c-.342-.334-.708-.643-1.094-.922-1.155-.834-2.492-1.412-3.94-1.65l-.732-.088-.748-.03a9.29 9.29 0 0 0-1.482.119c-1.447.238-2.786.816-3.94 1.65a9.33 9.33 0 0 0-.813.686 9.59 9.59 0 0 0-.845.877l-.385.437-.36.5-.288.468-.418.778-.04.09c-.593 1.28-.93 2.71-.93 4.222 0 3.832 2.182 7.342 5.56 8.938l1.437.68v4.946L5 25.64a4.44 4.44 0 0 0-.888-.086c-.017 0-.034.003-.05.003-.252.004-.503.033-.75.08a5.08 5.08 0 0 0-.237.056c-.193.046-.382.107-.568.18-.075.03-.15.057-.225.1-.25.114-.494.244-.723.405a1.31 1.31 0 0 0-.566 1.122 1.28 1.28 0 0 0 .645 1.051C4 29.925 5.96 31.614 7.473 33.563a5.06 5.06 0 0 0 .434.491c1.086 1.082 2.656 1.713 4.326 1.715h6.697c.748-.001 1.43-.333 1.858-.872.142-.18.256-.38.336-.602l2.757-7.74c.094-.26.13-.53.112-.794s-.088-.52-.203-.76a2.19 2.19 0 0 0-.821-.91" fill-opacity=".6" fill="#000" />
            <path d="M22.444 24.94l-6.257-3.874a1.45 1.45 0 0 0-.757-.211h-2.953v-9.88c0-.663-.616-1.203-1.373-1.203s-1.37.54-1.37 1.203v16.643l-4.922-.994a3.44 3.44 0 0 0-.692-.069 3.35 3.35 0 0 0-1.925.598c-.147.102-.198.198-.194.298.004.094.058.176.153.23 2.462 1.448 4.517 3.22 6.11 5.27.887 1.14 2.373 1.82 3.98 1.82h6.686c.577 0 1.08-.326 1.253-.8l2.76-7.74c.16-.448-.017-.923-.426-1.22-.025-.02-.043-.043-.07-.06z" fill="#fff" />
            <g transform="translate(0 .769)">
                <mask id="B" fill="#fff">
                    <use xlink:href="#A" />
                </mask>
                <path d="M23.993 24.992a1.96 1.96 0 0 1-.111.794l-2.758 7.74c-.08.22-.194.423-.336.602-.427.54-1.11.87-1.857.872h-6.698c-1.67-.002-3.24-.633-4.326-1.715-.154-.154-.3-.318-.434-.49C5.96 30.846 4 29.157 1.646 27.773c-.385-.225-.626-.618-.645-1.05a1.31 1.31 0 0 1 .566-1.122 4.56 4.56 0 0 1 .723-.405l.225-.1a4.3 4.3 0 0 1 .568-.18l.237-.056c.248-.046.5-.075.75-.08.018 0 .034-.003.05-.003.303-.001.597.027.89.086l3.722.752V20.68l-1.436-.68c-3.377-1.596-5.56-5.106-5.56-8.938 0-1.51.336-2.94.93-4.222.015-.03.025-.06.04-.09.127-.267.268-.525.418-.778.093-.16.186-.316.288-.468.063-.095.133-.186.2-.277L3.773 5c.118-.155.26-.29.385-.437.266-.3.544-.604.845-.877a9.33 9.33 0 0 1 .813-.686C6.97 2.167 8.31 1.59 9.757 1.35a9.27 9.27 0 0 1 1.481-.119 8.82 8.82 0 0 1 .748.031c.247.02.49.05.733.088 1.448.238 2.786.816 3.94 1.65.387.28.752.588 1.094.922a9.94 9.94 0 0 1 .949 1.078l.066.092c.102.133.203.268.295.408a9.97 9.97 0 0 1 1.571 4.128c.066.467.103.945.103 1.43 0 3.388-1.67 6.453-4.353 8.243.11.046.227.08.33.144l6.256 3.874c.37.23.645.55.82.9.115.24.185.498.203.76m.697-1.195c-.265-.55-.677-1.007-1.194-1.326l-5.323-3.297c2.255-2.037 3.564-4.97 3.564-8.114 0-2.19-.637-4.304-1.84-6.114-.126-.188-.26-.37-.4-.552-.645-.848-1.402-1.6-2.252-2.204C15.472.91 13.393.232 11.238.232A10.21 10.21 0 0 0 5.23 2.19c-.848.614-1.606 1.356-2.253 2.205-.136.18-.272.363-.398.55C1.374 6.756.737 8.87.737 11.06c0 4.218 2.407 8.08 6.133 9.842l.863.41v3.092l-2.525-.51c-.356-.07-.717-.106-1.076-.106a5.45 5.45 0 0 0-3.14.996c-.653.46-1.022 1.202-.99 1.983a2.28 2.28 0 0 0 1.138 1.872c2.24 1.318 4.106 2.923 5.543 4.772 1.26 1.62 3.333 2.59 5.55 2.592h6.698c1.42-.001 2.68-.86 3.134-2.138l2.76-7.74c.272-.757.224-1.584-.134-2.325" fill-opacity=".05" fill="#000" mask="url(#B)" />
            </g>
        </g>
    </g>
</svg>`;/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kre=Ub`
<svg version="1.1" id="view_x5F_in_x5F_AR_x5F_icon"
	 xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="24px" height="24px"
	 viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve">
<rect id="Bounding_Box" x="0" y="0" fill="none" width="24" height="24"/>
<g id="Art_layer">
	<path d="M3,4c0-0.55,0.45-1,1-1h2V1H4C2.35,1,1,2.35,1,4v2h2V4z"/>
	<path d="M20,3c0.55,0,1,0.45,1,1v2h2V4c0-1.65-1.35-3-3-3h-2v2H20z"/>
	<path d="M4,21c-0.55,0-1-0.45-1-1v-2H1v2c0,1.65,1.35,3,3,3h2v-2H4z"/>
	<path d="M20,21c0.55,0,1-0.45,1-1v-2h2v2c0,1.65-1.35,3-3,3h-2v-2H20z"/>
	<g>
		<path d="M18.25,7.6l-5.5-3.18c-0.46-0.27-1.04-0.27-1.5,0L5.75,7.6C5.29,7.87,5,8.36,5,8.9v6.35c0,0.54,0.29,1.03,0.75,1.3
			l5.5,3.18c0.46,0.27,1.04,0.27,1.5,0l5.5-3.18c0.46-0.27,0.75-0.76,0.75-1.3V8.9C19,8.36,18.71,7.87,18.25,7.6z M7,14.96v-4.62
			l4,2.32v4.61L7,14.96z M12,10.93L8,8.61l4-2.31l4,2.31L12,10.93z M13,17.27v-4.61l4-2.32v4.62L13,17.27z"/>
	</g>
</g>
</svg>`;/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $re=Ub`
<style>
:host {
  display: block;
  position: relative;
  contain: strict;
  width: 300px;
  height: 150px;
}

.container {
  position: relative;
  overflow: hidden;
}

.userInput {
  width: 100%;
  height: 100%;
  display: none;
  position: relative;
  outline-offset: -1px;
  outline-width: 1px;
}

canvas {
  position: absolute;
  display: none;
  pointer-events: none;
  /* NOTE(cdata): Chrome 76 and below apparently have a bug
   * that causes our canvas not to display pixels unless it is
   * on its own render layer
   * @see https://github.com/google/model-viewer/pull/755#issuecomment-536597893
   */
  transform: translateZ(0);
}

.show {
  display: block;
}

/* Adapted from HTML5 Boilerplate
 *
 * @see https://github.com/h5bp/html5-boilerplate/blob/ceb4620c78fc82e13534fc44202a3f168754873f/dist/css/main.css#L122-L133 */
.screen-reader-only {
  border: 0;
  left: 0;
  top: 0;
  clip: rect(0, 0, 0, 0);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  white-space: nowrap;
  width: 1px;
  pointer-events: none;
}

.slot {
  position: absolute;
  pointer-events: none;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

.slot > * {
  pointer-events: initial;
}

.annotation-wrapper ::slotted(*) {
  opacity: var(--max-hotspot-opacity, 1);
  transition: opacity 0.3s;
}

.pointer-tumbling .annotation-wrapper ::slotted(*) {
  pointer-events: none;
}

.annotation-wrapper ::slotted(*) {
  pointer-events: initial;
}

.annotation-wrapper.hide ::slotted(*) {
  opacity: var(--min-hotspot-opacity, 0.25);
}

.slot.poster {
  display: none;
  background-color: inherit;
}

.slot.poster.show {
  display: inherit;
}

.slot.poster > * {
  pointer-events: initial;
}

.slot.poster:not(.show) > * {
  pointer-events: none;
}

#default-poster {
  width: 100%;
  height: 100%;
  /* The default poster is a <button> so we need to set display
   * to prevent it from being affected by text-align: */
  display: block;
  position: absolute;
  border: none;
  padding: 0;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  background-color: #fff0;
}

#default-progress-bar {
  display: block;
  position: relative;
  width: 100%;
  height: 100%;
  pointer-events: none;
  overflow: hidden;
}

#default-progress-bar > .bar {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: var(--progress-bar-height, 5px);
  background-color: var(--progress-bar-color, rgba(0, 0, 0, 0.4));
  transition: transform 0.09s;
  transform-origin: top left;
  transform: scaleX(0);
  overflow: hidden;
}

#default-progress-bar > .bar.hide {
  transition: opacity 0.3s 1s;
  opacity: 0;
}

.centered {
  align-items: center;
  justify-content: center;
}

.cover {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

.slot.interaction-prompt {
  display: var(--interaction-prompt-display, flex);
  overflow: hidden;
  opacity: 0;
  will-change: opacity;
  transition: opacity 0.3s;
}

.slot.interaction-prompt.visible {
  opacity: 1;
}

.animated-container {
  will-change: transform, opacity;
  opacity: 0;
  transition: opacity 0.3s;
}

.slot.interaction-prompt > * {
  pointer-events: none;
}

.slot.ar-button {
  -moz-user-select: none;
  -webkit-tap-highlight-color: transparent;
  user-select: none;

  display: var(--ar-button-display, block);
}

.slot.ar-button:not(.enabled) {
  display: none;
}

.fab {
  display: flex;
  align-items: center;
  justify-content: center;
  box-sizing: border-box;
  width: 40px;
  height: 40px;
  cursor: pointer;
  background-color: #fff;
  box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.15);
  border-radius: 100px;
}

.fab > * {
  opacity: 0.87;
}

#default-ar-button {
  position: absolute;
  bottom: 16px;
  right: 16px;
  transform: scale(var(--ar-button-scale, 1));
  transform-origin: bottom right;
}

.slot.pan-target {
  display: block;
  position: absolute;
  width: 0;
  height: 0;
  left: 50%;
  top: 50%;
  transform: translate3d(-50%, -50%, 0);
  background-color: transparent;
  opacity: 0;
  transition: opacity 0.3s;
}

#default-pan-target {
  width: 6px;
  height: 6px;
  border-radius: 6px;
  border: 1px solid white;
  box-shadow: 0px 0px 2px 1px rgba(0, 0, 0, 0.8);
}

.slot.default {
  pointer-events: none;
}

.slot.progress-bar {
  pointer-events: none;
}

.slot.exit-webxr-ar-button {
  pointer-events: none;
}

.slot.exit-webxr-ar-button:not(.enabled) {
  display: none;
}

#default-exit-webxr-ar-button {
  display: flex;
  align-items: center;
  justify-content: center;
  position: absolute;
  top: env(safe-area-inset-top, 16px);
  right: 16px;
  width: 40px;
  height: 40px;
  box-sizing: border-box;
}

#default-exit-webxr-ar-button > svg {
  fill: #fff;
}
</style>
<div class="container">
  <div class="userInput" tabindex="0" role="img"
      aria-label="3D model">
      <div class="slot canvas">
        <slot name="canvas">
          <canvas></canvas>
        </slot>
      </div>

  </div>

  <!-- NOTE(cdata): We need to wrap slots because browsers without ShadowDOM
        will have their <slot> elements removed by ShadyCSS -->
  <div class="slot poster">
    <slot name="poster">
      <button type="button" id="default-poster" aria-hidden="true" aria-label="Loading 3D model"></button>
    </slot>
  </div>

  <div class="slot ar-button">
    <slot name="ar-button">
      <a id="default-ar-button" part="default-ar-button" class="fab"
          tabindex="2"
          role="button"
          href="javascript:void(0);"
          aria-label="View in your space">
        ${Kre}
      </a>
    </slot>
  </div>

  <div class="slot pan-target">
    <slot name="pan-target">
      <div id="default-pan-target">
      </div>
    </slot>
  </div>

  <div class="slot interaction-prompt cover centered">
    <div id="prompt" class="animated-container">
      <slot name="interaction-prompt" aria-hidden="true">
        ${Xre}
      </slot>
    </div>
  </div>

  <div id="finger0" class="animated-container cover">
    <slot name="finger0" aria-hidden="true">
    </slot>
  </div>
  <div id="finger1" class="animated-container cover">
    <slot name="finger1" aria-hidden="true">
    </slot>
  </div>

  <div class="slot default">
    <slot></slot>

    <div class="slot progress-bar">
      <slot name="progress-bar">
        <div id="default-progress-bar" aria-hidden="true">
          <div class="bar" part="default-progress-bar"></div>
        </div>
      </slot>
    </div>

    <div class="slot exit-webxr-ar-button">
      <slot name="exit-webxr-ar-button">
        <a id="default-exit-webxr-ar-button" part="default-exit-webxr-ar-button"
            tabindex="3"
            aria-label="Exit AR"
            aria-hidden="true">
          ${Jre}
        </a>
      </slot>
    </div>
  </div>
</div>
<div class="screen-reader-only" role="region" aria-label="Live announcements">
  <span id="status" role="status"></span>
</div>`,Yre=n=>{lz($re,n)};var BL=function(){var n="b9H79Tebbbe8Fv9Gbb9Gvuuuuueu9Giuuub9Geueu9Giuuueuikqbeeedddillviebeoweuec:q;iekr;leDo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9F9KW9J9V9KW9wWVtW949c919M9MWVbeY9TW79O9V9Wt9F9KW9J9V9KW69U9KW949c919M9MWVbdE9TW79O9V9Wt9F9KW9J9V9KW69U9KW949tWG91W9U9JWbiL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9p9JtblK9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9r919HtbvL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVT949Wbol79IV9Rbrq:P8Yqdbk;3sezu8Jjjjjbcj;eb9Rgv8Kjjjjbc9:hodnadcefal0mbcuhoaiRbbc:Ge9hmbavaialfgrad9Radz1jjjbhwcj;abad9UhoaicefhldnadTmbaoc;WFbGgocjdaocjd6EhDcbhqinaqae9pmeaDaeaq9RaqaDfae6Egkcsfgocl4cifcd4hxdndndndnaoc9WGgmTmbcbhPcehsawcjdfhzalhHinaraH9Rax6midnaraHaxfgl9RcK6mbczhoinawcj;cbfaogifgoc9WfhOdndndndndnaHaic9WfgAco4fRbbaAci4coG4ciGPlbedibkaO9cb83ibaOcwf9cb83ibxikaOalRblalRbbgAco4gCaCciSgCE86bbaocGfalclfaCfgORbbaAcl4ciGgCaCciSgCE86bbaocVfaOaCfgORbbaAcd4ciGgCaCciSgCE86bbaoc7faOaCfgORbbaAciGgAaAciSgAE86bbaoctfaOaAfgARbbalRbegOco4gCaCciSgCE86bbaoc91faAaCfgARbbaOcl4ciGgCaCciSgCE86bbaoc4faAaCfgARbbaOcd4ciGgCaCciSgCE86bbaoc93faAaCfgARbbaOciGgOaOciSgOE86bbaoc94faAaOfgARbbalRbdgOco4gCaCciSgCE86bbaoc95faAaCfgARbbaOcl4ciGgCaCciSgCE86bbaoc96faAaCfgARbbaOcd4ciGgCaCciSgCE86bbaoc97faAaCfgARbbaOciGgOaOciSgOE86bbaoc98faAaOfgORbbalRbiglco4gAaAciSgAE86bbaoc99faOaAfgORbbalcl4ciGgAaAciSgAE86bbaoc9:faOaAfgORbbalcd4ciGgAaAciSgAE86bbaocufaOaAfgoRbbalciGglalciSglE86bbaoalfhlxdkaOalRbwalRbbgAcl4gCaCcsSgCE86bbaocGfalcwfaCfgORbbaAcsGgAaAcsSgAE86bbaocVfaOaAfgORbbalRbegAcl4gCaCcsSgCE86bbaoc7faOaCfgORbbaAcsGgAaAcsSgAE86bbaoctfaOaAfgORbbalRbdgAcl4gCaCcsSgCE86bbaoc91faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc4faOaAfgORbbalRbigAcl4gCaCcsSgCE86bbaoc93faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc94faOaAfgORbbalRblgAcl4gCaCcsSgCE86bbaoc95faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc96faOaAfgORbbalRbvgAcl4gCaCcsSgCE86bbaoc97faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc98faOaAfgORbbalRbogAcl4gCaCcsSgCE86bbaoc99faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc9:faOaAfgORbbalRbrglcl4gAaAcsSgAE86bbaocufaOaAfgoRbbalcsGglalcsSglE86bbaoalfhlxekaOal8Pbb83bbaOcwfalcwf8Pbb83bbalczfhlkdnaiam9pmbaiczfhoaral9RcL0mekkaiam6mialTmidnakTmbawaPfRbbhOcbhoazhiinaiawcj;cbfaofRbbgAce4cbaAceG9R7aOfgO86bbaiadfhiaocefgoak9hmbkkazcefhzaPcefgPad6hsalhHaPad9hmexvkkcbhlasceGmdxikalaxad2fhCdnakTmbcbhHcehsawcjdfhminaral9Rax6mialTmdalaxfhlawaHfRbbhOcbhoamhiinaiawcj;cbfaofRbbgAce4cbaAceG9R7aOfgO86bbaiadfhiaocefgoak9hmbkamcefhmaHcefgHad6hsaHad9hmbkaChlxikcbhocehsinaral9Rax6mdalTmealaxfhlaocefgoad6hsadao9hmbkaChlxdkcbhlasceGTmekc9:hoxikabaqad2fawcjdfakad2z1jjjb8Aawawcjdfakcufad2fadz1jjjb8Aakaqfhqalmbkc9:hoxekcbc99aral9Radcaadca0ESEhokavcj;ebf8Kjjjjbaok;yzeHu8Jjjjjbc;ae9Rgv8Kjjjjbc9:hodnaeci9UgrcHfal0mbcuhoaiRbbgwc;WeGc;Ge9hmbawcsGgDce0mbavc;abfcFecjez:jjjjb8AavcUf9cu83ibavc8Wf9cu83ibavcyf9cu83ibavcaf9cu83ibavcKf9cu83ibavczf9cu83ibav9cu83iwav9cu83ibaialfc9WfhqaicefgwarfhodnaeTmbcmcsaDceSEhkcbhxcbhmcbhDcbhicbhlindnaoaq9nmbc9:hoxikdndnawRbbgrc;Ve0mbavc;abfalarcl4cu7fcsGcitfgPydlhsaPydbhzdnarcsGgPak9pmbavaiarcu7fcsGcdtfydbaxaPEhraPThPdndnadcd9hmbabaDcetfgHaz87ebaHcdfas87ebaHclfar87ebxekabaDcdtfgHazBdbaHclfasBdbaHcwfarBdbkaxaPfhxavc;abfalcitfgHarBdbaHasBdlavaicdtfarBdbavc;abfalcefcsGglcitfgHazBdbaHarBdlaiaPfhialcefhlxdkdndnaPcsSmbamaPfaPc987fcefhmxekaocefhrao8SbbgPcFeGhHdndnaPcu9mmbarhoxekaocvfhoaHcFbGhHcrhPdninar8SbbgOcFbGaPtaHVhHaOcu9kmearcefhraPcrfgPc8J9hmbxdkkarcefhokaHce4cbaHceG9R7amfhmkdndnadcd9hmbabaDcetfgraz87ebarcdfas87ebarclfam87ebxekabaDcdtfgrazBdbarclfasBdbarcwfamBdbkavc;abfalcitfgramBdbarasBdlavaicdtfamBdbavc;abfalcefcsGglcitfgrazBdbaramBdlaicefhialcefhlxekdnarcpe0mbaxcefgOavaiaqarcsGfRbbgPcl49RcsGcdtfydbaPcz6gHEhravaiaP9RcsGcdtfydbaOaHfgsaPcsGgOEhPaOThOdndnadcd9hmbabaDcetfgzax87ebazcdfar87ebazclfaP87ebxekabaDcdtfgzaxBdbazclfarBdbazcwfaPBdbkavaicdtfaxBdbavc;abfalcitfgzarBdbazaxBdlavaicefgicsGcdtfarBdbavc;abfalcefcsGcitfgzaPBdbazarBdlavaiaHfcsGgicdtfaPBdbavc;abfalcdfcsGglcitfgraxBdbaraPBdlalcefhlaiaOfhiasaOfhxxekaxcbaoRbbgzEgAarc;:eSgrfhsazcsGhCazcl4hXdndnazcs0mbascefhOxekashOavaiaX9RcsGcdtfydbhskdndnaCmbaOcefhxxekaOhxavaiaz9RcsGcdtfydbhOkdndnarTmbaocefhrxekaocdfhrao8SbegHcFeGhPdnaHcu9kmbaocofhAaPcFbGhPcrhodninar8SbbgHcFbGaotaPVhPaHcu9kmearcefhraocrfgoc8J9hmbkaAhrxekarcefhrkaPce4cbaPceG9R7amfgmhAkdndnaXcsSmbarhPxekarcefhPar8SbbgocFeGhHdnaocu9kmbarcvfhsaHcFbGhHcrhodninaP8SbbgrcFbGaotaHVhHarcu9kmeaPcefhPaocrfgoc8J9hmbkashPxekaPcefhPkaHce4cbaHceG9R7amfgmhskdndnaCcsSmbaPhoxekaPcefhoaP8SbbgrcFeGhHdnarcu9kmbaPcvfhOaHcFbGhHcrhrdninao8SbbgPcFbGartaHVhHaPcu9kmeaocefhoarcrfgrc8J9hmbkaOhoxekaocefhokaHce4cbaHceG9R7amfgmhOkdndnadcd9hmbabaDcetfgraA87ebarcdfas87ebarclfaO87ebxekabaDcdtfgraABdbarclfasBdbarcwfaOBdbkavc;abfalcitfgrasBdbaraABdlavaicdtfaABdbavc;abfalcefcsGcitfgraOBdbarasBdlavaicefgicsGcdtfasBdbavc;abfalcdfcsGcitfgraABdbaraOBdlavaiazcz6aXcsSVfgicsGcdtfaOBdbaiaCTaCcsSVfhialcifhlkawcefhwalcsGhlaicsGhiaDcifgDae6mbkkcbc99aoaqSEhokavc;aef8Kjjjjbaok:llevu8Jjjjjbcz9Rhvc9:hodnaecvfal0mbcuhoaiRbbc;:eGc;qe9hmbav9cb83iwaicefhraialfc98fhwdnaeTmbdnadcdSmbcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcdtfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfglBdbaoalBdbaDcefgDae9hmbxdkkcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcetfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfgl87ebaoalBdbaDcefgDae9hmbkkcbc99arawSEhokaok:Lvoeue99dud99eud99dndnadcl9hmbaeTmeindndnabcdfgd8Sbb:Yab8Sbbgi:Ygl:l:tabcefgv8Sbbgo:Ygr:l:tgwJbb;:9cawawNJbbbbawawJbbbb9GgDEgq:mgkaqaicb9iEalMgwawNakaqaocb9iEarMgqaqNMM:r:vglNJbbbZJbbb:;aDEMgr:lJbbb9p9DTmbar:Ohixekcjjjj94hikadai86bbdndnaqalNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkavad86bbdndnawalNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohdxekcjjjj94hdkabad86bbabclfhbaecufgembxdkkaeTmbindndnabclfgd8Ueb:Yab8Uebgi:Ygl:l:tabcdfgv8Uebgo:Ygr:l:tgwJb;:FSawawNJbbbbawawJbbbb9GgDEgq:mgkaqaicb9iEalMgwawNakaqaocb9iEarMgqaqNMM:r:vglNJbbbZJbbb:;aDEMgr:lJbbb9p9DTmbar:Ohixekcjjjj94hikadai87ebdndnaqalNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkavad87ebdndnawalNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohdxekcjjjj94hdkabad87ebabcwfhbaecufgembkkk;siliui99iue99dnaeTmbcbhiabhlindndnJ;Zl81Zalcof8UebgvciV:Y:vgoal8Ueb:YNgrJb;:FSNJbbbZJbbb:;arJbbbb9GEMgw:lJbbb9p9DTmbaw:OhDxekcjjjj94hDkalclf8Uebhqalcdf8UebhkabavcefciGaiVcetfaD87ebdndnaoak:YNgwJb;:FSNJbbbZJbbb:;awJbbbb9GEMgx:lJbbb9p9DTmbax:Ohkxekcjjjj94hkkabavcdfciGaiVcetfak87ebdndnaoaq:YNgoJb;:FSNJbbbZJbbb:;aoJbbbb9GEMgx:lJbbb9p9DTmbax:Ohqxekcjjjj94hqkabavcufciGaiVcetfaq87ebdndnJbbjZararN:tawawN:taoaoN:tgrJbbbbarJbbbb9GE:rJb;:FSNJbbbZMgr:lJbbb9p9DTmbar:Ohqxekcjjjj94hqkabavciGaiVcetfaq87ebalcwfhlaiclfhiaecufgembkkk9mbdnadcd4ae2geTmbinababydbgdcwtcw91:Yadce91cjjj;8ifcjjj98G::NUdbabclfhbaecufgembkkk9teiucbcbydj1jjbgeabcifc98GfgbBdj1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik;LeeeudndnaeabVciGTmbabhixekdndnadcz9pmbabhixekabhiinaiaeydbBdbaiclfaeclfydbBdbaicwfaecwfydbBdbaicxfaecxfydbBdbaiczfhiaeczfheadc9Wfgdcs0mbkkadcl6mbinaiaeydbBdbaeclfheaiclfhiadc98fgdci0mbkkdnadTmbinaiaeRbb86bbaicefhiaecefheadcufgdmbkkabk;aeedudndnabciGTmbabhixekaecFeGc:b:c:ew2hldndnadcz9pmbabhixekabhiinaialBdbaicxfalBdbaicwfalBdbaiclfalBdbaiczfhiadc9Wfgdcs0mbkkadcl6mbinaialBdbaiclfhiadc98fgdci0mbkkdnadTmbinaiae86bbaicefhiadcufgdmbkkabkkkebcjwklz9Kbb",e="b9H79TebbbeKl9Gbb9Gvuuuuueu9Giuuub9Geueuikqbbebeedddilve9Weeeviebeoweuec:q;Aekr;leDo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9F9KW9J9V9KW9wWVtW949c919M9MWVbdY9TW79O9V9Wt9F9KW9J9V9KW69U9KW949c919M9MWVblE9TW79O9V9Wt9F9KW9J9V9KW69U9KW949tWG91W9U9JWbvL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9p9JtboK9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9r919HtbrL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVT949Wbwl79IV9RbDq;t9tqlbzik9:evu8Jjjjjbcz9Rhbcbheincbhdcbhiinabcwfadfaicjuaead4ceGglE86bbaialfhiadcefgdcw9hmbkaec:q:yjjbfai86bbaecitc:q1jjbfab8Piw83ibaecefgecjd9hmbkk;h8JlHud97euo978Jjjjjbcj;kb9Rgv8Kjjjjbc9:hodnadcefal0mbcuhoaiRbbc:Ge9hmbavaialfgrad9Rad;8qbbcj;abad9UhoaicefhldnadTmbaoc;WFbGgocjdaocjd6EhwcbhDinaDae9pmeawaeaD9RaDawfae6Egqcsfgoc9WGgkci2hxakcethmaocl4cifcd4hPabaDad2fhscbhzdnincehHalhOcbhAdninaraO9RaP6miavcj;cbfaAak2fhCaOaPfhlcbhidnakc;ab6mbaral9Rc;Gb6mbcbhoinaCaofhidndndndndnaOaoco4fRbbgXciGPlbedibkaipxbbbbbbbbbbbbbbbbpklbxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklbalczfhlkdndndndndnaXcd4ciGPlbedibkaipxbbbbbbbbbbbbbbbbpklzxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklzalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklzalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklzalczfhlkdndndndndnaXcl4ciGPlbedibkaipxbbbbbbbbbbbbbbbbpklaxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklaalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklaalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklaalczfhlkdndndndndnaXco4Plbedibkaipxbbbbbbbbbbbbbbbbpkl8WxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibaXc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spkl8WalclfaYpQbfaXc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibaXc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spkl8WalcwfaYpQbfaXc:q:yjjbfRbbfhlxekaialpbbbpkl8Walczfhlkaoc;abfhiaocjefak0meaihoaral9Rc;Fb0mbkkdndnaiak9pmbaici4hoinaral9RcK6mdaCaifhXdndndndndnaOaico4fRbbaocoG4ciGPlbedibkaXpxbbbbbbbbbbbbbbbbpklbxikaXalpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaXalpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaXalpbbbpklbalczfhlkaocdfhoaiczfgiak6mbkkalTmbaAci6hHalhOaAcefgohAaoclSmdxekkcbhlaHceGmdkdnakTmbavcjdfazfhiavazfpbdbhYcbhXinaiavcj;cbfaXfgopblbgLcep9TaLpxeeeeeeeeeeeeeeeegQp9op9Hp9rgLaoakfpblbg8Acep9Ta8AaQp9op9Hp9rg8ApmbzeHdOiAlCvXoQrLgEaoamfpblbg3cep9Ta3aQp9op9Hp9rg3aoaxfpblbg5cep9Ta5aQp9op9Hp9rg5pmbzeHdOiAlCvXoQrLg8EpmbezHdiOAlvCXorQLgQaQpmbedibedibedibediaYp9UgYp9AdbbaiadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaEa8EpmwDKYqk8AExm35Ps8E8FgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaLa8ApmwKDYq8AkEx3m5P8Es8FgLa3a5pmwKDYq8AkEx3m5P8Es8Fg8ApmbezHdiOAlvCXorQLgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaLa8ApmwDKYqk8AExm35Ps8E8FgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfhiaXczfgXak6mbkkazclfgzad6mbkasavcjdfaqad2;8qbbavavcjdfaqcufad2fad;8qbbaqaDfhDc9:hoalmexikkc9:hoxekcbc99aral9Radcaadca0ESEhokavcj;kbf8Kjjjjbaokwbz:bjjjbk;uzeHu8Jjjjjbc;ae9Rgv8Kjjjjbc9:hodnaeci9UgrcHfal0mbcuhoaiRbbgwc;WeGc;Ge9hmbawcsGgDce0mbavc;abfcFecje;8kbavcUf9cu83ibavc8Wf9cu83ibavcyf9cu83ibavcaf9cu83ibavcKf9cu83ibavczf9cu83ibav9cu83iwav9cu83ibaialfc9WfhqaicefgwarfhodnaeTmbcmcsaDceSEhkcbhxcbhmcbhDcbhicbhlindnaoaq9nmbc9:hoxikdndnawRbbgrc;Ve0mbavc;abfalarcl4cu7fcsGcitfgPydlhsaPydbhzdnarcsGgPak9pmbavaiarcu7fcsGcdtfydbaxaPEhraPThPdndnadcd9hmbabaDcetfgHaz87ebaHcdfas87ebaHclfar87ebxekabaDcdtfgHazBdbaHclfasBdbaHcwfarBdbkaxaPfhxavc;abfalcitfgHarBdbaHasBdlavaicdtfarBdbavc;abfalcefcsGglcitfgHazBdbaHarBdlaiaPfhialcefhlxdkdndnaPcsSmbamaPfaPc987fcefhmxekaocefhrao8SbbgPcFeGhHdndnaPcu9mmbarhoxekaocvfhoaHcFbGhHcrhPdninar8SbbgOcFbGaPtaHVhHaOcu9kmearcefhraPcrfgPc8J9hmbxdkkarcefhokaHce4cbaHceG9R7amfhmkdndnadcd9hmbabaDcetfgraz87ebarcdfas87ebarclfam87ebxekabaDcdtfgrazBdbarclfasBdbarcwfamBdbkavc;abfalcitfgramBdbarasBdlavaicdtfamBdbavc;abfalcefcsGglcitfgrazBdbaramBdlaicefhialcefhlxekdnarcpe0mbaxcefgOavaiaqarcsGfRbbgPcl49RcsGcdtfydbaPcz6gHEhravaiaP9RcsGcdtfydbaOaHfgsaPcsGgOEhPaOThOdndnadcd9hmbabaDcetfgzax87ebazcdfar87ebazclfaP87ebxekabaDcdtfgzaxBdbazclfarBdbazcwfaPBdbkavaicdtfaxBdbavc;abfalcitfgzarBdbazaxBdlavaicefgicsGcdtfarBdbavc;abfalcefcsGcitfgzaPBdbazarBdlavaiaHfcsGgicdtfaPBdbavc;abfalcdfcsGglcitfgraxBdbaraPBdlalcefhlaiaOfhiasaOfhxxekaxcbaoRbbgzEgAarc;:eSgrfhsazcsGhCazcl4hXdndnazcs0mbascefhOxekashOavaiaX9RcsGcdtfydbhskdndnaCmbaOcefhxxekaOhxavaiaz9RcsGcdtfydbhOkdndnarTmbaocefhrxekaocdfhrao8SbegHcFeGhPdnaHcu9kmbaocofhAaPcFbGhPcrhodninar8SbbgHcFbGaotaPVhPaHcu9kmearcefhraocrfgoc8J9hmbkaAhrxekarcefhrkaPce4cbaPceG9R7amfgmhAkdndnaXcsSmbarhPxekarcefhPar8SbbgocFeGhHdnaocu9kmbarcvfhsaHcFbGhHcrhodninaP8SbbgrcFbGaotaHVhHarcu9kmeaPcefhPaocrfgoc8J9hmbkashPxekaPcefhPkaHce4cbaHceG9R7amfgmhskdndnaCcsSmbaPhoxekaPcefhoaP8SbbgrcFeGhHdnarcu9kmbaPcvfhOaHcFbGhHcrhrdninao8SbbgPcFbGartaHVhHaPcu9kmeaocefhoarcrfgrc8J9hmbkaOhoxekaocefhokaHce4cbaHceG9R7amfgmhOkdndnadcd9hmbabaDcetfgraA87ebarcdfas87ebarclfaO87ebxekabaDcdtfgraABdbarclfasBdbarcwfaOBdbkavc;abfalcitfgrasBdbaraABdlavaicdtfaABdbavc;abfalcefcsGcitfgraOBdbarasBdlavaicefgicsGcdtfasBdbavc;abfalcdfcsGcitfgraABdbaraOBdlavaiazcz6aXcsSVfgicsGcdtfaOBdbaiaCTaCcsSVfhialcifhlkawcefhwalcsGhlaicsGhiaDcifgDae6mbkkcbc99aoaqSEhokavc;aef8Kjjjjbaok:llevu8Jjjjjbcz9Rhvc9:hodnaecvfal0mbcuhoaiRbbc;:eGc;qe9hmbav9cb83iwaicefhraialfc98fhwdnaeTmbdnadcdSmbcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcdtfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfglBdbaoalBdbaDcefgDae9hmbxdkkcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcetfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfgl87ebaoalBdbaDcefgDae9hmbkkcbc99arawSEhokaok:EPliuo97eue978Jjjjjbca9Rhidndnadcl9hmbdnaec98GglTmbcbhvabhdinadadpbbbgocKp:RecKp:Sep;6egraocwp:RecKp:Sep;6earp;Geaoczp:RecKp:Sep;6egwp;Gep;Kep;LegDpxbbbbbbbbbbbbbbbbp:2egqarpxbbbjbbbjbbbjbbbjgkp9op9rp;Kegrpxbb;:9cbb;:9cbb;:9cbb;:9cararp;MeaDaDp;Meawaqawakp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFbbbFbbbFbbbFbbbp9oaopxbbbFbbbFbbbFbbbFp9op9qarawp;Meaqp;Kecwp:RepxbFbbbFbbbFbbbFbbp9op9qaDawp;Meaqp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qpkbbadczfhdavclfgval6mbkkalae9pmeaiaeciGgvcdtgdVcbczad9R;8kbaiabalcdtfglad;8qbbdnavTmbaiaipblbgocKp:RecKp:Sep;6egraocwp:RecKp:Sep;6earp;Geaoczp:RecKp:Sep;6egwp;Gep;Kep;LegDpxbbbbbbbbbbbbbbbbp:2egqarpxbbbjbbbjbbbjbbbjgkp9op9rp;Kegrpxbb;:9cbb;:9cbb;:9cbb;:9cararp;MeaDaDp;Meawaqawakp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFbbbFbbbFbbbFbbbp9oaopxbbbFbbbFbbbFbbbFp9op9qarawp;Meaqp;Kecwp:RepxbFbbbFbbbFbbbFbbp9op9qaDawp;Meaqp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qpklbkalaiad;8qbbskdnaec98GgxTmbcbhvabhdinadczfglalpbbbgopxbbbbbbFFbbbbbbFFgkp9oadpbbbgDaopmlvorxmPsCXQL358E8FpxFubbFubbFubbFubbp9op;6eaDaopmbediwDqkzHOAKY8AEgoczp:Sep;6egrp;Geaoczp:Reczp:Sep;6egwp;Gep;Kep;Legopxb;:FSb;:FSb;:FSb;:FSawaopxbbbbbbbbbbbbbbbbp:2egqawpxbbbjbbbjbbbjbbbjgmp9op9rp;Kegwawp;Meaoaop;Mearaqaramp9op9rp;Kegoaop;Mep;Kep;Kep;Jep;Negrp;Mepxbbn0bbn0bbn0bbn0gqp;Keczp:Reawarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9op9qgwaoarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9ogopmwDKYqk8AExm35Ps8E8Fp9qpkbbadaDakp9oawaopmbezHdiOAlvCXorQLp9qpkbbadcafhdavclfgvax6mbkkaxae9pmbaiaeciGgvcitgdfcbcaad9R;8kbaiabaxcitfglad;8qbbdnavTmbaiaipblzgopxbbbbbbFFbbbbbbFFgkp9oaipblbgDaopmlvorxmPsCXQL358E8FpxFubbFubbFubbFubbp9op;6eaDaopmbediwDqkzHOAKY8AEgoczp:Sep;6egrp;Geaoczp:Reczp:Sep;6egwp;Gep;Kep;Legopxb;:FSb;:FSb;:FSb;:FSawaopxbbbbbbbbbbbbbbbbp:2egqawpxbbbjbbbjbbbjbbbjgmp9op9rp;Kegwawp;Meaoaop;Mearaqaramp9op9rp;Kegoaop;Mep;Kep;Kep;Jep;Negrp;Mepxbbn0bbn0bbn0bbn0gqp;Keczp:Reawarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9op9qgwaoarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9ogopmwDKYqk8AExm35Ps8E8Fp9qpklzaiaDakp9oawaopmbezHdiOAlvCXorQLp9qpklbkalaiad;8qbbkk;4wllue97euv978Jjjjjbc8W9Rhidnaec98GglTmbcbhvabhoinaiaopbbbgraoczfgwpbbbgDpmlvorxmPsCXQL358E8Fgqczp:Segkclp:RepklbaopxbbjZbbjZbbjZbbjZpx;Zl81Z;Zl81Z;Zl81Z;Zl81Zakpxibbbibbbibbbibbbp9qp;6ep;NegkaraDpmbediwDqkzHOAKY8AEgrczp:Reczp:Sep;6ep;MegDaDp;Meakarczp:Sep;6ep;Megxaxp;Meakaqczp:Reczp:Sep;6ep;Megqaqp;Mep;Kep;Kep;Lepxbbbbbbbbbbbbbbbbp:4ep;Jepxb;:FSb;:FSb;:FSb;:FSgkp;Mepxbbn0bbn0bbn0bbn0grp;KepxFFbbFFbbFFbbFFbbgmp9oaxakp;Mearp;Keczp:Rep9qgxaqakp;Mearp;Keczp:ReaDakp;Mearp;Keamp9op9qgkpmbezHdiOAlvCXorQLgrp5baipblbpEb:T:j83ibaocwfarp5eaipblbpEe:T:j83ibawaxakpmwDKYqk8AExm35Ps8E8Fgkp5baipblbpEd:T:j83ibaocKfakp5eaipblbpEi:T:j83ibaocafhoavclfgval6mbkkdnalae9pmbaiaeciGgvcitgofcbcaao9R;8kbaiabalcitfgwao;8qbbdnavTmbaiaipblbgraipblzgDpmlvorxmPsCXQL358E8Fgqczp:Segkclp:RepklaaipxbbjZbbjZbbjZbbjZpx;Zl81Z;Zl81Z;Zl81Z;Zl81Zakpxibbbibbbibbbibbbp9qp;6ep;NegkaraDpmbediwDqkzHOAKY8AEgrczp:Reczp:Sep;6ep;MegDaDp;Meakarczp:Sep;6ep;Megxaxp;Meakaqczp:Reczp:Sep;6ep;Megqaqp;Mep;Kep;Kep;Lepxbbbbbbbbbbbbbbbbp:4ep;Jepxb;:FSb;:FSb;:FSb;:FSgkp;Mepxbbn0bbn0bbn0bbn0grp;KepxFFbbFFbbFFbbFFbbgmp9oaxakp;Mearp;Keczp:Rep9qgxaqakp;Mearp;Keczp:ReaDakp;Mearp;Keamp9op9qgkpmbezHdiOAlvCXorQLgrp5baipblapEb:T:j83ibaiarp5eaipblapEe:T:j83iwaiaxakpmwDKYqk8AExm35Ps8E8Fgkp5baipblapEd:T:j83izaiakp5eaipblapEi:T:j83iKkawaiao;8qbbkk:Pddiue978Jjjjjbc;ab9Rhidnadcd4ae2glc98GgvTmbcbhdabheinaeaepbbbgocwp:Recwp:Sep;6eaocep:SepxbbjZbbjZbbjZbbjZp:UepxbbjFbbjFbbjFbbjFp9op;Mepkbbaeczfheadclfgdav6mbkkdnaval9pmbaialciGgdcdtgeVcbc;abae9R;8kbaiabavcdtfgvae;8qbbdnadTmbaiaipblbgocwp:Recwp:Sep;6eaocep:SepxbbjZbbjZbbjZbbjZp:UepxbbjFbbjFbbjFbbjFp9op;Mepklbkavaiae;8qbbkk9teiucbcbydj1jjbgeabcifc98GfgbBdj1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaikkkebcjwklz9Tbb",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),i=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if(typeof WebAssembly!="object")return{supported:!1};var s=WebAssembly.validate(t)?e:n,r,o=WebAssembly.instantiate(a(s),{}).then(function(A){r=A.instance,r.exports.__wasm_call_ctors()});function a(A){for(var b=new Uint8Array(A.length),w=0;w<A.length;++w){var E=A.charCodeAt(w);b[w]=E>96?E-97:E>64?E-39:E+4}for(var M=0,w=0;w<A.length;++w)b[M++]=b[w]<60?i[b[w]]:(b[w]-60)*64+b[++w];return b.buffer.slice(0,M)}function l(A,b,w,E,M,I){var D=r.exports.sbrk,B=w+3&-4,R=D(B*E),T=D(M.length),k=new Uint8Array(r.exports.memory.buffer);k.set(M,T);var H=A(R,w,E,T,M.length);if(H==0&&I&&I(R,B,E),b.set(k.subarray(R,R+w*E)),D(R-D(0)),H!=0)throw new Error("Malformed buffer data: "+H)}var c={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},u={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"},h=[],p=0;function m(A){var b={object:new Worker(A),pending:0,requests:{}};return b.object.onmessage=function(w){var E=w.data;b.pending-=E.count,b.requests[E.id][E.action](E.value),delete b.requests[E.id]},b}function g(A){for(var b="var instance; var ready = WebAssembly.instantiate(new Uint8Array(["+new Uint8Array(a(s))+"]), {}).then(function(result) { instance = result.instance; instance.exports.__wasm_call_ctors(); });self.onmessage = workerProcess;"+l.toString()+y.toString(),w=new Blob([b],{type:"text/javascript"}),E=URL.createObjectURL(w),M=0;M<A;++M)h[M]=m(E);URL.revokeObjectURL(E)}function v(A,b,w,E,M){for(var I=h[0],D=1;D<h.length;++D)h[D].pending<I.pending&&(I=h[D]);return new Promise(function(B,R){var T=new Uint8Array(w),k=p++;I.pending+=A,I.requests[k]={resolve:B,reject:R},I.object.postMessage({id:k,count:A,size:b,source:T,mode:E,filter:M},[T.buffer])})}function y(A){o.then(function(){var b=A.data;try{var w=new Uint8Array(b.count*b.size);l(r.exports[b.mode],w,b.count,b.size,b.source,r.exports[b.filter]),self.postMessage({id:b.id,count:b.count,action:"resolve",value:w},[w.buffer])}catch(E){self.postMessage({id:b.id,count:b.count,action:"reject",value:E})}})}return{ready:o,supported:!0,useWorkers:function(A){g(A)},decodeVertexBuffer:function(A,b,w,E,M){l(r.exports.meshopt_decodeVertexBuffer,A,b,w,E,r.exports[c[M]])},decodeIndexBuffer:function(A,b,w,E){l(r.exports.meshopt_decodeIndexBuffer,A,b,w,E)},decodeIndexSequence:function(A,b,w,E){l(r.exports.meshopt_decodeIndexSequence,A,b,w,E)},decodeGltfBuffer:function(A,b,w,E,M,I){l(r.exports[u[M]],A,b,w,E,r.exports[c[I]])},decodeGltfBufferAsync:function(A,b,w,E,M){return h.length>0?v(A,b,w,u[E],c[M]):o.then(function(){var I=new Uint8Array(A*b);return l(r.exports[u[E]],I,A,b,w,r.exports[c[M]]),I})}}}();const nC=new WeakMap;class Zre extends hi{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,s){const r=new ni(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(e,o=>{this.parse(o,t,s)},i,s)}parse(e,t,i=()=>{}){this.decodeDracoFile(e,t,null,null,mn,i).catch(i)}decodeDracoFile(e,t,i,s,r=yn,o=()=>{}){const a={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:s||this.defaultAttributeTypes,useUniqueIDs:!!i,vertexColorSpace:r};return this.decodeGeometry(e,a).then(t).catch(o)}decodeGeometry(e,t){const i=JSON.stringify(t);if(nC.has(e)){const l=nC.get(e);if(l.key===i)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let s;const r=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(r,o).then(l=>(s=l,new Promise((c,u)=>{s._callbacks[r]={resolve:c,reject:u},s.postMessage({type:"decode",id:r,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{s&&r&&this._releaseTask(s,r)}),nC.set(e,{key:i,promise:a}),a}_createGeometry(e){const t=new xt;e.index&&t.setIndex(new wt(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const s=e.attributes[i],r=s.name,o=s.array,a=s.itemSize,l=new wt(o,a);r==="color"&&(this._assignVertexColorSpace(l,s.vertexColorSpace),l.normalized=!(o instanceof Float32Array)),t.setAttribute(r,l)}return t}_assignVertexColorSpace(e,t){if(t!==mn)return;const i=new Me;for(let s=0,r=e.count;s<r;s++)i.fromBufferAttribute(e,s),Ht.toWorkingColorSpace(i,mn),e.setXYZ(s,i.r,i.g,i.b)}_loadLibrary(e,t){const i=new ni(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((s,r)=>{i.load(e,s,void 0,r)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{const s=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const r=eoe.toString(),o=["/* draco decoder */",s,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const s=new Worker(this.workerSourceURL);s._callbacks={},s._taskCosts={},s._taskLoad=0,s.postMessage({type:"init",decoderConfig:this.decoderConfig}),s.onmessage=function(r){const o=r.data;switch(o.type){case"decode":s._callbacks[o.id].resolve(o);break;case"error":s._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(s)}else this.workerPool.sort(function(s,r){return s._taskLoad>r._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}}function eoe(){let n,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":n=a.decoderConfig,e=new Promise(function(u){n.onModuleLoaded=function(h){u({draco:h})},DracoDecoderModule(n)});break;case"decode":const l=a.buffer,c=a.taskConfig;e.then(u=>{const h=u.draco,p=new h.Decoder;try{const m=t(h,p,new Int8Array(l),c),g=m.attributes.map(v=>v.array.buffer);m.index&&g.push(m.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:m},g)}catch(m){console.error(m),self.postMessage({type:"error",id:a.id,error:m.message})}finally{h.destroy(p)}});break}};function t(o,a,l,c){const u=c.attributeIDs,h=c.attributeTypes;let p,m;const g=a.GetEncodedGeometryType(l);if(g===o.TRIANGULAR_MESH)p=new o.Mesh,m=a.DecodeArrayToMesh(l,l.byteLength,p);else if(g===o.POINT_CLOUD)p=new o.PointCloud,m=a.DecodeArrayToPointCloud(l,l.byteLength,p);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!m.ok()||p.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+m.error_msg());const v={index:null,attributes:[]};for(const y in u){const A=self[h[y]];let b,w;if(c.useUniqueIDs)w=u[y],b=a.GetAttributeByUniqueId(p,w);else{if(w=a.GetAttributeId(p,o[u[y]]),w===-1)continue;b=a.GetAttribute(p,w)}const E=s(o,a,p,y,A,b);y==="color"&&(E.vertexColorSpace=c.vertexColorSpace),v.attributes.push(E)}return g===o.TRIANGULAR_MESH&&(v.index=i(o,a,p)),o.destroy(p),v}function i(o,a,l){const u=l.num_faces()*3,h=u*4,p=o._malloc(h);a.GetTrianglesUInt32Array(l,h,p);const m=new Uint32Array(o.HEAPF32.buffer,p,u).slice();return o._free(p),{array:m,itemSize:1}}function s(o,a,l,c,u,h){const p=h.num_components(),g=l.num_points()*p,v=g*u.BYTES_PER_ELEMENT,y=r(o,u),A=o._malloc(v);a.GetAttributeDataArrayForAllPoints(l,h,y,v,A);const b=new u(o.HEAPF32.buffer,A,g).slice();return o._free(A),{name:c,array:b,itemSize:p}}function r(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}function RL(n,e){if(e===yI)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===zu||e===Ig){let t=n.getIndex();if(t===null){const o=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const i=t.count-2,s=[];if(e===zu)for(let o=1;o<=i;o++)s.push(t.getX(0)),s.push(t.getX(o)),s.push(t.getX(o+1));else for(let o=0;o<i;o++)o%2===0?(s.push(t.getX(o)),s.push(t.getX(o+1)),s.push(t.getX(o+2))):(s.push(t.getX(o+2)),s.push(t.getX(o+1)),s.push(t.getX(o)));s.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const r=n.clone();return r.setIndex(s),r.clearGroups(),r}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}class toe extends hi{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new ooe(t)}),this.register(function(t){return new aoe(t)}),this.register(function(t){return new goe(t)}),this.register(function(t){return new Aoe(t)}),this.register(function(t){return new yoe(t)}),this.register(function(t){return new coe(t)}),this.register(function(t){return new uoe(t)}),this.register(function(t){return new hoe(t)}),this.register(function(t){return new doe(t)}),this.register(function(t){return new roe(t)}),this.register(function(t){return new foe(t)}),this.register(function(t){return new loe(t)}),this.register(function(t){return new moe(t)}),this.register(function(t){return new poe(t)}),this.register(function(t){return new ioe(t)}),this.register(function(t){return new voe(t)}),this.register(function(t){return new xoe(t)})}load(e,t,i,s){const r=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const c=ur.extractUrlBase(e);o=ur.resolveURL(c,this.path)}else o=ur.extractUrlBase(e);this.manager.itemStart(e);const a=function(c){s?s(c):console.error(c),r.manager.itemError(e),r.manager.itemEnd(e)},l=new ni(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{r.parse(c,o,function(u){t(u),r.manager.itemEnd(e)},a)}catch(u){a(u)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,s){let r;const o={},a={},l=new TextDecoder;if(typeof e=="string")r=JSON.parse(e);else if(e instanceof ArrayBuffer)if(l.decode(new Uint8Array(e,0,4))===fz){try{o[jt.KHR_BINARY_GLTF]=new boe(e)}catch(h){s&&s(h);return}r=JSON.parse(o[jt.KHR_BINARY_GLTF].content)}else r=JSON.parse(l.decode(e));else r=e;if(r.asset===void 0||r.asset.version[0]<2){s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const c=new Loe(r,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const h=this.pluginCallbacks[u](c);h.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[h.name]=h,o[h.name]=!0}if(r.extensionsUsed)for(let u=0;u<r.extensionsUsed.length;++u){const h=r.extensionsUsed[u],p=r.extensionsRequired||[];switch(h){case jt.KHR_MATERIALS_UNLIT:o[h]=new soe;break;case jt.KHR_DRACO_MESH_COMPRESSION:o[h]=new woe(r,this.dracoLoader);break;case jt.KHR_TEXTURE_TRANSFORM:o[h]=new Eoe;break;case jt.KHR_MESH_QUANTIZATION:o[h]=new _oe;break;default:p.indexOf(h)>=0&&a[h]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+h+'".')}}c.setExtensions(o),c.setPlugins(a),c.parse(i,s)}parseAsync(e,t){const i=this;return new Promise(function(s,r){i.parse(e,t,s,r)})}}function noe(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const jt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class ioe{constructor(e){this.parser=e,this.name=jt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,s=t.length;i<s;i++){const r=t[i];r.extensions&&r.extensions[this.name]&&r.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let s=t.cache.get(i);if(s)return s;const r=t.json,l=((r.extensions&&r.extensions[this.name]||{}).lights||[])[e];let c;const u=new Me(16777215);l.color!==void 0&&u.setRGB(l.color[0],l.color[1],l.color[2],yn);const h=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new Ug(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new Og(u),c.distance=h;break;case"spot":c=new Rb(u),c.distance=h,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,_a(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),s=Promise.resolve(c),t.cache.add(i,s),s}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,r=i.json.nodes[e],a=(r.extensions&&r.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return i._getNodeRef(t.cache,a,l)})}}let soe=class{constructor(){this.name=jt.KHR_MATERIALS_UNLIT}getMaterialType(){return Un}extendParams(e,t,i){const s=[];e.color=new Me(1,1,1),e.opacity=1;const r=t.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const o=r.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],yn),e.opacity=o[3]}r.baseColorTexture!==void 0&&s.push(i.assignTexture(e,"map",r.baseColorTexture,mn))}return Promise.all(s)}},roe=class{constructor(e){this.parser=e,this.name=jt.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name].emissiveStrength;return r!==void 0&&(t.emissiveIntensity=r),Promise.resolve()}},ooe=class{constructor(e){this.parser=e,this.name=jt.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Xn}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&r.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&r.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(r.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new me(a,a)}return Promise.all(r)}},aoe=class{constructor(e){this.parser=e,this.name=jt.KHR_MATERIALS_DISPERSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Xn}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name];return t.dispersion=r.dispersion!==void 0?r.dispersion:0,Promise.resolve()}},loe=class{constructor(e){this.parser=e,this.name=jt.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Xn}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&r.push(i.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&r.push(i.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(r)}},coe=class{constructor(e){this.parser=e,this.name=jt.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Xn}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[];t.sheenColor=new Me(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=s.extensions[this.name];if(o.sheenColorFactor!==void 0){const a=o.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],yn)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&r.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture,mn)),o.sheenRoughnessTexture!==void 0&&r.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(r)}},uoe=class{constructor(e){this.parser=e,this.name=jt.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Xn}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&r.push(i.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(r)}},hoe=class{constructor(e){this.parser=e,this.name=jt.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Xn}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&r.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new Me().setRGB(a[0],a[1],a[2],yn),Promise.all(r)}},doe=class{constructor(e){this.parser=e,this.name=jt.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Xn}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name];return t.ior=r.ior!==void 0?r.ior:1.5,Promise.resolve()}},foe=class{constructor(e){this.parser=e,this.name=jt.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Xn}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&r.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new Me().setRGB(a[0],a[1],a[2],yn),o.specularColorTexture!==void 0&&r.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture,mn)),Promise.all(r)}},poe=class{constructor(e){this.parser=e,this.name=jt.EXT_MATERIALS_BUMP}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Xn}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&r.push(i.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(r)}},moe=class{constructor(e){this.parser=e,this.name=jt.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Xn}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&r.push(i.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(r)}};class goe{constructor(e){this.parser=e,this.name=jt.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,s=i.textures[e];if(!s.extensions||!s.extensions[this.name])return null;const r=s.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,r.source,o)}}class Aoe{constructor(e){this.parser=e,this.name=jt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,s=i.json,r=s.textures[e];if(!r.extensions||!r.extensions[t])return null;const o=r.extensions[t],a=s.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class yoe{constructor(e){this.parser=e,this.name=jt.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,s=i.json,r=s.textures[e];if(!r.extensions||!r.extensions[t])return null;const o=r.extensions[t],a=s.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class voe{constructor(e){this.name=jt.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const s=i.extensions[this.name],r=this.parser.getDependency("buffer",s.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return r.then(function(a){const l=s.byteOffset||0,c=s.byteLength||0,u=s.count,h=s.byteStride,p=new Uint8Array(a,l,c);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,h,p,s.mode,s.filter).then(function(m){return m.buffer}):o.ready.then(function(){const m=new ArrayBuffer(u*h);return o.decodeGltfBuffer(new Uint8Array(m),u,h,p,s.mode,s.filter),m})})}else return null}}let xoe=class{constructor(e){this.name=jt.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const s=t.meshes[i.mesh];for(const c of s.primitives)if(c.mode!==Tr.TRIANGLES&&c.mode!==Tr.TRIANGLE_STRIP&&c.mode!==Tr.TRIANGLE_FAN&&c.mode!==void 0)return null;const o=i.extensions[this.name].attributes,a=[],l={};for(const c in o)a.push(this.parser.getDependency("accessor",o[c]).then(u=>(l[c]=u,l[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(c=>{const u=c.pop(),h=u.isGroup?u.children:[u],p=c[0].count,m=[];for(const g of h){const v=new tt,y=new O,A=new qn,b=new O(1,1,1),w=new hb(g.geometry,g.material,p);for(let E=0;E<p;E++)l.TRANSLATION&&y.fromBufferAttribute(l.TRANSLATION,E),l.ROTATION&&A.fromBufferAttribute(l.ROTATION,E),l.SCALE&&b.fromBufferAttribute(l.SCALE,E),w.setMatrixAt(E,v.compose(y,A,b));for(const E in l)if(E==="_COLOR_0"){const M=l[E];w.instanceColor=new ic(M.array,M.itemSize,M.normalized)}else E!=="TRANSLATION"&&E!=="ROTATION"&&E!=="SCALE"&&g.geometry.setAttribute(E,l[E]);Rt.prototype.copy.call(w,g),this.parser.assignFinalMaterial(w),m.push(w)}return u.isGroup?(u.clear(),u.add(...m),u):m[0]}))}};const fz="glTF",Dp=12,DL={JSON:1313821514,BIN:5130562};class boe{constructor(e){this.name=jt.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Dp),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==fz)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const s=this.header.length-Dp,r=new DataView(e,Dp);let o=0;for(;o<s;){const a=r.getUint32(o,!0);o+=4;const l=r.getUint32(o,!0);if(o+=4,l===DL.JSON){const c=new Uint8Array(e,Dp+o,a);this.content=i.decode(c)}else if(l===DL.BIN){const c=Dp+o;this.body=e.slice(c,c+a)}o+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class woe{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=jt.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,s=this.dracoLoader,r=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const u in o){const h=X1[u]||u.toLowerCase();a[h]=o[u]}for(const u in e.attributes){const h=X1[u]||u.toLowerCase();if(o[u]!==void 0){const p=i.accessors[e.attributes[u]],m=Kd[p.componentType];c[h]=m.name,l[h]=p.normalized===!0}}return t.getDependency("bufferView",r).then(function(u){return new Promise(function(h,p){s.decodeDracoFile(u,function(m){for(const g in m.attributes){const v=m.attributes[g],y=l[g];y!==void 0&&(v.normalized=y)}h(m)},a,c,yn,p)})})}}class Eoe{constructor(){this.name=jt.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class _oe{constructor(){this.name=jt.KHR_MESH_QUANTIZATION}}class pz extends eh{constructor(e,t,i,s){super(e,t,i,s)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,s=this.valueSize,r=e*s*3+s;for(let o=0;o!==s;o++)t[o]=i[r+o];return t}interpolate_(e,t,i,s){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,c=a*3,u=s-t,h=(i-t)/u,p=h*h,m=p*h,g=e*c,v=g-c,y=-2*m+3*p,A=m-p,b=1-y,w=A-p+h;for(let E=0;E!==a;E++){const M=o[v+E+a],I=o[v+E+l]*u,D=o[g+E+a],B=o[g+E]*u;r[E]=b*M+w*I+y*D+A*B}return r}}const Coe=new qn;class Soe extends pz{interpolate_(e,t,i,s){const r=super.interpolate_(e,t,i,s);return Coe.fromArray(r).normalize().toArray(r),r}}const Tr={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Kd={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},PL={9728:Mn,9729:Bt,9984:hc,9985:Ho,9986:ao,9987:vi},LL={33071:Cn,33648:jo,10497:ls},iC={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},X1={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},yl={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Moe={CUBICSPLINE:void 0,LINEAR:Va,STEP:nc},sC={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Ioe(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new Wa({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:fr})),n.DefaultMaterial}function qc(n,e,t){for(const i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function _a(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function Toe(n,e,t){let i=!1,s=!1,r=!1;for(let c=0,u=e.length;c<u;c++){const h=e[c];if(h.POSITION!==void 0&&(i=!0),h.NORMAL!==void 0&&(s=!0),h.COLOR_0!==void 0&&(r=!0),i&&s&&r)break}if(!i&&!s&&!r)return Promise.resolve(n);const o=[],a=[],l=[];for(let c=0,u=e.length;c<u;c++){const h=e[c];if(i){const p=h.POSITION!==void 0?t.getDependency("accessor",h.POSITION):n.attributes.position;o.push(p)}if(s){const p=h.NORMAL!==void 0?t.getDependency("accessor",h.NORMAL):n.attributes.normal;a.push(p)}if(r){const p=h.COLOR_0!==void 0?t.getDependency("accessor",h.COLOR_0):n.attributes.color;l.push(p)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const u=c[0],h=c[1],p=c[2];return i&&(n.morphAttributes.position=u),s&&(n.morphAttributes.normal=h),r&&(n.morphAttributes.color=p),n.morphTargetsRelative=!0,n})}function Boe(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,s=t.length;i<s;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Roe(n){let e;const t=n.extensions&&n.extensions[jt.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+rC(t.attributes):e=n.indices+":"+rC(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,s=n.targets.length;i<s;i++)e+=":"+rC(n.targets[i]);return e}function rC(n){let e="";const t=Object.keys(n).sort();for(let i=0,s=t.length;i<s;i++)e+=t[i]+":"+n[t[i]]+";";return e}function K1(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Doe(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":n.search(/\.ktx2($|\?)/i)>0||n.search(/^data\:image\/ktx2/)===0?"image/ktx2":"image/png"}const Poe=new tt;class Loe{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new noe,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,s=-1,r=!1,o=-1;if(typeof navigator<"u"){const a=navigator.userAgent;i=/^((?!chrome|android).)*safari/i.test(a)===!0;const l=a.match(/Version\/(\d+)/);s=i&&l?parseInt(l[1],10):-1,r=a.indexOf("Firefox")>-1,o=r?a.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||i&&s<17||r&&o<98?this.textureLoader=new Bb(this.options.manager):this.textureLoader=new NI(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new ni(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,s=this.json,r=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][s.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:s.asset,parser:i,userData:{}};return qc(r,a,s),_a(a,s),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){for(const l of a.scenes)l.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let s=0,r=t.length;s<r;s++){const o=t[s].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let s=0,r=e.length;s<r;s++){const o=e[s];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(i[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const s=i.clone(),r=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[c,u]of o.children.entries())r(u,a.children[c])};return r(i,s),s.name+="_instance_"+e.uses[t]++,s}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const s=e(t[i]);if(s)return s}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let s=0;s<t.length;s++){const r=e(t[s]);r&&i.push(r)}return i}getDependency(e,t){const i=e+":"+t;let s=this.cache.get(i);if(!s){switch(e){case"scene":s=this.loadScene(t);break;case"node":s=this._invokeOne(function(r){return r.loadNode&&r.loadNode(t)});break;case"mesh":s=this._invokeOne(function(r){return r.loadMesh&&r.loadMesh(t)});break;case"accessor":s=this.loadAccessor(t);break;case"bufferView":s=this._invokeOne(function(r){return r.loadBufferView&&r.loadBufferView(t)});break;case"buffer":s=this.loadBuffer(t);break;case"material":s=this._invokeOne(function(r){return r.loadMaterial&&r.loadMaterial(t)});break;case"texture":s=this._invokeOne(function(r){return r.loadTexture&&r.loadTexture(t)});break;case"skin":s=this.loadSkin(t);break;case"animation":s=this._invokeOne(function(r){return r.loadAnimation&&r.loadAnimation(t)});break;case"camera":s=this.loadCamera(t);break;default:if(s=this._invokeOne(function(r){return r!=this&&r.getDependency&&r.getDependency(e,t)}),!s)throw new Error("Unknown type: "+e);break}this.cache.add(i,s)}return s}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,s=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(s.map(function(r,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[jt.KHR_BINARY_GLTF].body);const s=this.options;return new Promise(function(r,o){i.load(ur.resolveURL(t.uri,s.path),r,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const s=t.byteLength||0,r=t.byteOffset||0;return i.slice(r,r+s)})}loadAccessor(e){const t=this,i=this.json,s=this.json.accessors[e];if(s.bufferView===void 0&&s.sparse===void 0){const o=iC[s.type],a=Kd[s.componentType],l=s.normalized===!0,c=new a(s.count*o);return Promise.resolve(new wt(c,o,l))}const r=[];return s.bufferView!==void 0?r.push(this.getDependency("bufferView",s.bufferView)):r.push(null),s.sparse!==void 0&&(r.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(r).then(function(o){const a=o[0],l=iC[s.type],c=Kd[s.componentType],u=c.BYTES_PER_ELEMENT,h=u*l,p=s.byteOffset||0,m=s.bufferView!==void 0?i.bufferViews[s.bufferView].byteStride:void 0,g=s.normalized===!0;let v,y;if(m&&m!==h){const A=Math.floor(p/m),b="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+A+":"+s.count;let w=t.cache.get(b);w||(v=new c(a,A*m,s.count*m/u),w=new Df(v,m/u),t.cache.add(b,w)),y=new ja(w,l,p%m/u,g)}else a===null?v=new c(s.count*l):v=new c(a,p,s.count*l),y=new wt(v,l,g);if(s.sparse!==void 0){const A=iC.SCALAR,b=Kd[s.sparse.indices.componentType],w=s.sparse.indices.byteOffset||0,E=s.sparse.values.byteOffset||0,M=new b(o[1],w,s.sparse.count*A),I=new c(o[2],E,s.sparse.count*l);a!==null&&(y=new wt(y.array.slice(),y.itemSize,y.normalized)),y.normalized=!1;for(let D=0,B=M.length;D<B;D++){const R=M[D];if(y.setX(R,I[D*l]),l>=2&&y.setY(R,I[D*l+1]),l>=3&&y.setZ(R,I[D*l+2]),l>=4&&y.setW(R,I[D*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}y.normalized=g}return y})}loadTexture(e){const t=this.json,i=this.options,r=t.textures[e].source,o=t.images[r];let a=this.textureLoader;if(o.uri){const l=i.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,r,a)}loadTextureImage(e,t,i){const s=this,r=this.json,o=r.textures[e],a=r.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,i).then(function(u){u.flipY=!1,u.name=o.name||a.name||"",u.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(u.name=a.uri);const p=(r.samplers||{})[o.sampler]||{};return u.magFilter=PL[p.magFilter]||Bt,u.minFilter=PL[p.minFilter]||vi,u.wrapS=LL[p.wrapS]||ls,u.wrapT=LL[p.wrapT]||ls,u.generateMipmaps=!u.isCompressedTexture&&u.minFilter!==Mn&&u.minFilter!==Bt,s.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const i=this,s=this.json,r=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(h=>h.clone());const o=s.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(o.bufferView!==void 0)l=i.getDependency("bufferView",o.bufferView).then(function(h){c=!0;const p=new Blob([h],{type:o.mimeType});return l=a.createObjectURL(p),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(l).then(function(h){return new Promise(function(p,m){let g=p;t.isImageBitmapLoader===!0&&(g=function(v){const y=new ln(v);y.needsUpdate=!0,p(y)}),t.load(ur.resolveURL(h,r.path),g,void 0,m)})}).then(function(h){return c===!0&&a.revokeObjectURL(l),_a(h,o),h.userData.mimeType=o.mimeType||Doe(o.uri),h}).catch(function(h){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),h});return this.sourceCache[e]=u,u}assignTexture(e,t,i,s){const r=this;return this.getDependency("texture",i.index).then(function(o){if(!o)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(o=o.clone(),o.channel=i.texCoord),r.extensions[jt.KHR_TEXTURE_TRANSFORM]){const a=i.extensions!==void 0?i.extensions[jt.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=r.associations.get(o);o=r.extensions[jt.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),r.associations.set(o,l)}}return s!==void 0&&(o.colorSpace=s),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const s=t.attributes.tangent===void 0,r=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new kg,zn.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(a,l)),i=l}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new Qi,zn.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,this.cache.add(a,l)),i=l}if(s||r||o){let a="ClonedMaterial:"+i.uuid+":";s&&(a+="derivative-tangents:"),r&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=i.clone(),r&&(l.vertexColors=!0),o&&(l.flatShading=!0),s&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(i))),i=l}e.material=i}getMaterialType(){return Wa}loadMaterial(e){const t=this,i=this.json,s=this.extensions,r=i.materials[e];let o;const a={},l=r.extensions||{},c=[];if(l[jt.KHR_MATERIALS_UNLIT]){const h=s[jt.KHR_MATERIALS_UNLIT];o=h.getMaterialType(),c.push(h.extendParams(a,r,t))}else{const h=r.pbrMetallicRoughness||{};if(a.color=new Me(1,1,1),a.opacity=1,Array.isArray(h.baseColorFactor)){const p=h.baseColorFactor;a.color.setRGB(p[0],p[1],p[2],yn),a.opacity=p[3]}h.baseColorTexture!==void 0&&c.push(t.assignTexture(a,"map",h.baseColorTexture,mn)),a.metalness=h.metallicFactor!==void 0?h.metallicFactor:1,a.roughness=h.roughnessFactor!==void 0?h.roughnessFactor:1,h.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(a,"metalnessMap",h.metallicRoughnessTexture)),c.push(t.assignTexture(a,"roughnessMap",h.metallicRoughnessTexture))),o=this._invokeOne(function(p){return p.getMaterialType&&p.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(p){return p.extendMaterialParams&&p.extendMaterialParams(e,a)})))}r.doubleSided===!0&&(a.side=ci);const u=r.alphaMode||sC.OPAQUE;if(u===sC.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,u===sC.MASK&&(a.alphaTest=r.alphaCutoff!==void 0?r.alphaCutoff:.5)),r.normalTexture!==void 0&&o!==Un&&(c.push(t.assignTexture(a,"normalMap",r.normalTexture)),a.normalScale=new me(1,1),r.normalTexture.scale!==void 0)){const h=r.normalTexture.scale;a.normalScale.set(h,h)}if(r.occlusionTexture!==void 0&&o!==Un&&(c.push(t.assignTexture(a,"aoMap",r.occlusionTexture)),r.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=r.occlusionTexture.strength)),r.emissiveFactor!==void 0&&o!==Un){const h=r.emissiveFactor;a.emissive=new Me().setRGB(h[0],h[1],h[2],yn)}return r.emissiveTexture!==void 0&&o!==Un&&c.push(t.assignTexture(a,"emissiveMap",r.emissiveTexture,mn)),Promise.all(c).then(function(){const h=new o(a);return r.name&&(h.name=r.name),_a(h,r),t.associations.set(h,{materials:e}),r.extensions&&qc(s,h,r),h})}createUniqueName(e){const t=Ot.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,s=this.primitiveCache;function r(a){return i[jt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return kL(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],u=Roe(c),h=s[u];if(h)o.push(h.promise);else{let p;c.extensions&&c.extensions[jt.KHR_DRACO_MESH_COMPRESSION]?p=r(c):p=kL(new xt,c,t),s[u]={primitive:c,promise:p},o.push(p)}}return Promise.all(o)}loadMesh(e){const t=this,i=this.json,s=this.extensions,r=i.meshes[e],o=r.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const u=o[l].material===void 0?Ioe(this.cache):this.getDependency("material",o[l].material);a.push(u)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),u=l[l.length-1],h=[];for(let m=0,g=u.length;m<g;m++){const v=u[m],y=o[m];let A;const b=c[m];if(y.mode===Tr.TRIANGLES||y.mode===Tr.TRIANGLE_STRIP||y.mode===Tr.TRIANGLE_FAN||y.mode===void 0)A=r.isSkinnedMesh===!0?new ub(v,b):new Wt(v,b),A.isSkinnedMesh===!0&&A.normalizeSkinWeights(),y.mode===Tr.TRIANGLE_STRIP?A.geometry=RL(A.geometry,Ig):y.mode===Tr.TRIANGLE_FAN&&(A.geometry=RL(A.geometry,zu));else if(y.mode===Tr.LINES)A=new Hr(v,b);else if(y.mode===Tr.LINE_STRIP)A=new Gr(v,b);else if(y.mode===Tr.LINE_LOOP)A=new db(v,b);else if(y.mode===Tr.POINTS)A=new fb(v,b);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+y.mode);Object.keys(A.geometry.morphAttributes).length>0&&Boe(A,r),A.name=t.createUniqueName(r.name||"mesh_"+e),_a(A,r),y.extensions&&qc(s,A,y),t.assignFinalMaterial(A),h.push(A)}for(let m=0,g=h.length;m<g;m++)t.associations.set(h[m],{meshes:e,primitives:m});if(h.length===1)return r.extensions&&qc(s,h[0],r),h[0];const p=new sr;r.extensions&&qc(s,p,r),t.associations.set(p,{meshes:e});for(let m=0,g=h.length;m<g;m++)p.add(h[m]);return p})}loadCamera(e){let t;const i=this.json.cameras[e],s=i[i.type];if(!s){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new Fn(mf.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):i.type==="orthographic"&&(t=new Ko(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),_a(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i=[];for(let s=0,r=t.joints.length;s<r;s++)i.push(this._loadNodeShallow(t.joints[s]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(s){const r=s.pop(),o=s,a=[],l=[];for(let c=0,u=o.length;c<u;c++){const h=o[c];if(h){a.push(h);const p=new tt;r!==null&&p.fromArray(r.array,c*16),l.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new Pf(a,l)})}loadAnimation(e){const t=this.json,i=this,s=t.animations[e],r=s.name?s.name:"animation_"+e,o=[],a=[],l=[],c=[],u=[];for(let h=0,p=s.channels.length;h<p;h++){const m=s.channels[h],g=s.samplers[m.sampler],v=m.target,y=v.node,A=s.parameters!==void 0?s.parameters[g.input]:g.input,b=s.parameters!==void 0?s.parameters[g.output]:g.output;v.node!==void 0&&(o.push(this.getDependency("node",y)),a.push(this.getDependency("accessor",A)),l.push(this.getDependency("accessor",b)),c.push(g),u.push(v))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(c),Promise.all(u)]).then(function(h){const p=h[0],m=h[1],g=h[2],v=h[3],y=h[4],A=[];for(let b=0,w=p.length;b<w;b++){const E=p[b],M=m[b],I=g[b],D=v[b],B=y[b];if(E===void 0)continue;E.updateMatrix&&E.updateMatrix();const R=i._createAnimationTracks(E,M,I,D,B);if(R)for(let T=0;T<R.length;T++)A.push(R[T])}return new Hu(r,void 0,A)})}createNodeMesh(e){const t=this.json,i=this,s=t.nodes[e];return s.mesh===void 0?null:i.getDependency("mesh",s.mesh).then(function(r){const o=i._getNodeRef(i.meshCache,s.mesh,r);return s.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=s.weights.length;l<c;l++)a.morphTargetInfluences[l]=s.weights[l]}),o})}loadNode(e){const t=this.json,i=this,s=t.nodes[e],r=i._loadNodeShallow(e),o=[],a=s.children||[];for(let c=0,u=a.length;c<u;c++)o.push(i.getDependency("node",a[c]));const l=s.skin===void 0?Promise.resolve(null):i.getDependency("skin",s.skin);return Promise.all([r,Promise.all(o),l]).then(function(c){const u=c[0],h=c[1],p=c[2];p!==null&&u.traverse(function(m){m.isSkinnedMesh&&m.bind(p,Poe)});for(let m=0,g=h.length;m<g;m++)u.add(h[m]);return u})}_loadNodeShallow(e){const t=this.json,i=this.extensions,s=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const r=t.nodes[e],o=r.name?s.createUniqueName(r.name):"",a=[],l=s._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),r.camera!==void 0&&a.push(s.getDependency("camera",r.camera).then(function(c){return s._getNodeRef(s.cameraCache,r.camera,c)})),s._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),this.nodeCache[e]=Promise.all(a).then(function(c){let u;if(r.isBone===!0?u=new Pg:c.length>1?u=new sr:c.length===1?u=c[0]:u=new Rt,u!==c[0])for(let h=0,p=c.length;h<p;h++)u.add(c[h]);if(r.name&&(u.userData.name=r.name,u.name=o),_a(u,r),r.extensions&&qc(i,u,r),r.matrix!==void 0){const h=new tt;h.fromArray(r.matrix),u.applyMatrix4(h)}else r.translation!==void 0&&u.position.fromArray(r.translation),r.rotation!==void 0&&u.quaternion.fromArray(r.rotation),r.scale!==void 0&&u.scale.fromArray(r.scale);return s.associations.has(u)||s.associations.set(u,{}),s.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],s=this,r=new sr;i.name&&(r.name=s.createUniqueName(i.name)),_a(r,i),i.extensions&&qc(t,r,i);const o=i.nodes||[],a=[];for(let l=0,c=o.length;l<c;l++)a.push(s.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let u=0,h=l.length;u<h;u++)r.add(l[u]);const c=u=>{const h=new Map;for(const[p,m]of s.associations)(p instanceof zn||p instanceof ln)&&h.set(p,m);return u.traverse(p=>{const m=s.associations.get(p);m!=null&&h.set(p,m)}),h};return s.associations=c(r),r})}_createAnimationTracks(e,t,i,s,r){const o=[],a=e.name?e.name:e.uuid,l=[];yl[r.path]===yl.weights?e.traverse(function(p){p.morphTargetInfluences&&l.push(p.name?p.name:p.uuid)}):l.push(a);let c;switch(yl[r.path]){case yl.weights:c=qa;break;case yl.rotation:c=Ja;break;case yl.position:case yl.scale:c=Xa;break;default:switch(i.itemSize){case 1:c=qa;break;case 2:case 3:default:c=Xa;break}break}const u=s.interpolation!==void 0?Moe[s.interpolation]:Va,h=this._getArrayFromAccessor(i);for(let p=0,m=l.length;p<m;p++){const g=new c(l[p]+"."+yl[r.path],t.array,h,u);s.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(g),o.push(g)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const i=K1(t.constructor),s=new Float32Array(t.length);for(let r=0,o=t.length;r<o;r++)s[r]=t[r]*i;t=s}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){const s=this instanceof Ja?Soe:pz;return new s(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function koe(n,e,t){const i=e.attributes,s=new Nn;if(i.POSITION!==void 0){const a=t.json.accessors[i.POSITION],l=a.min,c=a.max;if(l!==void 0&&c!==void 0){if(s.set(new O(l[0],l[1],l[2]),new O(c[0],c[1],c[2])),a.normalized){const u=K1(Kd[a.componentType]);s.min.multiplyScalar(u),s.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const r=e.targets;if(r!==void 0){const a=new O,l=new O;for(let c=0,u=r.length;c<u;c++){const h=r[c];if(h.POSITION!==void 0){const p=t.json.accessors[h.POSITION],m=p.min,g=p.max;if(m!==void 0&&g!==void 0){if(l.setX(Math.max(Math.abs(m[0]),Math.abs(g[0]))),l.setY(Math.max(Math.abs(m[1]),Math.abs(g[1]))),l.setZ(Math.max(Math.abs(m[2]),Math.abs(g[2]))),p.normalized){const v=K1(Kd[p.componentType]);l.multiplyScalar(v)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(a)}n.boundingBox=s;const o=new ui;s.getCenter(o.center),o.radius=s.min.distanceTo(s.max)/2,n.boundingSphere=o}function kL(n,e,t){const i=e.attributes,s=[];function r(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in i){const a=X1[o]||o.toLowerCase();a in n.attributes||s.push(r(i[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});s.push(o)}return Ht.workingColorSpace!==yn&&"COLOR_0"in i&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${Ht.workingColorSpace}" not supported.`),_a(n,e),koe(n,e,t),Promise.all(s).then(function(){return e.targets!==void 0?Toe(n,e.targets,t):n})}class Foe{constructor(e=4){this.pool=e,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(e){if(!this.workers[e]){const t=this.workerCreator();t.addEventListener("message",this._onMessage.bind(this,e)),this.workers[e]=t}}_getIdleWorker(){for(let e=0;e<this.pool;e++)if(!(this.workerStatus&1<<e))return e;return-1}_onMessage(e,t){const i=this.workersResolve[e];if(i&&i(t),this.queue.length){const{resolve:s,msg:r,transfer:o}=this.queue.shift();this.workersResolve[e]=s,this.workers[e].postMessage(r,o)}else this.workerStatus^=1<<e}setWorkerCreator(e){this.workerCreator=e}setWorkerLimit(e){this.pool=e}postMessage(e,t){return new Promise(i=>{const s=this._getIdleWorker();s!==-1?(this._initWorker(s),this.workerStatus|=1<<s,this.workersResolve[s]=i,this.workers[s].postMessage(e,t)):this.queue.push({resolve:i,msg:e,transfer:t})})}dispose(){this.workers.forEach(e=>e.terminate()),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}const Noe=0,FL=2,Ooe=1,NL=2,Uoe=0,Goe=1,zoe=10,Qoe=0,mz=9,gz=15,Az=16,yz=22,vz=37,xz=43,bz=76,wz=83,Ez=97,_z=100,Cz=103,Sz=109,Mz=165,Iz=166,dT=1000066e3;class Hoe{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class Pp{constructor(e,t,i,s){this._dataView=void 0,this._littleEndian=void 0,this._offset=void 0,this._dataView=new DataView(e.buffer,e.byteOffset+t,i),this._littleEndian=s,this._offset=0}_nextUint8(){const e=this._dataView.getUint8(this._offset);return this._offset+=1,e}_nextUint16(){const e=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,e}_nextUint32(){const e=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint64(){const e=this._dataView.getUint32(this._offset,this._littleEndian)+4294967296*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,e}_nextInt32(){const e=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint8Array(e){const t=new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+this._offset,e);return this._offset+=e,t}_skip(e){return this._offset+=e,this}_scan(e,t){t===void 0&&(t=0);const i=this._offset;let s=0;for(;this._dataView.getUint8(this._offset)!==t&&s<e;)s++,this._offset++;return s<e&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+i,s)}}const ms=[171,75,84,88,32,50,48,187,13,10,26,10];function OL(n){return new TextDecoder().decode(n)}function Voe(n){const e=new Uint8Array(n.buffer,n.byteOffset,ms.length);if(e[0]!==ms[0]||e[1]!==ms[1]||e[2]!==ms[2]||e[3]!==ms[3]||e[4]!==ms[4]||e[5]!==ms[5]||e[6]!==ms[6]||e[7]!==ms[7]||e[8]!==ms[8]||e[9]!==ms[9]||e[10]!==ms[10]||e[11]!==ms[11])throw new Error("Missing KTX 2.0 identifier.");const t=new Hoe,i=17*Uint32Array.BYTES_PER_ELEMENT,s=new Pp(n,ms.length,i,!0);t.vkFormat=s._nextUint32(),t.typeSize=s._nextUint32(),t.pixelWidth=s._nextUint32(),t.pixelHeight=s._nextUint32(),t.pixelDepth=s._nextUint32(),t.layerCount=s._nextUint32(),t.faceCount=s._nextUint32();const r=s._nextUint32();t.supercompressionScheme=s._nextUint32();const o=s._nextUint32(),a=s._nextUint32(),l=s._nextUint32(),c=s._nextUint32(),u=s._nextUint64(),h=s._nextUint64(),p=new Pp(n,ms.length+i,3*r*8,!0);for(let K=0;K<r;K++)t.levels.push({levelData:new Uint8Array(n.buffer,n.byteOffset+p._nextUint64(),p._nextUint64()),uncompressedByteLength:p._nextUint64()});const m=new Pp(n,o,a,!0),g={vendorId:m._skip(4)._nextUint16(),descriptorType:m._nextUint16(),versionNumber:m._nextUint16(),descriptorBlockSize:m._nextUint16(),colorModel:m._nextUint8(),colorPrimaries:m._nextUint8(),transferFunction:m._nextUint8(),flags:m._nextUint8(),texelBlockDimension:[m._nextUint8(),m._nextUint8(),m._nextUint8(),m._nextUint8()],bytesPlane:[m._nextUint8(),m._nextUint8(),m._nextUint8(),m._nextUint8(),m._nextUint8(),m._nextUint8(),m._nextUint8(),m._nextUint8()],samples:[]},v=(g.descriptorBlockSize/4-6)/4;for(let K=0;K<v;K++){const L={bitOffset:m._nextUint16(),bitLength:m._nextUint8(),channelType:m._nextUint8(),samplePosition:[m._nextUint8(),m._nextUint8(),m._nextUint8(),m._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&L.channelType?(L.sampleLower=m._nextInt32(),L.sampleUpper=m._nextInt32()):(L.sampleLower=m._nextUint32(),L.sampleUpper=m._nextUint32()),g.samples[K]=L}t.dataFormatDescriptor.length=0,t.dataFormatDescriptor.push(g);const y=new Pp(n,l,c,!0);for(;y._offset<c;){const K=y._nextUint32(),L=y._scan(K),V=OL(L);if(t.keyValue[V]=y._nextUint8Array(K-L.byteLength-1),V.match(/^ktx/i)){const j=OL(t.keyValue[V]);t.keyValue[V]=j.substring(0,j.lastIndexOf("\0"))}y._skip(K%4?4-K%4:0)}if(h<=0)return t;const A=new Pp(n,u,h,!0),b=A._nextUint16(),w=A._nextUint16(),E=A._nextUint32(),M=A._nextUint32(),I=A._nextUint32(),D=A._nextUint32(),B=[];for(let K=0;K<r;K++)B.push({imageFlags:A._nextUint32(),rgbSliceByteOffset:A._nextUint32(),rgbSliceByteLength:A._nextUint32(),alphaSliceByteOffset:A._nextUint32(),alphaSliceByteLength:A._nextUint32()});const R=u+A._offset,T=R+E,k=T+M,H=k+I,Q=new Uint8Array(n.buffer,n.byteOffset+R,E),W=new Uint8Array(n.buffer,n.byteOffset+T,M),X=new Uint8Array(n.buffer,n.byteOffset+k,I),J=new Uint8Array(n.buffer,n.byteOffset+H,D);return t.globalData={endpointCount:b,selectorCount:w,imageDescs:B,endpointsData:Q,selectorsData:W,tablesData:X,extendedData:J},t}let oC,xa,$1;const aC={env:{emscripten_notify_memory_growth:function(n){$1=new Uint8Array(xa.exports.memory.buffer)}}};class joe{init(){return oC||(oC=typeof fetch<"u"?fetch("data:application/wasm;base64,"+UL).then(e=>e.arrayBuffer()).then(e=>WebAssembly.instantiate(e,aC)).then(this._init):WebAssembly.instantiate(Buffer.from(UL,"base64"),aC).then(this._init),oC)}_init(e){xa=e.instance,aC.env.emscripten_notify_memory_growth(0)}decode(e,t=0){if(!xa)throw new Error("ZSTDDecoder: Await .init() before decoding.");const i=e.byteLength,s=xa.exports.malloc(i);$1.set(e,s),t=t||Number(xa.exports.ZSTD_findDecompressedSize(s,i));const r=xa.exports.malloc(t),o=xa.exports.ZSTD_decompress(r,t,s,i),a=$1.slice(r,r+o);return xa.exports.free(s),xa.exports.free(r),a}}const UL="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ",Woe="display-p3",qoe="display-p3-linear",lC=new WeakMap;let cC=0,uC;class Dr extends hi{constructor(e){super(e),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new Foe,this.workerSourceURL="",this.workerConfig=null,typeof MSC_TRANSCODER<"u"&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(e){return this.transcoderPath=e,this}setWorkerLimit(e){return this.workerPool.setWorkerLimit(e),this}async detectSupportAsync(e){return this.workerConfig={astcSupported:await e.hasFeatureAsync("texture-compression-astc"),astcHDRSupported:!1,etc1Supported:await e.hasFeatureAsync("texture-compression-etc1"),etc2Supported:await e.hasFeatureAsync("texture-compression-etc2"),dxtSupported:await e.hasFeatureAsync("texture-compression-bc"),bptcSupported:await e.hasFeatureAsync("texture-compression-bptc"),pvrtcSupported:await e.hasFeatureAsync("texture-compression-pvrtc")},this}detectSupport(e){return e.isWebGPURenderer===!0?this.workerConfig={astcSupported:e.hasFeature("texture-compression-astc"),astcHDRSupported:!1,etc1Supported:e.hasFeature("texture-compression-etc1"),etc2Supported:e.hasFeature("texture-compression-etc2"),dxtSupported:e.hasFeature("texture-compression-bc"),bptcSupported:e.hasFeature("texture-compression-bptc"),pvrtcSupported:e.hasFeature("texture-compression-pvrtc")}:this.workerConfig={astcSupported:e.extensions.has("WEBGL_compressed_texture_astc"),astcHDRSupported:e.extensions.has("WEBGL_compressed_texture_astc")&&e.extensions.get("WEBGL_compressed_texture_astc").getSupportedProfiles().includes("hdr"),etc1Supported:e.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:e.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:e.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:e.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:e.extensions.has("WEBGL_compressed_texture_pvrtc")||e.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},this}init(){if(!this.transcoderPending){const e=new ni(this.manager);e.setPath(this.transcoderPath),e.setWithCredentials(this.withCredentials);const t=e.loadAsync("basis_transcoder.js"),i=new ni(this.manager);i.setPath(this.transcoderPath),i.setResponseType("arraybuffer"),i.setWithCredentials(this.withCredentials);const s=i.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([t,s]).then(([r,o])=>{const a=Dr.BasisWorker.toString(),l=["/* constants */","let _EngineFormat = "+JSON.stringify(Dr.EngineFormat),"let _EngineType = "+JSON.stringify(Dr.EngineType),"let _TranscoderFormat = "+JSON.stringify(Dr.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(Dr.BasisFormat),"/* basis_transcoder.js */",r,"/* worker */",a.substring(a.indexOf("{")+1,a.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([l])),this.transcoderBinary=o,this.workerPool.setWorkerCreator(()=>{const c=new Worker(this.workerSourceURL),u=this.transcoderBinary.slice(0);return c.postMessage({type:"init",config:this.workerConfig,transcoderBinary:u},[u]),c})}),cC>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),cC++}return this.transcoderPending}load(e,t,i,s){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const r=new ni(this.manager);r.setResponseType("arraybuffer"),r.setWithCredentials(this.withCredentials),r.load(e,o=>{this.parse(o,t,s)},i,s)}parse(e,t,i){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");if(lC.has(e))return lC.get(e).promise.then(t).catch(i);this._createTexture(e).then(s=>t?t(s):null).catch(i)}_createTextureFrom(e,t){const{type:i,error:s,data:{faces:r,width:o,height:a,format:l,type:c,dfdFlags:u}}=e;if(i==="error")return Promise.reject(s);let h;if(t.faceCount===6)h=new _U(r,l,c);else{const p=r[0].mipmaps;h=t.layerCount>1?new EU(p,o,a,t.layerCount,l,c):new Fa(p,o,a,l,c)}return h.minFilter=r[0].mipmaps.length===1?Bt:vi,h.magFilter=Bt,h.generateMipmaps=!1,h.needsUpdate=!0,h.colorSpace=Tz(t),h.premultiplyAlpha=!!(u&Ooe),h}async _createTexture(e,t={}){const i=Voe(new Uint8Array(e)),s=i.vkFormat===dT&&i.dataFormatDescriptor[0].colorModel===167;if(!(i.vkFormat===Qoe||s&&!this.workerConfig.astcHDRSupported))return Xoe(i);const o=t,a=this.init().then(()=>this.workerPool.postMessage({type:"transcode",buffer:e,taskConfig:o},[e])).then(l=>this._createTextureFrom(l.data,i));return lC.set(e,{promise:a}),a}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),cC--,this}}Dr.BasisFormat={ETC1S:0,UASTC:1,UASTC_HDR:2};Dr.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16,BC6H:22,RGB_HALF:24,RGBA_HALF:25};Dr.EngineFormat={RGBAFormat:dn,RGBA_ASTC_4x4_Format:hf,RGB_BPTC_UNSIGNED_Format:Zm,RGBA_BPTC_Format:Qd,RGBA_ETC2_EAC_Format:Ym,RGBA_PVRTC_4BPPV1_Format:Xm,RGBA_S3TC_DXT5_Format:zd,RGB_ETC1_Format:Km,RGB_ETC2_Format:$m,RGB_PVRTC_4BPPV1_Format:Jm,RGBA_S3TC_DXT1_Format:Gd};Dr.EngineType={UnsignedByteType:kn,HalfFloatType:Zn,FloatType:Sn};Dr.BasisWorker=function(){let n,e,t;const i=_EngineFormat,s=_EngineType,r=_TranscoderFormat,o=_BasisFormat;self.addEventListener("message",function(g){const v=g.data;switch(v.type){case"init":n=v.config,a(v.transcoderBinary);break;case"transcode":e.then(()=>{try{const{faces:y,buffers:A,width:b,height:w,hasAlpha:E,format:M,type:I,dfdFlags:D}=l(v.buffer);self.postMessage({type:"transcode",id:v.id,data:{faces:y,width:b,height:w,hasAlpha:E,format:M,type:I,dfdFlags:D}},A)}catch(y){console.error(y),self.postMessage({type:"error",id:v.id,error:y.message})}});break}});function a(g){e=new Promise(v=>{t={wasmBinary:g,onRuntimeInitialized:v},BASIS(t)}).then(()=>{t.initializeBasis(),t.KTX2File===void 0&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")})}function l(g){const v=new t.KTX2File(new Uint8Array(g));function y(){v.close(),v.delete()}if(!v.isValid())throw y(),new Error("THREE.KTX2Loader:	Invalid or unsupported .ktx2 file");let A;if(v.isUASTC())A=o.UASTC;else if(v.isETC1S())A=o.ETC1S;else if(v.isHDR())A=o.UASTC_HDR;else throw new Error("THREE.KTX2Loader: Unknown Basis encoding");const b=v.getWidth(),w=v.getHeight(),E=v.getLayers()||1,M=v.getLevels(),I=v.getFaces(),D=v.getHasAlpha(),B=v.getDFDFlags(),{transcoderFormat:R,engineFormat:T,engineType:k}=h(A,b,w,D);if(!b||!w||!M)throw y(),new Error("THREE.KTX2Loader:	Invalid texture");if(!v.startTranscoding())throw y(),new Error("THREE.KTX2Loader: .startTranscoding failed");const H=[],Q=[];for(let W=0;W<I;W++){const X=[];for(let J=0;J<M;J++){const K=[];let L,V;for(let $=0;$<E;$++){const le=v.getImageLevelInfo(J,$,W);W===0&&J===0&&$===0&&(le.origWidth%4!==0||le.origHeight%4!==0)&&console.warn("THREE.KTX2Loader: ETC1S and UASTC textures should use multiple-of-four dimensions."),M>1?(L=le.origWidth,V=le.origHeight):(L=le.width,V=le.height);let ve=new Uint8Array(v.getImageTranscodedSizeInBytes(J,$,0,R));const q=v.transcodeImage(ve,J,$,W,R,0,-1,-1);if(k===s.HalfFloatType&&(ve=new Uint16Array(ve.buffer,ve.byteOffset,ve.byteLength/Uint16Array.BYTES_PER_ELEMENT)),!q)throw y(),new Error("THREE.KTX2Loader: .transcodeImage failed.");K.push(ve)}const j=m(K);X.push({data:j,width:L,height:V}),Q.push(j.buffer)}H.push({mipmaps:X,width:b,height:w,format:T,type:k})}return y(),{faces:H,buffers:Q,width:b,height:w,hasAlpha:D,dfdFlags:B,format:T,type:k}}const c=[{if:"astcSupported",basisFormat:[o.UASTC],transcoderFormat:[r.ASTC_4x4,r.ASTC_4x4],engineFormat:[i.RGBA_ASTC_4x4_Format,i.RGBA_ASTC_4x4_Format],engineType:[s.UnsignedByteType],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[o.ETC1S,o.UASTC],transcoderFormat:[r.BC7_M5,r.BC7_M5],engineFormat:[i.RGBA_BPTC_Format,i.RGBA_BPTC_Format],engineType:[s.UnsignedByteType],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[o.ETC1S,o.UASTC],transcoderFormat:[r.BC1,r.BC3],engineFormat:[i.RGBA_S3TC_DXT1_Format,i.RGBA_S3TC_DXT5_Format],engineType:[s.UnsignedByteType],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[o.ETC1S,o.UASTC],transcoderFormat:[r.ETC1,r.ETC2],engineFormat:[i.RGB_ETC2_Format,i.RGBA_ETC2_EAC_Format],engineType:[s.UnsignedByteType],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[o.ETC1S,o.UASTC],transcoderFormat:[r.ETC1],engineFormat:[i.RGB_ETC1_Format],engineType:[s.UnsignedByteType],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[o.ETC1S,o.UASTC],transcoderFormat:[r.PVRTC1_4_RGB,r.PVRTC1_4_RGBA],engineFormat:[i.RGB_PVRTC_4BPPV1_Format,i.RGBA_PVRTC_4BPPV1_Format],engineType:[s.UnsignedByteType],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0},{if:"bptcSupported",basisFormat:[o.UASTC_HDR],transcoderFormat:[r.BC6H],engineFormat:[i.RGB_BPTC_UNSIGNED_Format],engineType:[s.HalfFloatType],priorityHDR:1,needsPowerOfTwo:!1},{basisFormat:[o.ETC1S,o.UASTC],transcoderFormat:[r.RGBA32,r.RGBA32],engineFormat:[i.RGBAFormat,i.RGBAFormat],engineType:[s.UnsignedByteType,s.UnsignedByteType],priorityETC1S:100,priorityUASTC:100,needsPowerOfTwo:!1},{basisFormat:[o.UASTC_HDR],transcoderFormat:[r.RGBA_HALF],engineFormat:[i.RGBAFormat],engineType:[s.HalfFloatType],priorityHDR:100,needsPowerOfTwo:!1}],u={[o.ETC1S]:c.filter(g=>g.basisFormat.includes(o.ETC1S)).sort((g,v)=>g.priorityUASTC-v.priorityUASTC),[o.UASTC]:c.filter(g=>g.basisFormat.includes(o.UASTC)).sort((g,v)=>g.priorityUASTC-v.priorityUASTC),[o.UASTC_HDR]:c.filter(g=>g.basisFormat.includes(o.UASTC_HDR)).sort((g,v)=>g.priorityHDR-v.priorityHDR)};function h(g,v,y,A){const b=u[g];for(let w=0;w<b.length;w++){const E=b[w];if(E.if&&!n[E.if]||!E.basisFormat.includes(g)||A&&E.transcoderFormat.length<2||E.needsPowerOfTwo&&!(p(v)&&p(y)))continue;const M=E.transcoderFormat[A?1:0],I=E.engineFormat[A?1:0],D=E.engineType[0];return{transcoderFormat:M,engineFormat:I,engineType:D}}throw new Error("THREE.KTX2Loader: Failed to identify transcoding target.")}function p(g){return g<=2?!0:(g&g-1)===0&&g!==0}function m(g){if(g.length===1)return g[0];let v=0;for(let b=0;b<g.length;b++){const w=g[b];v+=w.byteLength}const y=new Uint8Array(v);let A=0;for(let b=0;b<g.length;b++){const w=g[b];y.set(w,A),A+=w.byteLength}return y}};const Joe=new Set([dn,kl,Ba]),hC={[Sz]:dn,[Ez]:dn,[vz]:dn,[xz]:dn,[Cz]:kl,[wz]:kl,[Az]:kl,[yz]:kl,[_z]:Ba,[bz]:Ba,[gz]:Ba,[mz]:Ba,[dT]:hf,[Iz]:df,[Mz]:df},dC={[Sz]:Sn,[Ez]:Zn,[vz]:kn,[xz]:kn,[Cz]:Sn,[wz]:Zn,[Az]:kn,[yz]:kn,[_z]:Sn,[bz]:Zn,[gz]:kn,[mz]:kn,[dT]:Zn,[Iz]:kn,[Mz]:kn};async function Xoe(n){const{vkFormat:e}=n;if(hC[e]===void 0)throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");let t;n.supercompressionScheme===FL&&(uC||(uC=new Promise(async r=>{const o=new joe;await o.init(),r(o)})),t=await uC);const i=[];for(let r=0;r<n.levels.length;r++){const o=Math.max(1,n.pixelWidth>>r),a=Math.max(1,n.pixelHeight>>r),l=n.pixelDepth?Math.max(1,n.pixelDepth>>r):0,c=n.levels[r];let u;if(n.supercompressionScheme===Noe)u=c.levelData;else if(n.supercompressionScheme===FL)u=t.decode(c.levelData,c.uncompressedByteLength);else throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");let h;dC[e]===Sn?h=new Float32Array(u.buffer,u.byteOffset,u.byteLength/Float32Array.BYTES_PER_ELEMENT):dC[e]===Zn?h=new Uint16Array(u.buffer,u.byteOffset,u.byteLength/Uint16Array.BYTES_PER_ELEMENT):h=u,i.push({data:h,width:o,height:a,depth:l})}let s;if(Joe.has(hC[e]))s=n.pixelDepth===0?new Nr(i[0].data,n.pixelWidth,n.pixelHeight):new Bg(i[0].data,n.pixelWidth,n.pixelHeight,n.pixelDepth);else{if(n.pixelDepth>0)throw new Error("THREE.KTX2Loader: Unsupported pixelDepth.");s=new Fa(i,n.pixelWidth,n.pixelHeight),s.minFilter=i.length===1?Bt:vi,s.magFilter=Bt}return s.mipmaps=i,s.type=dC[e],s.format=hC[e],s.colorSpace=Tz(n),s.needsUpdate=!0,Promise.resolve(s)}function Tz(n){const e=n.dataFormatDescriptor[0];return e.colorPrimaries===Goe?e.transferFunction===NL?mn:yn:e.colorPrimaries===zoe?e.transferFunction===NL?Woe:qoe:(e.colorPrimaries===Uoe||console.warn(`THREE.KTX2Loader: Unsupported color primaries, "${e.colorPrimaries}"`),nr)}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var GL,zL;const $r=Symbol("retainerCount"),fa=Symbol("recentlyUsed"),my=Symbol("evict"),Lp=Symbol("evictionThreshold"),fC=Symbol("cache");class Koe{constructor(e,t=5){this[GL]=new Map,this[zL]=[],this[fC]=e,this[Lp]=t}set evictionThreshold(e){this[Lp]=e,this[my]()}get evictionThreshold(){return this[Lp]}get cache(){return this[fC]}retainerCount(e){return this[$r].get(e)||0}reset(){this[$r].clear(),this[fa]=[]}retain(e){this[$r].has(e)||this[$r].set(e,0),this[$r].set(e,this[$r].get(e)+1);const t=this[fa].indexOf(e);t!==-1&&this[fa].splice(t,1),this[fa].unshift(e),this[my]()}release(e){this[$r].has(e)&&this[$r].set(e,Math.max(this[$r].get(e)-1,0)),this[my]()}[(GL=$r,zL=fa,my)](){if(!(this[fa].length<this[Lp]))for(let e=this[fa].length-1;e>=this[Lp];--e){const t=this[fa][e];this[$r].get(t)===0&&(this[fC].delete(t),this[fa].splice(e,1))}}}/* @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $oe=n=>{const e=[],t=new Set;for(const i of n){let s=i,r=0;for(;t.has(s);)s=i+"."+ ++r;t.add(s),e.push(s)}return e},Yoe=n=>{const e=new Map;for(const t of n.mappings)for(const i of t.variants)e.set(i,{material:null,gltfMaterialIndex:t.material});return e};class Zoe{constructor(e){this.parser=e,this.name="KHR_materials_variants"}afterRoot(e){const t=this.parser,i=t.json;if(i.extensions===void 0||i.extensions[this.name]===void 0)return null;const r=i.extensions[this.name].variants||[],o=$oe(r.map(a=>a.name));for(const a of e.scenes)a.traverse(l=>{const c=l;if(!c.material)return;const u=t.associations.get(c);if(u==null||u.meshes==null||u.primitives==null)return;const g=i.meshes[u.meshes].primitives[u.primitives].extensions;!g||!g[this.name]||(c.userData.variantMaterials=Yoe(g[this.name]))});return e.userData.variants=o,Promise.resolve()}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bz,QL;ln.DEFAULT_ANISOTROPY=4;const eae=(n,e,t=()=>{})=>{const i=s=>{const r=s.loaded/s.total;t(Math.max(0,Math.min(1,isFinite(r)?r:1)))};return new Promise((s,r)=>{e.load(n,s,i,r)})},tae=n=>new Promise((e,t)=>{const i=document.createElement("script");document.body.appendChild(i),i.onload=e,i.onerror=t,i.async=!0,i.src=n}),pa=new Map,pC=new Map;let HL;const VL=new Zre;let jL;const mC=new Dr;let gC,AC;const nu=Symbol("loader"),Cl=Symbol("evictionPolicy"),WL=Symbol("GLTFInstance");class vs extends js{static setDRACODecoderLocation(e){HL=e,VL.setDecoderPath(e)}static getDRACODecoderLocation(){return HL}static setKTX2TranscoderLocation(e){jL=e,mC.setTranscoderPath(e)}static getKTX2TranscoderLocation(){return jL}static setMeshoptDecoderLocation(e){gC!==e&&(gC=e,AC=tae(e).then(()=>BL.ready).then(()=>BL))}static getMeshoptDecoderLocation(){return gC}static initializeKTX2Loader(e){mC.detectSupport(e)}static get cache(){return pa}static clearCache(){pa.forEach((e,t)=>{this.delete(t)}),this[Cl].reset()}static has(e){return pa.has(e)}static async delete(e){if(!this.has(e))return;const t=pa.get(e);pC.delete(e),pa.delete(e),(await t).dispose()}static hasFinishedLoading(e){return!!pC.get(e)}constructor(e){super(),this[QL]=new toe().register(t=>new Zoe(t)),this[WL]=e,this[nu].setDRACOLoader(VL),this[nu].setKTX2Loader(mC)}get[(Bz=Cl,QL=nu,Cl)](){return this.constructor[Cl]}async preload(e,t,i=()=>{}){if(this[nu].setWithCredentials(t.withCredentials),this.dispatchEvent({type:"preload",element:t,src:e}),!pa.has(e)){AC!=null&&this[nu].setMeshoptDecoder(await AC);const s=eae(e,this[nu],a=>{i(a*.8)}),r=this[WL],o=s.then(a=>r.prepare(a)).then(a=>(i(.9),new r(a))).catch(a=>(console.error(a),new r));pa.set(e,o)}await pa.get(e),pC.set(e,!0),i&&i(1)}async load(e,t,i=()=>{}){await this.preload(e,t,i);const r=await(await pa.get(e)).clone();return this[Cl].retain(e),r.dispose=()=>{this[Cl].release(e)},r}}vs[Bz]=new Koe(vs);class nae extends Rt{constructor(e=document.createElement("div")){super(),this.isCSS2DObject=!0,this.element=e,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.center=new me(.5,.5),this.addEventListener("removed",function(){this.traverse(function(t){t.element instanceof t.element.ownerDocument.defaultView.Element&&t.element.parentNode!==null&&t.element.remove()})})}copy(e,t){return super.copy(e,t),this.element=e.element.cloneNode(!0),this.center=e.center,this}}const Vh=new O,qL=new tt,JL=new tt,XL=new O,KL=new O;class iae{constructor(e={}){const t=this;let i,s,r,o;const a={objects:new WeakMap},l=e.element!==void 0?e.element:document.createElement("div");l.style.overflow="hidden",this.domElement=l,this.getSize=function(){return{width:i,height:s}},this.render=function(g,v){g.matrixWorldAutoUpdate===!0&&g.updateMatrixWorld(),v.parent===null&&v.matrixWorldAutoUpdate===!0&&v.updateMatrixWorld(),qL.copy(v.matrixWorldInverse),JL.multiplyMatrices(v.projectionMatrix,qL),u(g,g,v),m(g)},this.setSize=function(g,v){i=g,s=v,r=i/2,o=s/2,l.style.width=g+"px",l.style.height=v+"px"};function c(g){g.isCSS2DObject&&(g.element.style.display="none");for(let v=0,y=g.children.length;v<y;v++)c(g.children[v])}function u(g,v,y){if(g.visible===!1){c(g);return}if(g.isCSS2DObject){Vh.setFromMatrixPosition(g.matrixWorld),Vh.applyMatrix4(JL);const A=Vh.z>=-1&&Vh.z<=1&&g.layers.test(y.layers)===!0,b=g.element;b.style.display=A===!0?"":"none",A===!0&&(g.onBeforeRender(t,v,y),b.style.transform="translate("+-100*g.center.x+"%,"+-100*g.center.y+"%)translate("+(Vh.x*r+r)+"px,"+(-Vh.y*o+o)+"px)",b.parentNode!==l&&l.appendChild(b),g.onAfterRender(t,v,y));const w={distanceToCameraSquared:h(y,g)};a.objects.set(g,w)}for(let A=0,b=g.children.length;A<b;A++)u(g.children[A],v,y)}function h(g,v){return XL.setFromMatrixPosition(g.matrixWorld),KL.setFromMatrixPosition(v.matrixWorld),XL.distanceToSquared(KL)}function p(g){const v=[];return g.traverseVisible(function(y){y.isCSS2DObject&&v.push(y)}),v}function m(g){const v=p(g).sort(function(A,b){if(A.renderOrder!==b.renderOrder)return b.renderOrder-A.renderOrder;const w=a.objects.get(A).distanceToCameraSquared,E=a.objects.get(b).distanceToCameraSquared;return w-E}),y=v.length;for(let A=0,b=v.length;A<b;A++)v[A].element.style.zIndex=y-A}}}function gy(n,e,t){let i=t;const s=new O;return n.updateWorldMatrix(!0,!0),n.traverseVisible(r=>{const{geometry:o}=r;if(o!==void 0){const{position:a}=o.attributes;if(a!==void 0)for(let l=0,c=a.count;l<c;l++)r.isMesh?r.getVertexPosition(l,s):s.fromBufferAttribute(a,l),r.isSkinnedMesh||s.applyMatrix4(r.matrixWorld),i=e(i,s)}}),i}const $L={POSITION:["byte","byte normalized","unsigned byte","unsigned byte normalized","short","short normalized","unsigned short","unsigned short normalized"],NORMAL:["byte normalized","short normalized"],TANGENT:["byte normalized","short normalized"],TEXCOORD:["byte","byte normalized","unsigned byte","short","short normalized","unsigned short"]};class Sx{constructor(){this.textureUtils=null,this.pluginCallbacks=[],this.register(function(e){return new fae(e)}),this.register(function(e){return new pae(e)}),this.register(function(e){return new yae(e)}),this.register(function(e){return new vae(e)}),this.register(function(e){return new xae(e)}),this.register(function(e){return new bae(e)}),this.register(function(e){return new mae(e)}),this.register(function(e){return new gae(e)}),this.register(function(e){return new Aae(e)}),this.register(function(e){return new wae(e)}),this.register(function(e){return new Eae(e)}),this.register(function(e){return new _ae(e)}),this.register(function(e){return new Cae(e)}),this.register(function(e){return new Sae(e)})}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}setTextureUtils(e){return this.textureUtils=e,this}parse(e,t,i,s){const r=new dae,o=[];for(let a=0,l=this.pluginCallbacks.length;a<l;a++)o.push(this.pluginCallbacks[a](r));r.setPlugins(o),r.setTextureUtils(this.textureUtils),r.writeAsync(e,t,s).catch(i)}parseAsync(e,t){const i=this;return new Promise(function(s,r){i.parse(e,s,r,t)})}}const Qt={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},yC="KHR_mesh_quantization",or={};or[Mn]=Qt.NEAREST;or[hc]=Qt.NEAREST_MIPMAP_NEAREST;or[ao]=Qt.NEAREST_MIPMAP_LINEAR;or[Bt]=Qt.LINEAR;or[Ho]=Qt.LINEAR_MIPMAP_NEAREST;or[vi]=Qt.LINEAR_MIPMAP_LINEAR;or[Cn]=Qt.CLAMP_TO_EDGE;or[ls]=Qt.REPEAT;or[jo]=Qt.MIRRORED_REPEAT;const YL={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},sae=new Me,ZL=12,rae=1179937895,oae=2,ek=8,aae=1313821514,lae=5130562;function rm(n,e){return n.length===e.length&&n.every(function(t,i){return t===e[i]})}function cae(n){return new TextEncoder().encode(n).buffer}function uae(n){return rm(n.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}function hae(n,e,t){const i={min:new Array(n.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(n.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let s=e;s<e+t;s++)for(let r=0;r<n.itemSize;r++){let o;n.itemSize>4?o=n.array[s*n.itemSize+r]:(r===0?o=n.getX(s):r===1?o=n.getY(s):r===2?o=n.getZ(s):r===3&&(o=n.getW(s)),n.normalized===!0&&(o=mf.normalize(o,n.array))),i.min[r]=Math.min(i.min[r],o),i.max[r]=Math.max(i.max[r],o)}return i}function Rz(n){return Math.ceil(n/4)*4}function vC(n,e=0){const t=Rz(n.byteLength);if(t!==n.byteLength){const i=new Uint8Array(t);if(i.set(new Uint8Array(n)),e!==0)for(let s=n.byteLength;s<t;s++)i[s]=e;return i.buffer}return n}function tk(){return typeof document>"u"&&typeof OffscreenCanvas<"u"?new OffscreenCanvas(1,1):document.createElement("canvas")}function nk(n,e){if(n.toBlob!==void 0)return new Promise(i=>n.toBlob(i,e));let t;return e==="image/jpeg"?t=.92:e==="image/webp"&&(t=.8),n.convertToBlob({type:e,quality:t})}class dae{constructor(){this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.extensionsRequired={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter r"+Tf}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map},this.textureUtils=null}setPlugins(e){this.plugins=e}setTextureUtils(e){this.textureUtils=e}async writeAsync(e,t,i={}){this.options=Object.assign({binary:!1,trs:!1,onlyVisible:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},i),this.options.animations.length>0&&(this.options.trs=!0),await this.processInputAsync(e),await Promise.all(this.pending);const s=this,r=s.buffers,o=s.json;i=s.options;const a=s.extensionsUsed,l=s.extensionsRequired,c=new Blob(r,{type:"application/octet-stream"}),u=Object.keys(a),h=Object.keys(l);if(u.length>0&&(o.extensionsUsed=u),h.length>0&&(o.extensionsRequired=h),o.buffers&&o.buffers.length>0&&(o.buffers[0].byteLength=c.size),i.binary===!0){const p=new FileReader;p.readAsArrayBuffer(c),p.onloadend=function(){const m=vC(p.result),g=new DataView(new ArrayBuffer(ek));g.setUint32(0,m.byteLength,!0),g.setUint32(4,lae,!0);const v=vC(cae(JSON.stringify(o)),32),y=new DataView(new ArrayBuffer(ek));y.setUint32(0,v.byteLength,!0),y.setUint32(4,aae,!0);const A=new ArrayBuffer(ZL),b=new DataView(A);b.setUint32(0,rae,!0),b.setUint32(4,oae,!0);const w=ZL+y.byteLength+v.byteLength+g.byteLength+m.byteLength;b.setUint32(8,w,!0);const E=new Blob([A,y,v,g,m],{type:"application/octet-stream"}),M=new FileReader;M.readAsArrayBuffer(E),M.onloadend=function(){t(M.result)}}}else if(o.buffers&&o.buffers.length>0){const p=new FileReader;p.readAsDataURL(c),p.onloadend=function(){const m=p.result;o.buffers[0].uri=m,t(o)}}else t(o)}serializeUserData(e,t){if(Object.keys(e.userData).length===0)return;const i=this.options,s=this.extensionsUsed;try{const r=JSON.parse(JSON.stringify(e.userData));if(i.includeCustomExtensions&&r.gltfExtensions){t.extensions===void 0&&(t.extensions={});for(const o in r.gltfExtensions)t.extensions[o]=r.gltfExtensions[o],s[o]=!0;delete r.gltfExtensions}Object.keys(r).length>0&&(t.extras=r)}catch(r){console.warn("THREE.GLTFExporter: userData of '"+e.name+"' won't be serialized because of JSON.stringify error - "+r.message)}}getUID(e,t=!1){if(this.uids.has(e)===!1){const s=new Map;s.set(!0,this.uid++),s.set(!1,this.uid++),this.uids.set(e,s)}return this.uids.get(e).get(t)}isNormalizedNormalAttribute(e){if(this.cache.attributesNormalized.has(e))return!1;const i=new O;for(let s=0,r=e.count;s<r;s++)if(Math.abs(i.fromBufferAttribute(e,s).length()-1)>5e-4)return!1;return!0}createNormalizedNormalAttribute(e){const t=this.cache;if(t.attributesNormalized.has(e))return t.attributesNormalized.get(e);const i=e.clone(),s=new O;for(let r=0,o=i.count;r<o;r++)s.fromBufferAttribute(i,r),s.x===0&&s.y===0&&s.z===0?s.setX(1):s.normalize(),i.setXYZ(r,s.x,s.y,s.z);return t.attributesNormalized.set(e,i),i}applyTextureTransform(e,t){let i=!1;const s={};(t.offset.x!==0||t.offset.y!==0)&&(s.offset=t.offset.toArray(),i=!0),t.rotation!==0&&(s.rotation=t.rotation,i=!0),(t.repeat.x!==1||t.repeat.y!==1)&&(s.scale=t.repeat.toArray(),i=!0),i&&(e.extensions=e.extensions||{},e.extensions.KHR_texture_transform=s,this.extensionsUsed.KHR_texture_transform=!0)}async buildMetalRoughTextureAsync(e,t){if(e===t)return e;function i(m){return m.colorSpace===mn?function(v){return v<.04045?v*.0773993808:Math.pow(v*.9478672986+.0521327014,2.4)}:function(v){return v}}e instanceof Fa&&(e=await this.decompressTextureAsync(e)),t instanceof Fa&&(t=await this.decompressTextureAsync(t));const s=e?e.image:null,r=t?t.image:null,o=Math.max(s?s.width:0,r?r.width:0),a=Math.max(s?s.height:0,r?r.height:0),l=tk();l.width=o,l.height=a;const c=l.getContext("2d",{willReadFrequently:!0});c.fillStyle="#00ffff",c.fillRect(0,0,o,a);const u=c.getImageData(0,0,o,a);if(s){c.drawImage(s,0,0,o,a);const m=i(e),g=c.getImageData(0,0,o,a).data;for(let v=2;v<g.length;v+=4)u.data[v]=m(g[v]/256)*256}if(r){c.drawImage(r,0,0,o,a);const m=i(t),g=c.getImageData(0,0,o,a).data;for(let v=1;v<g.length;v+=4)u.data[v]=m(g[v]/256)*256}c.putImageData(u,0,0);const p=(e||t).clone();return p.source=new Fl(l),p.colorSpace=nr,p.channel=(e||t).channel,e&&t&&e.channel!==t.channel&&console.warn("THREE.GLTFExporter: UV channels for metalnessMap and roughnessMap textures must match."),console.warn("THREE.GLTFExporter: Merged metalnessMap and roughnessMap textures."),p}async decompressTextureAsync(e,t=1/0){if(this.textureUtils===null)throw new Error("THREE.GLTFExporter: setTextureUtils() must be called to process compressed textures.");return await this.textureUtils.decompress(e,t)}processBuffer(e){const t=this.json,i=this.buffers;return t.buffers||(t.buffers=[{byteLength:0}]),i.push(e),0}processBufferView(e,t,i,s,r){const o=this.json;o.bufferViews||(o.bufferViews=[]);let a;switch(t){case Qt.BYTE:case Qt.UNSIGNED_BYTE:a=1;break;case Qt.SHORT:case Qt.UNSIGNED_SHORT:a=2;break;default:a=4}let l=e.itemSize*a;r===Qt.ARRAY_BUFFER&&(l=Math.ceil(l/4)*4);const c=Rz(s*l),u=new DataView(new ArrayBuffer(c));let h=0;for(let g=i;g<i+s;g++){for(let v=0;v<e.itemSize;v++){let y;e.itemSize>4?y=e.array[g*e.itemSize+v]:(v===0?y=e.getX(g):v===1?y=e.getY(g):v===2?y=e.getZ(g):v===3&&(y=e.getW(g)),e.normalized===!0&&(y=mf.normalize(y,e.array))),t===Qt.FLOAT?u.setFloat32(h,y,!0):t===Qt.INT?u.setInt32(h,y,!0):t===Qt.UNSIGNED_INT?u.setUint32(h,y,!0):t===Qt.SHORT?u.setInt16(h,y,!0):t===Qt.UNSIGNED_SHORT?u.setUint16(h,y,!0):t===Qt.BYTE?u.setInt8(h,y):t===Qt.UNSIGNED_BYTE&&u.setUint8(h,y),h+=a}h%l!==0&&(h+=l-h%l)}const p={buffer:this.processBuffer(u.buffer),byteOffset:this.byteOffset,byteLength:c};return r!==void 0&&(p.target=r),r===Qt.ARRAY_BUFFER&&(p.byteStride=l),this.byteOffset+=c,o.bufferViews.push(p),{id:o.bufferViews.length-1,byteLength:0}}processBufferViewImage(e){const t=this,i=t.json;return i.bufferViews||(i.bufferViews=[]),new Promise(function(s){const r=new FileReader;r.readAsArrayBuffer(e),r.onloadend=function(){const o=vC(r.result),a={buffer:t.processBuffer(o),byteOffset:t.byteOffset,byteLength:o.byteLength};t.byteOffset+=o.byteLength,s(i.bufferViews.push(a)-1)}})}processAccessor(e,t,i,s){const r=this.json,o={1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",9:"MAT3",16:"MAT4"};let a;if(e.array.constructor===Float32Array)a=Qt.FLOAT;else if(e.array.constructor===Int32Array)a=Qt.INT;else if(e.array.constructor===Uint32Array)a=Qt.UNSIGNED_INT;else if(e.array.constructor===Int16Array)a=Qt.SHORT;else if(e.array.constructor===Uint16Array)a=Qt.UNSIGNED_SHORT;else if(e.array.constructor===Int8Array)a=Qt.BYTE;else if(e.array.constructor===Uint8Array)a=Qt.UNSIGNED_BYTE;else throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type: "+e.array.constructor.name);if(i===void 0&&(i=0),(s===void 0||s===1/0)&&(s=e.count),s===0)return null;const l=hae(e,i,s);let c;t!==void 0&&(c=e===t.index?Qt.ELEMENT_ARRAY_BUFFER:Qt.ARRAY_BUFFER);const u=this.processBufferView(e,a,i,s,c),h={bufferView:u.id,byteOffset:u.byteOffset,componentType:a,count:s,max:l.max,min:l.min,type:o[e.itemSize]};return e.normalized===!0&&(h.normalized=!0),r.accessors||(r.accessors=[]),r.accessors.push(h)-1}processImage(e,t,i,s="image/png"){if(e!==null){const r=this,o=r.cache,a=r.json,l=r.options,c=r.pending;o.images.has(e)||o.images.set(e,{});const u=o.images.get(e),h=s+":flipY/"+i.toString();if(u[h]!==void 0)return u[h];a.images||(a.images=[]);const p={mimeType:s},m=tk();m.width=Math.min(e.width,l.maxTextureSize),m.height=Math.min(e.height,l.maxTextureSize);const g=m.getContext("2d",{willReadFrequently:!0});if(i===!0&&(g.translate(0,m.height),g.scale(1,-1)),e.data!==void 0){t!==dn&&console.error("GLTFExporter: Only RGBAFormat is supported.",t),(e.width>l.maxTextureSize||e.height>l.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",e);const y=new Uint8ClampedArray(e.height*e.width*4);for(let A=0;A<y.length;A+=4)y[A+0]=e.data[A+0],y[A+1]=e.data[A+1],y[A+2]=e.data[A+2],y[A+3]=e.data[A+3];g.putImageData(new ImageData(y,e.width,e.height),0,0)}else if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas)g.drawImage(e,0,0,m.width,m.height);else throw new Error("THREE.GLTFExporter: Invalid image type. Use HTMLImageElement, HTMLCanvasElement, ImageBitmap or OffscreenCanvas.");l.binary===!0?c.push(nk(m,s).then(y=>r.processBufferViewImage(y)).then(y=>{p.bufferView=y})):m.toDataURL!==void 0?p.uri=m.toDataURL(s):c.push(nk(m,s).then(y=>new FileReader().readAsDataURL(y)).then(y=>{p.uri=y}));const v=a.images.push(p)-1;return u[h]=v,v}else throw new Error("THREE.GLTFExporter: No valid image data found. Unable to process texture.")}processSampler(e){const t=this.json;t.samplers||(t.samplers=[]);const i={magFilter:or[e.magFilter],minFilter:or[e.minFilter],wrapS:or[e.wrapS],wrapT:or[e.wrapT]};return t.samplers.push(i)-1}async processTextureAsync(e){const i=this.options,s=this.cache,r=this.json;if(s.textures.has(e))return s.textures.get(e);r.textures||(r.textures=[]),e instanceof Fa&&(e=await this.decompressTextureAsync(e,i.maxTextureSize));let o=e.userData.mimeType;o==="image/webp"&&(o="image/png");const a={sampler:this.processSampler(e),source:this.processImage(e.image,e.format,e.flipY,o)};e.name&&(a.name=e.name),await this._invokeAllAsync(async function(c){c.writeTexture&&await c.writeTexture(e,a)});const l=r.textures.push(a)-1;return s.textures.set(e,l),l}async processMaterialAsync(e){const t=this.cache,i=this.json;if(t.materials.has(e))return t.materials.get(e);if(e.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;i.materials||(i.materials=[]);const s={pbrMetallicRoughness:{}};e.isMeshStandardMaterial!==!0&&e.isMeshBasicMaterial!==!0&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");const r=e.color.toArray().concat([e.opacity]);if(rm(r,[1,1,1,1])||(s.pbrMetallicRoughness.baseColorFactor=r),e.isMeshStandardMaterial?(s.pbrMetallicRoughness.metallicFactor=e.metalness,s.pbrMetallicRoughness.roughnessFactor=e.roughness):(s.pbrMetallicRoughness.metallicFactor=0,s.pbrMetallicRoughness.roughnessFactor=1),e.metalnessMap||e.roughnessMap){const a=await this.buildMetalRoughTextureAsync(e.metalnessMap,e.roughnessMap),l={index:await this.processTextureAsync(a),texCoord:a.channel};this.applyTextureTransform(l,a),s.pbrMetallicRoughness.metallicRoughnessTexture=l}if(e.map){const a={index:await this.processTextureAsync(e.map),texCoord:e.map.channel};this.applyTextureTransform(a,e.map),s.pbrMetallicRoughness.baseColorTexture=a}if(e.emissive){const a=e.emissive;if(Math.max(a.r,a.g,a.b)>0&&(s.emissiveFactor=e.emissive.toArray()),e.emissiveMap){const c={index:await this.processTextureAsync(e.emissiveMap),texCoord:e.emissiveMap.channel};this.applyTextureTransform(c,e.emissiveMap),s.emissiveTexture=c}}if(e.normalMap){const a={index:await this.processTextureAsync(e.normalMap),texCoord:e.normalMap.channel};e.normalScale&&e.normalScale.x!==1&&(a.scale=e.normalScale.x),this.applyTextureTransform(a,e.normalMap),s.normalTexture=a}if(e.aoMap){const a={index:await this.processTextureAsync(e.aoMap),texCoord:e.aoMap.channel};e.aoMapIntensity!==1&&(a.strength=e.aoMapIntensity),this.applyTextureTransform(a,e.aoMap),s.occlusionTexture=a}e.transparent?s.alphaMode="BLEND":e.alphaTest>0&&(s.alphaMode="MASK",s.alphaCutoff=e.alphaTest),e.side===ci&&(s.doubleSided=!0),e.name!==""&&(s.name=e.name),this.serializeUserData(e,s),await this._invokeAllAsync(async function(a){a.writeMaterialAsync&&await a.writeMaterialAsync(e,s)});const o=i.materials.push(s)-1;return t.materials.set(e,o),o}async processMeshAsync(e){const t=this.cache,i=this.json,s=[e.geometry.uuid];if(Array.isArray(e.material))for(let E=0,M=e.material.length;E<M;E++)s.push(e.material[E].uuid);else s.push(e.material.uuid);const r=s.join(":");if(t.meshes.has(r))return t.meshes.get(r);const o=e.geometry;let a;e.isLineSegments?a=Qt.LINES:e.isLineLoop?a=Qt.LINE_LOOP:e.isLine?a=Qt.LINE_STRIP:e.isPoints?a=Qt.POINTS:a=e.material.wireframe?Qt.LINES:Qt.TRIANGLES;const l={},c={},u=[],h=[],p={uv:"TEXCOORD_0",uv1:"TEXCOORD_1",uv2:"TEXCOORD_2",uv3:"TEXCOORD_3",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},m=o.getAttribute("normal");m!==void 0&&!this.isNormalizedNormalAttribute(m)&&(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),o.setAttribute("normal",this.createNormalizedNormalAttribute(m)));let g=null;for(let E in o.attributes){if(E.slice(0,5)==="morph")continue;const M=o.attributes[E];if(E=p[E]||E.toUpperCase(),/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(E)||(E="_"+E),t.attributes.has(this.getUID(M))){c[E]=t.attributes.get(this.getUID(M));continue}g=null;const D=M.array;E==="JOINTS_0"&&!(D instanceof Uint16Array)&&!(D instanceof Uint8Array)?(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),g=new wt(new Uint16Array(D),M.itemSize,M.normalized)):(D instanceof Uint32Array||D instanceof Int32Array)&&!E.startsWith("_")&&(console.warn(`GLTFExporter: Attribute "${E}" converted to type FLOAT.`),g=Sx.Utils.toFloat32BufferAttribute(M));const B=this.processAccessor(g||M,o);B!==null&&(E.startsWith("_")||this.detectMeshQuantization(E,M),c[E]=B,t.attributes.set(this.getUID(M),B))}if(m!==void 0&&o.setAttribute("normal",m),Object.keys(c).length===0)return null;if(e.morphTargetInfluences!==void 0&&e.morphTargetInfluences.length>0){const E=[],M=[],I={};if(e.morphTargetDictionary!==void 0)for(const D in e.morphTargetDictionary)I[e.morphTargetDictionary[D]]=D;for(let D=0;D<e.morphTargetInfluences.length;++D){const B={};let R=!1;for(const T in o.morphAttributes){if(T!=="position"&&T!=="normal"){R||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),R=!0);continue}const k=o.morphAttributes[T][D],H=T.toUpperCase(),Q=o.attributes[T];if(t.attributes.has(this.getUID(k,!0))){B[H]=t.attributes.get(this.getUID(k,!0));continue}const W=k.clone();if(!o.morphTargetsRelative)for(let X=0,J=k.count;X<J;X++)for(let K=0;K<k.itemSize;K++)K===0&&W.setX(X,k.getX(X)-Q.getX(X)),K===1&&W.setY(X,k.getY(X)-Q.getY(X)),K===2&&W.setZ(X,k.getZ(X)-Q.getZ(X)),K===3&&W.setW(X,k.getW(X)-Q.getW(X));B[H]=this.processAccessor(W,o),t.attributes.set(this.getUID(Q,!0),B[H])}h.push(B),E.push(e.morphTargetInfluences[D]),e.morphTargetDictionary!==void 0&&M.push(I[D])}l.weights=E,M.length>0&&(l.extras={},l.extras.targetNames=M)}const v=Array.isArray(e.material);if(v&&o.groups.length===0)return null;let y=!1;if(v&&o.index===null){const E=[];for(let M=0,I=o.attributes.position.count;M<I;M++)E[M]=M;o.setIndex(E),y=!0}const A=v?e.material:[e.material],b=v?o.groups:[{materialIndex:0,start:void 0,count:void 0}];for(let E=0,M=b.length;E<M;E++){const I={mode:a,attributes:c};if(this.serializeUserData(o,I),h.length>0&&(I.targets=h),o.index!==null){let B=this.getUID(o.index);(b[E].start!==void 0||b[E].count!==void 0)&&(B+=":"+b[E].start+":"+b[E].count),t.attributes.has(B)?I.indices=t.attributes.get(B):(I.indices=this.processAccessor(o.index,o,b[E].start,b[E].count),t.attributes.set(B,I.indices)),I.indices===null&&delete I.indices}const D=await this.processMaterialAsync(A[b[E].materialIndex]);D!==null&&(I.material=D),u.push(I)}y===!0&&o.setIndex(null),l.primitives=u,i.meshes||(i.meshes=[]),await this._invokeAllAsync(function(E){E.writeMesh&&E.writeMesh(e,l)});const w=i.meshes.push(l)-1;return t.meshes.set(r,w),w}detectMeshQuantization(e,t){if(this.extensionsUsed[yC])return;let i;switch(t.array.constructor){case Int8Array:i="byte";break;case Uint8Array:i="unsigned byte";break;case Int16Array:i="short";break;case Uint16Array:i="unsigned short";break;default:return}t.normalized&&(i+=" normalized");const s=e.split("_",1)[0];$L[s]&&$L[s].includes(i)&&(this.extensionsUsed[yC]=!0,this.extensionsRequired[yC]=!0)}processCamera(e){const t=this.json;t.cameras||(t.cameras=[]);const i=e.isOrthographicCamera,s={type:i?"orthographic":"perspective"};return i?s.orthographic={xmag:e.right*2,ymag:e.top*2,zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near}:s.perspective={aspectRatio:e.aspect,yfov:mf.degToRad(e.fov),zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near},e.name!==""&&(s.name=e.type),t.cameras.push(s)-1}processAnimation(e,t){const i=this.json,s=this.nodeMap;i.animations||(i.animations=[]),e=Sx.Utils.mergeMorphTargetTracks(e.clone(),t);const r=e.tracks,o=[],a=[];for(let l=0;l<r.length;++l){const c=r[l],u=Ot.parseTrackName(c.name);let h=Ot.findNode(t,u.nodeName);const p=YL[u.propertyName];if(u.objectName==="bones"&&(h.isSkinnedMesh===!0?h=h.skeleton.getBoneByName(u.objectIndex):h=void 0),!h||!p){console.warn('THREE.GLTFExporter: Could not export animation track "%s".',c.name);continue}const m=1;let g=c.values.length/c.times.length;p===YL.morphTargetInfluences&&(g/=h.morphTargetInfluences.length);let v;c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline===!0?(v="CUBICSPLINE",g/=3):c.getInterpolation()===nc?v="STEP":v="LINEAR",a.push({input:this.processAccessor(new wt(c.times,m)),output:this.processAccessor(new wt(c.values,g)),interpolation:v}),o.push({sampler:a.length-1,target:{node:s.get(h),path:p}})}return i.animations.push({name:e.name||"clip_"+i.animations.length,samplers:a,channels:o}),i.animations.length-1}processSkin(e){const t=this.json,i=this.nodeMap,s=t.nodes[i.get(e)],r=e.skeleton;if(r===void 0)return null;const o=e.skeleton.bones[0];if(o===void 0)return null;const a=[],l=new Float32Array(r.bones.length*16),c=new tt;for(let h=0;h<r.bones.length;++h)a.push(i.get(r.bones[h])),c.copy(r.boneInverses[h]),c.multiply(e.bindMatrix).toArray(l,h*16);return t.skins===void 0&&(t.skins=[]),t.skins.push({inverseBindMatrices:this.processAccessor(new wt(l,16)),joints:a,skeleton:i.get(o)}),s.skin=t.skins.length-1}async processNodeAsync(e){const t=this.json,i=this.options,s=this.nodeMap;t.nodes||(t.nodes=[]);const r={};if(i.trs){const a=e.quaternion.toArray(),l=e.position.toArray(),c=e.scale.toArray();rm(a,[0,0,0,1])||(r.rotation=a),rm(l,[0,0,0])||(r.translation=l),rm(c,[1,1,1])||(r.scale=c)}else e.matrixAutoUpdate&&e.updateMatrix(),uae(e.matrix)===!1&&(r.matrix=e.matrix.elements);if(e.name!==""&&(r.name=String(e.name)),this.serializeUserData(e,r),e.isMesh||e.isLine||e.isPoints){const a=await this.processMeshAsync(e);a!==null&&(r.mesh=a)}else e.isCamera&&(r.camera=this.processCamera(e));if(e.isSkinnedMesh&&this.skins.push(e),e.children.length>0){const a=[];for(let l=0,c=e.children.length;l<c;l++){const u=e.children[l];if(u.visible||i.onlyVisible===!1){const h=await this.processNodeAsync(u);h!==null&&a.push(h)}}a.length>0&&(r.children=a)}await this._invokeAllAsync(function(a){a.writeNode&&a.writeNode(e,r)});const o=t.nodes.push(r)-1;return s.set(e,o),o}async processSceneAsync(e){const t=this.json,i=this.options;t.scenes||(t.scenes=[],t.scene=0);const s={};e.name!==""&&(s.name=e.name),t.scenes.push(s);const r=[];for(let o=0,a=e.children.length;o<a;o++){const l=e.children[o];if(l.visible||i.onlyVisible===!1){const c=await this.processNodeAsync(l);c!==null&&r.push(c)}}r.length>0&&(s.nodes=r),this.serializeUserData(e,s)}async processObjectsAsync(e){const t=new qo;t.name="AuxScene";for(let i=0;i<e.length;i++)t.children.push(e[i]);await this.processSceneAsync(t)}async processInputAsync(e){const t=this.options;e=e instanceof Array?e:[e],await this._invokeAllAsync(function(s){s.beforeParse&&s.beforeParse(e)});const i=[];for(let s=0;s<e.length;s++)e[s]instanceof qo?await this.processSceneAsync(e[s]):i.push(e[s]);i.length>0&&await this.processObjectsAsync(i);for(let s=0;s<this.skins.length;++s)this.processSkin(this.skins[s]);for(let s=0;s<t.animations.length;++s)this.processAnimation(t.animations[s],e[0]);await this._invokeAllAsync(function(s){s.afterParse&&s.afterParse(e)})}async _invokeAllAsync(e){for(let t=0,i=this.plugins.length;t<i;t++)await e(this.plugins[t])}}class fae{constructor(e){this.writer=e,this.name="KHR_lights_punctual"}writeNode(e,t){if(!e.isLight)return;if(!e.isDirectionalLight&&!e.isPointLight&&!e.isSpotLight){console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",e);return}const i=this.writer,s=i.json,r=i.extensionsUsed,o={};e.name&&(o.name=e.name),o.color=e.color.toArray(),o.intensity=e.intensity,e.isDirectionalLight?o.type="directional":e.isPointLight?(o.type="point",e.distance>0&&(o.range=e.distance)):e.isSpotLight&&(o.type="spot",e.distance>0&&(o.range=e.distance),o.spot={},o.spot.innerConeAngle=(1-e.penumbra)*e.angle,o.spot.outerConeAngle=e.angle),e.decay!==void 0&&e.decay!==2&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),e.target&&(e.target.parent!==e||e.target.position.x!==0||e.target.position.y!==0||e.target.position.z!==-1)&&console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),r[this.name]||(s.extensions=s.extensions||{},s.extensions[this.name]={lights:[]},r[this.name]=!0);const a=s.extensions[this.name].lights;a.push(o),t.extensions=t.extensions||{},t.extensions[this.name]={light:a.length-1}}}class pae{constructor(e){this.writer=e,this.name="KHR_materials_unlit"}async writeMaterialAsync(e,t){if(!e.isMeshBasicMaterial)return;const s=this.writer.extensionsUsed;t.extensions=t.extensions||{},t.extensions[this.name]={},s[this.name]=!0,t.pbrMetallicRoughness.metallicFactor=0,t.pbrMetallicRoughness.roughnessFactor=.9}}class mae{constructor(e){this.writer=e,this.name="KHR_materials_clearcoat"}async writeMaterialAsync(e,t){if(!e.isMeshPhysicalMaterial||e.clearcoat===0)return;const i=this.writer,s=i.extensionsUsed,r={};if(r.clearcoatFactor=e.clearcoat,e.clearcoatMap){const o={index:await i.processTextureAsync(e.clearcoatMap),texCoord:e.clearcoatMap.channel};i.applyTextureTransform(o,e.clearcoatMap),r.clearcoatTexture=o}if(r.clearcoatRoughnessFactor=e.clearcoatRoughness,e.clearcoatRoughnessMap){const o={index:await i.processTextureAsync(e.clearcoatRoughnessMap),texCoord:e.clearcoatRoughnessMap.channel};i.applyTextureTransform(o,e.clearcoatRoughnessMap),r.clearcoatRoughnessTexture=o}if(e.clearcoatNormalMap){const o={index:await i.processTextureAsync(e.clearcoatNormalMap),texCoord:e.clearcoatNormalMap.channel};e.clearcoatNormalScale.x!==1&&(o.scale=e.clearcoatNormalScale.x),i.applyTextureTransform(o,e.clearcoatNormalMap),r.clearcoatNormalTexture=o}t.extensions=t.extensions||{},t.extensions[this.name]=r,s[this.name]=!0}}class gae{constructor(e){this.writer=e,this.name="KHR_materials_dispersion"}async writeMaterialAsync(e,t){if(!e.isMeshPhysicalMaterial||e.dispersion===0)return;const s=this.writer.extensionsUsed,r={};r.dispersion=e.dispersion,t.extensions=t.extensions||{},t.extensions[this.name]=r,s[this.name]=!0}}class Aae{constructor(e){this.writer=e,this.name="KHR_materials_iridescence"}async writeMaterialAsync(e,t){if(!e.isMeshPhysicalMaterial||e.iridescence===0)return;const i=this.writer,s=i.extensionsUsed,r={};if(r.iridescenceFactor=e.iridescence,e.iridescenceMap){const o={index:await i.processTextureAsync(e.iridescenceMap),texCoord:e.iridescenceMap.channel};i.applyTextureTransform(o,e.iridescenceMap),r.iridescenceTexture=o}if(r.iridescenceIor=e.iridescenceIOR,r.iridescenceThicknessMinimum=e.iridescenceThicknessRange[0],r.iridescenceThicknessMaximum=e.iridescenceThicknessRange[1],e.iridescenceThicknessMap){const o={index:await i.processTextureAsync(e.iridescenceThicknessMap),texCoord:e.iridescenceThicknessMap.channel};i.applyTextureTransform(o,e.iridescenceThicknessMap),r.iridescenceThicknessTexture=o}t.extensions=t.extensions||{},t.extensions[this.name]=r,s[this.name]=!0}}class yae{constructor(e){this.writer=e,this.name="KHR_materials_transmission"}async writeMaterialAsync(e,t){if(!e.isMeshPhysicalMaterial||e.transmission===0)return;const i=this.writer,s=i.extensionsUsed,r={};if(r.transmissionFactor=e.transmission,e.transmissionMap){const o={index:await i.processTextureAsync(e.transmissionMap),texCoord:e.transmissionMap.channel};i.applyTextureTransform(o,e.transmissionMap),r.transmissionTexture=o}t.extensions=t.extensions||{},t.extensions[this.name]=r,s[this.name]=!0}}class vae{constructor(e){this.writer=e,this.name="KHR_materials_volume"}async writeMaterialAsync(e,t){if(!e.isMeshPhysicalMaterial||e.transmission===0)return;const i=this.writer,s=i.extensionsUsed,r={};if(r.thicknessFactor=e.thickness,e.thicknessMap){const o={index:await i.processTextureAsync(e.thicknessMap),texCoord:e.thicknessMap.channel};i.applyTextureTransform(o,e.thicknessMap),r.thicknessTexture=o}e.attenuationDistance!==1/0&&(r.attenuationDistance=e.attenuationDistance),r.attenuationColor=e.attenuationColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=r,s[this.name]=!0}}class xae{constructor(e){this.writer=e,this.name="KHR_materials_ior"}async writeMaterialAsync(e,t){if(!e.isMeshPhysicalMaterial||e.ior===1.5)return;const s=this.writer.extensionsUsed,r={};r.ior=e.ior,t.extensions=t.extensions||{},t.extensions[this.name]=r,s[this.name]=!0}}class bae{constructor(e){this.writer=e,this.name="KHR_materials_specular"}async writeMaterialAsync(e,t){if(!e.isMeshPhysicalMaterial||e.specularIntensity===1&&e.specularColor.equals(sae)&&!e.specularIntensityMap&&!e.specularColorMap)return;const i=this.writer,s=i.extensionsUsed,r={};if(e.specularIntensityMap){const o={index:await i.processTextureAsync(e.specularIntensityMap),texCoord:e.specularIntensityMap.channel};i.applyTextureTransform(o,e.specularIntensityMap),r.specularTexture=o}if(e.specularColorMap){const o={index:await i.processTextureAsync(e.specularColorMap),texCoord:e.specularColorMap.channel};i.applyTextureTransform(o,e.specularColorMap),r.specularColorTexture=o}r.specularFactor=e.specularIntensity,r.specularColorFactor=e.specularColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=r,s[this.name]=!0}}class wae{constructor(e){this.writer=e,this.name="KHR_materials_sheen"}async writeMaterialAsync(e,t){if(!e.isMeshPhysicalMaterial||e.sheen==0)return;const i=this.writer,s=i.extensionsUsed,r={};if(e.sheenRoughnessMap){const o={index:await i.processTextureAsync(e.sheenRoughnessMap),texCoord:e.sheenRoughnessMap.channel};i.applyTextureTransform(o,e.sheenRoughnessMap),r.sheenRoughnessTexture=o}if(e.sheenColorMap){const o={index:await i.processTextureAsync(e.sheenColorMap),texCoord:e.sheenColorMap.channel};i.applyTextureTransform(o,e.sheenColorMap),r.sheenColorTexture=o}r.sheenRoughnessFactor=e.sheenRoughness,r.sheenColorFactor=e.sheenColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=r,s[this.name]=!0}}class Eae{constructor(e){this.writer=e,this.name="KHR_materials_anisotropy"}async writeMaterialAsync(e,t){if(!e.isMeshPhysicalMaterial||e.anisotropy==0)return;const i=this.writer,s=i.extensionsUsed,r={};if(e.anisotropyMap){const o={index:await i.processTextureAsync(e.anisotropyMap)};i.applyTextureTransform(o,e.anisotropyMap),r.anisotropyTexture=o}r.anisotropyStrength=e.anisotropy,r.anisotropyRotation=e.anisotropyRotation,t.extensions=t.extensions||{},t.extensions[this.name]=r,s[this.name]=!0}}class _ae{constructor(e){this.writer=e,this.name="KHR_materials_emissive_strength"}async writeMaterialAsync(e,t){if(!e.isMeshStandardMaterial||e.emissiveIntensity===1)return;const s=this.writer.extensionsUsed,r={};r.emissiveStrength=e.emissiveIntensity,t.extensions=t.extensions||{},t.extensions[this.name]=r,s[this.name]=!0}}class Cae{constructor(e){this.writer=e,this.name="EXT_materials_bump"}async writeMaterialAsync(e,t){if(!e.isMeshStandardMaterial||e.bumpScale===1&&!e.bumpMap)return;const i=this.writer,s=i.extensionsUsed,r={};if(e.bumpMap){const o={index:await i.processTextureAsync(e.bumpMap),texCoord:e.bumpMap.channel};i.applyTextureTransform(o,e.bumpMap),r.bumpTexture=o}r.bumpFactor=e.bumpScale,t.extensions=t.extensions||{},t.extensions[this.name]=r,s[this.name]=!0}}class Sae{constructor(e){this.writer=e,this.name="EXT_mesh_gpu_instancing"}writeNode(e,t){if(!e.isInstancedMesh)return;const i=this.writer,s=e,r=new Float32Array(s.count*3),o=new Float32Array(s.count*4),a=new Float32Array(s.count*3),l=new tt,c=new O,u=new qn,h=new O;for(let m=0;m<s.count;m++)s.getMatrixAt(m,l),l.decompose(c,u,h),c.toArray(r,m*3),u.toArray(o,m*4),h.toArray(a,m*3);const p={TRANSLATION:i.processAccessor(new wt(r,3)),ROTATION:i.processAccessor(new wt(o,4)),SCALE:i.processAccessor(new wt(a,3))};s.instanceColor&&(p._COLOR_0=i.processAccessor(s.instanceColor)),t.extensions=t.extensions||{},t.extensions[this.name]={attributes:p},i.extensionsUsed[this.name]=!0,i.extensionsRequired[this.name]=!0}}Sx.Utils={insertKeyframe:function(n,e){const i=n.getValueSize(),s=new n.TimeBufferType(n.times.length+1),r=new n.ValueBufferType(n.values.length+i),o=n.createInterpolant(new n.ValueBufferType(i));let a;if(n.times.length===0){s[0]=e;for(let l=0;l<i;l++)r[l]=0;a=0}else if(e<n.times[0]){if(Math.abs(n.times[0]-e)<.001)return 0;s[0]=e,s.set(n.times,1),r.set(o.evaluate(e),0),r.set(n.values,i),a=0}else if(e>n.times[n.times.length-1]){if(Math.abs(n.times[n.times.length-1]-e)<.001)return n.times.length-1;s[s.length-1]=e,s.set(n.times,0),r.set(n.values,0),r.set(o.evaluate(e),n.values.length),a=s.length-1}else for(let l=0;l<n.times.length;l++){if(Math.abs(n.times[l]-e)<.001)return l;if(n.times[l]<e&&n.times[l+1]>e){s.set(n.times.slice(0,l+1),0),s[l+1]=e,s.set(n.times.slice(l+1),l+2),r.set(n.values.slice(0,(l+1)*i),0),r.set(o.evaluate(e),(l+1)*i),r.set(n.values.slice((l+1)*i),(l+2)*i),a=l+1;break}}return n.times=s,n.values=r,a},mergeMorphTargetTracks:function(n,e){const t=[],i={},s=n.tracks;for(let r=0;r<s.length;++r){let o=s[r];const a=Ot.parseTrackName(o.name),l=Ot.findNode(e,a.nodeName);if(a.propertyName!=="morphTargetInfluences"||a.propertyIndex===void 0){t.push(o);continue}if(o.createInterpolant!==o.InterpolantFactoryMethodDiscrete&&o.createInterpolant!==o.InterpolantFactoryMethodLinear){if(o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),o=o.clone(),o.setInterpolation(Va)}const c=l.morphTargetInfluences.length,u=l.morphTargetDictionary[a.propertyIndex];if(u===void 0)throw new Error("THREE.GLTFExporter: Morph target name not found: "+a.propertyIndex);let h;if(i[l.uuid]===void 0){h=o.clone();const m=new h.ValueBufferType(c*h.times.length);for(let g=0;g<h.times.length;g++)m[g*c+u]=h.values[g];h.name=(a.nodeName||"")+".morphTargetInfluences",h.values=m,i[l.uuid]=h,t.push(h);continue}const p=o.createInterpolant(new o.ValueBufferType(1));h=i[l.uuid];for(let m=0;m<h.times.length;m++)h.values[m*c+u]=p.evaluate(h.times[m]);for(let m=0;m<o.times.length;m++){const g=this.insertKeyframe(h,o.times[m]);h.values[g*c+u]=o.values[m]}}return n.tracks=t,n},toFloat32BufferAttribute:function(n){const e=new wt(new Float32Array(n.count*n.itemSize),n.itemSize,!1);if(!n.normalized&&!n.isInterleavedBufferAttribute)return e.array.set(n.array),e;for(let t=0,i=n.count;t<i;t++)for(let s=0;s<n.itemSize;s++)e.setComponent(t,s,n.getComponent(t,s));return e}};/* @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ik=n=>n.material!==void 0&&n.userData&&n.userData.variantMaterials&&!!Array.from(n.userData.variantMaterials.values()).filter(e=>av(e.material)),av=n=>n&&n.isMaterial&&!Array.isArray(n);class Mae{constructor(e){this.writer=e,this.name="KHR_materials_variants",this.variantNames=[]}beforeParse(e){const t=new Set,i=s=>{if(!ik(s))return;const r=s.userData.variantMaterials,o=s.userData.variantData;for(const[a,l]of o){const c=r.get(l.index);c&&av(c.material)&&t.add(a)}};if(Array.isArray(e))for(const s of e)s.traverse(i);else e.traverse(i);t.forEach(s=>this.variantNames.push(s))}async writeMesh(e,t){if(!ik(e))return;const i=e.userData,s=i.variantMaterials,r=i.variantData,o=new Map,a=new Map,l=Array.from(r.values()).sort((h,p)=>h.index-p.index);for(const[h,p]of l.entries())a.set(p.index,h);for(const h of r.values()){const p=s.get(h.index);if(!p||!av(p.material))continue;const m=await this.writer.processMaterialAsync(p.material);o.has(m)||o.set(m,{material:m,variants:[]}),o.get(m).variants.push(a.get(h.index))}const c=Array.from(o.values()).map(h=>h.variants.sort((p,m)=>p-m)&&h).sort((h,p)=>h.material-p.material);if(c.length===0)return;const u=av(i.originalMaterial)?await this.writer.processMaterialAsync(i.originalMaterial):-1;for(const h of t.primitives)u>=0&&(h.material=u),h.extensions=h.extensions||{},h.extensions[this.name]={mappings:c}}afterParse(){if(this.variantNames.length===0)return;const e=this.writer.json;e.extensions=e.extensions||{};const t=this.variantNames.map(i=>({name:i}));e.extensions[this.name]={variants:t},this.writer.extensionsUsed[this.name]=!0}}class Iae{constructor(e,t,i,s,r){this.xrLight=e,this.renderer=t,this.lightProbe=i,this.xrWebGLBinding=null,this.estimationStartCallback=r,this.frameCallback=this.onXRFrame.bind(this);const o=t.xr.getSession();if(s&&"XRWebGLBinding"in window){const a=new ab(16);e.environment=a.texture;const l=t.getContext();switch(o.preferredReflectionFormat){case"srgba8":l.getExtension("EXT_sRGB");break;case"rgba16f":l.getExtension("OES_texture_half_float");break}this.xrWebGLBinding=new XRWebGLBinding(o,l),this.lightProbe.addEventListener("reflectionchange",()=>{this.updateReflection()})}o.requestAnimationFrame(this.frameCallback)}updateReflection(){const e=this.renderer.properties.get(this.xrLight.environment);if(e){const t=this.xrWebGLBinding.getReflectionCubeMap(this.lightProbe);t&&(e.__webglTexture=t,this.xrLight.environment.needsPMREMUpdate=!0)}}onXRFrame(e,t){if(!this.xrLight)return;t.session.requestAnimationFrame(this.frameCallback);const s=t.getLightEstimate(this.lightProbe);if(s){this.xrLight.lightProbe.sh.fromArray(s.sphericalHarmonicsCoefficients),this.xrLight.lightProbe.intensity=1;const r=Math.max(1,Math.max(s.primaryLightIntensity.x,Math.max(s.primaryLightIntensity.y,s.primaryLightIntensity.z)));this.xrLight.directionalLight.color.setRGB(s.primaryLightIntensity.x/r,s.primaryLightIntensity.y/r,s.primaryLightIntensity.z/r),this.xrLight.directionalLight.intensity=r,this.xrLight.directionalLight.position.copy(s.primaryLightDirection),this.estimationStartCallback&&(this.estimationStartCallback(),this.estimationStartCallback=null)}}dispose(){this.xrLight=null,this.renderer=null,this.lightProbe=null,this.xrWebGLBinding=null}}class Tae extends sr{constructor(e,t=!0){super(),this.lightProbe=new FI,this.lightProbe.intensity=0,this.add(this.lightProbe),this.directionalLight=new Ug,this.directionalLight.intensity=0,this.add(this.directionalLight),this.environment=null;let i=null,s=!1;e.xr.addEventListener("sessionstart",()=>{const r=e.xr.getSession();"requestLightProbe"in r&&r.requestLightProbe({reflectionFormat:r.preferredReflectionFormat}).then(o=>{i=new Iae(this,e,o,t,()=>{s=!0,this.dispatchEvent({type:"estimationstart"})})})}),e.xr.addEventListener("sessionend",()=>{i&&(i.dispose(),i=null),s&&this.dispatchEvent({type:"estimationend"})}),this.dispose=()=>{i&&(i.dispose(),i=null),this.remove(this.lightProbe),this.lightProbe=null,this.remove(this.directionalLight),this.directionalLight=null,this.environment=null}}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dz=1e4,Bae=.001,Pz=50;class bs{constructor(e=Pz){this.velocity=0,this.naturalFrequency=0,this.setDecayTime(e)}setDecayTime(e){this.naturalFrequency=1/Math.max(Bae,e)}update(e,t,i,s){const r=2e-4*this.naturalFrequency;if(e==null||s===0||e===t&&this.velocity===0)return t;if(i<0)return e;const o=e-t,a=this.velocity+this.naturalFrequency*o,l=o+i*a,c=Math.exp(-this.naturalFrequency*i),u=(a-this.naturalFrequency*l)*c,h=-this.naturalFrequency*(u+a*c);return Math.abs(u)<r*Math.abs(s)&&h*o>=0?(this.velocity=0,t):(this.velocity=u,t+l*c)}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fo=.2,sk=.03,Rae=.75,Lz=12,Dae=Math.PI/(2*Lz),rk=new me,Ay=(n,e,t)=>{let i=e>0?t>0?0:-Math.PI/2:t>0?Math.PI/2:Math.PI;for(let s=0;s<=Lz;++s)n.push(e+(Fo-sk)*Math.cos(i),t+(Fo-sk)*Math.sin(i),0,e+Fo*Math.cos(i),t+Fo*Math.sin(i),0),i+=Dae};class ok extends Wt{constructor(e,t){const i=new xt,s=[],r=[],{size:o,boundingBox:a}=e,l=o.x/2,c=(t==="back"?o.y:o.z)/2;Ay(r,l,c),Ay(r,-l,c),Ay(r,-l,-c),Ay(r,l,-c);const u=r.length/3;for(let m=0;m<u-2;m+=2)s.push(m,m+1,m+3,m,m+3,m+2);const h=u-2;s.push(h,h+1,1,h,1,0),i.setAttribute("position",new nt(r,3)),i.setIndex(s),super(i),this.side=t;const p=this.material;switch(p.side=ci,p.transparent=!0,p.opacity=0,this.goalOpacity=0,this.opacityDamper=new bs,this.hitPlane=new Wt(new bo(2*(l+Fo),2*(c+Fo))),this.hitPlane.visible=!1,this.hitPlane.material.side=ci,this.add(this.hitPlane),this.hitBox=new Wt(new vo(o.x+2*Fo,o.y+Fo,o.z+2*Fo)),this.hitBox.visible=!1,this.hitBox.material.side=ci,this.add(this.hitBox),a.getCenter(this.position),t){case"bottom":this.rotateX(-Math.PI/2),this.shadowHeight=a.min.y,this.position.y=this.shadowHeight;break;case"back":this.shadowHeight=a.min.z,this.position.z=this.shadowHeight}e.target.add(this),this.hitBox.position.y=(o.y+Fo)/2+a.min.y,e.target.add(this.hitBox),this.offsetHeight=0}getHit(e,t,i){rk.set(t,-i),this.hitPlane.visible=!0;const s=e.positionAndNormalFromPoint(rk,this.hitPlane);return this.hitPlane.visible=!1,s==null?null:s.position}getExpandedHit(e,t,i){this.hitPlane.scale.set(1e3,1e3,1e3),this.hitPlane.updateMatrixWorld();const s=this.getHit(e,t,i);return this.hitPlane.scale.set(1,1,1),s}controllerIntersection(e,t){this.hitBox.visible=!0;const i=e.hitFromController(t,this.hitBox);return this.hitBox.visible=!1,i}set offsetHeight(e){e-=.001,this.side==="back"?this.position.z=this.shadowHeight+e:this.position.y=this.shadowHeight+e}get offsetHeight(){return this.side==="back"?this.position.z-this.shadowHeight:this.position.y-this.shadowHeight}set show(e){this.goalOpacity=e?Rae:0}updateOpacity(e){const t=this.material;t.opacity=this.opacityDamper.update(t.opacity,this.goalOpacity,e,1),this.visible=t.opacity>0}dispose(){const{geometry:e,material:t}=this.hitPlane;e.dispose(),t.dispose(),this.hitBox.geometry.dispose(),this.hitBox.material.dispose(),this.geometry.dispose(),this.material.dispose(),this.hitBox.removeFromParent(),this.removeFromParent()}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const os=(n,e)=>({type:"number",number:n,unit:e}),Pa=(()=>{const n={};return t=>{const i=t;if(i in n)return n[i];const s=[];let r=0;for(;t;){if(++r>1e3){t="";break}const o=kz(t),a=o.nodes[0];if(a==null||a.terms.length===0)break;s.push(a),t=o.remainingInput}return n[i]=s}})(),kz=(()=>{const n=/^(\-\-|[a-z\u0240-\uffff])/i,e=/^([\*\+\/]|[\-]\s)/i,t=/^[\),]/,i="(",s="#";return r=>{const o=[];for(;r.length&&(r=r.trim(),!t.test(r));)if(r[0]===i){const{nodes:a,remainingInput:l}=ak(r);r=l,o.push({type:"function",name:{type:"ident",value:"calc"},arguments:a})}else if(n.test(r)){const a=Pae(r),l=a.nodes[0];if(r=a.remainingInput,r[0]===i){const{nodes:c,remainingInput:u}=ak(r);o.push({type:"function",name:l,arguments:c}),r=u}else o.push(l)}else if(e.test(r))o.push({type:"operator",value:r[0]}),r=r.slice(1);else{const{nodes:a,remainingInput:l}=r[0]===s?kae(r):Lae(r);if(a.length===0)break;o.push(a[0]),r=l}return{nodes:[{type:"expression",terms:o}],remainingInput:r}}})(),Pae=(()=>{const n=/[^a-z0-9_\-\u0240-\uffff]/i;return e=>{const t=e.match(n),i=t==null?e:e.substr(0,t.index),s=t==null?"":e.substr(t.index);return{nodes:[{type:"ident",value:i}],remainingInput:s}}})(),Lae=(()=>{const n=/[\+\-]?(\d+[\.]\d+|\d+|[\.]\d+)([eE][\+\-]?\d+)?/,e=/^[a-z%]+/i,t=/^(m|mm|cm|rad|deg|[%])$/;return i=>{const s=i.match(n),r=s==null?"0":s[0];i=r==null?i:i.slice(r.length);const o=i.match(e);let a=o!=null&&o[0]!==""?o[0]:null;const l=o==null?i:i.slice(a.length);return a!=null&&!t.test(a)&&(a=null),{nodes:[{type:"number",number:parseFloat(r)||0,unit:a}],remainingInput:l}}})(),kae=(()=>{const n=/^[a-f0-9]*/i;return e=>{e=e.slice(1).trim();const t=e.match(n);return{nodes:t==null?[]:[{type:"hex",value:t[0]}],remainingInput:t==null?e:e.slice(t[0].length)}}})(),ak=n=>{const e=[];for(n=n.slice(1).trim();n.length;){const t=kz(n);if(e.push(t.nodes[0]),n=t.remainingInput.trim(),n[0]===",")n=n.slice(1).trim();else if(n[0]===")"){n=n.slice(1);break}}return{nodes:e,remainingInput:n}},lk=Symbol("visitedTypes");class Fae{constructor(e){this[lk]=e}walk(e,t){const i=e.slice();for(;i.length;){const s=i.shift();switch(this[lk].indexOf(s.type)>-1&&t(s),s.type){case"expression":i.unshift(...s.terms);break;case"function":i.unshift(s.name,...s.arguments);break}}}}const ac=Object.freeze({type:"number",number:0,unit:null});/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb=(n,e=0)=>{let{number:t,unit:i}=n;if(!isFinite(t))t=e,i="rad";else if(n.unit==="rad"||n.unit==null)return n;return{type:"number",number:(i==="deg"&&t!=null?t:0)*Math.PI/180,unit:"rad"}},ck=(n,e=0)=>{let{number:t,unit:i}=n;if(!isFinite(t))t=e,i="m";else if(n.unit==="m")return n;let s;switch(i){default:s=1;break;case"cm":s=1/100;break;case"mm":s=1/1e3;break}return{type:"number",number:s*t,unit:"m"}},Go=(()=>{const n=t=>t,e={rad:n,deg:zb,m:n,mm:ck,cm:ck};return(t,i=ac)=>{isFinite(t.number)||(t.number=i.number,t.unit=i.unit);const{unit:s}=t;if(s==null)return t;const r=e[s];return r==null?i:r(t)}})();/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fz,uk,hk;const Gf=Symbol("evaluate"),lv=Symbol("lastValue");class Bn{constructor(){this[Fz]=null}static evaluatableFor(e,t=ac){if(e instanceof Bn)return e;if(e.type==="number")return e.unit==="%"?new Nae(e,t):e;switch(e.name.value){case"calc":return new Gae(e,t);case"env":return new Oae(e)}return ac}static evaluate(e){return e instanceof Bn?e.evaluate():e}static isConstant(e){return e instanceof Bn?e.isConstant:!0}static applyIntrinsics(e,t){const{basis:i,keywords:s}=t,{auto:r}=s;return i.map((o,a)=>{const l=r[a]==null?o:r[a];let c=e[a]?e[a]:l;if(c.type==="ident"){const u=c.value;u in s&&(c=s[u][a])}return(c==null||c.type==="ident")&&(c=l),c.unit==="%"?os(c.number/100*o.number,o.unit):(c=Go(c,o),c.unit!==o.unit?o:c)})}get isConstant(){return!1}evaluate(){return(!this.isConstant||this[lv]==null)&&(this[lv]=this[Gf]()),this[lv]}}Fz=lv;const dk=Symbol("percentage"),xC=Symbol("basis");class Nae extends Bn{constructor(e,t){super(),this[dk]=e,this[xC]=t}get isConstant(){return!0}[Gf](){return os(this[dk].number/100*this[xC].number,this[xC].unit)}}const yy=Symbol("identNode");class Oae extends Bn{constructor(e){super(),this[uk]=null;const t=e.arguments.length?e.arguments[0].terms[0]:null;t!=null&&t.type==="ident"&&(this[yy]=t)}get isConstant(){return!1}[(uk=yy,Gf)](){if(this[yy]!=null)switch(this[yy].value){case"window-scroll-y":const e=window.pageYOffset,t=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight);return{type:"number",number:e/(t-window.innerHeight)||0,unit:null}}return ac}}const Uae=/[\*\/]/,jh=Symbol("evaluator");class Gae extends Bn{constructor(e,t=ac){if(super(),this[hk]=null,e.arguments.length!==1)return;const i=e.arguments[0].terms.slice(),s=[];for(;i.length;){const r=i.shift();if(s.length>0){const o=s[s.length-1];if(o.type==="operator"&&Uae.test(o.value)){const a=s.pop(),l=s.pop();if(l==null)return;s.push(new pk(a,Bn.evaluatableFor(l,t),Bn.evaluatableFor(r,t)));continue}}s.push(r.type==="operator"?r:Bn.evaluatableFor(r,t))}for(;s.length>2;){const[r,o,a]=s.splice(0,3);if(o.type!=="operator")return;s.unshift(new pk(o,Bn.evaluatableFor(r,t),Bn.evaluatableFor(a,t)))}s.length===1&&(this[jh]=s[0])}get isConstant(){return this[jh]==null||Bn.isConstant(this[jh])}[(hk=jh,Gf)](){return this[jh]!=null?Bn.evaluate(this[jh]):ac}}const fk=Symbol("operator"),bC=Symbol("left"),wC=Symbol("right");class pk extends Bn{constructor(e,t,i){super(),this[fk]=e,this[bC]=t,this[wC]=i}get isConstant(){return Bn.isConstant(this[bC])&&Bn.isConstant(this[wC])}[Gf](){const e=Go(Bn.evaluate(this[bC])),t=Go(Bn.evaluate(this[wC])),{number:i,unit:s}=e,{number:r,unit:o}=t;if(o!=null&&s!=null&&o!=s)return ac;const a=s||o;let l;switch(this[fk].value){case"+":l=i+r;break;case"-":l=i-r;break;case"/":l=i/r;break;case"*":l=i*r;break;default:return ac}return{type:"number",number:l,unit:a}}}const EC=Symbol("evaluatables"),mk=Symbol("intrinsics");class Nz extends Bn{constructor(e,t){super(),this[mk]=t;const i=e[0],s=i!=null?i.terms:[];this[EC]=t.basis.map((r,o)=>{const a=s[o];return a==null?{type:"ident",value:"auto"}:a.type==="ident"?a:Bn.evaluatableFor(a,r)})}get isConstant(){for(const e of this[EC])if(!Bn.isConstant(e))return!1;return!0}[Gf](){const e=this[EC].map(t=>Bn.evaluate(t));return Bn.applyIntrinsics(e,this[mk]).map(t=>t.number)}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oz,Uz,Gz,zz;const Wh=Symbol("instances"),gk=Symbol("activateListener"),Ak=Symbol("deactivateListener"),_C=Symbol("notifyInstances"),yk=Symbol("notify"),vk=Symbol("callback");class ko{static[_C](){for(const e of ko[Wh])e[yk]()}static[(Oz=Wh,gk)](){window.addEventListener("scroll",this[_C],{passive:!0})}static[Ak](){window.removeEventListener("scroll",this[_C])}constructor(e){this[vk]=e}observe(){ko[Wh].size===0&&ko[gk](),ko[Wh].add(this)}disconnect(){ko[Wh].delete(this),ko[Wh].size===0&&ko[Ak]()}[yk](){this[vk]()}}ko[Oz]=new Set;const xk=Symbol("computeStyleCallback"),Qz=Symbol("astWalker"),om=Symbol("dependencies"),Hz=Symbol("onScroll");class zae{constructor(e){this[Uz]={},this[Gz]=new Fae(["function"]),this[zz]=()=>{this[xk]({relatedState:"window-scroll"})},this[xk]=e}observeEffectsFor(e){const t={},i=this[om];this[Qz].walk(e,s=>{const{name:r}=s,a=s.arguments[0].terms[0];if(!(r.value!=="env"||a==null||a.type!=="ident"))switch(a.value){case"window-scroll-y":if(t["window-scroll"]==null){const l="window-scroll"in i?i["window-scroll"]:new ko(this[Hz]);l.observe(),delete i["window-scroll"],t["window-scroll"]=l}break}});for(const s in i)i[s].disconnect();this[om]=t}dispose(){for(const e in this[om])this[om][e].disconnect()}}Uz=om,Gz=Qz,zz=Hz;/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bl=n=>{const e=n.observeEffects||!1,t=n.intrinsics instanceof Function?n.intrinsics:()=>n.intrinsics;return(i,s)=>{const r=i.updated,o=i.connectedCallback,a=i.disconnectedCallback,l=Symbol(`${s}StyleEffector`),c=Symbol(`${s}StyleEvaluator`),u=Symbol(`${s}UpdateEvaluator`),h=Symbol(`${s}EvaluateAndSync`);Object.defineProperties(i,{[l]:{value:null,writable:!0},[c]:{value:null,writable:!0},[u]:{value:function(){const p=Pa(this[s]);this[c]=new Nz(p,t(this)),this[l]==null&&e&&(this[l]=new zae(()=>this[h]())),this[l]!=null&&this[l].observeEffectsFor(p)}},[h]:{value:function(){if(this[c]==null)return;const p=this[c].evaluate();this[n.updateHandler](p)}},updated:{value:function(p){p.has(s)&&(this[u](),this[h]()),r.call(this,p)}},connectedCallback:{value:function(){o.call(this),this.requestUpdate(s,this[s])}},disconnectedCallback:{value:function(){a.call(this),this[l]!=null&&(this[l].dispose(),this[l]=null)}}})}};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vz=n=>n<.5?2*n*n:-1+(4-2*n)*n,Qae=(n,e,t=Vz)=>i=>n+(e-n)*t(i),Hae=(n,e)=>{const t=s=>r=>s+=r,i=e.map(t(0));return s=>{s=Oo(s,0,1),s*=i[i.length-1];const r=i.findIndex(l=>l>=s),o=r<1?0:i[r-1],a=i[r];return n[r]((s-o)/(a-o))}},Rd=n=>{const e=[],t=[];let i=n.initialValue;for(let s=0;s<n.keyframes.length;++s){const r=n.keyframes[s],{value:o,frames:a}=r,l=r.ease||Vz,c=Qae(i,o,l);e.push(c),t.push(a),i=o}return Hae(e,t)};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oi=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const Vae=5e3,jae=Rd({initialValue:0,keyframes:[{frames:5,value:-1},{frames:1,value:-1},{frames:8,value:1},{frames:1,value:1},{frames:5,value:0},{frames:18,value:0}]}),Wae=Rd({initialValue:0,keyframes:[{frames:1,value:1},{frames:5,value:1},{frames:1,value:0},{frames:6,value:0}]}),qae=30,Jae=12,jz="0deg 75deg 105%",Xae="auto auto auto",Kae="auto",$ae=2.2,Yae=["front","right","back","left"],Zae=["upper-","","lower-"],ele=3e3,tle=". Use mouse, touch or arrow keys to move.",vy={AUTO:"auto",NONE:"none"},CC={BASIC:"basic",WIGGLE:"wiggle"},nle={PAN_Y:"pan-y",PAN_X:"pan-x",NONE:"none"},bk=()=>({basis:[zb(os(qae,"deg"))],keywords:{auto:[null]}}),ile=()=>({basis:[zb(os(Jae,"deg"))],keywords:{auto:[null]}}),Wz=(()=>{const n=Pa(jz)[0].terms,e=Go(n[0]),t=Go(n[1]);return i=>{const s=i[Ee].idealCameraDistance();return{basis:[e,t,os(s,"m")],keywords:{auto:[null,null,os(105,"%")]}}}})(),sle=n=>{const e=$ae*n[Ee].boundingSphere.radius;return{basis:[os(-1/0,"rad"),os(0,"rad"),os(e,"m")],keywords:{auto:[null,null,null]}}},rle=n=>{const e=Wz(n),i=new Nz([],e).evaluate()[2];return{basis:[os(1/0,"rad"),os(Math.PI,"rad"),os(i,"m")],keywords:{auto:[null,null,null]}}},ole=n=>{const e=n[Ee].boundingBox.getCenter(new O);return{basis:[os(e.x,"m"),os(e.y,"m"),os(e.z,"m")],keywords:{auto:[null,null,null]}}},qz=Math.PI/2,ale=Math.PI/3,lle=qz/2,cle=2*Math.PI,cn=Symbol("controls"),cv=Symbol("panElement"),SC=Symbol("promptElement"),xy=Symbol("promptAnimatedContainer"),MC=Symbol("fingerAnimatedContainers"),by=Symbol("deferInteractionPrompt"),wk=Symbol("updateAria"),ma=Symbol("a11y"),Ek=Symbol("updateA11y"),_k=Symbol("updateCameraForRadius"),qh=Symbol("cancelPrompts"),IC=Symbol("onChange"),kp=Symbol("onPointerChange"),Jc=Symbol("waitingToPromptUser"),wy=Symbol("userHasInteracted"),Jh=Symbol("promptElementVisibleTime"),Fp=Symbol("lastPromptOffset"),Ey=Symbol("cancellationSource"),TC=Symbol("lastSpherical"),Np=Symbol("jumpCamera"),BC=Symbol("initialized"),Op=Symbol("maintainThetaPhi"),Ck=Symbol("syncCameraOrbit"),Sk=Symbol("syncFieldOfView"),Mk=Symbol("syncCameraTarget"),Ik=Symbol("syncMinCameraOrbit"),Tk=Symbol("syncMaxCameraOrbit"),Bk=Symbol("syncMinFieldOfView"),Rk=Symbol("syncMaxFieldOfView"),ule=n=>{var e,t,i,s,r,o,a,l,c,u,h,p,m,g,v,y,A,b;class w extends n{constructor(){super(...arguments),this.cameraControls=!1,this.cameraOrbit=jz,this.cameraTarget=Xae,this.fieldOfView=Kae,this.minCameraOrbit="auto",this.maxCameraOrbit="auto",this.minFieldOfView="auto",this.maxFieldOfView="auto",this.interactionPromptThreshold=ele,this.interactionPrompt=vy.AUTO,this.interactionPromptStyle=CC.WIGGLE,this.orbitSensitivity=1,this.zoomSensitivity=1,this.panSensitivity=1,this.touchAction=nle.NONE,this.disableZoom=!1,this.disablePan=!1,this.disableTap=!1,this.interpolationDecay=Pz,this.a11y=null,this[e]=this.shadowRoot.querySelector(".interaction-prompt"),this[t]=this.shadowRoot.querySelector("#prompt"),this[i]=[this.shadowRoot.querySelector("#finger0"),this.shadowRoot.querySelector("#finger1")],this[s]=this.shadowRoot.querySelector(".pan-target"),this[r]=0,this[o]=1/0,this[a]=!1,this[l]=!1,this[c]=Pn.AUTOMATIC,this[u]=new ple(this[Ee].camera,this[ro],this[Ee]),this[h]=new Cm,this[p]=!1,this[m]=!1,this[g]=!1,this[v]={},this[y]=()=>{const M=this[cn].changeSource;this[Ey]=M,M===Pn.USER_INTERACTION&&(this[wy]=!0,this[by]())},this[A]=()=>{this[wk](),this[Ri]();const M=this[cn].changeSource;this.dispatchEvent(new CustomEvent("camera-change",{detail:{source:M}}))},this[b]=M=>{this[dv].classList.toggle("pointer-tumbling",M.type==="pointer-change-start")}}get inputSensitivity(){return this[cn].inputSensitivity}set inputSensitivity(M){this[cn].inputSensitivity=M}getCameraOrbit(){const{theta:M,phi:I,radius:D}=this[TC];return{theta:M,phi:I,radius:D,toString(){return`${this.theta}rad ${this.phi}rad ${this.radius}m`}}}getCameraTarget(){return Dl(this[hn].isPresenting?this[hn].arRenderer.target:this[Ee].getDynamicTarget())}getFieldOfView(){return this[cn].getFieldOfView()}getMinimumFieldOfView(){return this[cn].options.minimumFieldOfView}getMaximumFieldOfView(){return this[cn].options.maximumFieldOfView}getIdealAspect(){return this[Ee].idealAspect}jumpCameraToGoal(){this[Np]=!0,this.requestUpdate(Np,!1)}resetInteractionPrompt(){this[Fp]=0,this[Jh]=1/0,this[wy]=!1,this[Jc]=this.interactionPrompt===vy.AUTO&&this.cameraControls}zoom(M){const I=new WheelEvent("wheel",{deltaY:-30*M});this[ro].dispatchEvent(I)}connectedCallback(){super.connectedCallback(),this[cn].addEventListener("user-interaction",this[qh]),this[cn].addEventListener("pointer-change-start",this[kp]),this[cn].addEventListener("pointer-change-end",this[kp])}disconnectedCallback(){super.disconnectedCallback(),this[cn].removeEventListener("user-interaction",this[qh]),this[cn].removeEventListener("pointer-change-start",this[kp]),this[cn].removeEventListener("pointer-change-end",this[kp])}updated(M){super.updated(M);const I=this[cn],D=this[Ee];if(M.has("cameraControls")&&(this.cameraControls?(I.enableInteraction(),this.interactionPrompt===vy.AUTO&&(this[Jc]=!0)):(I.disableInteraction(),this[by]()),this[ro].setAttribute("aria-label",this[Pd])),M.has("disableZoom")&&(I.disableZoom=this.disableZoom),M.has("disablePan")&&(I.enablePan=!this.disablePan),M.has("disableTap")&&(I.enableTap=!this.disableTap),(M.has("interactionPrompt")||M.has("cameraControls")||M.has("src"))&&(this.interactionPrompt===vy.AUTO&&this.cameraControls&&!this[wy]?this[Jc]=!0:this[by]()),M.has("interactionPromptStyle")&&(this[xy].style.opacity=this.interactionPromptStyle==CC.BASIC?"1":"0"),M.has("touchAction")){const B=this.touchAction;I.applyOptions({touchAction:B}),I.updateTouchActionStyle()}M.has("orbitSensitivity")&&(I.orbitSensitivity=this.orbitSensitivity),M.has("zoomSensitivity")&&(I.zoomSensitivity=this.zoomSensitivity),M.has("panSensitivity")&&(I.panSensitivity=this.panSensitivity),M.has("interpolationDecay")&&(I.setDamperDecayTime(this.interpolationDecay),D.setTargetDamperDecayTime(this.interpolationDecay)),M.has("a11y")&&this[Ek](),this[Np]===!0&&Promise.resolve().then(()=>{I.jumpToGoal(),D.jumpToGoal(),this[IC](),this[Np]=!1})}async updateFraming(){const M=this[Ee],I=M.adjustedFoV(M.framedFoVDeg);await M.updateFraming();const D=M.adjustedFoV(M.framedFoVDeg),B=this[cn].getFieldOfView()/I;this[cn].setFieldOfView(D*B),this[Op]=!0,this.requestUpdate("maxFieldOfView"),this.requestUpdate("fieldOfView"),this.requestUpdate("minCameraOrbit"),this.requestUpdate("maxCameraOrbit"),this.requestUpdate("cameraOrbit"),await this.updateComplete}interact(M,I,D){const B=this[ro],R=this[MC];if(R[0].style.opacity==="1"){console.warn("interact() failed because an existing interaction is running.");return}const T=new Array;T.push({x:Rd(I.x),y:Rd(I.y)});const k=[{x:T[0].x(0),y:T[0].y(0)}];D!=null&&(T.push({x:Rd(D.x),y:Rd(D.y)}),k.push({x:T[1].x(0),y:T[1].y(0)}));let H=performance.now();const{width:Q,height:W}=this[Ee],X=this.getBoundingClientRect(),J=V=>{for(const[j,$]of k.entries()){const{style:le}=R[j];le.transform=`translateX(${Q*$.x}px) translateY(${W*$.y}px)`,V==="pointerdown"?le.opacity="1":V==="pointerup"&&(le.opacity="0");const ve={pointerId:j-5678,pointerType:"touch",target:B,clientX:Q*$.x+X.x,clientY:W*$.y+X.y,altKey:!0};B.dispatchEvent(new PointerEvent(V,ve))}},K=()=>{const V=this[Ey];if(V!==Pn.AUTOMATIC||!B.isConnected){for(const $ of this[MC])$.style.opacity="0";J("pointercancel"),this.dispatchEvent(new CustomEvent("interact-stopped",{detail:{source:V}})),document.removeEventListener("visibilitychange",L);return}const j=Math.min(1,(performance.now()-H)/M);for(const[$,le]of k.entries())le.x=T[$].x(j),le.y=T[$].y(j);J("pointermove"),j<1?requestAnimationFrame(K):(J("pointerup"),this.dispatchEvent(new CustomEvent("interact-stopped",{detail:{source:Pn.AUTOMATIC}})),document.removeEventListener("visibilitychange",L))},L=()=>{let V=0;document.visibilityState==="hidden"?V=performance.now()-H:H=performance.now()-V};document.addEventListener("visibilitychange",L),J("pointerdown"),this[Ey]=Pn.AUTOMATIC,requestAnimationFrame(K)}[(e=SC,t=xy,i=MC,s=cv,r=Fp,o=Jh,a=wy,l=Jc,c=Ey,u=cn,h=TC,p=Np,m=BC,g=Op,v=ma,Sk)](M){const I=this[cn],D=this[Ee];D.framedFoVDeg=M[0]*180/Math.PI,I.changeSource=Pn.NONE,I.setFieldOfView(D.adjustedFoV(D.framedFoVDeg)),this[qh]()}[Ck](M){const I=this[cn];if(this[Op]){const{theta:D,phi:B}=this.getCameraOrbit();M[0]=D,M[1]=B,this[Op]=!1}I.changeSource=Pn.NONE,I.setOrbit(M[0],M[1],M[2]),this[qh]()}[Ik](M){this[cn].applyOptions({minimumAzimuthalAngle:M[0],minimumPolarAngle:M[1],minimumRadius:M[2]}),this.jumpCameraToGoal()}[Tk](M){this[cn].applyOptions({maximumAzimuthalAngle:M[0],maximumPolarAngle:M[1],maximumRadius:M[2]}),this[_k](M[2]),this.jumpCameraToGoal()}[Bk](M){this[cn].applyOptions({minimumFieldOfView:M[0]*180/Math.PI}),this.jumpCameraToGoal()}[Rk](M){const I=this[Ee].adjustedFoV(M[0]*180/Math.PI);this[cn].applyOptions({maximumFieldOfView:I}),this.jumpCameraToGoal()}[Mk](M){const[I,D,B]=M;this[hn].arRenderer.isPresenting||this[Ee].setTarget(I,D,B),this[cn].changeSource=Pn.NONE,this[hn].arRenderer.updateTarget(),this[qh]()}[Jo](M,I){if(super[Jo](M,I),this[hn].isPresenting||!this[Ku]())return;const D=this[cn],B=this[Ee],R=performance.now();if(this[Jc]&&this.loaded&&R>this[cm]+this.interactionPromptThreshold&&(this[Jc]=!1,this[Jh]=R,this[SC].classList.add("visible")),isFinite(this[Jh])&&this.interactionPromptStyle===CC.WIGGLE){const H=(R-this[Jh])/Vae%1,Q=jae(H),W=Wae(H);if(this[xy].style.opacity=`${W}`,Q!==this[Fp]){const X=Q*B.width*.05,J=(Q-this[Fp])*Math.PI/16;this[xy].style.transform=`translateX(${X}px)`,D.changeSource=Pn.AUTOMATIC,D.adjustOrbit(J,0,0),this[Fp]=Q}}const T=D.update(M,I),k=B.updateTarget(I);(T||k)&&this[IC]()}[by](){this[Jc]=!1,this[SC].classList.remove("visible"),this[Jh]=1/0}[_k](M){const I=Math.max(this[Ee].farRadius(),M),D=0,B=Math.abs(2*I);this[cn].updateNearFar(D,B)}[wk](){const{theta:M,phi:I}=this[cn].getCameraSpherical(this[TC]),D=(4+Math.floor((M%cle+lle)/qz))%4,B=Math.floor(I/ale),R=Yae[D],k=`${Zae[B]}${R}`,H=k;H in this[ma]?this[Bx](this[ma][H]):this[Bx](`View from stage ${k}`)}get[Pd](){let M=tle;return"interaction-prompt"in this[ma]&&(M=`. ${this[ma]["interaction-prompt"]}`),super[Pd].replace(/\.$/,"")+(this.cameraControls?M:"")}async[Rx](M){const I=this[cn],D=this[Ee],B=D.adjustedFoV(D.framedFoVDeg);super[Rx](M);const R=D.adjustedFoV(D.framedFoVDeg)/B,T=I.getFieldOfView()*(isFinite(R)?R:1);I.updateAspect(this[Ee].aspect),this.requestUpdate("maxFieldOfView",this.maxFieldOfView),await this.updateComplete,this[cn].setFieldOfView(T),this.jumpCameraToGoal()}[Xo](){super[Xo](),this[BC]?this[Op]=!0:this[BC]=!0,this.requestUpdate("maxFieldOfView",this.maxFieldOfView),this.requestUpdate("fieldOfView",this.fieldOfView),this.requestUpdate("minCameraOrbit",this.minCameraOrbit),this.requestUpdate("maxCameraOrbit",this.maxCameraOrbit),this.requestUpdate("cameraOrbit",this.cameraOrbit),this.requestUpdate("cameraTarget",this.cameraTarget),this.jumpCameraToGoal()}[(y=qh,A=IC,b=kp,Ek)](){if(typeof this.a11y=="string")if(this.a11y.startsWith("{"))try{this[ma]=JSON.parse(this.a11y)}catch(M){console.warn("Error parsing a11y JSON:",M)}else this.a11y.length>0?console.warn("Error not supported format, should be a JSON string:",this.a11y):this[ma]={};else typeof this.a11y=="object"&&this.a11y!=null?this[ma]=Object.assign({},this.a11y):this[ma]={};this[ro].setAttribute("aria-label",this[Pd])}}return oi([At({type:Boolean,attribute:"camera-controls"})],w.prototype,"cameraControls",void 0),oi([bl({intrinsics:Wz,observeEffects:!0,updateHandler:Ck}),At({type:String,attribute:"camera-orbit",hasChanged:()=>!0})],w.prototype,"cameraOrbit",void 0),oi([bl({intrinsics:ole,observeEffects:!0,updateHandler:Mk}),At({type:String,attribute:"camera-target",hasChanged:()=>!0})],w.prototype,"cameraTarget",void 0),oi([bl({intrinsics:bk,observeEffects:!0,updateHandler:Sk}),At({type:String,attribute:"field-of-view",hasChanged:()=>!0})],w.prototype,"fieldOfView",void 0),oi([bl({intrinsics:sle,updateHandler:Ik}),At({type:String,attribute:"min-camera-orbit",hasChanged:()=>!0})],w.prototype,"minCameraOrbit",void 0),oi([bl({intrinsics:rle,updateHandler:Tk}),At({type:String,attribute:"max-camera-orbit",hasChanged:()=>!0})],w.prototype,"maxCameraOrbit",void 0),oi([bl({intrinsics:ile,updateHandler:Bk}),At({type:String,attribute:"min-field-of-view",hasChanged:()=>!0})],w.prototype,"minFieldOfView",void 0),oi([bl({intrinsics:bk,updateHandler:Rk}),At({type:String,attribute:"max-field-of-view",hasChanged:()=>!0})],w.prototype,"maxFieldOfView",void 0),oi([At({type:Number,attribute:"interaction-prompt-threshold"})],w.prototype,"interactionPromptThreshold",void 0),oi([At({type:String,attribute:"interaction-prompt"})],w.prototype,"interactionPrompt",void 0),oi([At({type:String,attribute:"interaction-prompt-style"})],w.prototype,"interactionPromptStyle",void 0),oi([At({type:Number,attribute:"orbit-sensitivity"})],w.prototype,"orbitSensitivity",void 0),oi([At({type:Number,attribute:"zoom-sensitivity"})],w.prototype,"zoomSensitivity",void 0),oi([At({type:Number,attribute:"pan-sensitivity"})],w.prototype,"panSensitivity",void 0),oi([At({type:String,attribute:"touch-action"})],w.prototype,"touchAction",void 0),oi([At({type:Boolean,attribute:"disable-zoom"})],w.prototype,"disableZoom",void 0),oi([At({type:Boolean,attribute:"disable-pan"})],w.prototype,"disablePan",void 0),oi([At({type:Boolean,attribute:"disable-tap"})],w.prototype,"disableTap",void 0),oi([At({type:Number,attribute:"interpolation-decay"})],w.prototype,"interpolationDecay",void 0),oi([At()],w.prototype,"a11y",void 0),w};/* @license
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hle=.018,Dk=2,dle=300,fle=new me,Pk=new O,Lk=Object.freeze({minimumRadius:0,maximumRadius:1/0,minimumPolarAngle:0,maximumPolarAngle:Math.PI,minimumAzimuthalAngle:-1/0,maximumAzimuthalAngle:1/0,minimumFieldOfView:10,maximumFieldOfView:45,touchAction:"none"}),_y=Math.PI/8,Cy=.04,Sy=10,Pn={USER_INTERACTION:"user-interaction",NONE:"none",AUTOMATIC:"automatic"};class ple extends js{constructor(e,t,i){super(),this.camera=e,this.element=t,this.scene=i,this.orbitSensitivity=1,this.zoomSensitivity=1,this.panSensitivity=1,this.inputSensitivity=1,this.changeSource=Pn.NONE,this._interactionEnabled=!1,this._disableZoom=!1,this.isUserPointing=!1,this.enablePan=!0,this.enableTap=!0,this.panProjection=new bt,this.panPerPixel=0,this.spherical=new Cm,this.goalSpherical=new Cm,this.thetaDamper=new bs,this.phiDamper=new bs,this.radiusDamper=new bs,this.logFov=Math.log(Lk.maximumFieldOfView),this.goalLogFov=this.logFov,this.fovDamper=new bs,this.touchMode=null,this.pointers=[],this.startTime=0,this.startPointerPosition={clientX:0,clientY:0},this.lastSeparation=0,this.touchDecided=!1,this.onContext=s=>{if(this.enablePan)s.preventDefault();else for(const r of this.pointers)this.onPointerUp(new PointerEvent("pointercancel",Object.assign(Object.assign({},this.startPointerPosition),{pointerId:r.id})))},this.touchModeZoom=(s,r)=>{if(!this._disableZoom){const o=this.twoTouchDistance(this.pointers[0],this.pointers[1]),a=Cy*this.zoomSensitivity*(this.lastSeparation-o)*50/this.scene.height;this.lastSeparation=o,this.userAdjustOrbit(0,0,a)}this.panPerPixel>0&&this.movePan(s,r)},this.disableScroll=s=>{s.preventDefault()},this.touchModeRotate=(s,r)=>{const{touchAction:o}=this._options;if(!this.touchDecided&&o!=="none"){this.touchDecided=!0;const a=Math.abs(s),l=Math.abs(r);if(this.changeSource===Pn.USER_INTERACTION&&(o==="pan-y"&&l>a||o==="pan-x"&&a>l)){this.touchMode=null;return}else this.element.addEventListener("touchmove",this.disableScroll,{passive:!1})}this.handleSinglePointerMove(s,r)},this.onPointerDown=s=>{if(this.pointers.length>2)return;const{element:r}=this;this.pointers.length===0&&(r.addEventListener("pointermove",this.onPointerMove),r.addEventListener("pointerup",this.onPointerUp),this.touchMode=null,this.touchDecided=!1,this.startPointerPosition.clientX=s.clientX,this.startPointerPosition.clientY=s.clientY,this.startTime=performance.now());try{r.setPointerCapture(s.pointerId)}catch{}this.pointers.push({clientX:s.clientX,clientY:s.clientY,id:s.pointerId}),this.isUserPointing=!1,s.pointerType==="touch"?(this.changeSource=s.altKey?Pn.AUTOMATIC:Pn.USER_INTERACTION,this.onTouchChange(s)):(this.changeSource=Pn.USER_INTERACTION,this.onMouseDown(s)),this.changeSource===Pn.USER_INTERACTION&&this.dispatchEvent({type:"user-interaction"})},this.onPointerMove=s=>{const r=this.pointers.find(c=>c.id===s.pointerId);if(r==null)return;if(s.pointerType==="mouse"&&s.buttons===0){this.onPointerUp(s);return}const o=this.pointers.length,a=(s.clientX-r.clientX)/o,l=(s.clientY-r.clientY)/o;a===0&&l===0||(r.clientX=s.clientX,r.clientY=s.clientY,s.pointerType==="touch"?(this.changeSource=s.altKey?Pn.AUTOMATIC:Pn.USER_INTERACTION,this.touchMode!==null&&this.touchMode(a,l)):(this.changeSource=Pn.USER_INTERACTION,this.panPerPixel>0?this.movePan(a,l):this.handleSinglePointerMove(a,l)))},this.onPointerUp=s=>{const{element:r}=this,o=this.pointers.findIndex(a=>a.id===s.pointerId);o!==-1&&this.pointers.splice(o,1),this.panPerPixel>0&&!s.altKey&&this.resetRadius(),this.pointers.length===0?(r.removeEventListener("pointermove",this.onPointerMove),r.removeEventListener("pointerup",this.onPointerUp),r.removeEventListener("touchmove",this.disableScroll),this.enablePan&&this.enableTap&&this.recenter(s)):this.touchMode!==null&&this.onTouchChange(s),this.scene.element[cv].style.opacity=0,r.style.cursor="grab",this.panPerPixel=0,this.isUserPointing&&this.dispatchEvent({type:"pointer-change-end"})},this.onWheel=s=>{this.changeSource=Pn.USER_INTERACTION;const r=s.deltaY*(s.deltaMode==1?18:1)*Cy*this.zoomSensitivity/30;this.userAdjustOrbit(0,0,r),s.preventDefault(),this.dispatchEvent({type:"user-interaction"})},this.onKeyDown=s=>{const{changeSource:r}=this;this.changeSource=Pn.USER_INTERACTION,(s.shiftKey&&this.enablePan?this.panKeyCodeHandler(s):this.orbitZoomKeyCodeHandler(s))?(s.preventDefault(),this.dispatchEvent({type:"user-interaction"})):this.changeSource=r},this._options=Object.assign({},Lk),this.setOrbit(0,Math.PI/2,1),this.setFieldOfView(100),this.jumpToGoal()}get interactionEnabled(){return this._interactionEnabled}enableInteraction(){if(this._interactionEnabled===!1){const{element:e}=this;e.addEventListener("pointerdown",this.onPointerDown),e.addEventListener("pointercancel",this.onPointerUp),this._disableZoom||e.addEventListener("wheel",this.onWheel),e.addEventListener("keydown",this.onKeyDown),e.addEventListener("touchmove",()=>{},{passive:!1}),e.addEventListener("contextmenu",this.onContext),this.element.style.cursor="grab",this._interactionEnabled=!0,this.updateTouchActionStyle()}}disableInteraction(){if(this._interactionEnabled===!0){const{element:e}=this;e.removeEventListener("pointerdown",this.onPointerDown),e.removeEventListener("pointermove",this.onPointerMove),e.removeEventListener("pointerup",this.onPointerUp),e.removeEventListener("pointercancel",this.onPointerUp),e.removeEventListener("wheel",this.onWheel),e.removeEventListener("keydown",this.onKeyDown),e.removeEventListener("contextmenu",this.onContext),e.style.cursor="",this.touchMode=null,this._interactionEnabled=!1,this.updateTouchActionStyle()}}get options(){return this._options}set disableZoom(e){this._disableZoom!=e&&(this._disableZoom=e,e===!0?this.element.removeEventListener("wheel",this.onWheel):this.element.addEventListener("wheel",this.onWheel),this.updateTouchActionStyle())}getCameraSpherical(e=new Cm){return e.copy(this.spherical)}getFieldOfView(){return this.camera.fov}applyOptions(e){Object.assign(this._options,e),this.setOrbit(),this.setFieldOfView(Math.exp(this.goalLogFov))}updateNearFar(e,t){this.camera.far=t===0?2:t,this.camera.near=Math.max(e,this.camera.far/1e3),this.camera.updateProjectionMatrix()}updateAspect(e){this.camera.aspect=e,this.camera.updateProjectionMatrix()}setOrbit(e=this.goalSpherical.theta,t=this.goalSpherical.phi,i=this.goalSpherical.radius){const{minimumAzimuthalAngle:s,maximumAzimuthalAngle:r,minimumPolarAngle:o,maximumPolarAngle:a,minimumRadius:l,maximumRadius:c}=this._options,{theta:u,phi:h,radius:p}=this.goalSpherical,m=Oo(e,s,r);!isFinite(s)&&!isFinite(r)&&(this.spherical.theta=this.wrapAngle(this.spherical.theta-m)+m);const g=Oo(t,o,a),v=Oo(i,l,c);return m===u&&g===h&&v===p||!isFinite(m)||!isFinite(g)||!isFinite(v)?!1:(this.goalSpherical.theta=m,this.goalSpherical.phi=g,this.goalSpherical.radius=v,this.goalSpherical.makeSafe(),!0)}setRadius(e){this.goalSpherical.radius=e,this.setOrbit()}setFieldOfView(e){const{minimumFieldOfView:t,maximumFieldOfView:i}=this._options;e=Oo(e,t,i),this.goalLogFov=Math.log(e)}setDamperDecayTime(e){this.thetaDamper.setDecayTime(e),this.phiDamper.setDecayTime(e),this.radiusDamper.setDecayTime(e),this.fovDamper.setDecayTime(e)}adjustOrbit(e,t,i){const{theta:s,phi:r,radius:o}=this.goalSpherical,{minimumRadius:a,maximumRadius:l,minimumFieldOfView:c,maximumFieldOfView:u}=this._options,h=this.spherical.theta-s,p=Math.PI-.001,m=s-Oo(e,-p-h,p-h),g=r-t,v=i===0?0:((i>0?l:a)-o)/(Math.log(i>0?u:c)-this.goalLogFov),y=o+i*(isFinite(v)?v:(l-a)*2);if(this.setOrbit(m,g,y),i!==0){const A=this.goalLogFov+i;this.setFieldOfView(Math.exp(A))}}jumpToGoal(){this.update(0,Dz)}update(e,t){if(this.isStationary())return!1;const{maximumPolarAngle:i,maximumRadius:s}=this._options,r=this.spherical.theta-this.goalSpherical.theta;return Math.abs(r)>Math.PI&&!isFinite(this._options.minimumAzimuthalAngle)&&!isFinite(this._options.maximumAzimuthalAngle)&&(this.spherical.theta-=Math.sign(r)*2*Math.PI),this.spherical.theta=this.thetaDamper.update(this.spherical.theta,this.goalSpherical.theta,t,Math.PI),this.spherical.phi=this.phiDamper.update(this.spherical.phi,this.goalSpherical.phi,t,i),this.spherical.radius=this.radiusDamper.update(this.spherical.radius,this.goalSpherical.radius,t,s),this.logFov=this.fovDamper.update(this.logFov,this.goalLogFov,t,1),this.moveCamera(),!0}updateTouchActionStyle(){const{style:e}=this.element;if(this._interactionEnabled){const{touchAction:t}=this._options;this._disableZoom&&t!=="none"?e.touchAction="manipulation":e.touchAction=t}else e.touchAction=""}isStationary(){return this.goalSpherical.theta===this.spherical.theta&&this.goalSpherical.phi===this.spherical.phi&&this.goalSpherical.radius===this.spherical.radius&&this.goalLogFov===this.logFov}moveCamera(){this.spherical.makeSafe(),this.camera.position.setFromSpherical(this.spherical),this.camera.setRotationFromEuler(new Ss(this.spherical.phi-Math.PI/2,this.spherical.theta,0,"YXZ")),this.camera.fov!==Math.exp(this.logFov)&&(this.camera.fov=Math.exp(this.logFov),this.camera.updateProjectionMatrix())}userAdjustOrbit(e,t,i){this.adjustOrbit(e*this.orbitSensitivity*this.inputSensitivity,t*this.orbitSensitivity*this.inputSensitivity,i*this.inputSensitivity)}wrapAngle(e){const t=(e+Math.PI)/(2*Math.PI);return(t-Math.floor(t))*2*Math.PI-Math.PI}pixelLengthToSphericalAngle(e){return 2*Math.PI*e/this.scene.height}twoTouchDistance(e,t){const{clientX:i,clientY:s}=e,{clientX:r,clientY:o}=t,a=r-i,l=o-s;return Math.sqrt(a*a+l*l)}handleSinglePointerMove(e,t){const i=this.pixelLengthToSphericalAngle(e),s=this.pixelLengthToSphericalAngle(t);this.isUserPointing===!1&&(this.isUserPointing=!0,this.dispatchEvent({type:"pointer-change-start"})),this.userAdjustOrbit(i,s,0)}initializePan(){const{theta:e,phi:t}=this.spherical,i=e-this.scene.yaw;this.panPerPixel=hle*this.panSensitivity/this.scene.height,this.panProjection.set(-Math.cos(i),-Math.cos(t)*Math.sin(i),0,0,Math.sin(t),0,Math.sin(i),-Math.cos(t)*Math.cos(i),0)}movePan(e,t){const{scene:i}=this,s=Pk.set(e,t,0).multiplyScalar(this.inputSensitivity),r=this.spherical.radius*Math.exp(this.logFov)*this.panPerPixel;s.multiplyScalar(r);const o=i.getTarget();o.add(s.applyMatrix3(this.panProjection)),i.boundingSphere.clampPoint(o,o),i.setTarget(o.x,o.y,o.z)}recenter(e){if(performance.now()>this.startTime+dle||Math.abs(e.clientX-this.startPointerPosition.clientX)>Dk||Math.abs(e.clientY-this.startPointerPosition.clientY)>Dk)return;const{scene:t}=this,i=t.positionAndNormalFromPoint(t.getNDC(e.clientX,e.clientY));if(i==null){const{cameraTarget:s}=t.element;t.element.cameraTarget="",t.element.cameraTarget=s,this.userAdjustOrbit(0,0,1)}else t.target.worldToLocal(i.position),t.setTarget(i.position.x,i.position.y,i.position.z)}resetRadius(){const{scene:e}=this,t=e.positionAndNormalFromPoint(fle.set(0,0));if(t==null)return;e.target.worldToLocal(t.position);const i=e.getTarget(),{theta:s,phi:r}=this.spherical,o=s-e.yaw,a=Pk.set(Math.sin(r)*Math.sin(o),Math.cos(r),Math.sin(r)*Math.cos(o)),l=a.dot(t.position.sub(i));i.add(a.multiplyScalar(l)),e.setTarget(i.x,i.y,i.z),this.setOrbit(void 0,void 0,this.goalSpherical.radius-l)}onTouchChange(e){if(this.pointers.length===1)this.touchMode=this.touchModeRotate;else{if(this._disableZoom){this.touchMode=null,this.element.removeEventListener("touchmove",this.disableScroll);return}this.touchMode=this.touchDecided&&this.touchMode===null?null:this.touchModeZoom,this.touchDecided=!0,this.element.addEventListener("touchmove",this.disableScroll,{passive:!1}),this.lastSeparation=this.twoTouchDistance(this.pointers[0],this.pointers[1]),this.enablePan&&this.touchMode!=null&&(this.initializePan(),e.altKey||(this.scene.element[cv].style.opacity=1))}}onMouseDown(e){this.panPerPixel=0,this.enablePan&&(e.button===2||e.ctrlKey||e.metaKey||e.shiftKey)&&(this.initializePan(),this.scene.element[cv].style.opacity=1),this.element.style.cursor="grabbing"}orbitZoomKeyCodeHandler(e){let t=!0;switch(e.key){case"PageUp":this.userAdjustOrbit(0,0,Cy*this.zoomSensitivity);break;case"PageDown":this.userAdjustOrbit(0,0,-1*Cy*this.zoomSensitivity);break;case"ArrowUp":this.userAdjustOrbit(0,-_y,0);break;case"ArrowDown":this.userAdjustOrbit(0,_y,0);break;case"ArrowLeft":this.userAdjustOrbit(-_y,0,0);break;case"ArrowRight":this.userAdjustOrbit(_y,0,0);break;default:t=!1;break}return t}panKeyCodeHandler(e){this.initializePan();let t=!0;switch(e.key){case"ArrowUp":this.movePan(0,-1*Sy);break;case"ArrowDown":this.movePan(0,Sy);break;case"ArrowLeft":this.movePan(-1*Sy,0);break;case"ArrowRight":this.movePan(Sy,0);break;default:t=!1;break}return t}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mle=30,kk=.8,Fk=1.5,gle=20,Ale=.2,yle=.25,vle=10,Xh=150,Nk=5,xle=.1,Rl={NOT_PRESENTING:"not-presenting",SESSION_STARTED:"session-started",OBJECT_PLACED:"object-placed",FAILED:"failed"},Y1={TRACKING:"tracking",NOT_TRACKING:"not-tracking"},Up=new O,Kh=new qn,ble=new tt,wle=new O,Ele=new Fn(45,1,.1,100),Ok=new xt().setFromPoints([new O(0,0,0),new O(0,0,-1)]),_le=new vo;class Cle extends js{constructor(e){super(),this.renderer=e,this.currentSession=null,this.placeOnWall=!1,this.placementBox=null,this.lastTick=null,this.turntableRotation=null,this.oldShadowIntensity=null,this.frame=null,this.initialHitSource=null,this.transientHitTestSource=null,this.inputSource=null,this._presentedScene=null,this.resolveCleanup=null,this.exitWebXRButtonContainer=null,this.overlay=null,this.xrLight=null,this.xrMode=null,this.controller1=null,this.controller2=null,this.selectedController=null,this.tracking=!0,this.frames=0,this.initialized=!1,this.oldTarget=new O,this.placementComplete=!1,this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!1,this.lastDragPosition=new O,this.relativeOrientation=new qn,this.scaleLine=new Gr(Ok),this.firstRatio=0,this.lastAngle=0,this.goalPosition=new O,this.goalYaw=0,this.goalScale=1,this.xDamper=new bs,this.yDamper=new bs,this.zDamper=new bs,this.yawDamper=new bs,this.pitchDamper=new bs,this.rollDamper=new bs,this.scaleDamper=new bs,this.onExitWebXRButtonContainerClick=()=>this.stopPresenting(),this.onControllerSelectStart=t=>{const i=this.presentedScene,s=t.target;if(this.placementBox.controllerIntersection(i,s)!=null)this.selectedController!=null&&(this.selectedController.userData.line.visible=!1,i.canScale&&(this.isTwoFingering=!0,this.firstRatio=this.controllerSeparation()/i.pivot.scale.x,this.scaleLine.visible=!0)),s.attach(i.pivot),this.selectedController=s,i.setShadowIntensity(.01);else{const r=s===this.controller1?this.controller2:this.controller1;this.relativeOrientation.copy(s.quaternion).invert().multiply(i.pivot.getWorldQuaternion(Kh)),r.userData.turning=!1,s.userData.turning=!0,s.userData.line.visible=!1}},this.onControllerSelectEnd=t=>{const i=t.target;if(i.userData.turning=!1,i.userData.line.visible=!0,this.isTwoFingering=!1,this.scaleLine.visible=!1,this.selectedController!=null&&this.selectedController!=i)return;const s=this.presentedScene;s.attach(s.pivot),this.selectedController=null,this.goalYaw=Math.atan2(s.pivot.matrix.elements[8],s.pivot.matrix.elements[10]),this.goalPosition.x=s.pivot.position.x,this.goalPosition.z=s.pivot.position.z},this.onUpdateScene=()=>{this.placementBox!=null&&this.isPresenting&&(this.placementBox.dispose(),this.placementBox=new ok(this.presentedScene,this.placeOnWall?"back":"bottom"))},this.onSelectStart=t=>{const i=this.transientHitTestSource;if(i==null)return;const s=this.frame.getHitTestResultsForTransientInput(i),r=this.presentedScene,o=this.placementBox;if(s.length===1){this.inputSource=t.inputSource;const{axes:a}=this.inputSource.gamepad,l=o.getHit(this.presentedScene,a[0],a[1]);o.show=!0,l!=null?(this.isTranslating=!0,this.lastDragPosition.copy(l)):this.placeOnWall===!1&&(this.isRotating=!0,this.lastAngle=a[0]*Fk)}else if(s.length===2){o.show=!0,this.isTwoFingering=!0;const{separation:a}=this.fingerPolar(s);this.firstRatio=a/r.pivot.scale.x}},this.onSelectEnd=()=>{this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!1,this.inputSource=null,this.goalPosition.y+=this.placementBox.offsetHeight*this.presentedScene.scale.x,this.placementBox.show=!1},this.threeRenderer=e.threeRenderer,this.threeRenderer.xr.enabled=!0}async resolveARSession(){ML();const e=await navigator.xr.requestSession("immersive-ar",{requiredFeatures:[],optionalFeatures:["hit-test","dom-overlay","light-estimation"],domOverlay:this.overlay?{root:this.overlay}:void 0});return this.threeRenderer.xr.setReferenceSpaceType("local"),await this.threeRenderer.xr.setSession(e),this.threeRenderer.xr.cameraAutoUpdate=!1,e}get presentedScene(){return this._presentedScene}async supportsPresentation(){try{return ML(),await navigator.xr.isSessionSupported("immersive-ar")}catch(e){return console.warn("Request to present in WebXR denied:"),console.warn(e),console.warn("Falling back to next ar-mode"),!1}}async present(e,t=!1){this.isPresenting&&console.warn("Cannot present while a model is already presenting");let i=new Promise((c,u)=>{requestAnimationFrame(()=>c())});e.setHotspotsVisibility(!1),e.queueRender(),await i,this._presentedScene=e,this.overlay=e.element.shadowRoot.querySelector("div.default"),t===!0&&(this.xrLight=new Tae(this.threeRenderer),this.xrLight.addEventListener("estimationstart",()=>{if(!this.isPresenting||this.xrLight==null)return;const c=this.presentedScene;c.add(this.xrLight),c.environment=this.xrLight.environment}));const s=await this.resolveARSession();s.addEventListener("end",()=>{this.postSessionCleanup()},{once:!0});const r=e.element.shadowRoot.querySelector(".slot.exit-webxr-ar-button");r.classList.add("enabled"),r.addEventListener("click",this.onExitWebXRButtonContainerClick),this.exitWebXRButtonContainer=r;const o=await s.requestReferenceSpace("viewer");this.xrMode=s.interactionMode,this.tracking=!0,this.frames=0,this.initialized=!1,this.turntableRotation=e.yaw,this.goalYaw=e.yaw,this.goalScale=1,e.setBackground(null),this.oldShadowIntensity=e.shadowIntensity,e.setShadowIntensity(.01),this.oldTarget.copy(e.getTarget()),e.element.addEventListener("load",this.onUpdateScene);const a=gle*Math.PI/180,l=this.placeOnWall===!0?void 0:new XRRay(new DOMPoint(0,0,0),{x:0,y:-Math.sin(a),z:-Math.cos(a)});s.requestHitTestSource({space:o,offsetRay:l}).then(c=>{this.initialHitSource=c}),this.xrMode!=="screen-space"&&(this.setupControllers(),this.xDamper.setDecayTime(Xh),this.yDamper.setDecayTime(Xh),this.zDamper.setDecayTime(Xh),this.yawDamper.setDecayTime(Xh),this.pitchDamper.setDecayTime(Xh),this.rollDamper.setDecayTime(Xh)),this.currentSession=s,this.placementBox=new ok(e,this.placeOnWall?"back":"bottom"),this.placementComplete=!1,this.lastTick=performance.now(),this.dispatchEvent({type:"status",status:Rl.SESSION_STARTED})}setupControllers(){this.controller1=this.threeRenderer.xr.getController(0),this.controller1.addEventListener("selectstart",this.onControllerSelectStart),this.controller1.addEventListener("selectend",this.onControllerSelectEnd),this.controller2=this.threeRenderer.xr.getController(1),this.controller2.addEventListener("selectstart",this.onControllerSelectStart),this.controller2.addEventListener("selectend",this.onControllerSelectEnd);const e=this.presentedScene;if(e.add(this.controller1),e.add(this.controller2),!this.controller1.userData.line){const t=new Gr(Ok);t.name="line",t.scale.z=Nk,this.controller1.userData.turning=!1,this.controller1.userData.line=t,this.controller1.add(t),this.controller2.userData.turning=!1;const i=t.clone();this.controller2.userData.line=i,this.controller2.add(i),this.scaleLine.name="scale line",this.scaleLine.visible=!1,this.controller1.add(this.scaleLine);const{size:s}=e,r=xle/Math.max(s.x,s.y,s.z),o=new Wt(_le);o.name="box",o.scale.copy(s).multiplyScalar(r),o.visible=!1,this.controller1.userData.box=o,e.add(o);const a=o.clone();this.controller2.userData.box=a,e.add(a)}}hover(e){if(this.xrMode==="screen-space"||this.selectedController==e)return!1;const t=this.presentedScene,i=this.placementBox.controllerIntersection(t,e);return e.userData.box.visible=(i==null||e.userData.turning)&&!this.isTwoFingering,e.userData.line.scale.z=i==null?Nk:i.distance,i!=null}controllerSeparation(){return this.controller1.position.distanceTo(this.controller2.position)}async stopPresenting(){if(!this.isPresenting)return;const e=new Promise(t=>{this.resolveCleanup=t});try{await this.currentSession.end(),await e}catch(t){console.warn("Error while trying to end WebXR AR session"),console.warn(t),this.postSessionCleanup()}}get isPresenting(){return this.presentedScene!=null}get target(){return this.oldTarget}updateTarget(){const e=this.presentedScene;if(e!=null){const t=e.getTarget();this.oldTarget.copy(t),this.placeOnWall?t.z=e.boundingBox.min.z:t.y=e.boundingBox.min.y,e.setTarget(t.x,t.y,t.z)}}postSessionCleanup(){const e=this.currentSession;e!=null&&(e.removeEventListener("selectstart",this.onSelectStart),e.removeEventListener("selectend",this.onSelectEnd),this.currentSession=null);const t=this.presentedScene;if(this._presentedScene=null,t!=null){const{element:o}=t;this.xrLight!=null&&(t.remove(this.xrLight),this.xrLight.dispose(),this.xrLight=null),t.add(t.pivot),t.pivot.quaternion.set(0,0,0,1),t.pivot.position.set(0,0,0),t.pivot.scale.set(1,1,1),t.setShadowOffset(0);const a=this.turntableRotation;a!=null&&(t.yaw=a);const l=this.oldShadowIntensity;l!=null&&t.setShadowIntensity(l),t.setEnvironmentAndSkybox(o[im],o[sm]);const c=this.oldTarget;t.setTarget(c.x,c.y,c.z),t.xrCamera=null,t.element.removeEventListener("load",this.onUpdateScene),t.orientHotspots(0);const{width:u,height:h}=o.getBoundingClientRect();t.setSize(u,h),requestAnimationFrame(()=>{t.element.dispatchEvent(new CustomEvent("camera-change",{detail:{source:Pn.NONE}}))})}this.renderer.height=0;const i=this.exitWebXRButtonContainer;i!=null&&(i.classList.remove("enabled"),i.removeEventListener("click",this.onExitWebXRButtonContainerClick),this.exitWebXRButtonContainer=null);const s=this.transientHitTestSource;s!=null&&(s.cancel(),this.transientHitTestSource=null);const r=this.initialHitSource;r!=null&&(r.cancel(),this.initialHitSource=null),this.placementBox!=null&&(this.placementBox.dispose(),this.placementBox=null),this.xrMode!=="screen-space"&&(this.controller1!=null&&(this.controller1.userData.turning=!1,this.controller1.userData.box.visible=!1,this.controller1.userData.line.visible=!0,this.controller1.removeEventListener("selectstart",this.onControllerSelectStart),this.controller1.removeEventListener("selectend",this.onControllerSelectEnd),this.controller1.removeFromParent(),this.controller1=null),this.controller2!=null&&(this.controller2.userData.turning=!1,this.controller2.userData.box.visible=!1,this.controller2.userData.line.visible=!0,this.controller2.removeEventListener("selectstart",this.onControllerSelectStart),this.controller2.removeEventListener("selectend",this.onControllerSelectEnd),this.controller2.removeFromParent(),this.controller2=null),this.selectedController=null,this.scaleLine.visible=!1),this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!1,this.lastTick=null,this.turntableRotation=null,this.oldShadowIntensity=null,this.frame=null,this.inputSource=null,this.overlay=null,this.resolveCleanup!=null&&this.resolveCleanup(),this.dispatchEvent({type:"status",status:Rl.NOT_PRESENTING})}updateView(e){const t=this.presentedScene,i=this.threeRenderer.xr;i.updateCamera(Ele),t.xrCamera=i.getCamera();const{elements:s}=t.getCamera().matrixWorld;if(t.orientHotspots(Math.atan2(s[1],s[5])),this.initialized||(this.placeInitially(),this.initialized=!0),e.requestViewportScale&&e.recommendedViewportScale){const o=e.recommendedViewportScale;e.requestViewportScale(Math.max(o,yle))}const r=i.getBaseLayer();if(r!=null){const o=r instanceof XRWebGLLayer?r.getViewport(e):i.getBinding().getViewSubImage(r,e).viewport;this.threeRenderer.setViewport(o.x,o.y,o.width,o.height)}}placeInitially(){const e=this.presentedScene,{pivot:t,element:i}=e,{position:s}=t,r=e.getCamera(),{width:o,height:a}=this.overlay.getBoundingClientRect();e.setSize(o,a),r.projectionMatrixInverse.copy(r.projectionMatrix).invert();const{theta:l}=i.getCameraOrbit(),c=r.getWorldDirection(Up);e.yaw=Math.atan2(-c.x,-c.z)-l,this.goalYaw=e.yaw;const u=Math.max(1,2*e.boundingSphere.radius);s.copy(r.position).add(c.multiplyScalar(u)),this.updateTarget();const h=e.getTarget();if(s.add(h).sub(this.oldTarget),this.goalPosition.copy(s),e.setHotspotsVisibility(!0),this.xrMode==="screen-space"){const{session:p}=this.frame;p.addEventListener("selectstart",this.onSelectStart),p.addEventListener("selectend",this.onSelectEnd),p.requestHitTestSourceForTransientInput({profile:"generic-touchscreen"}).then(m=>{this.transientHitTestSource=m})}}getTouchLocation(){const{axes:e}=this.inputSource.gamepad;let t=this.placementBox.getExpandedHit(this.presentedScene,e[0],e[1]);return t!=null&&(Up.copy(t).sub(this.presentedScene.getCamera().position),Up.length()>vle)?null:t}getHitPoint(e){const t=this.threeRenderer.xr.getReferenceSpace(),i=e.getPose(t);if(i==null)return null;const s=ble.fromArray(i.transform.matrix);return this.placeOnWall===!0&&(this.goalYaw=Math.atan2(s.elements[4],s.elements[6])),s.elements[5]>.75!==this.placeOnWall?wle.setFromMatrixPosition(s):null}moveToFloor(e){const t=this.initialHitSource;if(t==null)return;const i=e.getHitTestResults(t);if(i.length==0)return;const s=i[0],r=this.getHitPoint(s);r!=null&&(this.placementBox.show=!0,this.isTranslating||(this.placeOnWall?this.goalPosition.copy(r):this.goalPosition.y=r.y),t.cancel(),this.initialHitSource=null,this.dispatchEvent({type:"status",status:Rl.OBJECT_PLACED}))}fingerPolar(e){const t=e[0].inputSource.gamepad.axes,i=e[1].inputSource.gamepad.axes,s=i[0]-t[0],r=i[1]-t[1],o=Math.atan2(r,s);let a=this.lastAngle-o;return a>Math.PI?a-=2*Math.PI:a<-Math.PI&&(a+=2*Math.PI),this.lastAngle=o,{separation:Math.sqrt(s*s+r*r),deltaYaw:a}}setScale(e){const t=e/this.firstRatio;this.goalScale=Math.abs(t-1)<Ale?1:t}processInput(e){const t=this.transientHitTestSource;if(t==null||!this.isTranslating&&!this.isTwoFingering&&!this.isRotating)return;const i=e.getHitTestResultsForTransientInput(t),s=this.presentedScene,r=s.pivot.scale.x;if(this.isTwoFingering){if(i.length<2)this.isTwoFingering=!1;else{const{separation:o,deltaYaw:a}=this.fingerPolar(i);this.placeOnWall===!1&&(this.goalYaw+=a),s.canScale&&this.setScale(o)}return}else if(i.length===2){this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!0;const{separation:o}=this.fingerPolar(i);this.firstRatio=o/r;return}if(this.isRotating){const o=this.inputSource.gamepad.axes[0]*Fk;this.goalYaw+=o-this.lastAngle,this.lastAngle=o}else this.isTranslating&&i.forEach(o=>{if(o.inputSource!==this.inputSource)return;let a=null;if(o.results.length>0&&(a=this.getHitPoint(o.results[0])),a==null&&(a=this.getTouchLocation()),a!=null){if(this.goalPosition.sub(this.lastDragPosition),this.placeOnWall===!1){const l=a.y-this.lastDragPosition.y;if(l<0){this.placementBox.offsetHeight=l/r,this.presentedScene.setShadowOffset(l);const c=Up.copy(s.getCamera().position),u=-l/(c.y-a.y);c.multiplyScalar(u),a.multiplyScalar(1-u).add(c)}}this.goalPosition.add(a),this.lastDragPosition.copy(a)}})}moveScene(e){const t=this.presentedScene,{pivot:i}=t,s=this.placementBox;if(s.updateOpacity(e),this.controller1&&(this.controller1.userData.turning&&(i.quaternion.copy(this.controller1.quaternion).multiply(this.relativeOrientation),this.selectedController&&this.selectedController===this.controller2&&i.quaternion.premultiply(Kh.copy(this.controller2.quaternion).invert())),this.controller1.userData.box.position.copy(this.controller1.position),i.getWorldQuaternion(this.controller1.userData.box.quaternion)),this.controller2&&(this.controller2.userData.turning&&(i.quaternion.copy(this.controller2.quaternion).multiply(this.relativeOrientation),this.selectedController&&this.selectedController===this.controller1&&i.quaternion.premultiply(Kh.copy(this.controller1.quaternion).invert())),this.controller2.userData.box.position.copy(this.controller2.position),i.getWorldQuaternion(this.controller2.userData.box.quaternion)),this.controller1&&this.controller2&&this.isTwoFingering){const p=this.controllerSeparation();this.setScale(p),this.scaleLine.scale.z=-p,this.scaleLine.lookAt(this.controller2.position)}const r=t.pivot.scale.x;if(this.goalScale!==r){const p=this.scaleDamper.update(r,this.goalScale,e,1);t.pivot.scale.set(p,p,p)}if(i.parent!==t)return;const{position:o}=i,a=t.boundingSphere.radius,l=this.goalPosition;let c=Pn.NONE;if(!l.equals(o)){c=Pn.USER_INTERACTION;let{x:p,y:m,z:g}=o;if(p=this.xDamper.update(p,l.x,e,a),m=this.yDamper.update(m,l.y,e,a),g=this.zDamper.update(g,l.z,e,a),o.set(p,m,g),this.xrMode==="screen-space"&&!this.isTranslating){const v=l.y-m;this.placementComplete&&this.placeOnWall===!1?(s.offsetHeight=v/t.pivot.scale.x,t.setShadowOffset(v)):v===0&&(this.placementComplete=!0,s.show=!1,t.setShadowIntensity(kk))}this.xrMode!=="screen-space"&&l.equals(o)&&t.setShadowIntensity(kk)}t.updateTarget(e),Kh.setFromAxisAngle(Up.set(0,1,0),this.goalYaw);const u=t.pivot.quaternion.angleTo(Kh),h=u-this.yawDamper.update(u,0,e,Math.PI);t.pivot.quaternion.rotateTowards(Kh,h),t.element.dispatchEvent(new CustomEvent("camera-change",{detail:{source:c}}))}onWebXRFrame(e,t){if(this.xrMode!=="screen-space"){const a=this.hover(this.controller1),l=this.hover(this.controller2);this.placementBox.show=(a||l)&&!this.isTwoFingering}this.frame=t,++this.frames;const i=this.threeRenderer.xr.getReferenceSpace(),s=t.getViewerPose(i);s==null&&this.tracking===!0&&this.frames>mle&&(this.tracking=!1,this.dispatchEvent({type:"tracking",status:Y1.NOT_TRACKING}));const r=this.presentedScene;if(s==null||r==null||!r.element.loaded){this.threeRenderer.clear();return}this.tracking===!1&&(this.tracking=!0,this.dispatchEvent({type:"tracking",status:Y1.TRACKING}));let o=!0;for(const a of s.views){if(this.updateView(a),o){this.moveToFloor(t),this.processInput(t);const l=e-this.lastTick;this.moveScene(l),this.renderer.preRender(r,e,l),this.lastTick=e,r.renderShadow(this.threeRenderer)}this.threeRenderer.render(r,r.getCamera()),o=!1}}}function Sle(n){const e=new Map,t=new Map,i=n.clone();return Jz(n,i,function(s,r){e.set(r,s),t.set(s,r)}),i.traverse(function(s){if(!s.isSkinnedMesh)return;const r=s,o=e.get(s),a=o.skeleton.bones;r.skeleton=o.skeleton.clone(),r.bindMatrix.copy(o.bindMatrix),r.skeleton.bones=a.map(function(l){return t.get(l)}),r.bind(r.skeleton,r.bindMatrix)}),i}function Jz(n,e,t){t(n,e);for(let i=0;i<n.children.length;i++)Jz(n.children[i],e.children[i],t)}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uk=Symbol("prepared"),Mx=Symbol("prepare"),Do=Symbol("preparedGLTF"),Ix=Symbol("clone");class Mle{static prepare(e){if(e.scene==null)throw new Error("Model does not have a scene");if(e[Uk])return e;const t=this[Mx](e);return t[Uk]=!0,t}static[Mx](e){const{scene:t}=e,i=[t];return Object.assign(Object.assign({},e),{scene:t,scenes:i})}get parser(){return this[Do].parser}get animations(){return this[Do].animations}get scene(){return this[Do].scene}get scenes(){return this[Do].scenes}get cameras(){return this[Do].cameras}get asset(){return this[Do].asset}get userData(){return this[Do].userData}constructor(e){this[Do]=e}clone(){const e=this.constructor,t=this[Ix]();return new e(t)}dispose(){this.scenes.forEach(e=>{e.traverse(t=>{const i=t;if(!i.material)return;(Array.isArray(i.material)?i.material:[i.material]).forEach(r=>{for(const o in r){const a=r[o];if(a instanceof ln){const l=a.source.data;l.close!=null&&l.close(),a.dispose()}}r.dispose()}),i.geometry.dispose()})})}[Ix](){const e=this[Do],t=Sle(this.scene);Ile(t,this.scene);const i=[t],s=e.userData?Object.assign({},e.userData):{};return Object.assign(Object.assign({},e),{scene:t,scenes:i,userData:s})}}const Ile=(n,e)=>{Xz(n,e,(t,i)=>{i.userData.variantMaterials!==void 0&&(t.userData.variantMaterials=new Map(i.userData.variantMaterials)),i.userData.variantData!==void 0&&(t.userData.variantData=i.userData.variantData),i.userData.originalMaterial!==void 0&&(t.userData.originalMaterial=i.userData.originalMaterial)})},Xz=(n,e,t)=>{t(n,e);for(let i=0;i<n.children.length;i++)Xz(n.children[i],e.children[i],t)},Gk=Symbol("threeGLTF"),zk=Symbol("gltf"),Qk=Symbol("gltfElementMap"),Hk=Symbol("threeObjectMap"),Vk=Symbol("parallelTraverseThreeScene"),jk=Symbol("correlateOriginalThreeGLTF"),Wk=Symbol("correlateCloneThreeGLTF");class yg{static from(e,t){return t!=null?this[Wk](e,t):this[jk](e)}static[jk](e){const t=e.parser.json,i=e.parser.associations,s=new Map,r={name:"Default"},o={type:"materials",index:-1};for(const a of i.keys())a instanceof zn&&i.get(a)==null&&(o.index<0&&(t.materials==null&&(t.materials=[]),o.index=t.materials.length,t.materials.push(r)),a.name=r.name,i.set(a,{materials:o.index}));for(const[a,l]of i){l&&(a.userData=a.userData||{},a.userData.associations=l);for(const c in l)if(c!=null&&c!=="primitives"){const u=c,p=(t[u]||[])[l[u]];if(p==null)continue;let m=s.get(p);m==null&&(m=new Set,s.set(p,m)),m.add(a)}}return new yg(e,t,i,s)}static[Wk](e,t){const i=t.threeGLTF,s=t.gltf,r=JSON.parse(JSON.stringify(s)),o=new Map,a=new Map;for(let l=0;l<i.scenes.length;l++)this[Vk](i.scenes[l],e.scenes[l],(c,u)=>{const h=t.threeObjectMap.get(c);if(h!=null){for(const p in h)if(p!=null&&p!=="primitives"){const m=p,g=h[m],v=r[m][g],y=o.get(u)||{};y[m]=g,o.set(u,y);const A=a.get(v)||new Set;A.add(u),a.set(v,A)}}});return new yg(e,r,o,a)}static[Vk](e,t,i){const s=(r,o)=>{if(i(r,o),r.isObject3D){const a=r,l=o;if(a.material)if(Array.isArray(a.material))for(let c=0;c<a.material.length;++c)i(a.material[c],l.material[c]);else i(a.material,l.material);for(let c=0;c<r.children.length;++c)s(r.children[c],o.children[c])}};s(e,t)}get threeGLTF(){return this[Gk]}get gltf(){return this[zk]}get gltfElementMap(){return this[Qk]}get threeObjectMap(){return this[Hk]}constructor(e,t,i,s){this[Gk]=e,this[zk]=t,this[Qk]=s,this[Hk]=i}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gp=Symbol("correlatedSceneGraph");class Tle extends Mle{static[Mx](e){const t=super[Mx](e);t[Gp]==null&&(t[Gp]=yg.from(t));const{scene:i}=t,s=new ui(void 0,1/0);return i.traverse(r=>{r.renderOrder=1e3,r.frustumCulled=!1,r.name||(r.name=r.uuid);const o=r;if(o.material){const{geometry:a}=o;o.castShadow=!0,o.isSkinnedMesh&&(a.boundingSphere=s,a.boundingBox=null);const l=o.material;if(l.isMeshBasicMaterial===!0&&(l.toneMapped=!1),l.shadowSide=fr,l.aoMap){const{gltf:c,threeObjectMap:u}=t[Gp],h=u.get(l);if(c.materials!=null&&h!=null&&h.materials!=null){const p=c.materials[h.materials];p.occlusionTexture&&p.occlusionTexture.texCoord===0&&a.attributes.uv!=null&&a.setAttribute("uv2",a.attributes.uv)}}}}),t}get correlatedSceneGraph(){return this[Do][Gp]}[Ix](){const e=super[Ix](),t=new Map;return e.scene.traverse(i=>{const s=i;if(s.material){const o=s.material;if(o!=null){if(t.has(o.uuid)){s.material=t.get(o.uuid);return}s.material=o.clone(),t.set(o.uuid,s.material)}}const r=i;r.target!==void 0&&r.add(r.target)}),e[Gp]=yg.from(e,this.correlatedSceneGraph),e}}class Ble extends KU{constructor(e){super(e),this.type=Zn}parse(e){const o=function(B,R){switch(B){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(R||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(R||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(R||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(R||""))}},u=`
`,h=function(B,R,T){R=R||1024;let H=B.pos,Q=-1,W=0,X="",J=String.fromCharCode.apply(null,new Uint16Array(B.subarray(H,H+128)));for(;0>(Q=J.indexOf(u))&&W<R&&H<B.byteLength;)X+=J,W+=J.length,H+=128,J+=String.fromCharCode.apply(null,new Uint16Array(B.subarray(H,H+128)));return-1<Q?(T!==!1&&(B.pos+=W+Q+1),X+J.slice(0,Q)):!1},p=function(B){const R=/^#\?(\S+)/,T=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,k=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,H=/^\s*FORMAT=(\S+)\s*$/,Q=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,W={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let X,J;for((B.pos>=B.byteLength||!(X=h(B)))&&o(1,"no header found"),(J=X.match(R))||o(3,"bad initial token"),W.valid|=1,W.programtype=J[1],W.string+=X+`
`;X=h(B),X!==!1;){if(W.string+=X+`
`,X.charAt(0)==="#"){W.comments+=X+`
`;continue}if((J=X.match(T))&&(W.gamma=parseFloat(J[1])),(J=X.match(k))&&(W.exposure=parseFloat(J[1])),(J=X.match(H))&&(W.valid|=2,W.format=J[1]),(J=X.match(Q))&&(W.valid|=4,W.height=parseInt(J[1],10),W.width=parseInt(J[2],10)),W.valid&2&&W.valid&4)break}return W.valid&2||o(3,"missing format specifier"),W.valid&4||o(3,"missing image size specifier"),W},m=function(B,R,T){const k=R;if(k<8||k>32767||B[0]!==2||B[1]!==2||B[2]&128)return new Uint8Array(B);k!==(B[2]<<8|B[3])&&o(3,"wrong scanline width");const H=new Uint8Array(4*R*T);H.length||o(4,"unable to allocate buffer space");let Q=0,W=0;const X=4*k,J=new Uint8Array(4),K=new Uint8Array(X);let L=T;for(;L>0&&W<B.byteLength;){W+4>B.byteLength&&o(1),J[0]=B[W++],J[1]=B[W++],J[2]=B[W++],J[3]=B[W++],(J[0]!=2||J[1]!=2||(J[2]<<8|J[3])!=k)&&o(3,"bad rgbe scanline format");let V=0,j;for(;V<X&&W<B.byteLength;){j=B[W++];const le=j>128;if(le&&(j-=128),(j===0||V+j>X)&&o(3,"bad scanline data"),le){const ve=B[W++];for(let q=0;q<j;q++)K[V++]=ve}else K.set(B.subarray(W,W+j),V),V+=j,W+=j}const $=k;for(let le=0;le<$;le++){let ve=0;H[Q]=K[le+ve],ve+=k,H[Q+1]=K[le+ve],ve+=k,H[Q+2]=K[le+ve],ve+=k,H[Q+3]=K[le+ve],Q+=4}L--}return H},g=function(B,R,T,k){const H=B[R+3],Q=Math.pow(2,H-128)/255;T[k+0]=B[R+0]*Q,T[k+1]=B[R+1]*Q,T[k+2]=B[R+2]*Q,T[k+3]=1},v=function(B,R,T,k){const H=B[R+3],Q=Math.pow(2,H-128)/255;T[k+0]=tm.toHalfFloat(Math.min(B[R+0]*Q,65504)),T[k+1]=tm.toHalfFloat(Math.min(B[R+1]*Q,65504)),T[k+2]=tm.toHalfFloat(Math.min(B[R+2]*Q,65504)),T[k+3]=tm.toHalfFloat(1)},y=new Uint8Array(e);y.pos=0;const A=p(y),b=A.width,w=A.height,E=m(y.subarray(y.pos),b,w);let M,I,D;switch(this.type){case Sn:D=E.length/4;const B=new Float32Array(D*4);for(let T=0;T<D;T++)g(E,T*4,B,T*4);M=B,I=Sn;break;case Zn:D=E.length/4;const R=new Uint16Array(D*4);for(let T=0;T<D;T++)v(E,T*4,R,T*4);M=R,I=Zn;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:b,height:w,data:M,header:A.string,gamma:A.gamma,exposure:A.exposure,type:I}}setDataType(e){return this.type=e,this}load(e,t,i,s){function r(o,a){switch(o.type){case Sn:case Zn:o.colorSpace=yn,o.minFilter=Bt,o.magFilter=Bt,o.generateMipmaps=!1,o.flipY=!0;break}t&&t(o,a)}return super.load(e,r,i,s)}}/* @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rle={topLight:{intensity:500,position:[.418,16.199,.3]},room:{position:[-.757,13.219,.717],scale:[31.713,28.305,28.591]},boxes:[{position:[-10.906,2.009,1.846],rotation:-.195,scale:[2.328,7.905,4.651]},{position:[-5.607,-.754,-.758],rotation:.994,scale:[1.97,1.534,3.955]},{position:[6.167,.857,7.803],rotation:.561,scale:[3.927,6.285,3.687]},{position:[-2.017,.018,6.124],rotation:.333,scale:[2.002,4.566,2.064]},{position:[2.291,-.756,-2.621],rotation:-.286,scale:[1.546,1.552,1.496]},{position:[-2.193,-.369,-5.547],rotation:.516,scale:[3.875,3.487,2.986]}],lights:[{intensity:50,position:[-16.116,14.37,8.208],scale:[.1,2.428,2.739]},{intensity:50,position:[-16.109,18.021,-8.207],scale:[.1,2.425,2.751]},{intensity:17,position:[14.904,12.198,-1.832],scale:[.15,4.265,6.331]},{intensity:43,position:[-.462,8.89,14.52],scale:[4.38,5.441,.088]},{intensity:20,position:[3.235,11.486,-12.541],scale:[2.5,2,.1]},{intensity:100,position:[0,20,0],scale:[1,.1,1]}]},Dle={topLight:{intensity:400,position:[.5,14,.5]},room:{position:[0,13.2,0],scale:[31.5,28.5,31.5]},boxes:[{position:[-10.906,-1,1.846],rotation:-.195,scale:[2.328,7.905,4.651]},{position:[-5.607,-.754,-.758],rotation:.994,scale:[1.97,1.534,3.955]},{position:[6.167,-.16,7.803],rotation:.561,scale:[3.927,6.285,3.687]},{position:[-2.017,.018,6.124],rotation:.333,scale:[2.002,4.566,2.064]},{position:[2.291,-.756,-2.621],rotation:-.286,scale:[1.546,1.552,1.496]},{position:[-2.193,-.369,-5.547],rotation:.516,scale:[3.875,3.487,2.986]}],lights:[{intensity:80,position:[-14,10,8],scale:[.1,2.5,2.5]},{intensity:80,position:[-14,14,-4],scale:[.1,2.5,2.5]},{intensity:23,position:[14,12,0],scale:[.1,5,5]},{intensity:16,position:[0,9,14],scale:[5,5,.1]},{intensity:80,position:[7,8,-14],scale:[2.5,2.5,.1]},{intensity:80,position:[-7,16,-14],scale:[2.5,2.5,.1]},{intensity:1,position:[0,20,0],scale:[.1,.1,.1]}]};class qk extends qo{constructor(e){super(),this.position.y=-3.5;const t=new vo;t.deleteAttribute("uv");const i=new Wa({metalness:0,side:Pi}),s=new Wa({metalness:0}),r=e=="legacy"?Rle:Dle,o=new Og(16777215,r.topLight.intensity,28,2);o.position.set(...r.topLight.position),this.add(o);const a=new Wt(t,i);a.position.set(...r.room.position),a.scale.set(...r.room.scale),this.add(a);for(const l of r.boxes){const c=new Wt(t,s);c.position.set(...l.position),c.rotation.set(0,l.rotation,0),c.scale.set(...l.scale),this.add(c)}for(const l of r.lights){const c=new Wt(t,this.createAreaLightMaterial(l.intensity));c.position.set(...l.position),c.scale.set(...l.scale),this.add(c)}}createAreaLightMaterial(e){const t=new Un;return t.color.setScalar(e),t}}const Ple=.04,$h=20,Lle=/\.hdr(\.js)?$/;class Jk{constructor(e){this.threeRenderer=e,this.lottieLoaderUrl="",this._ldrLoader=null,this._imageLoader=null,this._hdrLoader=null,this._lottieLoader=null,this.generatedEnvironmentMap=null,this.generatedEnvironmentMapAlt=null,this.skyboxCache=new Map,this.blurMaterial=null,this.blurScene=null}ldrLoader(e){return this._ldrLoader==null&&(this._ldrLoader=new Bb),this._ldrLoader.setWithCredentials(e),this._ldrLoader}imageLoader(e){return this._imageLoader==null&&(this._imageLoader=new kK(this.threeRenderer)),this._imageLoader.setWithCredentials(e),this._imageLoader}hdrLoader(e){return this._hdrLoader==null&&(this._hdrLoader=new Ble,this._hdrLoader.setDataType(Zn)),this._hdrLoader.setWithCredentials(e),this._hdrLoader}async getLottieLoader(e){if(this._lottieLoader==null){const{LottieLoader:t}=await SK(()=>import(this.lottieLoaderUrl),[]);this._lottieLoader=new t}return this._lottieLoader.setWithCredentials(e),this._lottieLoader}async loadImage(e,t){const i=await new Promise((s,r)=>this.ldrLoader(t).load(e,s,()=>{},r));return i.name=e,i.flipY=!1,i}async loadLottie(e,t,i){const s=await this.getLottieLoader(i);s.setQuality(t);const r=await new Promise((o,a)=>s.load(e,o,()=>{},a));return r.name=e,r}async loadEquirect(e,t=!1,i=()=>{}){try{const s=Lle.test(e),r=s?this.hdrLoader(t):this.imageLoader(t),o=await new Promise((a,l)=>r.load(e,c=>{const{renderTarget:u}=c;if(u!=null){const{texture:h}=u;c.dispose(!1),a(h)}else a(c)},c=>{i(c.loaded/c.total*.9)},l));return i(1),o.name=e,o.mapping=cf,s||(o.colorSpace=mn),o}finally{i&&i(1)}}async generateEnvironmentMapAndSkybox(e=null,t=null,i=()=>{},s=!1){const r=t!=="legacy";(t==="legacy"||t==="neutral")&&(t=null),t=dz(t);let o=Promise.resolve(null),a;e&&(o=this.loadEquirectFromUrl(e,s,i)),t?a=this.loadEquirectFromUrl(t,s,i):e?a=this.loadEquirectFromUrl(e,s,i):a=r?this.loadGeneratedEnvironmentMapAlt():this.loadGeneratedEnvironmentMap();const[l,c]=await Promise.all([a,o]);if(l==null)throw new Error("Failed to load environment map.");return{environmentMap:l,skybox:c}}async loadEquirectFromUrl(e,t,i){if(!this.skyboxCache.has(e)){const s=this.loadEquirect(e,t,i);this.skyboxCache.set(e,s)}return this.skyboxCache.get(e)}async GenerateEnvironmentMap(e,t){await zre();const i=this.threeRenderer,s=new ab(256,{generateMipmaps:!1,type:Zn,format:dn,colorSpace:yn,depthBuffer:!0}),r=new hx(.1,100,s),o=r.renderTarget.texture;o.name=t;const a=i.outputColorSpace,l=i.toneMapping;return i.toneMapping=Fr,i.outputColorSpace=yn,r.update(i,e),this.blurCubemap(s,Ple),i.toneMapping=l,i.outputColorSpace=a,o}async loadGeneratedEnvironmentMap(){return this.generatedEnvironmentMap==null&&(this.generatedEnvironmentMap=this.GenerateEnvironmentMap(new qk("legacy"),"legacy")),this.generatedEnvironmentMap}async loadGeneratedEnvironmentMapAlt(){return this.generatedEnvironmentMapAlt==null&&(this.generatedEnvironmentMapAlt=this.GenerateEnvironmentMap(new qk("neutral"),"neutral")),this.generatedEnvironmentMapAlt}blurCubemap(e,t){if(this.blurMaterial==null){this.blurMaterial=this.getBlurShader($h);const s=new vo,r=new Wt(s,this.blurMaterial);this.blurScene=new qo,this.blurScene.add(r)}const i=e.clone();this.halfblur(e,i,t,"latitudinal"),this.halfblur(i,e,t,"longitudinal")}halfblur(e,t,i,s){const o=e.width,a=isFinite(i)?Math.PI/(2*o):2*Math.PI/(2*$h-1),l=i/a,c=isFinite(i)?1+Math.floor(3*l):$h;c>$h&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${c} samples when the maximum is set to ${$h}`);const u=[];let h=0;for(let g=0;g<$h;++g){const v=g/l,y=Math.exp(-v*v/2);u.push(y),g==0?h+=y:g<c&&(h+=2*y)}for(let g=0;g<u.length;g++)u[g]=u[g]/h;const p=this.blurMaterial.uniforms;p.envMap.value=e.texture,p.samples.value=c,p.weights.value=u,p.latitudinal.value=s==="latitudinal",p.dTheta.value=a,new hx(.1,100,t).update(this.threeRenderer,this.blurScene)}getBlurShader(e){const t=new Float32Array(e),i=new O(0,1,0);return new cs({name:"SphericalGaussianBlur",defines:{n:e},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},poleAxis:{value:i}},vertexShader:`
      
      varying vec3 vOutputDirection;
  
      void main() {
  
        vOutputDirection = vec3( position );
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
  
      }
    `,fragmentShader:`
        varying vec3 vOutputDirection;
  
        uniform samplerCube envMap;
        uniform int samples;
        uniform float weights[ n ];
        uniform bool latitudinal;
        uniform float dTheta;
        uniform vec3 poleAxis;
  
        vec3 getSample( float theta, vec3 axis ) {
  
          float cosTheta = cos( theta );
          // Rodrigues' axis-angle rotation
          vec3 sampleDirection = vOutputDirection * cosTheta
            + cross( axis, vOutputDirection ) * sin( theta )
            + axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );
  
          return vec3( textureCube( envMap, sampleDirection ) );
  
        }
  
        void main() {
  
          vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );
  
          if ( all( equal( axis, vec3( 0.0 ) ) ) ) {
  
            axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );
  
          }
  
          axis = normalize( axis );
  
          gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
          gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );
  
          for ( int i = 1; i < n; i++ ) {
  
            if ( i >= samples ) {
  
              break;
  
            }
  
            float theta = dTheta * float( i );
            gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
            gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );
  
          }
        }
      `,blending:po,depthTest:!1,depthWrite:!1,side:Pi})}async dispose(){for(const[,e]of this.skyboxCache)(await e).dispose();this.generatedEnvironmentMap!=null&&((await this.generatedEnvironmentMap).dispose(),this.generatedEnvironmentMap=null),this.generatedEnvironmentMapAlt!=null&&((await this.generatedEnvironmentMapAlt).dispose(),this.generatedEnvironmentMapAlt=null),this.blurMaterial!=null&&this.blurMaterial.dispose()}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kle=.2,RC=40,DC=60,Xk=5,Yh=[1,.79,.62,.5,.4,.31,.25],Fle=3,Kk="high-performance",Nle=1.3;class uo extends js{static get singleton(){return this._singleton||(this._singleton=new uo({powerPreference:(self.ModelViewerElement||{}).powerPreference||Kk,debug:TL()})),this._singleton}static resetSingleton(){const e=this._singleton.dispose();for(const t of e)t.disconnectedCallback();this._singleton=new uo({powerPreference:(self.ModelViewerElement||{}).powerPreference||Kk,debug:TL()});for(const t of e)t.connectedCallback()}get canRender(){return this.threeRenderer!=null}get scaleFactor(){return Yh[this.scaleStep]}set minScale(e){let t=1;for(;t<Yh.length&&!(Yh[t]<e);)++t;this.lastStep=t-1}constructor(e){super(),this.loader=new vs(Tle),this.width=0,this.height=0,this.dpr=1,this.scenes=new Set,this.multipleScenesVisible=!1,this.lastTick=performance.now(),this.renderedLastFrame=!1,this.scaleStep=0,this.lastStep=Fle,this.avgFrameDuration=(DC+RC)/2,this.onWebGLContextLost=t=>{this.dispatchEvent({type:"contextlost",sourceEvent:t})},this.onWebGLContextRestored=()=>{var t;(t=this.textureUtils)===null||t===void 0||t.dispose(),this.textureUtils=new Jk(this.threeRenderer);for(const i of this.scenes)i.element[Cx]()},this.dpr=window.devicePixelRatio,this.canvas3D=document.createElement("canvas"),this.canvas3D.id="webgl-canvas",this.canvas3D.classList.add("show");try{this.threeRenderer=new Lb({canvas:this.canvas3D,alpha:!0,antialias:!0,powerPreference:e.powerPreference,preserveDrawingBuffer:!0}),this.threeRenderer.autoClear=!0,this.threeRenderer.setPixelRatio(1),this.threeRenderer.debug={checkShaderErrors:!!e.debug,onShaderError:null},this.threeRenderer.toneMapping=lf}catch(t){console.warn(t)}this.arRenderer=new Cle(this),this.textureUtils=this.canRender?new Jk(this.threeRenderer):null,vs.initializeKTX2Loader(this.threeRenderer),this.canvas3D.addEventListener("webglcontextlost",this.onWebGLContextLost),this.canvas3D.addEventListener("webglcontextrestored",this.onWebGLContextRestored),this.updateRendererSize()}registerScene(e){this.scenes.add(e),e.forceRescale();const t=new me;this.threeRenderer.getSize(t),e.canvas.width=t.x,e.canvas.height=t.y,this.canRender&&this.scenes.size>0&&this.threeRenderer.setAnimationLoop((i,s)=>this.render(i,s))}unregisterScene(e){this.scenes.delete(e),this.canvas3D.parentElement===e.canvas.parentElement&&e.canvas.parentElement.removeChild(this.canvas3D),this.canRender&&this.scenes.size===0&&this.threeRenderer.setAnimationLoop(null)}displayCanvas(e){return e.element.modelIsVisible&&!this.multipleScenesVisible?this.canvas3D:e.element[sM]}countVisibleScenes(){const{canvas3D:e}=this;let t=0,i=null;for(const r of this.scenes){const{element:o}=r;o.modelIsVisible&&r.externalRenderer==null&&++t,e.parentElement===r.canvas.parentElement&&(i=r)}const s=t>1;if(i!=null){const r=s&&!this.multipleScenesVisible,o=!i.element.modelIsVisible;if(r||o){const{width:a,height:l}=this.sceneSize(i);this.copyPixels(i,a,l),e.parentElement.removeChild(e)}}this.multipleScenesVisible=s}updateRendererSize(){var e;const t=window.devicePixelRatio;if(t!==this.dpr)for(const r of this.scenes){const{element:o}=r;o[ud](o.getBoundingClientRect())}let i=0,s=0;for(const r of this.scenes)i=Math.max(i,r.width),s=Math.max(s,r.height);if(!(i===this.width&&s===this.height&&t===this.dpr)){this.width=i,this.height=s,this.dpr=t,i=Math.ceil(i*t),s=Math.ceil(s*t),this.canRender&&this.threeRenderer.setSize(i,s,!1);for(const r of this.scenes){const{canvas:o}=r;o.width=i,o.height=s,r.forceRescale(),(e=r.effectRenderer)===null||e===void 0||e.setSize(i,s)}}}updateRendererScale(e){const t=this.scaleStep;this.avgFrameDuration+=Oo(kle*(e-this.avgFrameDuration),-Xk,Xk),this.avgFrameDuration>DC?++this.scaleStep:this.avgFrameDuration<RC&&this.scaleStep>0&&--this.scaleStep,this.scaleStep=Math.min(this.scaleStep,this.lastStep),t!==this.scaleStep&&(this.avgFrameDuration=(DC+RC)/2)}shouldRender(e){if(e.shouldRender())e.scaleStep!=this.scaleStep&&(e.scaleStep=this.scaleStep,this.rescaleCanvas(e));else if(e.scaleStep!=0)e.scaleStep=0,this.rescaleCanvas(e);else return!1;return!0}rescaleCanvas(e){const t=Yh[e.scaleStep],i=Math.ceil(this.width/t),s=Math.ceil(this.height/t),{style:r}=e.canvas;r.width=`${i}px`,r.height=`${s}px`,this.canvas3D.style.width=`${i}px`,this.canvas3D.style.height=`${s}px`;const o=this.dpr*t,a=t<1?"GPU throttling":this.dpr!==window.devicePixelRatio?"No meta viewport tag":"";e.element.dispatchEvent(new CustomEvent("render-scale",{detail:{reportedDpr:window.devicePixelRatio,renderedDpr:o,minimumDpr:this.dpr*Yh[this.lastStep],pixelWidth:Math.ceil(e.width*o),pixelHeight:Math.ceil(e.height*o),reason:a}}))}sceneSize(e){const{dpr:t}=this,i=Yh[e.scaleStep],s=Math.min(Math.ceil(e.width*i*t),this.canvas3D.width),r=Math.min(Math.ceil(e.height*i*t),this.canvas3D.height);return{width:s,height:r}}copyPixels(e,t,i){const s=e.context;if(s==null){console.log("could not acquire 2d context");return}s.clearRect(0,0,t,i),s.drawImage(this.canvas3D,0,0,t,i,0,0,t,i),e.canvas.classList.add("show")}orderedScenes(){const e=[];for(const t of[!1,!0])for(const i of this.scenes)i.element.modelIsVisible===t&&e.push(i);return e}get isPresenting(){return this.arRenderer.isPresenting}preRender(e,t,i){const{element:s,exposure:r,toneMapping:o}=e;s[Jo](t,i);const a=typeof r=="number"&&!Number.isNaN(r),l=s.environmentImage,c=s.skyboxImage,u=o===lf&&(l==="neutral"||l==="legacy"||!l&&!c);this.threeRenderer.toneMappingExposure=(a?r:1)*(u?Nle:1)}render(e,t){if(t!=null){this.arRenderer.onWebXRFrame(e,t);return}const i=e-this.lastTick;if(this.lastTick=e,!this.canRender||this.isPresenting)return;this.countVisibleScenes(),this.updateRendererSize(),this.renderedLastFrame&&(this.updateRendererScale(i),this.renderedLastFrame=!1);const{canvas3D:s}=this;for(const r of this.orderedScenes()){const{element:o}=r;if(!o.loaded||!o.modelIsVisible&&r.renderCount>0||(this.preRender(r,e,i),!this.shouldRender(r)))continue;if(r.externalRenderer!=null){const c=r.getCamera();c.updateMatrix();const{matrix:u,projectionMatrix:h}=c,p=u.elements.slice(),m=r.getTarget();p[12]+=m.x,p[13]+=m.y,p[14]+=m.z,r.externalRenderer.render({viewMatrix:p,projectionMatrix:h.elements});continue}if(!o.modelIsVisible&&!this.multipleScenesVisible)for(const c of this.scenes)c.element.modelIsVisible&&c.queueRender();const{width:a,height:l}=this.sceneSize(r);r.renderShadow(this.threeRenderer),this.threeRenderer.setRenderTarget(null),this.threeRenderer.setViewport(0,Math.ceil(this.height*this.dpr)-l,a,l),r.effectRenderer!=null?r.effectRenderer.render(i):(this.threeRenderer.autoClear=!0,this.threeRenderer.toneMapping=r.toneMapping,this.threeRenderer.render(r,r.camera)),this.multipleScenesVisible||!r.element.modelIsVisible&&r.renderCount===0?this.copyPixels(r,a,l):s.parentElement!==r.canvas.parentElement&&(r.canvas.parentElement.appendChild(s),r.canvas.classList.remove("show")),r.hasRendered(),++r.renderCount,this.renderedLastFrame=!0}}dispose(){this.textureUtils!=null&&this.textureUtils.dispose(),this.threeRenderer!=null&&this.threeRenderer.dispose(),this.textureUtils=null,this.threeRenderer=null;const e=[];for(const t of this.scenes)e.push(t.element);return this.canvas3D.removeEventListener("webglcontextlost",this.onWebGLContextLost),this.canvas3D.removeEventListener("webglcontextrestored",this.onWebGLContextRestored),e}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lt=Symbol("correlatedObjects"),an=Symbol("onUpdate");class jg{constructor(e,t){this[an]=e,this[Lt]=t}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k=new Un,Ole=new bo(2,2);let Ule=0;const As=Symbol("threeTexture"),Yk=Symbol("threeTextures");let Gle=class extends jg{get[As](){var e;return(e=this[Lt])===null||e===void 0?void 0:e.values().next().value}get[Yk](){return this[Lt]}constructor(e,t){super(e,new Set(t?[t]:[])),this[As].image.src||(this[As].image.src=t.name?t.name:"adhoc_image"+Ule++),this[As].image.name||(this[As].image.name=t&&t.image&&t.image.src?t.image.src.split("/").pop():"adhoc_image")}get name(){return this[As].image.name||""}get uri(){return this[As].image.src}get bufferView(){return this[As].image.bufferView}get element(){const e=this[As];if(e&&(e.isCanvasTexture||e.isVideoTexture))return e.image}get animation(){const e=this[As];if(e&&e.isCanvasTexture&&e.animation)return e.animation}get type(){return this.uri!=null?"external":"embedded"}set name(e){for(const t of this[Yk])t.image.name=e}update(){const e=this[As];e&&e.isCanvasTexture&&!e.animation&&(this[As].needsUpdate=!0,this[an]())}async createThumbnail(e,t){const i=new qo;$k.map=this[As];const s=new Wt(Ole,$k);i.add(s);const r=new Ko(-1,1,1,-1,0,1),{threeRenderer:o}=uo.singleton,a=new Cs(e,t);o.setRenderTarget(a),o.render(i,r),o.setRenderTarget(null);const l=new Uint8Array(e*t*4);o.readRenderTargetPixels(a,0,0,e,t,l),Ul.width=e,Ul.height=t;const c=Ul.getContext("2d"),u=c.createImageData(e,t);return u.data.set(l),c.putImageData(u,0,0),new Promise(async(h,p)=>{Ul.toBlob(m=>{if(!m)return p("Failed to capture thumbnail.");h(URL.createObjectURL(m))},"image/png")})}};var Bi;(function(n){n[n.Nearest=9728]="Nearest",n[n.Linear=9729]="Linear",n[n.NearestMipmapNearest=9984]="NearestMipmapNearest",n[n.LinearMipmapNearest=9985]="LinearMipmapNearest",n[n.NearestMipmapLinear=9986]="NearestMipmapLinear",n[n.LinearMipmapLinear=9987]="LinearMipmapLinear"})(Bi||(Bi={}));var $l;(function(n){n[n.ClampToEdge=33071]="ClampToEdge",n[n.MirroredRepeat=33648]="MirroredRepeat",n[n.Repeat=10497]="Repeat"})($l||($l={}));/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk=new Map([[$l.Repeat,ls],[$l.ClampToEdge,Cn],[$l.MirroredRepeat,jo]]),Z1=new Map([[ls,$l.Repeat],[Cn,$l.ClampToEdge],[jo,$l.MirroredRepeat]]),zle=new Map([[Bi.Nearest,Mn],[Bi.Linear,Bt],[Bi.NearestMipmapNearest,hc],[Bi.LinearMipmapNearest,Ho],[Bi.NearestMipmapLinear,ao],[Bi.LinearMipmapLinear,vi]]),Kz=new Map([[Mn,Bi.Nearest],[Bt,Bi.Linear],[hc,Bi.NearestMipmapNearest],[Ho,Bi.LinearMipmapNearest],[ao,Bi.NearestMipmapLinear],[vi,Bi.LinearMipmapLinear]]),Qle=new Map([[Bi.Nearest,Mn],[Bi.Linear,Bt]]),$z=new Map([[Mn,Bi.Nearest],[Bt,Bi.Linear]]),Hle=(()=>n=>Kz.has(n))(),Vle=(()=>n=>$z.has(n))(),jle=(()=>n=>Z1.has(n))(),Wle=(n,e)=>{switch(n){case"minFilter":return Hle(e);case"magFilter":return Vle(e);case"wrapS":case"wrapT":return jle(e);case"rotation":case"repeat":case"offset":return!0;default:throw new Error(`Cannot configure property "${n}" on Sampler`)}},ga=Symbol("threeTexture"),eF=Symbol("threeTextures"),vl=Symbol("setProperty");class qle extends jg{get[ga](){var e;return(e=this[Lt])===null||e===void 0?void 0:e.values().next().value}get[eF](){return this[Lt]}constructor(e,t){super(e,new Set(t?[t]:[]))}get name(){return this[ga].name||""}get minFilter(){return Kz.get(this[ga].minFilter)}get magFilter(){return $z.get(this[ga].magFilter)}get wrapS(){return Z1.get(this[ga].wrapS)}get wrapT(){return Z1.get(this[ga].wrapT)}get rotation(){return this[ga].rotation}get scale(){return rM(this[ga].repeat)}get offset(){return rM(this[ga].offset)}setMinFilter(e){this[vl]("minFilter",zle.get(e))}setMagFilter(e){this[vl]("magFilter",Qle.get(e))}setWrapS(e){this[vl]("wrapS",Zk.get(e))}setWrapT(e){this[vl]("wrapT",Zk.get(e))}setRotation(e){e==null&&(e=0),this[vl]("rotation",e)}setScale(e){e==null&&(e={u:1,v:1}),this[vl]("repeat",new me(e.u,e.v))}setOffset(e){e==null&&(e={u:0,v:0}),this[vl]("offset",new me(e.u,e.v))}[vl](e,t){if(Wle(e,t))for(const i of this[eF])i[e]=t,i.needsUpdate=!0;this[an]()}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tF=Symbol("image"),nF=Symbol("sampler"),iF=Symbol("threeTexture");class Yz extends jg{get[iF](){var e;return(e=this[Lt])===null||e===void 0?void 0:e.values().next().value}constructor(e,t){super(e,new Set(t?[t]:[])),this[nF]=new qle(e,t),this[tF]=new Gle(e,t)}get name(){return this[iF].name||""}set name(e){for(const t of this[Lt])t.name=e}get sampler(){return this[nF]}get source(){return this[tF]}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zz,eQ,tQ;const iu=Symbol("texture"),su=Symbol("transform"),PC=Symbol("materials"),sF=Symbol("usage"),Zh=Symbol("onUpdate"),am=Symbol("activeVideo");var yt;(function(n){n[n.Base=0]="Base",n[n.MetallicRoughness=1]="MetallicRoughness",n[n.Normal=2]="Normal",n[n.Occlusion=3]="Occlusion",n[n.Emissive=4]="Emissive",n[n.Clearcoat=5]="Clearcoat",n[n.ClearcoatRoughness=6]="ClearcoatRoughness",n[n.ClearcoatNormal=7]="ClearcoatNormal",n[n.SheenColor=8]="SheenColor",n[n.SheenRoughness=9]="SheenRoughness",n[n.Transmission=10]="Transmission",n[n.Thickness=11]="Thickness",n[n.Specular=12]="Specular",n[n.SpecularColor=13]="SpecularColor",n[n.Iridescence=14]="Iridescence",n[n.IridescenceThickness=15]="IridescenceThickness",n[n.Anisotropy=16]="Anisotropy"})(yt||(yt={}));class Dd{constructor(e,t,i,s){this[Zz]=null,this[eQ]={rotation:0,scale:new me(1,1),offset:new me(0,0)},this[tQ]=!1,i&&(this[su].rotation=i.rotation,this[su].scale.copy(i.repeat),this[su].offset.copy(i.offset),this[iu]=new Yz(e,i)),this[Zh]=e,this[PC]=s,this[sF]=t}get texture(){return this[iu]}setTexture(e){var t,i;const s=e!=null?e.source[As]:null,r=(t=this[iu])===null||t===void 0?void 0:t.source[As];if(r!=null&&r.isVideoTexture?this[am]=!1:!((i=this[iu])===null||i===void 0)&&i.source.animation&&this[iu].source.animation.removeEventListener("enterFrame",this[Zh]),this[iu]=e,s!=null&&s.isVideoTexture){const a=s.image;if(this[am]=!0,a.requestVideoFrameCallback!=null){const l=()=>{this[am]&&(this[Zh](),a.requestVideoFrameCallback(l))};a.requestVideoFrameCallback(l)}else{const l=()=>{this[am]&&(this[Zh](),requestAnimationFrame(l))};requestAnimationFrame(l)}}else(e==null?void 0:e.source.animation)!=null&&e.source.animation.addEventListener("enterFrame",this[Zh]);let o=mn;if(this[PC])for(const a of this[PC]){switch(this[sF]){case yt.Base:a.map=s;break;case yt.MetallicRoughness:o=yn,a.metalnessMap=s,a.roughnessMap=s;break;case yt.Normal:o=yn,a.normalMap=s;break;case yt.Occlusion:o=yn,a.aoMap=s;break;case yt.Emissive:a.emissiveMap=s;break;case yt.Clearcoat:a.clearcoatMap=s;break;case yt.ClearcoatRoughness:a.clearcoatRoughnessMap=s;break;case yt.ClearcoatNormal:a.clearcoatNormalMap=s;break;case yt.SheenColor:a.sheenColorMap=s;break;case yt.SheenRoughness:a.sheenRoughnessMap=s;break;case yt.Transmission:a.transmissionMap=s;break;case yt.Thickness:a.thicknessMap=s;break;case yt.Specular:a.specularIntensityMap=s;break;case yt.SpecularColor:a.specularColorMap=s;break;case yt.Iridescence:a.iridescenceMap=s;break;case yt.IridescenceThickness:a.iridescenceThicknessMap=s;break;case yt.Anisotropy:a.anisotropyMap=s;break}a.needsUpdate=!0}s&&(s.colorSpace=o,s.rotation=this[su].rotation,s.repeat=this[su].scale,s.offset=this[su].offset),this[Zh]()}}Zz=iu,eQ=su,tQ=am;/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zp=Symbol("threeMaterial"),My=Symbol("threeMaterials"),rF=Symbol("baseColorTexture"),oF=Symbol("metallicRoughnessTexture");class Jle extends jg{get[My](){return this[Lt]}get[zp](){var e;return(e=this[Lt])===null||e===void 0?void 0:e.values().next().value}constructor(e,t){super(e,t);const{map:i,metalnessMap:s}=t.values().next().value;this[rF]=new Dd(e,yt.Base,i,t),this[oF]=new Dd(e,yt.MetallicRoughness,s,t)}get baseColorFactor(){const e=[0,0,0,this[zp].opacity];return this[zp].color.toArray(e),e}get metallicFactor(){return this[zp].metalness}get roughnessFactor(){return this[zp].roughness}get baseColorTexture(){return this[rF]}get metallicRoughnessTexture(){return this[oF]}setBaseColorFactor(e){const t=new Me;e instanceof Array?t.fromArray(e):t.set(e);for(const i of this[My])i.color.set(t),e instanceof Array&&e.length>3?i.opacity=e[3]:(e=[0,0,0,i.opacity],t.toArray(e));this[an]()}setMetallicFactor(e){for(const t of this[My])t.metalness=e;this[an]()}setRoughnessFactor(e){for(const t of this[My])t.roughness=e;this[an]()}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var aF,lF;const cF=Symbol("pbrMetallicRoughness"),uF=Symbol("normalTexture"),hF=Symbol("occlusionTexture"),dF=Symbol("emissiveTexture"),bn=Symbol("backingThreeMaterial"),fF=Symbol("applyAlphaCutoff"),LC=Symbol("getAlphaMode"),ed=Symbol("lazyLoadGLTFInfo"),kC=Symbol("initialize"),eM=Symbol("getLoadedMaterial"),Ye=Symbol("ensureMaterialIsLoaded"),pF=Symbol("gltfIndex"),lm=Symbol("setActive"),$d=Symbol("variantIndices"),FC=Symbol("isActive"),mF=Symbol("modelVariants"),NC=Symbol("name"),Os=Symbol("pbrTextures");class OC extends jg{get[(aF=$d,lF=Os,bn)](){return this[Lt].values().next().value}constructor(e,t,i,s,r,o,a=void 0){super(e,r),this[aF]=new Set,this[lF]=new Map,this[pF]=t,this[FC]=i,this[mF]=s,this[NC]=o,a==null?this[kC]():this[ed]=a}[kC](){const e=this[an],t=this[Lt];this[cF]=new Jle(e,t);const{normalMap:i,aoMap:s,emissiveMap:r}=t.values().next().value;this[uF]=new Dd(e,yt.Normal,i,t),this[hF]=new Dd(e,yt.Occlusion,s,t),this[dF]=new Dd(e,yt.Emissive,r,t);const o=a=>{this[Os].set(a,new Dd(e,a,null,t))};o(yt.Clearcoat),o(yt.ClearcoatRoughness),o(yt.ClearcoatNormal),o(yt.SheenColor),o(yt.SheenRoughness),o(yt.Transmission),o(yt.Thickness),o(yt.Specular),o(yt.SpecularColor),o(yt.Iridescence),o(yt.IridescenceThickness),o(yt.Anisotropy)}async[eM](){if(this[ed]!=null){const e=await this[ed].doLazyLoad();return this[kC](),this[ed]=void 0,this.ensureLoaded=async()=>{},e}return null}colorFromRgb(e){const t=new Me;return e instanceof Array?t.fromArray(e):t.set(e),t}[Ye](){if(this[ed]!=null)throw new Error(`Material "${this.name}" has not been loaded, call 'await
    myMaterial.ensureLoaded()' before using an unloaded material.`)}async ensureLoaded(){await this[eM]()}get isLoaded(){return this[ed]==null}get isActive(){return this[FC]}[lm](e){this[FC]=e}get name(){return this[NC]||""}set name(e){if(this[NC]=e,this[Lt]!=null)for(const t of this[Lt])t.name=e}get pbrMetallicRoughness(){return this[Ye](),this[cF]}get normalTexture(){return this[Ye](),this[uF]}get occlusionTexture(){return this[Ye](),this[hF]}get emissiveTexture(){return this[Ye](),this[dF]}get emissiveFactor(){return this[Ye](),this[bn].emissive.toArray()}get index(){return this[pF]}hasVariant(e){const t=this[mF].get(e);return t!=null&&this[$d].has(t.index)}setEmissiveFactor(e){this[Ye]();const t=this.colorFromRgb(e);for(const i of this[Lt])i.emissive.set(t);this[an]()}[LC](){return this[bn].transparent?"BLEND":this[bn].alphaTest>0?"MASK":"OPAQUE"}[fF](){this[Ye]();for(const e of this[Lt])this[LC]()==="MASK"?e.alphaTest==null&&(e.alphaTest=.5):e.alphaTest=void 0,e.needsUpdate=!0}setAlphaCutoff(e){this[Ye]();for(const t of this[Lt])t.alphaTest=e,t.needsUpdate=!0;this[fF](),this[an]()}getAlphaCutoff(){return this[Ye](),this[bn].alphaTest}setDoubleSided(e){this[Ye]();for(const t of this[Lt])t.side=e?ci:fr,t.needsUpdate=!0;this[an]()}getDoubleSided(){return this[Ye](),this[bn].side==ci}setAlphaMode(e){this[Ye]();const t=(i,s)=>{i.transparent=s,i.depthWrite=!s};for(const i of this[Lt])t(i,e==="BLEND"),e==="MASK"?i.alphaTest=.5:i.alphaTest=void 0,i.needsUpdate=!0;this[an]()}getAlphaMode(){return this[Ye](),this[LC]()}get emissiveStrength(){return this[Ye](),this[bn].emissiveIntensity}setEmissiveStrength(e){this[Ye]();for(const t of this[Lt])t.emissiveIntensity=e;this[an]()}get clearcoatFactor(){return this[Ye](),this[bn].clearcoat}get clearcoatRoughnessFactor(){return this[Ye](),this[bn].clearcoatRoughness}get clearcoatTexture(){return this[Ye](),this[Os].get(yt.Clearcoat)}get clearcoatRoughnessTexture(){return this[Ye](),this[Os].get(yt.ClearcoatRoughness)}get clearcoatNormalTexture(){return this[Ye](),this[Os].get(yt.ClearcoatNormal)}get clearcoatNormalScale(){return this[Ye](),this[bn].clearcoatNormalScale.x}setClearcoatFactor(e){this[Ye]();for(const t of this[Lt])t.clearcoat=e;this[an]()}setClearcoatRoughnessFactor(e){this[Ye]();for(const t of this[Lt])t.clearcoatRoughness=e;this[an]()}setClearcoatNormalScale(e){this[Ye]();for(const t of this[Lt])t.clearcoatNormalScale=new me(e,e);this[an]()}get ior(){return this[Ye](),this[bn].ior}setIor(e){this[Ye]();for(const t of this[Lt])t.ior=e;this[an]()}get sheenColorFactor(){return this[Ye](),this[bn].sheenColor.toArray()}get sheenColorTexture(){return this[Ye](),this[Os].get(yt.SheenColor)}get sheenRoughnessFactor(){return this[Ye](),this[bn].sheenRoughness}get sheenRoughnessTexture(){return this[Ye](),this[Os].get(yt.SheenRoughness)}setSheenColorFactor(e){this[Ye]();const t=this.colorFromRgb(e);for(const i of this[Lt])i.sheenColor.set(t),i.sheen=1;this[an]()}setSheenRoughnessFactor(e){this[Ye]();for(const t of this[Lt])t.sheenRoughness=e,t.sheen=1;this[an]()}get transmissionFactor(){return this[Ye](),this[bn].transmission}get transmissionTexture(){return this[Ye](),this[Os].get(yt.Transmission)}setTransmissionFactor(e){this[Ye]();for(const t of this[Lt])t.transmission=e;this[an]()}get thicknessFactor(){return this[Ye](),this[bn].thickness}get thicknessTexture(){return this[Ye](),this[Os].get(yt.Thickness)}get attenuationDistance(){return this[Ye](),this[bn].attenuationDistance}get attenuationColor(){return this[Ye](),this[bn].attenuationColor.toArray()}setThicknessFactor(e){this[Ye]();for(const t of this[Lt])t.thickness=e;this[an]()}setAttenuationDistance(e){this[Ye]();for(const t of this[Lt])t.attenuationDistance=e;this[an]()}setAttenuationColor(e){this[Ye]();const t=this.colorFromRgb(e);for(const i of this[Lt])i.attenuationColor.set(t);this[an]()}get specularFactor(){return this[Ye](),this[bn].specularIntensity}get specularTexture(){return this[Ye](),this[Os].get(yt.Specular)}get specularColorFactor(){return this[Ye](),this[bn].specularColor.toArray()}get specularColorTexture(){return this[Ye](),this[Os].get(yt.SheenColor)}setSpecularFactor(e){this[Ye]();for(const t of this[Lt])t.specularIntensity=e;this[an]()}setSpecularColorFactor(e){this[Ye]();const t=this.colorFromRgb(e);for(const i of this[Lt])i.specularColor.set(t);this[an]()}get iridescenceFactor(){return this[Ye](),this[bn].iridescence}get iridescenceTexture(){return this[Ye](),this[Os].get(yt.Iridescence)}get iridescenceIor(){return this[Ye](),this[bn].iridescenceIOR}get iridescenceThicknessMinimum(){return this[Ye](),this[bn].iridescenceThicknessRange[0]}get iridescenceThicknessMaximum(){return this[Ye](),this[bn].iridescenceThicknessRange[1]}get iridescenceThicknessTexture(){return this[Ye](),this[Os].get(yt.IridescenceThickness)}setIridescenceFactor(e){this[Ye]();for(const t of this[Lt])t.iridescence=e;this[an]()}setIridescenceIor(e){this[Ye]();for(const t of this[Lt])t.iridescenceIOR=e;this[an]()}setIridescenceThicknessMinimum(e){this[Ye]();for(const t of this[Lt])t.iridescenceThicknessRange[0]=e;this[an]()}setIridescenceThicknessMaximum(e){this[Ye]();for(const t of this[Lt])t.iridescenceThicknessRange[1]=e;this[an]()}get anisotropyStrength(){return this[Ye](),this[bn].anisotropy}get anisotropyRotation(){return this[Ye](),this[bn].anisotropyRotation}get anisotropyTexture(){return this[Ye](),this[Os].get(yt.Anisotropy)}setAnisotropyStrength(e){this[Ye]();for(const t of this[Lt])t.anisotropy=e;this[an]()}setAnisotropyRotation(e){this[Ye]();for(const t of this[Lt])t.anisotropyRotation=e;this[an]()}}let nQ=class{constructor(e){this.name="",this.children=new Array,this.name=e}};class UC extends nQ{constructor(e,t,i,s){super(e.name),this.materials=new Map,this.variantToMaterialMap=new Map,this.initialMaterialIdx=0,this.activeMaterialIdx=0,this.mesh=e;const{gltf:r,threeGLTF:o,threeObjectMap:a}=s;this.parser=o.parser,this.modelVariants=i,this.mesh.userData.variantData=i;const l=a.get(e.material);l.materials!=null?this.initialMaterialIdx=this.activeMaterialIdx=l.materials:console.error(`Primitive (${e.name}) missing initial material reference.`);const c=e.userData.associations||{};if(c.meshes==null){console.error("Mesh is missing primitive index association");return}const p=((r.meshes||[])[c.meshes].primitives||[])[c.primitives];if(p==null){console.error("Mesh primitive definition is missing.");return}if(p.material!=null)this.materials.set(p.material,t[p.material]);else{const m=t.findIndex(g=>g.name==="Default");m>=0?this.materials.set(m,t[m]):console.warn("gltfPrimitive has no material!")}if(p.extensions&&p.extensions.KHR_materials_variants){const m=p.extensions.KHR_materials_variants,v=o.parser.json.extensions.KHR_materials_variants.variants;for(const y of m.mappings){const A=t[y.material];this.materials.set(y.material,A);for(const b of y.variants){const{name:w}=v[b];this.variantToMaterialMap.set(b,A),A[$d].add(b),i.has(w)||i.set(w,{name:w,index:b})}}}}async setActiveMaterial(e){const t=this.materials.get(e);if(e!==this.activeMaterialIdx){const i=t[Lt],s=await t[eM]();s!=null?this.mesh.material=s:this.mesh.material=i.values().next().value,this.parser.assignFinalMaterial(this.mesh),i.add(this.mesh.material),this.activeMaterialIdx=e}return this.mesh.material}getActiveMaterial(){return this.materials.get(this.activeMaterialIdx)}getMaterial(e){return this.materials.get(e)}async enableVariant(e){if(e==null)return this.setActiveMaterial(this.initialMaterialIdx);if(this.variantToMaterialMap!=null&&this.modelVariants.has(e)){const t=this.modelVariants.get(e);return this.enableVariantHelper(t.index)}return null}async enableVariantHelper(e){if(this.variantToMaterialMap!=null&&e!=null){const t=this.variantToMaterialMap.get(e);if(t!=null)return this.setActiveMaterial(t.index)}return null}async instantiateVariants(){if(this.variantToMaterialMap!=null)for(const e of this.variantToMaterialMap.keys()){const t=this.mesh.userData.variantMaterials.get(e);if(t.material!=null)continue;const i=await this.enableVariantHelper(e);i!=null&&(t.material=i)}}get variantInfo(){return this.variantToMaterialMap}addVariant(e,t){if(!this.ensureVariantIsUnused(t))return!1;this.modelVariants.has(t)||this.modelVariants.set(t,{name:t,index:this.modelVariants.size});const s=this.modelVariants.get(t).index;return e[$d].add(s),this.variantToMaterialMap.set(s,e),this.materials.set(e.index,e),this.updateVariantUserData(s,e),!0}deleteVariant(e){if(this.variantInfo.has(e)){this.variantInfo.delete(e);const t=this.mesh.userData.variantMaterials;t!=null&&t.delete(e)}}updateVariantUserData(e,t){t[$d].add(e),this.mesh.userData.variantData=this.modelVariants,this.mesh.userData.variantMaterials=this.mesh.userData.variantMaterials||new Map,this.mesh.userData.variantMaterials.set(e,{material:t[Lt].values().next().value,gltfMaterialIndex:t.index})}ensureVariantIsUnused(e){const t=this.modelVariants.get(e);return t!=null&&this.variantInfo.has(t.index)?(console.warn(`Primitive cannot add variant '${e}' for this material, it already exists.`),!1):!0}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gF,AF,yF,vF,xF,bF;const Xc=Symbol("materials"),Iy=Symbol("hierarchy"),wF=Symbol("roots"),Aa=Symbol("primitives"),iQ=Symbol("prepareVariantsForExport"),sQ=Symbol("switchVariant"),rQ=Symbol("materialFromPoint"),tM=Symbol("nodeFromPoint"),oQ=Symbol("nodeFromIndex"),Yi=Symbol("variantData"),nM=Symbol("availableVariants"),GC=Symbol("modelOnUpdate"),EF=Symbol("cloneMaterial");class Xle{constructor(e,t,i,s){this.gltf=e,this.gltfElementMap=t,this.mapKey=i,this.doLazyLoad=s}}class Kle{constructor(e,t=()=>{}){this[gF]=new Array,this[AF]=new Array,this[yF]=new Array,this[vF]=new Array,this[xF]=()=>{},this[bF]=new Map,this[GC]=t;const{gltf:i,threeGLTF:s,gltfElementMap:r}=e;for(const[l,c]of i.materials.entries()){const u=r.get(c);if(u!=null)this[Xc].push(new OC(t,l,!0,this[Yi],u,c.name));else{const p=(i.materials||[])[l],m=new Set;r.set(p,m);const g=async()=>{const v=await s.parser.getDependency("material",l);return m.add(v),v};this[Xc].push(new OC(t,l,!1,this[Yi],m,c.name,new Xle(i,r,p,g)))}}const o=new Map,a=new Array;for(const l of s.scene.children)a.push(l);for(;a.length>0;){const l=a.pop();let c=null;l instanceof Wt?(c=new UC(l,this.materials,this[Yi],e),this[Aa].push(c)):c=new nQ(l.name);const u=o.get(l);u!=null?u.children.push(c):this[wF].push(c),this[Iy].push(c);for(const h of l.children)a.push(h),o.set(l,c)}}get materials(){return this[Xc]}[(gF=Xc,AF=Iy,yF=wF,vF=Aa,xF=GC,bF=Yi,nM)](){const e=Array.from(this[Yi].values());return e.sort((t,i)=>t.index-i.index),e.map(t=>t.name)}getMaterialByName(e){const t=this[Xc].filter(i=>i.name===e);return t.length>0?t[0]:null}[oQ](e,t){const i=this[Iy].find(s=>{if(s instanceof UC){const{meshes:r,primitives:o}=s.mesh.userData.associations;if(r==e&&o==t)return!0}return!1});return i??null}[tM](e){return this[Iy].find(t=>t instanceof UC&&t.mesh===e.object)}[rQ](e){return this[tM](e).getActiveMaterial()}async[sQ](e){for(const t of this[Aa])await t.enableVariant(e);for(const t of this.materials)t[lm](!1);for(const t of this[Aa])this.materials[t.getActiveMaterial().index][lm](!0)}async[iQ](){const e=new Array;for(const t of this[Aa])e.push(t.instantiateVariants());await Promise.all(e)}[EF](e,t){const i=this.materials[e];i.isLoaded||console.error(`Cloning an unloaded material,
           call 'material.ensureLoaded() before cloning the material.`);const s=i[Lt],r=new Set;for(const[a,l]of s.entries()){const c=l.clone();c.name=t+(s.size>1?"_inst"+a:""),r.add(c)}const o=new OC(this[GC],this[Xc].length,!1,this[Yi],r,t);return this[Xc].push(o),o}createMaterialInstanceForVariant(e,t,i,s=!0){let r=null;for(const o of this[Aa]){const a=this[Yi].get(i);a!=null&&o.variantInfo.has(a.index)||o.getMaterial(e)!=null&&(this.hasVariant(i)||this.createVariant(i),r==null&&(r=this[EF](e,t)),o.addVariant(r,i))}if(s&&r!=null){r[lm](!0),this.materials[e][lm](!1);for(const o of this[Aa])o.enableVariant(i)}return r}createVariant(e){this[Yi].has(e)?console.warn(`Variant '${e}'' already exists`):this[Yi].set(e,{name:e,index:this[Yi].size})}hasVariant(e){return this[Yi].has(e)}setMaterialToVariant(e,t){if(this[nM]().find(i=>i===t)==null){console.warn(`Can't add material to '${t}', the variant does not exist.'`);return}if(e<0||e>=this.materials.length){console.error("setMaterialToVariant(): materialIndex is out of bounds.");return}for(const i of this[Aa]){const s=i.getMaterial(e);s!=null&&i.addVariant(s,t)}}updateVariantName(e,t){const i=this[Yi].get(e);i!=null&&(i.name=t,this[Yi].set(t,i),this[Yi].delete(e))}deleteVariant(e){const t=this[Yi].get(e);if(t!=null){for(const i of this.materials)i.hasVariant(e)&&i[$d].delete(t.index);for(const i of this[Aa])i.deleteVariant(t.index);this[Yi].delete(e)}}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zC=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const uv=Symbol("currentGLTF"),hv=Symbol("originalGltfJson"),ru=Symbol("model"),QC=Symbol("getOnUpdateMethod"),Qp=Symbol("buildTexture"),$le=n=>{var e,t,i;class s extends n{constructor(){super(...arguments),this[e]=void 0,this[t]=null,this[i]=null,this.variantName=null,this.orientation="0 0 0",this.scale="1 1 1"}get model(){return this[ru]}get availableVariants(){return this.model?this.model[nM]():[]}get originalGltfJson(){return this[hv]}[(e=ru,t=uv,i=hv,QC)](){return()=>{this[Ri]()}}[Qp](o){return o.colorSpace=mn,o.wrapS=ls,o.wrapT=ls,new Yz(this[QC](),o)}async createTexture(o,a="image/png"){const{textureUtils:l}=this[hn],c=await l.loadImage(o,this.withCredentials);return c.userData.mimeType=a,this[Qp](c)}async createLottieTexture(o,a=1){const{textureUtils:l}=this[hn],c=await l.loadLottie(o,a,this.withCredentials);return this[Qp](c)}createVideoTexture(o){const a=document.createElement("video");a.crossOrigin=this.withCredentials?"use-credentials":"anonymous",a.src=o,a.muted=!0,a.playsInline=!0,a.loop=!0,a.play();const l=new wU(a);return this[Qp](l)}createCanvasTexture(){const o=document.createElement("canvas"),a=new CU(o);return this[Qp](a)}async updated(o){if(super.updated(o),o.has("variantName")){const a=this[Xu].beginActivity("variant-update");a(.1);const l=this[ru],{variantName:c}=this;l!=null&&(await l[sQ](c),this[Ri](),this.dispatchEvent(new CustomEvent("variant-applied"))),a(1)}if(o.has("orientation")||o.has("scale")){if(!this.loaded)return;const a=this[Ee];a.applyTransform(),a.updateBoundingBox(),a.updateShadow(),this[hn].arRenderer.onUpdateScene(),this[Ri]()}}[Xo](){super[Xo]();const{currentGLTF:o}=this[Ee];if(o!=null){const{correlatedSceneGraph:a}=o;a!=null&&o!==this[uv]&&(this[ru]=new Kle(a,this[QC]()),this[hv]=JSON.parse(JSON.stringify(a.gltf))),"variants"in o.userData&&this.requestUpdate("variantName")}this[uv]=o}async exportScene(o){const a=this[Ee];return new Promise(async(l,c)=>{const u={binary:!0,onlyVisible:!0,maxTextureSize:1/0,includeCustomExtensions:!1,forceIndices:!1};Object.assign(u,o),u.animations=a.animations,u.truncateDrawRange=!0;const h=a.shadow;let p=!1;h!=null&&(p=h.visible,h.visible=!1),await this[ru][iQ](),new Sx().register(g=>new Mae(g)).parse(a.model,g=>l(new Blob([u.binary?g:JSON.stringify(g)],{type:u.binary?"application/octet-stream":"application/json"})),()=>c("glTF export failed"),u),h!=null&&(h.visible=p)})}materialFromPoint(o,a){const l=this[ru];if(l==null)return null;const c=this[Ee],u=c.getNDC(o,a),h=c.hitFromPoint(u);return h==null||h.face==null?null:l[rQ](h)}}return zC([At({type:String,attribute:"variant-name"})],s.prototype,"variantName",void 0),zC([At({type:String,attribute:"orientation"})],s.prototype,"orientation",void 0),zC([At({type:String,attribute:"scale"})],s.prototype,"scale",void 0),s};/* @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yle extends Wt{constructor(){super(void 0,new Un({depthWrite:!1})),this.height=0,this.radius=0,this.resolution=0,this.userData.noHit=!0}get map(){return this.material.map}set map(e){this.material.map=e}isUsable(){return this.height>0&&this.radius>0&&this.geometry!=null&&this.map!=null}updateGeometry(e=this.height,t=this.radius,i=128){(e!=this.height||t!=this.radius||i!=this.resolution)&&(this.height=e,this.radius=t,this.resolution=i,e>0&&t>0&&(this.geometry.dispose(),this.geometry=Zle(e,t,i)))}}function Zle(n,e,t){const i=new kf(e,2*t,t);i.scale(1,1,-1);const s=i.getAttribute("position"),r=new O;for(let o=0;o<s.count;++o)if(r.fromBufferAttribute(s,o),r.y<0){const a=-n*3/2,l=r.y<a?-n/r.y:1-r.y*r.y/(3*a*a);r.multiplyScalar(l),r.toArray(s.array,3*o)}return s.needsUpdate=!0,i}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty=new O,HC=new O,VC=new O,By=new bt,_F=new ns,CF=new qn;class aQ extends nae{constructor(e){super(document.createElement("div")),this.normal=new O(0,1,0),this.initialized=!1,this.referenceCount=1,this.pivot=document.createElement("div"),this.slot=document.createElement("slot"),this.element.classList.add("annotation-wrapper"),this.slot.name=e.name,this.element.appendChild(this.pivot),this.pivot.appendChild(this.slot),this.updatePosition(e.position),this.updateNormal(e.normal),this.surface=e.surface}get facingCamera(){return!this.element.classList.contains("hide")}show(){(!this.facingCamera||!this.initialized)&&this.updateVisibility(!0)}hide(){(this.facingCamera||!this.initialized)&&this.updateVisibility(!1)}increment(){this.referenceCount++}decrement(){return this.referenceCount>0&&--this.referenceCount,this.referenceCount===0}updatePosition(e){if(e==null)return;const t=Pa(e)[0].terms;for(let i=0;i<3;++i)this.position.setComponent(i,Go(t[i]).number);this.updateMatrixWorld()}updateNormal(e){if(e==null)return;const t=Pa(e)[0].terms;for(let i=0;i<3;++i)this.normal.setComponent(i,t[i].number)}updateSurface(){const{mesh:e,tri:t,bary:i}=this;if(e==null||t==null||i==null)return;e.getVertexPosition(t.x,Ty),e.getVertexPosition(t.y,HC),e.getVertexPosition(t.z,VC),Ty.toArray(By.elements,0),HC.toArray(By.elements,3),VC.toArray(By.elements,6),this.position.copy(i).applyMatrix3(By);const s=this.parent;s.worldToLocal(e.localToWorld(this.position)),_F.set(Ty,HC,VC),_F.getNormal(this.normal).transformDirection(e.matrixWorld);const r=s.parent;CF.setFromAxisAngle(Ty.set(0,1,0),-r.rotation.y),this.normal.applyQuaternion(CF)}orient(e){this.pivot.style.transform=`rotate(${e}rad)`}updateVisibility(e){this.element.classList.toggle("hide",!e),this.slot.assignedNodes().forEach(t=>{if(t.nodeType!==Node.ELEMENT_NODE)return;const i=t,s=i.dataset.visibilityAttribute;if(s!=null){const r=`data-${s}`;i.toggleAttribute(r,e)}i.dispatchEvent(new CustomEvent("hotspot-visibility",{detail:{visible:e}}))}),this.initialized=!0}}const ece={name:"HorizontalBlurShader",uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform float h;

		varying vec2 vUv;

		void main() {

			vec4 sum = vec4( 0.0 );

			sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
			sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
			sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

			gl_FragColor = sum;

		}`},tce={name:"VerticalBlurShader",uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform float v;

		varying vec2 vUv;

		void main() {

			vec4 sum = vec4( 0.0 );

			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

			gl_FragColor = sum;

		}`};function SF(n,e,t){return(1-t)*n+t*e}/* @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MF=9,nce=6,jC=2,ice=.3;class sce extends Rt{constructor(e,t,i){super(),this.camera=new Ko,this.renderTarget=null,this.renderTargetBlur=null,this.depthMaterial=new Ib,this.horizontalBlurMaterial=new cs(ece),this.verticalBlurMaterial=new cs(tce),this.intensity=0,this.softness=1,this.boundingBox=new Nn,this.size=new O,this.maxDimension=0,this.isAnimated=!1,this.needsUpdate=!1;const{camera:s}=this;s.rotation.x=Math.PI/2,s.left=-.5,s.right=.5,s.bottom=-.5,s.top=.5,this.add(s);const r=new bo,o=new Un({opacity:1,transparent:!0,side:Pi});this.floor=new Wt(r,o),this.floor.userData.noHit=!0,s.add(this.floor),this.blurPlane=new Wt(r),this.blurPlane.visible=!1,s.add(this.blurPlane),e.target.add(this),this.depthMaterial.onBeforeCompile=function(a){a.fragmentShader=a.fragmentShader.replace("gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );","gl_FragColor = vec4( vec3( 0.0 ), ( 1.0 - fragCoordZ ) * opacity );")},this.depthMaterial.side=ci,this.horizontalBlurMaterial.depthTest=!1,this.verticalBlurMaterial.depthTest=!1,this.setScene(e,t,i)}setScene(e,t,i){const{boundingBox:s,size:r,rotation:o,position:a}=this;if(this.isAnimated=e.animationNames.length>0,this.boundingBox.copy(e.boundingBox),this.size.copy(e.size),this.maxDimension=Math.max(r.x,r.y,r.z)*(this.isAnimated?jC:1),this.boundingBox.getCenter(a),i==="back"){const{min:l,max:c}=s;[l.y,l.z]=[l.z,l.y],[c.y,c.z]=[c.z,c.y],[r.y,r.z]=[r.z,r.y],o.x=Math.PI/2,o.y=Math.PI}else o.x=0,o.y=0;if(this.isAnimated){const l=s.min.y,c=s.max.y;r.y=this.maxDimension,s.expandByVector(r.subScalar(this.maxDimension).multiplyScalar(-.5)),s.min.y=l,s.max.y=c,r.set(this.maxDimension,c-l,this.maxDimension)}i==="bottom"?a.y=s.min.y:a.z=s.min.y,this.setSoftness(t)}setSoftness(e){this.softness=e;const{size:t,camera:i}=this,s=this.isAnimated?jC:1,r=s*Math.pow(2,MF-e*(MF-nce));this.setMapSize(r);const o=t.y/2,a=t.y*s;i.near=0,i.far=SF(a,o,e),this.depthMaterial.opacity=1/e,i.updateProjectionMatrix(),this.setIntensity(this.intensity),this.setOffset(0)}setMapSize(e){const{size:t}=this;this.isAnimated&&(e*=jC);const i=Math.floor(t.x>t.z?e:e*t.x/t.z),s=Math.floor(t.x>t.z?e*t.z/t.x:e),r=10,o=r+i,a=r+s;if(this.renderTarget!=null&&(this.renderTarget.width!==o||this.renderTarget.height!==a)&&(this.renderTarget.dispose(),this.renderTarget=null,this.renderTargetBlur.dispose(),this.renderTargetBlur=null),this.renderTarget==null){const l={format:dn};this.renderTarget=new Cs(o,a,l),this.renderTargetBlur=new Cs(o,a,l),this.floor.material.map=this.renderTarget.texture}this.camera.scale.set(t.x*(1+r/i),t.z*(1+r/s),1),this.needsUpdate=!0}setIntensity(e){this.intensity=e,e>0?(this.visible=!0,this.floor.visible=!0,this.floor.material.opacity=e*SF(ice,1,this.softness*this.softness)):(this.visible=!1,this.floor.visible=!1)}getIntensity(){return this.intensity}setOffset(e){this.floor.position.z=-e+this.gap()}gap(){return .001*this.maxDimension}render(e,t){t.overrideMaterial=this.depthMaterial;const i=e.getClearAlpha();e.setClearAlpha(0),this.floor.visible=!1;const s=e.xr.enabled;e.xr.enabled=!1;const r=e.getRenderTarget();e.setRenderTarget(this.renderTarget),e.render(t,this.camera),t.overrideMaterial=null,this.floor.visible=!0,this.blurShadow(e),e.xr.enabled=s,e.setRenderTarget(r),e.setClearAlpha(i)}blurShadow(e){const{camera:t,horizontalBlurMaterial:i,verticalBlurMaterial:s,renderTarget:r,renderTargetBlur:o,blurPlane:a}=this;a.visible=!0,a.material=i,i.uniforms.h.value=1/this.renderTarget.width,i.uniforms.tDiffuse.value=this.renderTarget.texture,e.setRenderTarget(o),e.render(a,t),a.material=s,s.uniforms.v.value=1/this.renderTarget.height,s.uniforms.tDiffuse.value=this.renderTargetBlur.texture,e.setRenderTarget(r),e.render(a,t),a.visible=!1}dispose(){this.renderTarget!=null&&this.renderTarget.dispose(),this.renderTargetBlur!=null&&this.renderTargetBlur.dispose(),this.depthMaterial.dispose(),this.horizontalBlurMaterial.dispose(),this.verticalBlurMaterial.dispose(),this.floor.material.dispose(),this.floor.geometry.dispose(),this.blurPlane.geometry.dispose(),this.removeFromParent()}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IF=10,WC=100,qC=new O,TF=new O,BF=new O,Ry=new HI,rce=new O,Hp=new me;class oce extends qo{constructor({canvas:e,element:t,width:i,height:s}){super(),this.annotationRenderer=new iae,this.effectRenderer=null,this.schemaElement=document.createElement("script"),this.width=1,this.height=1,this.aspect=1,this.scaleStep=0,this.renderCount=0,this.externalRenderer=null,this.appendedAnimations=[],this.markedAnimations=[],this.camera=new Fn(45,1,.1,100),this.xrCamera=null,this.url=null,this.pivot=new Rt,this.target=new Rt,this.animationNames=[],this.boundingBox=new Nn,this.boundingSphere=new ui,this.size=new O,this.idealAspect=0,this.framedFoVDeg=0,this.shadow=null,this.shadowIntensity=0,this.shadowSoftness=1,this.bakedShadows=new Set,this.exposure=1,this.toneMapping=lf,this.canScale=!0,this.isDirty=!1,this.goalTarget=new O,this.targetDamperX=new bs,this.targetDamperY=new bs,this.targetDamperZ=new bs,this._currentGLTF=null,this._model=null,this.cancelPendingSourceChange=null,this.animationsByName=new Map,this.currentAnimationAction=null,this.groundedSkybox=new Yle,this.name="ModelScene",this.element=t,this.canvas=e,this.camera=new Fn(45,1,.1,100),this.camera.name="MainCamera",this.add(this.pivot),this.pivot.name="Pivot",this.pivot.add(this.target),this.setSize(i,s),this.target.name="Target",this.mixer=new aG(this.target);const{domElement:r}=this.annotationRenderer,{style:o}=r;o.display="none",o.pointerEvents="none",o.position="absolute",o.top="0",this.element.shadowRoot.querySelector(".default").appendChild(r),this.schemaElement.setAttribute("type","application/ld+json")}get context(){return this.canvas.getContext("2d")}getCamera(){return this.xrCamera!=null?this.xrCamera:this.camera}queueRender(){this.isDirty=!0}shouldRender(){return this.isDirty}hasRendered(){this.isDirty=!1}forceRescale(){this.scaleStep=-1,this.queueRender()}async setObject(e){this.reset(),this._model=e,this.target.add(e),await this.setupScene()}async setSource(e,t=()=>{}){if(!e||e===this.url){t(1);return}if(this.reset(),this.url=e,this.externalRenderer!=null){const a=await this.externalRenderer.load(t);this.boundingSphere.radius=a.framedRadius,this.idealAspect=a.fieldOfViewAspect;return}this.cancelPendingSourceChange!=null&&(this.cancelPendingSourceChange(),this.cancelPendingSourceChange=null);let i;try{i=await new Promise(async(a,l)=>{this.cancelPendingSourceChange=()=>l();try{const c=await this.element[hn].loader.load(e,this.element,t);a(c)}catch(c){l(c)}})}catch(a){if(a==null)return;throw a}this.cancelPendingSourceChange=null,this.reset(),this.url=e,this._currentGLTF=i,i!=null&&(this._model=i.scene,this.target.add(i.scene));const{animations:s}=i,r=new Map,o=[];for(const a of s)r.set(a.name,a),o.push(a.name);this.animations=s,this.animationsByName=r,this.animationNames=o,await this.setupScene()}async setupScene(){this.applyTransform(),this.updateBoundingBox(),await this.updateFraming(),this.updateShadow(),this.setShadowIntensity(this.shadowIntensity),this.setGroundedSkybox()}reset(){this.url=null,this.renderCount=0,this.queueRender(),this.shadow!=null&&this.shadow.setIntensity(0),this.bakedShadows.clear();const{_model:e}=this;e!=null&&(e.removeFromParent(),this._model=null);const t=this._currentGLTF;t!=null&&(t.dispose(),this._currentGLTF=null),this.currentAnimationAction!=null&&(this.currentAnimationAction.stop(),this.currentAnimationAction=null),this.mixer.stopAllAction(),this.mixer.uncacheRoot(this)}dispose(){this.reset(),this.shadow!=null&&(this.shadow.dispose(),this.shadow=null),this.element[uv]=null,this.element[hv]=null,this.element[ru]=null}get currentGLTF(){return this._currentGLTF}setSize(e,t){if(!(this.width===e&&this.height===t)){if(this.width=Math.max(e,1),this.height=Math.max(t,1),this.annotationRenderer.setSize(e,t),this.aspect=this.width/this.height,this.externalRenderer!=null){const i=window.devicePixelRatio;this.externalRenderer.resize(e*i,t*i)}this.queueRender()}}markBakedShadow(e){e.userData.noHit=!0,this.bakedShadows.add(e)}unmarkBakedShadow(e){e.userData.noHit=!1,e.visible=!0,this.bakedShadows.delete(e),this.boundingBox.expandByObject(e)}findBakedShadows(e){const t=new Nn;e.traverse(i=>{const s=i;if(!s.material||!s.material.transparent)return;t.setFromObject(s);const o=t.getSize(rce),a=Math.min(o.x,o.y,o.z);Math.max(o.x,o.y,o.z)<WC*a||this.markBakedShadow(s)})}checkBakedShadows(){const{min:e,max:t}=this.boundingBox,i=new Nn;this.boundingBox.getSize(this.size);for(const s of this.bakedShadows)i.setFromObject(s),!(i.min.y<e.y+this.size.y/WC&&i.min.x<=e.x&&i.max.x>=t.x&&i.min.z<=e.z&&i.max.z>=t.z)&&(i.min.z<e.z+this.size.z/WC&&i.min.x<=e.x&&i.max.x>=t.x&&i.min.y<=e.y&&i.max.y>=t.y||this.unmarkBakedShadow(s))}applyTransform(){const{model:e}=this;if(e==null)return;const t=Pa(this.element.orientation)[0].terms,i=Go(t[0]).number,s=Go(t[1]).number,r=Go(t[2]).number;e.quaternion.setFromEuler(new Ss(s,r,i,"YXZ"));const o=Pa(this.element.scale)[0].terms;e.scale.set(o[0].number,o[1].number,o[2].number)}updateBoundingBox(){const{model:e}=this;if(e==null)return;this.target.remove(e),this.findBakedShadows(e);const t=(i,s)=>i.expandByPoint(s);this.setBakedShadowVisibility(!1),this.boundingBox=gy(e,t,new Nn),this.boundingBox.isEmpty()&&(this.setBakedShadowVisibility(!0),this.bakedShadows.forEach(i=>this.unmarkBakedShadow(i)),this.boundingBox=gy(e,t,new Nn)),this.checkBakedShadows(),this.setBakedShadowVisibility(),this.boundingBox.getSize(this.size),this.target.add(e)}async updateFraming(){const{model:e}=this;if(e==null)return;this.target.remove(e),this.setBakedShadowVisibility(!1);const{center:t}=this.boundingSphere;this.element.requestUpdate("cameraTarget"),await this.element.updateComplete,t.copy(this.getTarget());const i=(r,o)=>Math.max(r,t.distanceToSquared(o));this.boundingSphere.radius=Math.sqrt(gy(e,i,0));const s=(r,o)=>{o.sub(t);const a=Math.sqrt(o.x*o.x+o.z*o.z);return Math.max(r,a/(this.idealCameraDistance()-Math.abs(o.y)))};this.idealAspect=gy(e,s,0)/Math.tan(this.framedFoVDeg/2*Math.PI/180),this.setBakedShadowVisibility(),this.target.add(e)}setBakedShadowVisibility(e=this.shadowIntensity<=0){for(const t of this.bakedShadows)t.visible=e}idealCameraDistance(){const e=this.framedFoVDeg/2*Math.PI/180;return this.boundingSphere.radius/Math.sin(e)}adjustedFoV(e){const t=Math.tan(e/2*Math.PI/180)*Math.max(1,this.idealAspect/this.aspect);return 2*Math.atan(t)*180/Math.PI}getNDC(e,t){if(this.xrCamera!=null)Hp.set(e/window.screen.width,t/window.screen.height);else{const i=this.element.getBoundingClientRect();Hp.set((e-i.x)/this.width,(t-i.y)/this.height)}return Hp.multiplyScalar(2).subScalar(1),Hp.y*=-1,Hp}getSize(){return{width:this.width,height:this.height}}setEnvironmentAndSkybox(e,t){this.element[hn].arRenderer.presentedScene!==this&&(this.environment=e,this.setBackground(t),this.queueRender())}setBackground(e){this.groundedSkybox.map=e,this.groundedSkybox.isUsable()?(this.target.add(this.groundedSkybox),this.background=null):(this.target.remove(this.groundedSkybox),this.background=e)}farRadius(){return this.boundingSphere.radius*(this.groundedSkybox.parent!=null?IF:1)}setGroundedSkybox(){const e=Pa(this.element.skyboxHeight)[0].terms[0],t=Go(e).number,i=IF*this.boundingSphere.radius;this.groundedSkybox.updateGeometry(t,i),this.groundedSkybox.position.y=t-(this.shadow?2*this.shadow.gap():0),this.setBackground(this.groundedSkybox.map)}setTarget(e,t,i){this.goalTarget.set(-e,-t,-i)}setTargetDamperDecayTime(e){this.targetDamperX.setDecayTime(e),this.targetDamperY.setDecayTime(e),this.targetDamperZ.setDecayTime(e)}getTarget(){return this.goalTarget.clone().multiplyScalar(-1)}getDynamicTarget(){return this.target.position.clone().multiplyScalar(-1)}jumpToGoal(){this.updateTarget(Dz)}updateTarget(e){const t=this.goalTarget,i=this.target.position;if(t.equals(i))return!1;{const s=this.boundingSphere.radius/10;let{x:r,y:o,z:a}=i;return r=this.targetDamperX.update(r,t.x,e,s),o=this.targetDamperY.update(o,t.y,e,s),a=this.targetDamperZ.update(a,t.z,e,s),this.groundedSkybox.position.x=-r,this.groundedSkybox.position.z=-a,this.target.position.set(r,o,a),this.target.updateMatrixWorld(),this.queueRender(),!0}}pointTowards(e,t){const{x:i,z:s}=this.position;this.yaw=Math.atan2(e-i,t-s)}get model(){return this._model}set yaw(e){this.pivot.rotation.y=e,this.groundedSkybox.rotation.y=-e,this.queueRender()}get yaw(){return this.pivot.rotation.y}set animationTime(e){this.mixer.setTime(e),this.queueShadowRender()}get animationTime(){if(this.currentAnimationAction!=null){const e=Math.max(this.currentAnimationAction._loopCount,0);return this.currentAnimationAction.loop===eg&&(e&1)===1?this.duration-this.currentAnimationAction.time:this.currentAnimationAction.time}return 0}set animationTimeScale(e){this.mixer.timeScale=e}get animationTimeScale(){return this.mixer.timeScale}get duration(){return this.currentAnimationAction!=null&&this.currentAnimationAction.getClip()?this.currentAnimationAction.getClip().duration:0}get hasActiveAnimation(){return this.currentAnimationAction!=null}playAnimation(e=null,t=0,i=Mu,s=1/0){if(this._currentGLTF==null)return;const{animations:r}=this;if(r==null||r.length===0)return;let o=null;if(e!=null&&(o=this.animationsByName.get(e),o==null)){const a=parseInt(e);!isNaN(a)&&a>=0&&a<r.length&&(o=r[a])}o==null&&(o=r[0]);try{const{currentAnimationAction:a}=this,l=this.mixer.clipAction(o,this);l.timeScale!=this.element.timeScale&&(l.timeScale=this.element.timeScale),this.currentAnimationAction=l,this.element.paused?this.mixer.stopAllAction():(l.paused=!1,a!=null&&l!==a?l.crossFadeFrom(a,t,!1):this.animationTimeScale>0&&this.animationTime==this.duration&&(this.animationTime=0)),l.setLoop(i,s),l.enabled=!0,l.clampWhenFinished=!0,l.play()}catch(a){console.error(a)}}appendAnimation(e="",t=Mu,i=1/0,s=1,r=1,o=!1,a=!1,l=!0,c=null,u=!1){if(this._currentGLTF==null||e===this.element.animationName)return;const{animations:h}=this;if(h==null||h.length===0)return;let p=null;const m=1.25;if(e&&(p=this.animationsByName.get(e)),p!=null){typeof i=="string"?isNaN(i)?(i=1/0,console.warn("Invalid repetitionCount value, repetitionCount is set to Infinity")):i=Math.max(parseInt(i),1):typeof i=="number"&&i<1&&(i=1),i===1&&t!==ff&&(t=ff),typeof s=="string"&&(isNaN(s)?(s=1,console.warn("Invalid weight value, weight is set to 1")):s=parseFloat(s)),typeof r=="string"&&(isNaN(r)?(r=1,console.warn("Invalid timeScale value, timeScale is set to 1")):r=parseFloat(r)),typeof o=="string"&&(o.toLowerCase().trim()==="true"?o=!0:o.toLowerCase().trim()==="false"?o=!1:isNaN(o)?(o=!1,console.warn("Invalid fade value, fade is set to false")):o=parseFloat(o)),typeof a=="string"&&(a.toLowerCase().trim()==="true"?a=!0:a.toLowerCase().trim()==="false"?a=!1:isNaN(a)?(a=!1,console.warn("Invalid warp value, warp is set to false")):a=parseFloat(a)),typeof c=="string"&&(isNaN(c)||(c=parseFloat(c)));try{const g=this.mixer.existingAction(p)||this.mixer.clipAction(p,this),v=g.timeScale;u&&this.appendedAnimations.includes(e)&&(this.markedAnimations.map(y=>y.name).includes(e)||this.markedAnimations.push({name:e,loopMode:t,repetitionCount:i})),typeof c=="number"&&(g.time=Math.min(Math.max(c,0),p.duration)),typeof o=="boolean"&&o?g.fadeIn(m):typeof o=="number"?g.fadeIn(Math.max(o,0)):s>=0&&(g.weight=Math.min(Math.max(s,0),1)),typeof a=="boolean"&&a?g.warp(l?v:0,r,m):typeof a=="number"?g.warp(l?v:0,r,Math.max(a,0)):g.timeScale=r,g.isRunning()||(g.time==p.duration&&g.stop(),g.setLoop(t,i),g.paused=!1,g.enabled=!0,g.clampWhenFinished=!0,g.play()),this.appendedAnimations.includes(e)||this.element[Ee].appendedAnimations.push(e)}catch(g){console.error(g)}}}detachAnimation(e="",t=!0){if(this._currentGLTF==null||e===this.element.animationName)return;const{animations:i}=this;if(i==null||i.length===0)return;let s=null;const r=1.5;if(e&&(s=this.animationsByName.get(e)),s!=null){typeof t=="string"&&(t.toLowerCase().trim()==="true"?t=!0:t.toLowerCase().trim()==="false"?t=!1:isNaN(t)?(t=!0,console.warn("Invalid fade value, fade is set to true")):t=parseFloat(t));try{const o=this.mixer.existingAction(s)||this.mixer.clipAction(s,this);typeof t=="boolean"&&t?o.fadeOut(r):typeof t=="number"?o.fadeOut(Math.max(t,0)):o.stop();const a=this.element[Ee].appendedAnimations.filter(l=>l!==e);this.element[Ee].appendedAnimations=a}catch(o){console.error(o)}}}updateAnimationLoop(e="",t=Mu,i=1/0){if(this._currentGLTF==null||e===this.element.animationName)return;const{animations:s}=this;if(s==null||s.length===0)return;let r=null;if(e&&(r=this.animationsByName.get(e)),r!=null)try{const o=this.mixer.existingAction(r)||this.mixer.clipAction(r,this);o.stop(),o.setLoop(t,i),o.play()}catch(o){console.error(o)}}stopAnimation(){this.currentAnimationAction=null,this.mixer.stopAllAction()}updateAnimation(e){this.mixer.update(e),this.queueShadowRender()}subscribeMixerEvent(e,t){this.mixer.addEventListener(e,t)}updateShadow(){const e=this.shadow;if(e!=null){const t=this.element.arPlacement==="wall"?"back":"bottom";e.setScene(this,this.shadowSoftness,t),e.needsUpdate=!0}}renderShadow(e){const t=this.shadow;t!=null&&t.needsUpdate==!0&&(t.render(e,this),t.needsUpdate=!1)}queueShadowRender(){this.shadow!=null&&(this.shadow.needsUpdate=!0)}setShadowIntensity(e){if(this.shadowIntensity=e,this._currentGLTF!=null&&(this.setBakedShadowVisibility(),!(e<=0&&this.shadow==null))){if(this.shadow==null){const t=this.element.arPlacement==="wall"?"back":"bottom";this.shadow=new sce(this,this.shadowSoftness,t)}this.shadow.setIntensity(e)}}setShadowSoftness(e){this.shadowSoftness=e;const t=this.shadow;t!=null&&t.setSoftness(e)}setShadowOffset(e){const t=this.shadow;t!=null&&t.setOffset(e)}getHit(e=this){return Ry.intersectObject(e,!0).find(i=>i.object.visible&&!i.object.userData.noHit)}hitFromController(e,t=this){return Ry.setFromXRController(e),this.getHit(t)}hitFromPoint(e,t=this){return Ry.setFromCamera(e,this.getCamera()),this.getHit(t)}positionAndNormalFromPoint(e,t=this){var i;const s=this.hitFromPoint(e,t);if(s==null)return null;const r=s.point,o=s.face!=null?s.face.normal.clone().applyNormalMatrix(new bt().getNormalMatrix(s.object.matrixWorld)):Ry.ray.direction.clone().multiplyScalar(-1),a=(i=s.uv)!==null&&i!==void 0?i:null;return{position:r,normal:o,uv:a}}surfaceFromPoint(e,t=this){const i=this.element.model;if(i==null)return null;const s=this.hitFromPoint(e,t);if(s==null||s.face==null)return null;const r=i[tM](s),{meshes:o,primitives:a}=r.mesh.userData.associations,l=new O,c=new O,u=new O,{a:h,b:p,c:m}=s.face,g=s.object;g.getVertexPosition(h,l),g.getVertexPosition(p,c),g.getVertexPosition(m,u);const v=new ns(l,c,u),y=new O;return v.getBarycoord(g.worldToLocal(s.point),y),`${o} ${a} ${h} ${p} ${m} ${y.x.toFixed(3)} ${y.y.toFixed(3)} ${y.z.toFixed(3)}`}addHotspot(e){this.target.add(e),this.annotationRenderer.domElement.appendChild(e.element),this.updateSurfaceHotspot(e)}removeHotspot(e){this.target.remove(e)}forHotspots(e){const{children:t}=this.target;for(let i=0,s=t.length;i<s;i++){const r=t[i];r instanceof aQ&&e(r)}}updateSurfaceHotspot(e){if(e.surface==null||this.element.model==null)return;const t=Pa(e.surface)[0].terms;if(t.length!=8){console.warn(e.surface+" does not have exactly 8 numbers.");return}const i=this.element.model[oQ](t[0].number,t[1].number);if(i==null){console.warn(e.surface+" does not match a node/primitive in this glTF! Skipping this hotspot.");return}const s=i.mesh.geometry.attributes.position.count,r=new O(t[2].number,t[3].number,t[4].number);if(r.x>=s||r.y>=s||r.z>=s){console.warn(e.surface+" vertex indices out of range in this glTF! Skipping this hotspot.");return}const o=new O(t[5].number,t[6].number,t[7].number);e.mesh=i.mesh,e.tri=r,e.bary=o,e.updateSurface()}animateSurfaceHotspots(){this.element.paused||this.forHotspots(e=>{e.updateSurface()})}updateHotspotsVisibility(e){this.forHotspots(t=>{qC.copy(e),TF.setFromMatrixPosition(t.matrixWorld),qC.sub(TF),BF.copy(t.normal).transformDirection(this.target.matrixWorld),qC.dot(BF)<0?t.hide():t.show()})}orientHotspots(e){this.forHotspots(t=>{t.orient(e)})}setHotspotsVisibility(e){this.forHotspots(t=>{t.visible=e})}updateSchema(e){var t;const{schemaElement:i,element:s}=this,{alt:r,poster:o,iosSrc:a}=s;if(e!=null){const l=[{"@type":"MediaObject",contentUrl:e,encodingFormat:((t=e.split(".").pop())===null||t===void 0?void 0:t.toLowerCase())==="gltf"?"model/gltf+json":"model/gltf-binary"}];a&&l.push({"@type":"MediaObject",contentUrl:a,encodingFormat:"model/vnd.usdz+zip"});const c={"@context":"http://schema.org/","@type":"3DModel",image:o??void 0,name:r??void 0,encoding:l};i.textContent=JSON.stringify(c),document.head.appendChild(i)}else i.parentElement!=null&&i.parentElement.removeChild(i)}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ace extends EventTarget{constructor(){super(...arguments),this.ongoingActivities=new Set,this.totalProgress=0}get ongoingActivityCount(){return this.ongoingActivities.size}beginActivity(e){const t={progress:0,completed:!1};return this.ongoingActivities.add(t),this.ongoingActivityCount===1&&this.announceTotalProgress(t,0,e),i=>{let s;return s=Math.max(Oo(i,0,1),t.progress),s!==t.progress&&this.announceTotalProgress(t,s,e),t.progress}}announceTotalProgress(e,t,i){let s=0,r=0;t==1&&(e.completed=!0);for(const l of this.ongoingActivities){const{progress:c}=l;s+=1-c,l.completed&&r++}const o=e.progress;e.progress=t,this.totalProgress+=(t-o)*(1-this.totalProgress)/s;const a=r===this.ongoingActivityCount?1:this.totalProgress;this.dispatchEvent(new CustomEvent("progress",{detail:{totalProgress:a,reason:i}})),r===this.ongoingActivityCount&&(this.totalProgress=0,this.ongoingActivities.clear())}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qb=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},RF,DF,PF,LF,kF,FF,NF,OF,UF,GF,zF,QF,HF;const lce=10,cce=50,uce=0,hce=300,dce=150,Ul=document.createElement("canvas"),JC=Symbol("fallbackResizeHandler"),VF=Symbol("defaultAriaLabel"),Dy=Symbol("resizeObserver"),td=Symbol("clearModelTimeout"),XC=Symbol("onContextLost"),nd=Symbol("loaded"),KC=Symbol("status"),$C=Symbol("onFocus"),YC=Symbol("onBlur"),ud=Symbol("updateSize"),Py=Symbol("intersectionObserver"),ou=Symbol("isElementInViewport"),Tx=Symbol("announceModelVisibility"),Pd=Symbol("ariaLabel"),iM=Symbol("altDefaulted"),Vp=Symbol("statusElement"),Bx=Symbol("updateStatus"),cm=Symbol("loadedTime"),Yd=Symbol("updateSource"),jF=Symbol("markLoaded"),dv=Symbol("container"),ro=Symbol("input"),sM=Symbol("canvas"),Ee=Symbol("scene"),Ri=Symbol("needsRender"),Jo=Symbol("tick"),Xo=Symbol("onModelLoad"),Rx=Symbol("onResize"),hn=Symbol("renderer"),Xu=Symbol("progressTracker"),WF=Symbol("getLoaded"),Ku=Symbol("getModelIsVisible"),Cf=Symbol("shouldAttemptPreload"),Dl=n=>({x:n.x,y:n.y,z:n.z,toString(){return`${this.x}m ${this.y}m ${this.z}m`}}),rM=n=>({u:n.x,v:n.y,toString(){return`${this.u} ${this.v}`}});class Wg extends cu{static get is(){return"model-viewer"}static set modelCacheSize(e){vs[Cl].evictionThreshold=e}static get modelCacheSize(){return vs[Cl].evictionThreshold}static set minimumRenderScale(e){e>1&&console.warn("<model-viewer> minimumRenderScale has been clamped to a maximum value of 1."),e<=0&&console.warn("<model-viewer> minimumRenderScale has been clamped to a minimum value of 0.25."),uo.singleton.minScale=e}static get minimumRenderScale(){return uo.singleton.minScale}get loaded(){return this[WF]()}get[(RF=ou,DF=nd,PF=cm,LF=KC,kF=td,FF=JC,NF=Tx,OF=Dy,UF=Py,GF=Xu,hn)](){return uo.singleton}get modelIsVisible(){return this[Ku]()}constructor(){super(),this.alt=null,this.src=null,this.withCredentials=!1,this.generateSchema=!1,this[RF]=!1,this[DF]=!1,this[PF]=0,this[LF]="",this[kF]=null,this[FF]=IL(()=>{const s=this.getBoundingClientRect();this[ud](s)},cce),this[NF]=IL(s=>{const r=this.modelIsVisible;r!==s&&this.dispatchEvent(new CustomEvent("model-visibility",{detail:{visible:r}}))},uce),this[OF]=null,this[UF]=null,this[GF]=new ace,this[zF]=()=>{this[Vp].textContent=this[KC]},this[QF]=()=>{this[Vp].textContent=""},this[HF]=s=>{this.dispatchEvent(new CustomEvent("error",{detail:{type:"webglcontextlost",sourceError:s.sourceEvent}}))},this.attachShadow({mode:"open"});const e=this.shadowRoot;Yre(e),this[dv]=e.querySelector(".container"),this[ro]=e.querySelector(".userInput"),this[sM]=e.querySelector("canvas"),this[Vp]=e.querySelector("#status"),this[VF]=this[ro].getAttribute("aria-label");let t,i;if(this.isConnected){const s=this.getBoundingClientRect();t=s.width,i=s.height}else t=hce,i=dce;this[Ee]=new oce({canvas:this[sM],element:this,width:t,height:i}),Promise.resolve().then(()=>{this[ud](this.getBoundingClientRect())}),eC&&(this[Dy]=new ResizeObserver(s=>{if(!this[hn].isPresenting)for(let r of s)r.target===this&&this[ud](r.contentRect)})),tC?this[Py]=new IntersectionObserver(s=>{for(let r of s)if(r.target===this){const o=this.modelIsVisible;this[ou]=r.isIntersecting,this[Tx](o),this[ou]&&!this.loaded&&this[Yd]()}},{root:null,rootMargin:"0px",threshold:1e-5}):this[ou]=!0}connectedCallback(){super.connectedCallback&&super.connectedCallback(),eC?this[Dy].observe(this):self.addEventListener("resize",this[JC]),tC&&this[Py].observe(this),this.addEventListener("focus",this[$C]),this.addEventListener("blur",this[YC]);const e=this[hn];e.addEventListener("contextlost",this[XC]),e.registerScene(this[Ee]),this[td]!=null&&(self.clearTimeout(this[td]),this[td]=null,this.requestUpdate("src",null))}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),eC?this[Dy].unobserve(this):self.removeEventListener("resize",this[JC]),tC&&this[Py].unobserve(this),this.removeEventListener("focus",this[$C]),this.removeEventListener("blur",this[YC]);const e=this[hn];e.removeEventListener("contextlost",this[XC]),e.unregisterScene(this[Ee]),this[td]=self.setTimeout(()=>{this[Ee].dispose(),this[td]=null},lce)}updated(e){super.updated(e),e.has("src")&&(this.src==null?(this[nd]=!1,this[cm]=0,this[Ee].reset()):this.src!==this[Ee].url&&(this[nd]=!1,this[cm]=0,this[Yd]())),e.has("alt")&&this[ro].setAttribute("aria-label",this[Pd]),e.has("generateSchema")&&(this.generateSchema?this[Ee].updateSchema(this.src):this[Ee].updateSchema(null))}toDataURL(e,t){return this[hn].displayCanvas(this[Ee]).toDataURL(e,t)}async toBlob(e){const t=e?e.mimeType:void 0,i=e?e.qualityArgument:void 0,s=e?e.idealAspect:void 0,{width:r,height:o,idealAspect:a,aspect:l}=this[Ee],{dpr:c,scaleFactor:u}=this[hn];let h=r*u*c,p=o*u*c,m=0,g=0;if(s===!0)if(a>l){const v=p;p=Math.round(h/a),g=(v-p)/2}else{const v=h;h=Math.round(p*a),m=(v-h)/2}Ul.width=h,Ul.height=p;try{return new Promise(async(v,y)=>{Ul.getContext("2d").drawImage(this[hn].displayCanvas(this[Ee]),m,g,h,p,0,0,h,p),Ul.toBlob(A=>{if(!A)return y(new Error("Unable to retrieve canvas blob"));v(A)},t,i)})}finally{this[ud]({width:r,height:o})}}registerEffectComposer(e){e.setRenderer(this[hn].threeRenderer),e.setMainCamera(this[Ee].getCamera()),e.setMainScene(this[Ee]),this[Ee].effectRenderer=e}unregisterEffectComposer(){this[Ee].effectRenderer=null}registerRenderer(e){this[Ee].externalRenderer=e}unregisterRenderer(){this[Ee].externalRenderer=null}get[Pd](){return this[iM]}get[iM](){return this.alt==null||this.alt==="null"?this[VF]:this.alt}[WF](){return this[nd]}[Ku](){return this.loaded&&this[ou]}[Cf](){return!!this.src&&this[ou]}[ud]({width:e,height:t}){e===0||t===0||(this[dv].style.width=`${e}px`,this[dv].style.height=`${t}px`,this[Rx]({width:e,height:t}))}[Jo](e,t){var i;(i=this[Ee].effectRenderer)===null||i===void 0||i.beforeRender(e,t)}[jF](){this[nd]||(this[nd]=!0,this[cm]=performance.now())}[Ri](){this[Ee].queueRender()}[Xo](){}[Bx](e){this[KC]=e;const t=this.getRootNode();t!=null&&t.activeElement===this&&this[Vp].textContent!=e&&(this[Vp].textContent=e)}[(zF=$C,QF=YC,Rx)](e){this[Ee].setSize(e.width,e.height)}async[(HF=XC,Yd)](){const e=this[Ee];if(this.loaded||!this[Cf]()||this.src===e.url)return;this.generateSchema&&e.updateSchema(this.src),this[Bx]("Loading"),e.stopAnimation();const t=this[Xu].beginActivity("model-load"),i=this.src;try{const s=e.setSource(i,o=>t(Oo(o,0,1)*.95)),r=this[Cx]();await Promise.all([s,r]),this[jF](),this[Xo](),this.updateComplete.then(()=>{this.dispatchEvent(new CustomEvent("before-render"))}),await new Promise(o=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.dispatchEvent(new CustomEvent("load",{detail:{url:i}})),o()})})})}catch(s){this.dispatchEvent(new CustomEvent("error",{detail:{type:"loadfailure",sourceError:s}}))}finally{t(1)}}}Qb([At({type:String})],Wg.prototype,"alt",void 0);Qb([At({type:String})],Wg.prototype,"src",void 0);Qb([At({type:Boolean,attribute:"with-credentials"})],Wg.prototype,"withCredentials",void 0);Qb([At({type:Boolean,attribute:"generate-schema"})],Wg.prototype,"generateSchema",void 0);/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ZC=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const qF=1e3,Ly=Symbol("changeAnimation"),JF=Symbol("appendAnimation"),XF=Symbol("detachAnimation"),Zs=Symbol("paused"),fce={repetitions:1/0,pingpong:!1},pce={pingpong:!1,repetitions:null,weight:1,timeScale:1,fade:!1,warp:!1,relativeWarp:!0,time:null},mce={fade:!0},gce=n=>{var e;class t extends n{constructor(...s){super(s),this.autoplay=!1,this.animationName=void 0,this.animationCrossfadeDuration=300,this[e]=!0,this[Ee].subscribeMixerEvent("loop",r=>{const o=r.action._loopCount,a=r.action._clip.name,l=r.action._clip.uuid,c=this[Ee].markedAnimations.find(u=>u.name===a);if(c){this[Ee].updateAnimationLoop(c.name,c.loopMode,c.repetitionCount);const u=this[Ee].markedAnimations.filter(h=>h.name!==a);this[Ee].markedAnimations=u}this.dispatchEvent(new CustomEvent("loop",{detail:{count:o,name:a,uuid:l}}))}),this[Ee].subscribeMixerEvent("finished",r=>{if(!this[Ee].appendedAnimations.includes(r.action._clip.name))this[Zs]=!0;else{const o=this[Ee].appendedAnimations.filter(a=>a!==r.action._clip.name);this[Ee].appendedAnimations=o}this.dispatchEvent(new CustomEvent("finished"))})}get availableAnimations(){return this.loaded?this[Ee].animationNames:[]}get duration(){return this[Ee].duration}get paused(){return this[Zs]}get currentTime(){return this[Ee].animationTime}get appendedAnimations(){return this[Ee].appendedAnimations}set currentTime(s){this[Ee].animationTime=s,this[Ri]()}get timeScale(){return this[Ee].animationTimeScale}set timeScale(s){this[Ee].animationTimeScale=s}pause(){this[Zs]||(this[Zs]=!0,this.dispatchEvent(new CustomEvent("pause")))}play(s){this.availableAnimations.length>0&&(this[Zs]=!1,this[Ly](s),this.dispatchEvent(new CustomEvent("play")))}appendAnimation(s,r){this.availableAnimations.length>0&&(this[Zs]=!1,this[JF](s,r),this.dispatchEvent(new CustomEvent("append-animation")))}detachAnimation(s,r){this.availableAnimations.length>0&&(this[Zs]=!1,this[XF](s,r),this.dispatchEvent(new CustomEvent("detach-animation")))}[(e=Zs,Xo)](){super[Xo](),this[Zs]=!0,this.animationName!=null&&this[Ly](),this.autoplay&&this.play()}[Jo](s,r){super[Jo](s,r),!(this[Zs]||!this[Ku]()&&!this[hn].isPresenting)&&(this[Ee].updateAnimation(r/qF),this[Ri]())}updated(s){super.updated(s),s.has("autoplay")&&this.autoplay&&this.play(),s.has("animationName")&&this[Ly]()}[Ly](s=fce){var r;const o=(r=s.repetitions)!==null&&r!==void 0?r:1/0,a=s.pingpong?eg:o===1?ff:Mu;this[Ee].playAnimation(this.animationName,this.animationCrossfadeDuration/qF,a,o),this[Zs]&&(this[Ee].updateAnimation(0),this[Ri]())}[JF](s="",r=pce){var o;const a=(o=r.repetitions)!==null&&o!==void 0?o:1/0,l=r.pingpong?eg:a===1?ff:Mu,c=!!r.repetitions||"pingpong"in r;this[Ee].appendAnimation(s||this.animationName,l,a,r.weight,r.timeScale,r.fade,r.warp,r.relativeWarp,r.time,c),this[Zs]&&(this[Ee].updateAnimation(0),this[Ri]())}[XF](s="",r=mce){this[Ee].detachAnimation(s||this.animationName,r.fade),this[Zs]&&(this[Ee].updateAnimation(0),this[Ri]())}}return ZC([At({type:Boolean})],t.prototype,"autoplay",void 0),ZC([At({type:String,attribute:"animation-name"})],t.prototype,"animationName",void 0),ZC([At({type:Number,attribute:"animation-crossfade-duration"})],t.prototype,"animationCrossfadeDuration",void 0),t};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kc=Symbol("hotspotMap"),eS=Symbol("mutationCallback"),jp=Symbol("observer"),tS=Symbol("addHotspot"),KF=Symbol("removeHotspot"),nS=new tt,Ace=n=>{var e,t,i;class s extends n{constructor(){super(...arguments),this[e]=new Map,this[t]=o=>{o.forEach(a=>{(!(a instanceof MutationRecord)||a.type==="childList")&&(a.addedNodes.forEach(l=>{this[tS](l)}),a.removedNodes.forEach(l=>{this[KF](l)}),this[Ri]())})},this[i]=new MutationObserver(this[eS])}connectedCallback(){super.connectedCallback();for(let a=0;a<this.children.length;++a)this[tS](this.children[a]);const{ShadyDOM:o}=self;o==null?this[jp].observe(this,{childList:!0}):this[jp]=o.observeChildren(this,this[eS])}disconnectedCallback(){super.disconnectedCallback();const{ShadyDOM:o}=self;o==null?this[jp].disconnect():o.unobserveChildren(this[jp])}[(e=Kc,t=eS,i=jp,Xo)](){super[Xo]();const o=this[Ee];o.forHotspots(a=>{o.updateSurfaceHotspot(a)})}[Jo](o,a){super[Jo](o,a);const l=this[Ee],{annotationRenderer:c}=l,u=l.getCamera();l.shouldRender()&&(l.animateSurfaceHotspots(),l.updateHotspotsVisibility(u.position),c.domElement.style.display="",c.render(l,u))}updateHotspot(o){const a=this[Kc].get(o.name);a!=null&&(a.updatePosition(o.position),a.updateNormal(o.normal),a.surface=o.surface,this[Ee].updateSurfaceHotspot(a),this[Ri]())}queryHotspot(o){const a=this[Kc].get(o);if(a==null)return null;const l=Dl(a.position),c=Dl(a.normal),u=a.facingCamera,h=this[Ee],p=h.getCamera(),m=new O;m.setFromMatrixPosition(a.matrixWorld),m.project(p);const g=h.width/2,v=h.height/2;m.x=m.x*g+g,m.y=-(m.y*v)+v;const y=Dl(new O(m.x,m.y,m.z));return!Number.isFinite(y.x)||!Number.isFinite(y.y)?null:{position:l,normal:c,canvasPosition:y,facingCamera:u}}positionAndNormalFromPoint(o,a){const l=this[Ee],c=l.getNDC(o,a),u=l.positionAndNormalFromPoint(c);if(u==null)return null;nS.copy(l.target.matrixWorld).invert();const h=Dl(u.position.applyMatrix4(nS)),p=Dl(u.normal.transformDirection(nS));let m=null;return u.uv!=null&&(m=rM(u.uv)),{position:h,normal:p,uv:m}}surfaceFromPoint(o,a){const l=this[Ee],c=l.getNDC(o,a);return l.surfaceFromPoint(c)}[tS](o){if(!(o instanceof HTMLElement&&o.slot.indexOf("hotspot")===0))return;let a=this[Kc].get(o.slot);a!=null?a.increment():(a=new aQ({name:o.slot,position:o.dataset.position,normal:o.dataset.normal,surface:o.dataset.surface}),this[Kc].set(o.slot,a),this[Ee].addHotspot(a)),this[Ee].queueRender()}[KF](o){if(!(o instanceof HTMLElement))return;const a=this[Kc].get(o.slot);a&&(a.decrement()&&(this[Ee].removeHotspot(a),this[Kc].delete(o.slot)),this[Ee].queueRender())}}return s};/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.8.2
*/var Gi=Uint8Array,ar=Uint16Array,fT=Int32Array,pT=new Gi([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),mT=new Gi([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),$F=new Gi([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),lQ=function(n,e){for(var t=new ar(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var s=new fT(t[30]),i=1;i<30;++i)for(var r=t[i];r<t[i+1];++r)s[r]=r-t[i]<<5|i;return{b:t,r:s}},cQ=lQ(pT,2),yce=cQ.b,oM=cQ.r;yce[28]=258,oM[258]=28;var vce=lQ(mT,0),YF=vce.r,aM=new ar(32768);for(var En=0;En<32768;++En){var xl=(En&43690)>>1|(En&21845)<<1;xl=(xl&52428)>>2|(xl&13107)<<2,xl=(xl&61680)>>4|(xl&3855)<<4,aM[En]=((xl&65280)>>8|(xl&255)<<8)>>1}var Tm=function(n,e,t){for(var i=n.length,s=0,r=new ar(e);s<i;++s)n[s]&&++r[n[s]-1];var o=new ar(e);for(s=1;s<e;++s)o[s]=o[s-1]+r[s-1]<<1;var a;if(t){a=new ar(1<<e);var l=15-e;for(s=0;s<i;++s)if(n[s])for(var c=s<<4|n[s],u=e-n[s],h=o[n[s]-1]++<<u,p=h|(1<<u)-1;h<=p;++h)a[aM[h]>>l]=c}else for(a=new ar(i),s=0;s<i;++s)n[s]&&(a[s]=aM[o[n[s]-1]++]>>15-n[s]);return a},$u=new Gi(288);for(var En=0;En<144;++En)$u[En]=8;for(var En=144;En<256;++En)$u[En]=9;for(var En=256;En<280;++En)$u[En]=7;for(var En=280;En<288;++En)$u[En]=8;var Dx=new Gi(32);for(var En=0;En<32;++En)Dx[En]=5;var xce=Tm($u,9,0),bce=Tm(Dx,5,0),uQ=function(n){return(n+7)/8|0},hQ=function(n,e,t){return(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length),new Gi(n.subarray(e,t))},wce=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Hb=function(n,e,t){var i=new Error(e||wce[n]);if(i.code=n,Error.captureStackTrace&&Error.captureStackTrace(i,Hb),!t)throw i;return i},ya=function(n,e,t){t<<=e&7;var i=e/8|0;n[i]|=t,n[i+1]|=t>>8},Wp=function(n,e,t){t<<=e&7;var i=e/8|0;n[i]|=t,n[i+1]|=t>>8,n[i+2]|=t>>16},iS=function(n,e){for(var t=[],i=0;i<n.length;++i)n[i]&&t.push({s:i,f:n[i]});var s=t.length,r=t.slice();if(!s)return{t:fQ,l:0};if(s==1){var o=new Gi(t[0].s+1);return o[t[0].s]=1,{t:o,l:1}}t.sort(function(M,I){return M.f-I.f}),t.push({s:-1,f:25001});var a=t[0],l=t[1],c=0,u=1,h=2;for(t[0]={s:-1,f:a.f+l.f,l:a,r:l};u!=s-1;)a=t[t[c].f<t[h].f?c++:h++],l=t[c!=u&&t[c].f<t[h].f?c++:h++],t[u++]={s:-1,f:a.f+l.f,l:a,r:l};for(var p=r[0].s,i=1;i<s;++i)r[i].s>p&&(p=r[i].s);var m=new ar(p+1),g=lM(t[u-1],m,0);if(g>e){var i=0,v=0,y=g-e,A=1<<y;for(r.sort(function(I,D){return m[D.s]-m[I.s]||I.f-D.f});i<s;++i){var b=r[i].s;if(m[b]>e)v+=A-(1<<g-m[b]),m[b]=e;else break}for(v>>=y;v>0;){var w=r[i].s;m[w]<e?v-=1<<e-m[w]++-1:++i}for(;i>=0&&v;--i){var E=r[i].s;m[E]==e&&(--m[E],++v)}g=e}return{t:new Gi(m),l:g}},lM=function(n,e,t){return n.s==-1?Math.max(lM(n.l,e,t+1),lM(n.r,e,t+1)):e[n.s]=t},ZF=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new ar(++e),i=0,s=n[0],r=1,o=function(l){t[i++]=l},a=1;a<=e;++a)if(n[a]==s&&a!=e)++r;else{if(!s&&r>2){for(;r>138;r-=138)o(32754);r>2&&(o(r>10?r-11<<5|28690:r-3<<5|12305),r=0)}else if(r>3){for(o(s),--r;r>6;r-=6)o(8304);r>2&&(o(r-3<<5|8208),r=0)}for(;r--;)o(s);r=1,s=n[a]}return{c:t.subarray(0,i),n:e}},qp=function(n,e){for(var t=0,i=0;i<e.length;++i)t+=n[i]*e[i];return t},dQ=function(n,e,t){var i=t.length,s=uQ(e+2);n[s]=i&255,n[s+1]=i>>8,n[s+2]=n[s]^255,n[s+3]=n[s+1]^255;for(var r=0;r<i;++r)n[s+r+4]=t[r];return(s+4+i)*8},eN=function(n,e,t,i,s,r,o,a,l,c,u){ya(e,u++,t),++s[256];for(var h=iS(s,15),p=h.t,m=h.l,g=iS(r,15),v=g.t,y=g.l,A=ZF(p),b=A.c,w=A.n,E=ZF(v),M=E.c,I=E.n,D=new ar(19),B=0;B<b.length;++B)++D[b[B]&31];for(var B=0;B<M.length;++B)++D[M[B]&31];for(var R=iS(D,7),T=R.t,k=R.l,H=19;H>4&&!T[$F[H-1]];--H);var Q=c+5<<3,W=qp(s,$u)+qp(r,Dx)+o,X=qp(s,p)+qp(r,v)+o+14+3*H+qp(D,T)+2*D[16]+3*D[17]+7*D[18];if(l>=0&&Q<=W&&Q<=X)return dQ(e,u,n.subarray(l,l+c));var J,K,L,V;if(ya(e,u,1+(X<W)),u+=2,X<W){J=Tm(p,m,0),K=p,L=Tm(v,y,0),V=v;var j=Tm(T,k,0);ya(e,u,w-257),ya(e,u+5,I-1),ya(e,u+10,H-4),u+=14;for(var B=0;B<H;++B)ya(e,u+3*B,T[$F[B]]);u+=3*H;for(var $=[b,M],le=0;le<2;++le)for(var ve=$[le],B=0;B<ve.length;++B){var q=ve[B]&31;ya(e,u,j[q]),u+=T[q],q>15&&(ya(e,u,ve[B]>>5&127),u+=ve[B]>>12)}}else J=xce,K=$u,L=bce,V=Dx;for(var B=0;B<a;++B){var ae=i[B];if(ae>255){var q=ae>>18&31;Wp(e,u,J[q+257]),u+=K[q+257],q>7&&(ya(e,u,ae>>23&31),u+=pT[q]);var ge=ae&31;Wp(e,u,L[ge]),u+=V[ge],ge>3&&(Wp(e,u,ae>>5&8191),u+=mT[ge])}else Wp(e,u,J[ae]),u+=K[ae]}return Wp(e,u,J[256]),u+K[256]},Ece=new fT([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),fQ=new Gi(0),_ce=function(n,e,t,i,s,r){var o=r.z||n.length,a=new Gi(i+o+5*(1+Math.ceil(o/7e3))+s),l=a.subarray(i,a.length-s),c=r.l,u=(r.r||0)&7;if(e){u&&(l[0]=r.r>>3);for(var h=Ece[e-1],p=h>>13,m=h&8191,g=(1<<t)-1,v=r.p||new ar(32768),y=r.h||new ar(g+1),A=Math.ceil(t/3),b=2*A,w=function(G){return(n[G]^n[G+1]<<A^n[G+2]<<b)&g},E=new fT(25e3),M=new ar(288),I=new ar(32),D=0,B=0,R=r.i||0,T=0,k=r.w||0,H=0;R+2<o;++R){var Q=w(R),W=R&32767,X=y[Q];if(v[W]=X,y[Q]=W,k<=R){var J=o-R;if((D>7e3||T>24576)&&(J>423||!c)){u=eN(n,l,0,E,M,I,B,T,H,R-H,u),T=D=B=0,H=R;for(var K=0;K<286;++K)M[K]=0;for(var K=0;K<30;++K)I[K]=0}var L=2,V=0,j=m,$=W-X&32767;if(J>2&&Q==w(R-$))for(var le=Math.min(p,J)-1,ve=Math.min(32767,R),q=Math.min(258,J);$<=ve&&--j&&W!=X;){if(n[R+L]==n[R+L-$]){for(var ae=0;ae<q&&n[R+ae]==n[R+ae-$];++ae);if(ae>L){if(L=ae,V=$,ae>le)break;for(var ge=Math.min($,ae-2),se=0,K=0;K<ge;++K){var Fe=R-$+K&32767,qe=v[Fe],st=Fe-qe&32767;st>se&&(se=st,X=Fe)}}}W=X,X=v[W],$+=W-X&32767}if(V){E[T++]=268435456|oM[L]<<18|YF[V];var dt=oM[L]&31,Ae=YF[V]&31;B+=pT[dt]+mT[Ae],++M[257+dt],++I[Ae],k=R+L,++D}else E[T++]=n[R],++M[n[R]]}}for(R=Math.max(R,k);R<o;++R)E[T++]=n[R],++M[n[R]];u=eN(n,l,c,E,M,I,B,T,H,R-H,u),c||(r.r=u&7|l[u/8|0]<<3,u-=7,r.h=y,r.p=v,r.i=R,r.w=k)}else{for(var R=r.w||0;R<o+c;R+=65535){var be=R+65535;be>=o&&(l[u/8|0]=c,be=o),u=dQ(l,u+1,n.subarray(R,be))}r.i=o}return hQ(a,0,i+uQ(u)+s)},Cce=function(){for(var n=new Int32Array(256),e=0;e<256;++e){for(var t=e,i=9;--i;)t=(t&1&&-306674912)^t>>>1;n[e]=t}return n}(),Sce=function(){var n=-1;return{p:function(e){for(var t=n,i=0;i<e.length;++i)t=Cce[t&255^e[i]]^t>>>8;n=t},d:function(){return~n}}},Mce=function(n,e,t,i,s){if(!s&&(s={l:1},e.dictionary)){var r=e.dictionary.subarray(-32768),o=new Gi(r.length+n.length);o.set(r),o.set(n,r.length),n=o,s.w=r.length}return _ce(n,e.level==null?6:e.level,e.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,i,s)},pQ=function(n,e){var t={};for(var i in n)t[i]=n[i];for(var i in e)t[i]=e[i];return t},Oi=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8};function Ice(n,e){return Mce(n,e||{},0,0)}var mQ=function(n,e,t,i){for(var s in n){var r=n[s],o=e+s,a=i;Array.isArray(r)&&(a=pQ(i,r[1]),r=r[0]),r instanceof Gi?t[o]=[r,a]:(t[o+="/"]=[new Gi(0),a],mQ(r,o,t,i))}},tN=typeof TextEncoder<"u"&&new TextEncoder,Tce=typeof TextDecoder<"u"&&new TextDecoder,Bce=0;try{Tce.decode(fQ,{stream:!0}),Bce=1}catch{}function Px(n,e){if(e){for(var t=new Gi(n.length),i=0;i<n.length;++i)t[i]=n.charCodeAt(i);return t}if(tN)return tN.encode(n);for(var s=n.length,r=new Gi(n.length+(n.length>>1)),o=0,a=function(u){r[o++]=u},i=0;i<s;++i){if(o+5>r.length){var l=new Gi(o+8+(s-i<<1));l.set(r),r=l}var c=n.charCodeAt(i);c<128||e?a(c):c<2048?(a(192|c>>6),a(128|c&63)):c>55295&&c<57344?(c=65536+(c&1047552)|n.charCodeAt(++i)&1023,a(240|c>>18),a(128|c>>12&63),a(128|c>>6&63),a(128|c&63)):(a(224|c>>12),a(128|c>>6&63),a(128|c&63))}return hQ(r,0,o)}var cM=function(n){var e=0;if(n)for(var t in n){var i=n[t].length;i>65535&&Hb(9),e+=i+4}return e},nN=function(n,e,t,i,s,r,o,a){var l=i.length,c=t.extra,u=a&&a.length,h=cM(c);Oi(n,e,o!=null?33639248:67324752),e+=4,o!=null&&(n[e++]=20,n[e++]=t.os),n[e]=20,e+=2,n[e++]=t.flag<<1|(r<0&&8),n[e++]=s&&8,n[e++]=t.compression&255,n[e++]=t.compression>>8;var p=new Date(t.mtime==null?Date.now():t.mtime),m=p.getFullYear()-1980;if((m<0||m>119)&&Hb(10),Oi(n,e,m<<25|p.getMonth()+1<<21|p.getDate()<<16|p.getHours()<<11|p.getMinutes()<<5|p.getSeconds()>>1),e+=4,r!=-1&&(Oi(n,e,t.crc),Oi(n,e+4,r<0?-r-2:r),Oi(n,e+8,t.size)),Oi(n,e+12,l),Oi(n,e+14,h),e+=16,o!=null&&(Oi(n,e,u),Oi(n,e+6,t.attrs),Oi(n,e+10,o),e+=14),n.set(i,e),e+=l,h)for(var g in c){var v=c[g],y=v.length;Oi(n,e,+g),Oi(n,e+2,y),n.set(v,e+4),e+=4+y}return u&&(n.set(a,e),e+=u),e},Rce=function(n,e,t,i,s){Oi(n,e,101010256),Oi(n,e+8,t),Oi(n,e+10,t),Oi(n,e+12,i),Oi(n,e+16,s)};function Dce(n,e){e||(e={});var t={},i=[];mQ(n,"",t,e);var s=0,r=0;for(var o in t){var a=t[o],l=a[0],c=a[1],u=c.level==0?0:8,h=Px(o),p=h.length,m=c.comment,g=m&&Px(m),v=g&&g.length,y=cM(c.extra);p>65535&&Hb(11);var A=u?Ice(l,c):l,b=A.length,w=Sce();w.p(l),i.push(pQ(c,{size:l.length,crc:w.d(),c:A,f:h,m:g,u:p!=o.length||g&&m.length!=v,o:s,compression:u})),s+=30+p+y+b,r+=76+2*(p+y)+(v||0)+b}for(var E=new Gi(r+22),M=s,I=r-s,D=0;D<i.length;++D){var h=i[D];nN(E,h.o,h,h.f,h.u,h.c.length);var B=30+h.f.length+cM(h.extra);E.set(h.c,h.o+B),nN(E,s,h,h.f,h.u,h.c.length,h.o,h.m),s+=16+B+(h.m?h.m.length:0)}return Rce(E,s,i.length,I,M),E}class Pce{constructor(){this.textureUtils=null}setTextureUtils(e){this.textureUtils=e}parse(e,t,i,s){this.parseAsync(e,s).then(t).catch(i)}async parseAsync(e,t={}){t=Object.assign({ar:{anchoring:{type:"plane"},planeAnchoring:{alignment:"horizontal"}},includeAnchoringProperties:!0,quickLookCompatible:!1,maxTextureSize:1024},t);const i={},s="model.usda";i[s]=null;let r=gQ();r+=kce(t);const o={},a={};e.traverseVisible(c=>{if(c.isMesh){const u=c.geometry,h=c.material;if(h.isMeshStandardMaterial){const p="geometries/Geometry_"+u.id+".usda";if(!(p in i)){const m=Uce(u);i[p]=Nce(m)}h.uuid in o||(o[h.uuid]=h),r+=Oce(c,u,h)}else console.warn("THREE.USDZExporter: Unsupported material type (USDZ only supports MeshStandardMaterial)",c)}else c.isCamera&&(r+=Jce(c))}),r+=Fce(),r+=jce(o,a,t.quickLookCompatible),i[s]=Px(r),r=null;for(const c in a){let u=a[c];if(u.isCompressedTexture===!0){if(this.textureUtils===null)throw new Error("THREE.USDZExporter: setTextureUtils() must be called to process compressed textures.");u=await this.textureUtils.decompress(u)}const h=Lce(u.image,u.flipY,t.maxTextureSize),p=await new Promise(m=>h.toBlob(m,"image/png",1));i[`textures/Texture_${c}.png`]=new Uint8Array(await p.arrayBuffer())}let l=0;for(const c in i){const u=i[c],h=34+c.length;l+=h;const p=l&63;if(p!==4){const m=64-p,g=new Uint8Array(m);i[c]=[u,{extra:{12345:g}}]}l=u.length}return Dce(i,{level:0})}}function Lce(n,e,t){if(typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas||typeof ImageBitmap<"u"&&n instanceof ImageBitmap){const i=t/Math.max(n.width,n.height),s=document.createElement("canvas");s.width=n.width*Math.min(1,i),s.height=n.height*Math.min(1,i);const r=s.getContext("2d");return e===!0&&(r.translate(0,s.height),r.scale(1,-1)),r.drawImage(n,0,0,s.width,s.height),s}else throw new Error("THREE.USDZExporter: No valid image data found. Unable to process texture.")}const Zi=7;function gQ(){return`#usda 1.0
(
	customLayerData = {
		string creator = "Three.js USDZExporter"
	}
	defaultPrim = "Root"
	metersPerUnit = 1
	upAxis = "Y"
)

`}function kce(n){return`def Xform "Root"
{
	def Scope "Scenes" (
		kind = "sceneLibrary"
	)
	{
		def Xform "Scene" (
			customData = {
				bool preliminary_collidesWithEnvironment = 0
				string sceneName = "Scene"
			}
			sceneName = "Scene"
		)
		{${n.includeAnchoringProperties===!0?`
		token preliminary:anchoring:type = "${n.ar.anchoring.type}"
		token preliminary:planeAnchoring:alignment = "${n.ar.planeAnchoring.alignment}"
	`:""}
`}function Fce(){return`
		}
	}
}

`}function Nce(n){let e=gQ();return e+=n,Px(e)}function Oce(n,e,t){const i="Object_"+n.id,s=AQ(n.matrixWorld);return n.matrixWorld.determinant()<0&&console.warn("THREE.USDZExporter: USDZ does not support negative scales",n),`def Xform "${i}" (
	prepend references = @./geometries/Geometry_${e.id}.usda@</Geometry>
	prepend apiSchemas = ["MaterialBindingAPI"]
)
{
	matrix4d xformOp:transform = ${s}
	uniform token[] xformOpOrder = ["xformOp:transform"]

	rel material:binding = </Materials/Material_${t.id}>
}

`}function AQ(n){const e=n.elements;return`( ${ky(e,0)}, ${ky(e,4)}, ${ky(e,8)}, ${ky(e,12)} )`}function ky(n,e){return`(${n[e+0]}, ${n[e+1]}, ${n[e+2]}, ${n[e+3]})`}function Uce(n){return`
def "Geometry"
{
${Gce(n)}
}
`}function Gce(n){const e="Geometry",t=n.attributes,i=t.position.count;return`
	def Mesh "${e}"
	{
		int[] faceVertexCounts = [${zce(n)}]
		int[] faceVertexIndices = [${Qce(n)}]
		normal3f[] normals = [${uM(t.normal,i)}] (
			interpolation = "vertex"
		)
		point3f[] points = [${uM(t.position,i)}]
${Vce(t)}
		uniform token subdivisionScheme = "none"
	}
`}function zce(n){const e=n.index!==null?n.index.count:n.attributes.position.count;return Array(e/3).fill(3).join(", ")}function Qce(n){const e=n.index,t=[];if(e!==null)for(let i=0;i<e.count;i++)t.push(e.getX(i));else{const i=n.attributes.position.count;for(let s=0;s<i;s++)t.push(s)}return t.join(", ")}function uM(n,e){if(n===void 0)return console.warn("USDZExporter: Normals missing."),Array(e).fill("(0, 0, 0)").join(", ");const t=[];for(let i=0;i<n.count;i++){const s=n.getX(i),r=n.getY(i),o=n.getZ(i);t.push(`(${s.toPrecision(Zi)}, ${r.toPrecision(Zi)}, ${o.toPrecision(Zi)})`)}return t.join(", ")}function Hce(n){const e=[];for(let t=0;t<n.count;t++){const i=n.getX(t),s=n.getY(t);e.push(`(${i.toPrecision(Zi)}, ${1-s.toPrecision(Zi)})`)}return e.join(", ")}function Vce(n){let e="";for(let i=0;i<4;i++){const s=i>0?i:"",r=n["uv"+s];r!==void 0&&(e+=`
		texCoord2f[] primvars:st${s} = [${Hce(r)}] (
			interpolation = "vertex"
		)`)}const t=n.color;if(t!==void 0){const i=t.count;e+=`
	color3f[] primvars:displayColor = [${uM(t,i)}] (
		interpolation = "vertex"
		)`}return e}function jce(n,e,t=!1){const i=[];for(const s in n){const r=n[s];i.push(Wce(r,e,t))}return`def "Materials"
{
${i.join("")}
}

`}function Wce(n,e,t=!1){const i="			",s=[],r=[];function o(a,l,c){const u=a.source.id+"_"+a.flipY;e[u]=a;const h=a.channel>0?"st"+a.channel:"st",p={1e3:"repeat",1001:"clamp",1002:"mirror"},m=a.repeat.clone(),g=a.offset.clone(),v=a.rotation,y=Math.sin(v),A=Math.cos(v);return g.y=1-g.y-m.y,t?(g.x=g.x/m.x,g.y=g.y/m.y,g.x+=y/m.x,g.y+=A-1):(g.x+=y*m.x,g.y+=(1-A)*m.y),`
		def Shader "PrimvarReader_${l}"
		{
			uniform token info:id = "UsdPrimvarReader_float2"
			float2 inputs:fallback = (0.0, 0.0)
			token inputs:varname = "${h}"
			float2 outputs:result
		}

		def Shader "Transform2d_${l}"
		{
			uniform token info:id = "UsdTransform2d"
			token inputs:in.connect = </Materials/Material_${n.id}/PrimvarReader_${l}.outputs:result>
			float inputs:rotation = ${(v*(180/Math.PI)).toFixed(Zi)}
			float2 inputs:scale = ${sN(m)}
			float2 inputs:translation = ${sN(g)}
			float2 outputs:result
		}

		def Shader "Texture_${a.id}_${l}"
		{
			uniform token info:id = "UsdUVTexture"
			asset inputs:file = @textures/Texture_${u}.png@
			float2 inputs:st.connect = </Materials/Material_${n.id}/Transform2d_${l}.outputs:result>
			${c!==void 0?"float4 inputs:scale = "+qce(c):""}
			token inputs:sourceColorSpace = "${a.colorSpace===nr?"raw":"sRGB"}"
			token inputs:wrapS = "${p[a.wrapS]}"
			token inputs:wrapT = "${p[a.wrapT]}"
			float outputs:r
			float outputs:g
			float outputs:b
			float3 outputs:rgb
			${n.transparent||n.alphaTest>0?"float outputs:a":""}
		}`}return n.side===ci&&console.warn("THREE.USDZExporter: USDZ does not support double sided materials",n),n.map!==null?(s.push(`${i}color3f inputs:diffuseColor.connect = </Materials/Material_${n.id}/Texture_${n.map.id}_diffuse.outputs:rgb>`),n.transparent?s.push(`${i}float inputs:opacity.connect = </Materials/Material_${n.id}/Texture_${n.map.id}_diffuse.outputs:a>`):n.alphaTest>0&&(s.push(`${i}float inputs:opacity.connect = </Materials/Material_${n.id}/Texture_${n.map.id}_diffuse.outputs:a>`),s.push(`${i}float inputs:opacityThreshold = ${n.alphaTest}`)),r.push(o(n.map,"diffuse",n.color))):s.push(`${i}color3f inputs:diffuseColor = ${iN(n.color)}`),n.emissiveMap!==null?(s.push(`${i}color3f inputs:emissiveColor.connect = </Materials/Material_${n.id}/Texture_${n.emissiveMap.id}_emissive.outputs:rgb>`),r.push(o(n.emissiveMap,"emissive",new Me(n.emissive.r*n.emissiveIntensity,n.emissive.g*n.emissiveIntensity,n.emissive.b*n.emissiveIntensity)))):n.emissive.getHex()>0&&s.push(`${i}color3f inputs:emissiveColor = ${iN(n.emissive)}`),n.normalMap!==null&&(s.push(`${i}normal3f inputs:normal.connect = </Materials/Material_${n.id}/Texture_${n.normalMap.id}_normal.outputs:rgb>`),r.push(o(n.normalMap,"normal"))),n.aoMap!==null&&(s.push(`${i}float inputs:occlusion.connect = </Materials/Material_${n.id}/Texture_${n.aoMap.id}_occlusion.outputs:r>`),r.push(o(n.aoMap,"occlusion",new Me(n.aoMapIntensity,n.aoMapIntensity,n.aoMapIntensity)))),n.roughnessMap!==null?(s.push(`${i}float inputs:roughness.connect = </Materials/Material_${n.id}/Texture_${n.roughnessMap.id}_roughness.outputs:g>`),r.push(o(n.roughnessMap,"roughness",new Me(n.roughness,n.roughness,n.roughness)))):s.push(`${i}float inputs:roughness = ${n.roughness}`),n.metalnessMap!==null?(s.push(`${i}float inputs:metallic.connect = </Materials/Material_${n.id}/Texture_${n.metalnessMap.id}_metallic.outputs:b>`),r.push(o(n.metalnessMap,"metallic",new Me(n.metalness,n.metalness,n.metalness)))):s.push(`${i}float inputs:metallic = ${n.metalness}`),n.alphaMap!==null?(s.push(`${i}float inputs:opacity.connect = </Materials/Material_${n.id}/Texture_${n.alphaMap.id}_opacity.outputs:r>`),s.push(`${i}float inputs:opacityThreshold = 0.0001`),r.push(o(n.alphaMap,"opacity"))):s.push(`${i}float inputs:opacity = ${n.opacity}`),n.isMeshPhysicalMaterial&&(n.clearcoatMap!==null?(s.push(`${i}float inputs:clearcoat.connect = </Materials/Material_${n.id}/Texture_${n.clearcoatMap.id}_clearcoat.outputs:r>`),r.push(o(n.clearcoatMap,"clearcoat",new Me(n.clearcoat,n.clearcoat,n.clearcoat)))):s.push(`${i}float inputs:clearcoat = ${n.clearcoat}`),n.clearcoatRoughnessMap!==null?(s.push(`${i}float inputs:clearcoatRoughness.connect = </Materials/Material_${n.id}/Texture_${n.clearcoatRoughnessMap.id}_clearcoatRoughness.outputs:g>`),r.push(o(n.clearcoatRoughnessMap,"clearcoatRoughness",new Me(n.clearcoatRoughness,n.clearcoatRoughness,n.clearcoatRoughness)))):s.push(`${i}float inputs:clearcoatRoughness = ${n.clearcoatRoughness}`),s.push(`${i}float inputs:ior = ${n.ior}`)),`
	def Material "Material_${n.id}"
	{
		def Shader "PreviewSurface"
		{
			uniform token info:id = "UsdPreviewSurface"
${s.join(`
`)}
			int inputs:useSpecularWorkflow = 0
			token outputs:surface
		}

		token outputs:surface.connect = </Materials/Material_${n.id}/PreviewSurface.outputs:surface>

${r.join(`
`)}

	}
`}function iN(n){return`(${n.r}, ${n.g}, ${n.b})`}function qce(n){return`(${n.r}, ${n.g}, ${n.b}, 1.0)`}function sN(n){return`(${n.x}, ${n.y})`}function Jce(n){const e=n.name?n.name:"Camera_"+n.id,t=AQ(n.matrixWorld);return n.matrixWorld.determinant()<0&&console.warn("THREE.USDZExporter: USDZ does not support negative scales",n),n.isOrthographicCamera?`def Camera "${e}"
		{
			matrix4d xformOp:transform = ${t}
			uniform token[] xformOpOrder = ["xformOp:transform"]

			float2 clippingRange = (${n.near.toPrecision(Zi)}, ${n.far.toPrecision(Zi)})
			float horizontalAperture = ${((Math.abs(n.left)+Math.abs(n.right))*10).toPrecision(Zi)}
			float verticalAperture = ${((Math.abs(n.top)+Math.abs(n.bottom))*10).toPrecision(Zi)}
			token projection = "orthographic"
		}
	
	`:`def Camera "${e}"
		{
			matrix4d xformOp:transform = ${t}
			uniform token[] xformOpOrder = ["xformOp:transform"]

			float2 clippingRange = (${n.near.toPrecision(Zi)}, ${n.far.toPrecision(Zi)})
			float focalLength = ${n.getFocalLength().toPrecision(Zi)}
			float focusDistance = ${n.focus.toPrecision(Zi)}
			float horizontalAperture = ${n.getFilmWidth().toPrecision(Zi)}
			token projection = "perspective"
			float verticalAperture = ${n.getFilmHeight().toPrecision(Zi)}
		}
	
	`}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xce=n=>e=>{try{const t=Pa(e),i=(t.length?t[0].terms:[]).filter(s=>s&&s.type==="ident").map(s=>s.value).filter(s=>n.indexOf(s)>-1);return new Set(i)}catch{}return new Set};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $c=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};let rN=!1,oN=!1;const aN="#model-viewer-no-ar-fallback",Kce=Xce(["quick-look","scene-viewer","webxr","none"]),$ce="webxr scene-viewer quick-look",Mr={QUICK_LOOK:"quick-look",SCENE_VIEWER:"scene-viewer",WEBXR:"webxr",NONE:"none"},va=Symbol("arButtonContainer"),lN=Symbol("enterARWithWebXR"),cN=Symbol("openSceneViewer"),uN=Symbol("openIOSARQuickLook"),Yce=Symbol("canActivateAR"),Fy=Symbol("arMode"),sS=Symbol("arModes"),id=Symbol("arAnchor"),Ny=Symbol("preload"),Oy=Symbol("onARButtonContainerClick"),rS=Symbol("onARStatus"),oS=Symbol("onARTracking"),aS=Symbol("onARTap"),Jp=Symbol("selectARMode"),lS=Symbol("triggerLoad"),Zce=n=>{var e,t,i,s,r,o,a,l,c,u;class h extends n{constructor(){super(...arguments),this.ar=!1,this.arScale="auto",this.arUsdzMaxTextureSize="auto",this.arPlacement="floor",this.arModes=$ce,this.iosSrc=null,this.xrEnvironment=!1,this[e]=!1,this[t]=this.shadowRoot.querySelector(".ar-button"),this[i]=document.createElement("a"),this[s]=new Set,this[r]=Mr.NONE,this[o]=!1,this[a]=m=>{m.preventDefault(),this.activateAR()},this[l]=({status:m})=>{(m===Rl.NOT_PRESENTING||this[hn].arRenderer.presentedScene===this[Ee])&&(this.setAttribute("ar-status",m),this.dispatchEvent(new CustomEvent("ar-status",{detail:{status:m}})),m===Rl.NOT_PRESENTING?this.removeAttribute("ar-tracking"):m===Rl.SESSION_STARTED&&this.setAttribute("ar-tracking",Y1.TRACKING))},this[c]=({status:m})=>{this.setAttribute("ar-tracking",m),this.dispatchEvent(new CustomEvent("ar-tracking",{detail:{status:m}}))},this[u]=m=>{m.data=="_apple_ar_quicklook_button_tapped"&&this.dispatchEvent(new CustomEvent("quick-look-button-tapped"))}}get canActivateAR(){return this[Fy]!==Mr.NONE}connectedCallback(){super.connectedCallback(),this[hn].arRenderer.addEventListener("status",this[rS]),this.setAttribute("ar-status",Rl.NOT_PRESENTING),this[hn].arRenderer.addEventListener("tracking",this[oS]),this[id].addEventListener("message",this[aS])}disconnectedCallback(){super.disconnectedCallback(),this[hn].arRenderer.removeEventListener("status",this[rS]),this[hn].arRenderer.removeEventListener("tracking",this[oS]),this[id].removeEventListener("message",this[aS])}update(m){super.update(m),m.has("arScale")&&(this[Ee].canScale=this.arScale!=="fixed"),m.has("arPlacement")&&(this[Ee].updateShadow(),this[Ri]()),m.has("arModes")&&(this[sS]=Kce(this.arModes)),(m.has("ar")||m.has("arModes")||m.has("src")||m.has("iosSrc")||m.has("arUsdzMaxTextureSize"))&&this[Jp]()}async activateAR(){switch(this[Fy]){case Mr.QUICK_LOOK:await this[uN]();break;case Mr.WEBXR:await this[lN]();break;case Mr.SCENE_VIEWER:this[cN]();break;default:console.warn("No AR Mode can be activated. This is probably due to missing configuration or device capabilities");break}}async[(e=Yce,t=va,i=id,s=sS,r=Fy,o=Ny,a=Oy,l=rS,c=oS,u=aS,Jp)](){var m;let g=Mr.NONE;if(this.ar){if(this.src!=null)for(const v of this[sS]){if(v==="webxr"&&hz&&!rN&&await this[hn].arRenderer.supportsPresentation()){g=Mr.WEBXR;break}if(v==="scene-viewer"&&!oN&&(Nre||navigator.userAgentData&&navigator.userAgentData.getHighEntropyValues&&(!((m=(await navigator.userAgentData.getHighEntropyValues(["formFactor"])).formFactor)===null||m===void 0)&&m.includes("XR")))){g=Mr.SCENE_VIEWER;break}if(v==="quick-look"&&SL){g=Mr.QUICK_LOOK;break}}g===Mr.NONE&&this.iosSrc!=null&&SL&&(g=Mr.QUICK_LOOK)}if(g!==Mr.NONE)this[va].classList.add("enabled"),this[va].addEventListener("click",this[Oy]);else if(this[va].classList.contains("enabled")){this[va].removeEventListener("click",this[Oy]),this[va].classList.remove("enabled");const v=Rl.FAILED;this.setAttribute("ar-status",v),this.dispatchEvent(new CustomEvent("ar-status",{detail:{status:v}}))}this[Fy]=g}async[lN](){console.log("Attempting to present in AR with WebXR..."),await this[lS]();try{this[va].removeEventListener("click",this[Oy]);const{arRenderer:m}=this[hn];m.placeOnWall=this.arPlacement==="wall",await m.present(this[Ee],this.xrEnvironment)}catch(m){console.warn("Error while trying to present in AR with WebXR"),console.error(m),await this[hn].arRenderer.stopPresenting(),rN=!0,console.warn("Falling back to next ar-mode"),await this[Jp](),this.activateAR()}finally{this[Jp]()}}async[lS](){this.loaded||(this[Ny]=!0,this[Yd](),await Qre(this,"load"),this[Ny]=!1)}[Cf](){return super[Cf]()||this[Ny]}[cN](){const m=self.location.toString(),g=new URL(m),v=new URL(this.src,m);v.hash&&(v.hash="");const y=new URLSearchParams(v.search);if(g.hash=aN,y.set("mode","ar_preferred"),y.has("disable_occlusion")||y.set("disable_occlusion","true"),this.arScale==="fixed"&&y.set("resizable","false"),this.arPlacement==="wall"&&y.set("enable_vertical_placement","true"),y.has("sound")){const w=new URL(y.get("sound"),m);y.set("sound",w.toString())}if(y.has("link")){const w=new URL(y.get("link"),m);y.set("link",w.toString())}const A=`intent://arvr.google.com/scene-viewer/1.2?${y.toString()+"&file="+encodeURIComponent(v.toString())}#Intent;scheme=https;package=com.google.android.googlequicksearchbox;action=android.intent.action.VIEW;S.browser_fallback_url=${encodeURIComponent(g.toString())};end;`,b=()=>{self.location.hash===aN&&(oN=!0,self.history.back(),console.warn("Error while trying to present in AR with Scene Viewer"),console.warn("Falling back to next ar-mode"),this[Jp]())};self.addEventListener("hashchange",b,{once:!0}),this[id].setAttribute("href",A),console.log("Attempting to present in AR with Scene Viewer..."),this[id].click()}async[uN](){const m=!this.iosSrc;this[va].classList.remove("enabled");const g=m?await this.prepareUSDZ():this.iosSrc,v=new URL(g,self.location.toString());if(m){const b=self.location.toString(),w=new URL(b),E=new URL(this.src,w);E.hash&&(v.hash=E.hash)}this.arScale==="fixed"&&(v.hash&&(v.hash+="&"),v.hash+="allowsContentScaling=0");const y=this[id];y.setAttribute("rel","ar");const A=document.createElement("img");y.appendChild(A),y.setAttribute("href",v.toString()),m&&y.setAttribute("download","model.usdz"),y.style.display="none",y.isConnected||this.shadowRoot.appendChild(y),console.log("Attempting to present in AR with Quick Look..."),y.click(),y.removeChild(A),m&&URL.revokeObjectURL(g),this[va].classList.add("enabled")}async prepareUSDZ(){const m=this[Xu].beginActivity("usdz-conversion");await this[lS]();const{model:g,shadow:v,target:y}=this[Ee];if(g==null)return"";let A=!1;v!=null&&(A=v.visible,v.visible=!1),m(.2);const b=new Pce;y.remove(g),g.position.copy(y.position),g.updateWorldMatrix(!1,!0);const w=await b.parseAsync(g,{maxTextureSize:isNaN(this.arUsdzMaxTextureSize)?1/0:Math.max(parseInt(this.arUsdzMaxTextureSize),16)});g.position.set(0,0,0),y.add(g);const E=new Blob([w],{type:"model/vnd.usdz+zip"}),M=URL.createObjectURL(E);return m(1),v!=null&&(v.visible=A),M}}return $c([At({type:Boolean,attribute:"ar"})],h.prototype,"ar",void 0),$c([At({type:String,attribute:"ar-scale"})],h.prototype,"arScale",void 0),$c([At({type:String,attribute:"ar-usdz-max-texture-size"})],h.prototype,"arUsdzMaxTextureSize",void 0),$c([At({type:String,attribute:"ar-placement"})],h.prototype,"arPlacement",void 0),$c([At({type:String,attribute:"ar-modes"})],h.prototype,"arModes",void 0),$c([At({type:String,attribute:"ios-src"})],h.prototype,"iosSrc",void 0),$c([At({type:Boolean,attribute:"xr-environment"})],h.prototype,"xrEnvironment",void 0),h};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cS=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const eue=100,tue="https://www.gstatic.com/draco/versioned/decoders/1.5.6/",nue="https://www.gstatic.com/basis-universal/versioned/2021-04-15-ba1c3e4/",iue="https://cdn.jsdelivr.net/npm/three@0.149.0/examples/jsm/loaders/LottieLoader.js",uS={AUTO:"auto",MANUAL:"manual"},hN={AUTO:"auto",LAZY:"lazy",EAGER:"eager"},sd=Symbol("defaultProgressBarElement"),hS=Symbol("posterContainerElement"),rd=Symbol("defaultPosterElement"),Xp=Symbol("shouldDismissPoster"),dS=Symbol("hidePoster"),Uy=Symbol("modelIsRevealed"),fS=Symbol("updateProgressBar"),sue=Symbol("ariaLabelCallToAction"),pS=Symbol("onProgress"),rue=n=>{var e,t,i,s,r,o,a,l;class c extends n{static set dracoDecoderLocation(h){vs.setDRACODecoderLocation(h)}static get dracoDecoderLocation(){return vs.getDRACODecoderLocation()}static set ktx2TranscoderLocation(h){vs.setKTX2TranscoderLocation(h)}static get ktx2TranscoderLocation(){return vs.getKTX2TranscoderLocation()}static set meshoptDecoderLocation(h){vs.setMeshoptDecoderLocation(h)}static get meshoptDecoderLocation(){return vs.getMeshoptDecoderLocation()}static set lottieLoaderLocation(h){uo.singleton.textureUtils.lottieLoaderUrl=h}static get lottieLoaderLocation(){return uo.singleton.textureUtils.lottieLoaderUrl}static mapURLs(h){uo.singleton.loader[nu].manager.setURLModifier(h)}dismissPoster(){this.loaded?this[dS]():(this[Xp]=!0,this[Yd]())}showPoster(){const h=this[hS];if(h.classList.contains("show"))return;h.classList.add("show"),this[ro].classList.remove("show");const p=this[rd];p.removeAttribute("tabindex"),p.removeAttribute("aria-hidden");const m=this.modelIsVisible;this[Uy]=!1,this[Tx](m)}getDimensions(){return Dl(this[Ee].size)}getBoundingBoxCenter(){return Dl(this[Ee].boundingBox.getCenter(new O))}constructor(...h){super(...h),this.poster=null,this.reveal=uS.AUTO,this.loading=hN.AUTO,this[e]=!1,this[t]=!1,this[i]=this.shadowRoot.querySelector(".slot.poster"),this[s]=this.shadowRoot.querySelector("#default-poster"),this[r]=this.shadowRoot.querySelector("#default-progress-bar > .bar"),this[o]=this[rd].getAttribute("aria-label"),this[a]=Gre(y=>{const A=this[sd].parentNode;requestAnimationFrame(()=>{this[sd].style.transform=`scaleX(${y})`,y===0&&(A.removeChild(this[sd]),A.appendChild(this[sd])),this[sd].classList.toggle("hide",y===1)})},eue),this[l]=y=>{const A=y.detail.totalProgress,b=y.detail.reason;A===1&&(this[fS].flush(),this.loaded&&(this[Xp]||this.reveal===uS.AUTO)&&this[dS]()),this[fS](A),this.dispatchEvent(new CustomEvent("progress",{detail:{totalProgress:A,reason:b}}))};const p=self.ModelViewerElement||{},m=p.dracoDecoderLocation||tue;vs.setDRACODecoderLocation(m);const g=p.ktx2TranscoderLocation||nue;vs.setKTX2TranscoderLocation(g),p.meshoptDecoderLocation&&vs.setMeshoptDecoderLocation(p.meshoptDecoderLocation);const v=p.lottieLoaderLocation||iue;uo.singleton.textureUtils.lottieLoaderUrl=v}connectedCallback(){super.connectedCallback(),this.loaded||this.showPoster(),this[Xu].addEventListener("progress",this[pS])}disconnectedCallback(){super.disconnectedCallback(),this[Xu].removeEventListener("progress",this[pS])}async updated(h){super.updated(h),h.has("poster")&&this.poster!=null&&(this[rd].style.backgroundImage=`url(${this.poster})`),h.has("alt")&&this[rd].setAttribute("aria-label",this[iM]),(h.has("reveal")||h.has("loading"))&&this[Yd]()}[(e=Uy,t=Xp,i=hS,s=rd,r=sd,o=sue,a=fS,l=pS,Cf)](){return!!this.src&&(this[Xp]||this.loading===hN.EAGER||this.reveal===uS.AUTO&&this[ou])}[dS](){this[Xp]=!1;const h=this[hS];if(!h.classList.contains("show"))return;h.classList.remove("show"),this[ro].classList.add("show");const p=this.modelIsVisible;this[Uy]=!0,this[Tx](p);const m=this.getRootNode();m&&m.activeElement===this&&this[ro].focus();const g=this[rd];g.setAttribute("aria-hidden","true"),g.tabIndex=-1,this.dispatchEvent(new CustomEvent("poster-dismissed"))}[Ku](){return super[Ku]()&&this[Uy]}}return cS([At({type:String})],c.prototype,"poster",void 0),cS([At({type:String})],c.prototype,"reveal",void 0),cS([At({type:String})],c.prototype,"loading",void 0),c};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mS=globalThis&&globalThis.__decorate||function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const oue=Math.PI/32,aue=3e3,lue={basis:[zb(os(oue,"rad"))],keywords:{auto:[null]}},od=Symbol("autoRotateStartTime"),gS=Symbol("radiansPerSecond"),dN=Symbol("syncRotationRate"),AS=Symbol("onCameraChange"),cue=n=>{var e,t,i;class s extends n{constructor(){super(...arguments),this.autoRotate=!1,this.autoRotateDelay=aue,this.rotationPerSecond="auto",this[e]=performance.now(),this[t]=0,this[i]=o=>{this.autoRotate&&o.detail.source==="user-interaction"&&(this[od]=performance.now())}}connectedCallback(){super.connectedCallback(),this.addEventListener("camera-change",this[AS]),this[od]=performance.now()}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("camera-change",this[AS]),this[od]=performance.now()}updated(o){super.updated(o),o.has("autoRotate")&&(this[od]=performance.now())}[(e=od,t=gS,dN)](o){this[gS]=o[0]}[Jo](o,a){if(super[Jo](o,a),!this.autoRotate||!this[Ku]()||this[hn].isPresenting)return;const l=Math.min(a,o-this[od]-this.autoRotateDelay);l>0&&(this[Ee].yaw=this.turntableRotation+this[gS]*l*.001)}get turntableRotation(){return this[Ee].yaw}resetTurntableRotation(o=0){this[Ee].yaw=o}}return i=AS,mS([At({type:Boolean,attribute:"auto-rotate"})],s.prototype,"autoRotate",void 0),mS([At({type:Number,attribute:"auto-rotate-delay"})],s.prototype,"autoRotateDelay",void 0),mS([bl({intrinsics:lue,updateHandler:dN}),At({type:String,attribute:"rotation-per-second"})],s.prototype,"rotationPerSecond",void 0),s};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uue=Ace($le(cue(qre(ule(Zce(rue(gce(Wg))))))));customElements.define("model-viewer",uue);yS.createRoot(document.getElementById("root")).render(C.jsx(ba.StrictMode,{children:C.jsx(hre,{})}));
